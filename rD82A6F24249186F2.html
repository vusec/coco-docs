<!DOCTYPE html><html><head><meta charset="utf-8"></meta><meta content="width=device-width, initial-scale=1" name="viewport"></meta><title>class IndexedInstrProfReader: LLVM 10.0.0 documentation</title><link href="styles.css" rel="stylesheet"></link><script src="highlight.min.js"></script><script>hljs.highlightAll();</script><link href="katex.min.css" rel="stylesheet"></link><script src="katex.min.js"></script><script src="auto-render.min.js"></script><script>
    document.addEventListener("DOMContentLoaded", function() {
      renderMathInElement(document.body, {
        delimiters: [
          {left: '$$', right: '$$', display: true},
          {left: '$', right: '$', display: false},
        ],
      });
    });
  </script><link href="apple-touch-icon.png" sizes="180x180" rel="apple-touch-icon"></link><link href="favicon-32x32.png" sizes="32x32" type="image/png" rel="icon"></link><link href="favicon-16x16.png" sizes="16x16" type="image/png" rel="icon"></link></head><body><div id="wrapper"><section class="section"><div class="container"><div class="columns"><aside class="column is-one-fifth"><ul class="menu-list"><p class="is-size-4">LLVM 10.0.0</p><p class="menu-label">Navigation</p><li><a href="index.html">Home</a></li><li><a href="search.html">Search</a></li><li><a href="https://github.com/llvm/llvm-project/">Repository</a></li><li><a href="https://hdoc.io">Made with hdoc</a></li><p class="menu-label">API Documentation</p><li><a href="functions.html">Functions</a></li><li><a href="records.html">Records</a></li><li><a href="enums.html">Enums</a></li><li><a href="namespaces.html">Namespaces</a></li></ul></aside><div class="column" style="overflow-x: auto"><nav class="breadcrumb has-arrow-separator" aria-label="breadcrumbs"><ul><li><a href="namespaces.html#00A4DA910CC17C2D"><span>namespace llvm</span></a></li><li class="is-active"><a aria-current="pageD82A6F24249186F2"><span>class IndexedInstrProfReader</span></a></li></ul></nav><main class="content"><h1>class IndexedInstrProfReader</h1><h2>Declaration</h2><pre class="p-0"><code class="hdoc-record-code language-cpp">class IndexedInstrProfReader : public InstrProfReader { /* full declaration omitted */ };</code></pre><h2>Description</h2><p>Reader for the indexed binary instrprof format.</p><p>Declared at: <a class="is-family-code" href="https://github.com/llvm/llvm-project/blob/release/10.x/llvm/include/llvm/ProfileData/InstrProfReader.h#L426">llvm/include/llvm/ProfileData/InstrProfReader.h:426</a></p><p>Inherits from: <a href="r2F83DE79DD137DC2.html">InstrProfReader</a></p><h2>Member Variables</h2><p>Inherited from <a href="r2F83DE79DD137DC2.html">InstrProfReader</a>:</p><dl><dt class="is-family-code"><a href="r2F83DE79DD137DC2.html#var_Symtab">protected <b>Symtab</b></a></dt></dl><h2>Method Overview</h2><ul><li class="is-family-code">public  <a href="#26F7083AB57D9431"><b>IndexedInstrProfReader</b></a>(std::unique_ptr&lt;MemoryBuffer&gt; DataBuffer, std::unique_ptr&lt;MemoryBuffer&gt; RemappingBuffer = nullptr)</li><li class="is-family-code">public  <a href="#8632C72FABFA5BFB"><b>IndexedInstrProfReader</b></a>(const llvm::IndexedInstrProfReader &amp;)</li><li class="is-family-code">public static Expected&lt;std::unique_ptr&lt;IndexedInstrProfReader&gt;&gt;  <a href="#18AAEFC71FE28FB6"><b>create</b></a>(const llvm::Twine &amp; Path, const llvm::Twine &amp; RemappingPath = &quot;&quot;)</li><li class="is-family-code">public static Expected&lt;std::unique_ptr&lt;IndexedInstrProfReader&gt;&gt;  <a href="#3823899E14ED593A"><b>create</b></a>(std::unique_ptr&lt;MemoryBuffer&gt; Buffer, std::unique_ptr&lt;MemoryBuffer&gt; RemappingBuffer = nullptr)</li><li class="is-family-code">public llvm::Error  <a href="#3C5EEF47FF5B7B31"><b>getFunctionCounts</b></a>(llvm::StringRef FuncName, uint64_t FuncHash, std::vector&lt;uint64_t&gt; &amp; Counts)</li><li class="is-family-code">public Expected&lt;llvm::InstrProfRecord&gt;  <a href="#45D828F0262E9203"><b>getInstrProfRecord</b></a>(llvm::StringRef FuncName, uint64_t FuncHash)</li><li class="is-family-code">public uint64_t  <a href="#C73794C9406F9C7B"><b>getMaximumFunctionCount</b></a>(bool UseCS)</li><li class="is-family-code">public llvm::ProfileSummary &amp;  <a href="#CE8D199F33F39D39"><b>getSummary</b></a>(bool UseCS)</li><li class="is-family-code">public llvm::InstrProfSymtab &amp;  <a href="#10F9CC710B88695A"><b>getSymtab</b></a>()</li><li class="is-family-code">public uint64_t  <a href="#BD56E7860B1C64C6"><b>getVersion</b></a>() const</li><li class="is-family-code">public bool  <a href="#4D1F0345B330FCB3"><b>hasCSIRLevelProfile</b></a>() const</li><li class="is-family-code">public static bool  <a href="#5A69B1BBE0A7D050"><b>hasFormat</b></a>(const llvm::MemoryBuffer &amp; DataBuffer)</li><li class="is-family-code">public bool  <a href="#F9C10A08EDCFC217"><b>isIRLevelProfile</b></a>() const</li><li class="is-family-code">public llvm::Error  <a href="#AE81F76E6A307429"><b>readHeader</b></a>()</li><li class="is-family-code">public llvm::Error  <a href="#151305E3228E27F7"><b>readNextRecord</b></a>(llvm::NamedInstrProfRecord &amp; Record)</li><li class="is-family-code">public void  <a href="#74A0E00CD4848C11"><b>setValueProfDataEndianness</b></a>(support::endianness Endianness)</li></ul><p>Inherited from <a href="r2F83DE79DD137DC2.html">InstrProfReader</a>:</p><ul><li class="is-family-code"><a href="r2F83DE79DD137DC2.html#3DB674E16441154D">public <b>accumulateCounts</b></a></li><li class="is-family-code"><a href="r2F83DE79DD137DC2.html#AFB730E7629133D9">public <b>begin</b></a></li><li class="is-family-code"><a href="r2F83DE79DD137DC2.html#5AA3366390CDC983">public <b>create</b></a></li><li class="is-family-code"><a href="r2F83DE79DD137DC2.html#66A6F8101EC65824">public <b>create</b></a></li><li class="is-family-code"><a href="r2F83DE79DD137DC2.html#D1E2363EF87CF37D">public <b>end</b></a></li><li class="is-family-code"><a href="r2F83DE79DD137DC2.html#4D45053FAC81622A">protected <b>error</b></a></li><li class="is-family-code"><a href="r2F83DE79DD137DC2.html#C05C3165C6C9621B">protected <b>error</b></a></li><li class="is-family-code"><a href="r2F83DE79DD137DC2.html#E6C8AC4CF17DAA38">public <b>getError</b></a></li><li class="is-family-code"><a href="r2F83DE79DD137DC2.html#1C24655DB7159665">public <b>getSymtab</b></a></li><li class="is-family-code"><a href="r2F83DE79DD137DC2.html#1F3D6994D48B91F6">public <b>hasCSIRLevelProfile</b></a></li><li class="is-family-code"><a href="r2F83DE79DD137DC2.html#044EECC741803A51">public <b>hasError</b></a></li><li class="is-family-code"><a href="r2F83DE79DD137DC2.html#1F96C08DECDAE1A9">public <b>isEOF</b></a></li><li class="is-family-code"><a href="r2F83DE79DD137DC2.html#2CDEC20E71CC81C6">public <b>isIRLevelProfile</b></a></li><li class="is-family-code"><a href="r2F83DE79DD137DC2.html#6FBAA6EB64F0213D">public <b>readHeader</b></a></li><li class="is-family-code"><a href="r2F83DE79DD137DC2.html#1F0F2F537E75A761">public <b>readNextRecord</b></a></li><li class="is-family-code"><a href="r2F83DE79DD137DC2.html#32D95EAA5FE08F51">protected <b>success</b></a></li></ul><h2>Methods</h2><h3 id="26F7083AB57D9431"><pre class="p-0 hdoc-pre-parent"><a class="hdoc-permalink-icon" href="#26F7083AB57D9431">¶</a><code class="hdoc-function-code language-cpp">IndexedInstrProfReader(
    <a href="https://en.cppreference.com/w/cpp/memory/unique_ptr">std::unique_ptr</a>&lt;MemoryBuffer&gt; DataBuffer,
    <a href="https://en.cppreference.com/w/cpp/memory/unique_ptr">std::unique_ptr</a>&lt;MemoryBuffer&gt;
        RemappingBuffer = nullptr)</code></pre></h3><p>Declared at: <a class="is-family-code" href="https://github.com/llvm/llvm-project/blob/release/10.x/llvm/include/llvm/ProfileData/InstrProfReader.h#L450">llvm/include/llvm/ProfileData/InstrProfReader.h:450</a></p><h4>Parameters</h4><dl><dt class="is-family-code"><a href="https://en.cppreference.com/w/cpp/memory/unique_ptr">std::unique_ptr</a>&lt;MemoryBuffer&gt;<b> DataBuffer</b></dt><dt class="is-family-code"><a href="https://en.cppreference.com/w/cpp/memory/unique_ptr">std::unique_ptr</a>&lt;MemoryBuffer&gt;<b> RemappingBuffer</b> = nullptr</dt></dl><h3 id="8632C72FABFA5BFB"><pre class="p-0 hdoc-pre-parent"><a class="hdoc-permalink-icon" href="#8632C72FABFA5BFB">¶</a><code class="hdoc-function-code language-cpp">IndexedInstrProfReader(
    const <a href="rD82A6F24249186F2.html">llvm::IndexedInstrProfReader</a>&amp;)</code></pre></h3><p>Declared at: <a class="is-family-code" href="https://github.com/llvm/llvm-project/blob/release/10.x/llvm/include/llvm/ProfileData/InstrProfReader.h#L455">llvm/include/llvm/ProfileData/InstrProfReader.h:455</a></p><h4>Parameters</h4><dl><dt class="is-family-code">const <a href="rD82A6F24249186F2.html">llvm::IndexedInstrProfReader</a>&amp;<b> </b></dt></dl><h3 id="18AAEFC71FE28FB6"><pre class="p-0 hdoc-pre-parent"><a class="hdoc-permalink-icon" href="#18AAEFC71FE28FB6">¶</a><code class="hdoc-function-code language-cpp">static <a href="r004187BCD48C0729.html">Expected</a>&lt;
    std::unique_ptr&lt;IndexedInstrProfReader&gt;&gt;
create(const <a href="rA5E25CD0DF0DA048.html">llvm::Twine</a>&amp; Path,
       const <a href="rA5E25CD0DF0DA048.html">llvm::Twine</a>&amp; RemappingPath = &quot;&quot;)</code></pre></h3><h4>Description</h4><p>Factory method to create an indexed reader.</p><p>Declared at: <a class="is-family-code" href="https://github.com/llvm/llvm-project/blob/release/10.x/llvm/include/llvm/ProfileData/InstrProfReader.h#L495">llvm/include/llvm/ProfileData/InstrProfReader.h:495</a></p><h4>Parameters</h4><dl><dt class="is-family-code">const <a href="rA5E25CD0DF0DA048.html">llvm::Twine</a>&amp;<b> Path</b></dt><dt class="is-family-code">const <a href="rA5E25CD0DF0DA048.html">llvm::Twine</a>&amp;<b> RemappingPath</b> = &quot;&quot;</dt></dl><h3 id="3823899E14ED593A"><pre class="p-0 hdoc-pre-parent"><a class="hdoc-permalink-icon" href="#3823899E14ED593A">¶</a><code class="hdoc-function-code language-cpp">static <a href="r004187BCD48C0729.html">Expected</a>&lt;
    <a href="https://en.cppreference.com/w/cpp/memory/unique_ptr">std::unique_ptr</a>&lt;IndexedInstrProfReader&gt;&gt;
create(<a href="https://en.cppreference.com/w/cpp/memory/unique_ptr">std::unique_ptr</a>&lt;MemoryBuffer&gt; Buffer,
       std::unique_ptr&lt;MemoryBuffer&gt;
           RemappingBuffer = nullptr)</code></pre></h3><p>Declared at: <a class="is-family-code" href="https://github.com/llvm/llvm-project/blob/release/10.x/llvm/include/llvm/ProfileData/InstrProfReader.h#L498">llvm/include/llvm/ProfileData/InstrProfReader.h:498</a></p><h4>Parameters</h4><dl><dt class="is-family-code"><a href="https://en.cppreference.com/w/cpp/memory/unique_ptr">std::unique_ptr</a>&lt;MemoryBuffer&gt;<b> Buffer</b></dt><dt class="is-family-code"><a href="https://en.cppreference.com/w/cpp/memory/unique_ptr">std::unique_ptr</a>&lt;MemoryBuffer&gt;<b> RemappingBuffer</b> = nullptr</dt></dl><h3 id="3C5EEF47FF5B7B31"><pre class="p-0 hdoc-pre-parent"><a class="hdoc-permalink-icon" href="#3C5EEF47FF5B7B31">¶</a><code class="hdoc-function-code language-cpp"><a href="r40593E26768E0096.html">llvm::Error</a> getFunctionCounts(
    <a href="rECFCAF624C04523A.html">llvm::StringRef</a> FuncName,
    uint64_t FuncHash,
    <a href="https://en.cppreference.com/w/cpp/container/vector">std::vector</a>&lt;uint64_t&gt;&amp; Counts)</code></pre></h3><h4>Description</h4><p>Fill Counts with the profile data for the given function name.</p><p>Declared at: <a class="is-family-code" href="https://github.com/llvm/llvm-project/blob/release/10.x/llvm/include/llvm/ProfileData/InstrProfReader.h#L478">llvm/include/llvm/ProfileData/InstrProfReader.h:478</a></p><h4>Parameters</h4><dl><dt class="is-family-code"><a href="rECFCAF624C04523A.html">llvm::StringRef</a><b> FuncName</b></dt><dt class="is-family-code">uint64_t<b> FuncHash</b></dt><dt class="is-family-code"><a href="https://en.cppreference.com/w/cpp/container/vector">std::vector</a>&lt;uint64_t&gt;&amp;<b> Counts</b></dt></dl><h3 id="45D828F0262E9203"><pre class="p-0 hdoc-pre-parent"><a class="hdoc-permalink-icon" href="#45D828F0262E9203">¶</a><code class="hdoc-function-code language-cpp"><a href="r004187BCD48C0729.html">Expected</a>&lt;llvm::InstrProfRecord&gt;
getInstrProfRecord(<a href="rECFCAF624C04523A.html">llvm::StringRef</a> FuncName,
                   uint64_t FuncHash)</code></pre></h3><h4>Description</h4><p>Return the NamedInstrProfRecord associated with FuncName and FuncHash</p><p>Declared at: <a class="is-family-code" href="https://github.com/llvm/llvm-project/blob/release/10.x/llvm/include/llvm/ProfileData/InstrProfReader.h#L474">llvm/include/llvm/ProfileData/InstrProfReader.h:474</a></p><h4>Parameters</h4><dl><dt class="is-family-code"><a href="rECFCAF624C04523A.html">llvm::StringRef</a><b> FuncName</b></dt><dt class="is-family-code">uint64_t<b> FuncHash</b></dt></dl><h3 id="C73794C9406F9C7B"><pre class="p-0 hdoc-pre-parent"><a class="hdoc-permalink-icon" href="#C73794C9406F9C7B">¶</a><code class="hdoc-function-code language-cpp">uint64_t getMaximumFunctionCount(bool UseCS)</code></pre></h3><h4>Description</h4><p>Return the maximum of all known function counts.\c UseCS indicates whether to use the context-sensitive count.</p><p>Declared at: <a class="is-family-code" href="https://github.com/llvm/llvm-project/blob/release/10.x/llvm/include/llvm/ProfileData/InstrProfReader.h#L483">llvm/include/llvm/ProfileData/InstrProfReader.h:483</a></p><h4>Parameters</h4><dl><dt class="is-family-code">bool<b> UseCS</b></dt></dl><h3 id="CE8D199F33F39D39"><pre class="p-0 hdoc-pre-parent"><a class="hdoc-permalink-icon" href="#CE8D199F33F39D39">¶</a><code class="hdoc-function-code language-cpp"><a href="rCA08BEA268B8368A.html">llvm::ProfileSummary</a>&amp; getSummary(bool UseCS)</code></pre></h3><h4>Description</h4><p>Return the profile summary.\c UseCS indicates whether to use the context-sensitive summary.</p><p>Declared at: <a class="is-family-code" href="https://github.com/llvm/llvm-project/blob/release/10.x/llvm/include/llvm/ProfileData/InstrProfReader.h#L513">llvm/include/llvm/ProfileData/InstrProfReader.h:513</a></p><h4>Parameters</h4><dl><dt class="is-family-code">bool<b> UseCS</b></dt></dl><h3 id="10F9CC710B88695A"><pre class="p-0 hdoc-pre-parent"><a class="hdoc-permalink-icon" href="#10F9CC710B88695A">¶</a><code class="hdoc-function-code language-cpp"><a href="r7F060A25C2E13954.html">llvm::InstrProfSymtab</a>&amp; getSymtab()</code></pre></h3><h4>Description</h4><p>Return the PGO symtab. There are three different readers: Raw, Text, and Indexed profile readers. The first two types of readers are used only by llvm-profdata tool, while the indexed profile reader is also used by llvm-cov tool and the compiler ( backend or frontend). Since creating PGO symtab can create significant runtime and memory overhead (as it touches data for the whole program), InstrProfSymtab for the indexed profile reader should be created on demand and it is recommended to be only used for dumping purpose with llvm-proftool, not with the compiler.</p><p>Declared at: <a class="is-family-code" href="https://github.com/llvm/llvm-project/blob/release/10.x/llvm/include/llvm/ProfileData/InstrProfReader.h#L509">llvm/include/llvm/ProfileData/InstrProfReader.h:509</a></p><h3 id="BD56E7860B1C64C6"><pre class="p-0 hdoc-pre-parent"><a class="hdoc-permalink-icon" href="#BD56E7860B1C64C6">¶</a><code class="hdoc-function-code language-cpp">uint64_t getVersion() const</code></pre></h3><h4>Description</h4><p>Return the profile version.</p><p>Declared at: <a class="is-family-code" href="https://github.com/llvm/llvm-project/blob/release/10.x/llvm/include/llvm/ProfileData/InstrProfReader.h#L459">llvm/include/llvm/ProfileData/InstrProfReader.h:459</a></p><h3 id="4D1F0345B330FCB3"><pre class="p-0 hdoc-pre-parent"><a class="hdoc-permalink-icon" href="#4D1F0345B330FCB3">¶</a><code class="hdoc-function-code language-cpp">bool hasCSIRLevelProfile() const</code></pre></h3><p>Declared at: <a class="is-family-code" href="https://github.com/llvm/llvm-project/blob/release/10.x/llvm/include/llvm/ProfileData/InstrProfReader.h#L461">llvm/include/llvm/ProfileData/InstrProfReader.h:461</a></p><h3 id="5A69B1BBE0A7D050"><pre class="p-0 hdoc-pre-parent"><a class="hdoc-permalink-icon" href="#5A69B1BBE0A7D050">¶</a><code class="hdoc-function-code language-cpp">static bool hasFormat(
    const <a href="r76C29145F861F747.html">llvm::MemoryBuffer</a>&amp; DataBuffer)</code></pre></h3><h4>Description</h4><p>Return true if the given buffer is in an indexed instrprof format.</p><p>Declared at: <a class="is-family-code" href="https://github.com/llvm/llvm-project/blob/release/10.x/llvm/include/llvm/ProfileData/InstrProfReader.h#L466">llvm/include/llvm/ProfileData/InstrProfReader.h:466</a></p><h4>Parameters</h4><dl><dt class="is-family-code">const <a href="r76C29145F861F747.html">llvm::MemoryBuffer</a>&amp;<b> DataBuffer</b></dt></dl><h3 id="F9C10A08EDCFC217"><pre class="p-0 hdoc-pre-parent"><a class="hdoc-permalink-icon" href="#F9C10A08EDCFC217">¶</a><code class="hdoc-function-code language-cpp">bool isIRLevelProfile() const</code></pre></h3><p>Declared at: <a class="is-family-code" href="https://github.com/llvm/llvm-project/blob/release/10.x/llvm/include/llvm/ProfileData/InstrProfReader.h#L460">llvm/include/llvm/ProfileData/InstrProfReader.h:460</a></p><h3 id="AE81F76E6A307429"><pre class="p-0 hdoc-pre-parent"><a class="hdoc-permalink-icon" href="#AE81F76E6A307429">¶</a><code class="hdoc-function-code language-cpp"><a href="r40593E26768E0096.html">llvm::Error</a> readHeader()</code></pre></h3><h4>Description</h4><p>Read the file header.</p><p>Declared at: <a class="is-family-code" href="https://github.com/llvm/llvm-project/blob/release/10.x/llvm/include/llvm/ProfileData/InstrProfReader.h#L469">llvm/include/llvm/ProfileData/InstrProfReader.h:469</a></p><h3 id="151305E3228E27F7"><pre class="p-0 hdoc-pre-parent"><a class="hdoc-permalink-icon" href="#151305E3228E27F7">¶</a><code class="hdoc-function-code language-cpp"><a href="r40593E26768E0096.html">llvm::Error</a> readNextRecord(
    <a href="r0D43F4BDF0C16C6D.html">llvm::NamedInstrProfRecord</a>&amp; Record)</code></pre></h3><h4>Description</h4><p>Read a single record.</p><p>Declared at: <a class="is-family-code" href="https://github.com/llvm/llvm-project/blob/release/10.x/llvm/include/llvm/ProfileData/InstrProfReader.h#L471">llvm/include/llvm/ProfileData/InstrProfReader.h:471</a></p><h4>Parameters</h4><dl><dt class="is-family-code"><a href="r0D43F4BDF0C16C6D.html">llvm::NamedInstrProfRecord</a>&amp;<b> Record</b></dt></dl><h3 id="74A0E00CD4848C11"><pre class="p-0 hdoc-pre-parent"><a class="hdoc-permalink-icon" href="#74A0E00CD4848C11">¶</a><code class="hdoc-function-code language-cpp">void setValueProfDataEndianness(
    support::endianness Endianness)</code></pre></h3><p>Declared at: <a class="is-family-code" href="https://github.com/llvm/llvm-project/blob/release/10.x/llvm/include/llvm/ProfileData/InstrProfReader.h#L502">llvm/include/llvm/ProfileData/InstrProfReader.h:502</a></p><h4>Parameters</h4><dl><dt class="is-family-code">support::endianness<b> Endianness</b></dt></dl></main></div></div></div></section></div><footer class="footer"><p>Documentation for LLVM 10.0.0.</p><p>Generated by <a href="https://hdoc.io/">hdoc</a> version 1.4.0-hdocInternal on 2022-12-14T09:44:14 UTC.</p><p class="has-text-grey-light">19AD43E11B2996</p></footer></body></html>