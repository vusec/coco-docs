<!DOCTYPE html><html><head><meta charset="utf-8"></meta><meta content="width=device-width, initial-scale=1" name="viewport"></meta><title>class BranchProbabilityInfo: LLVM 10.0.0 documentation</title><link href="styles.css" rel="stylesheet"></link><script src="highlight.min.js"></script><script>hljs.highlightAll();</script><link href="katex.min.css" rel="stylesheet"></link><script src="katex.min.js"></script><script src="auto-render.min.js"></script><script>
    document.addEventListener("DOMContentLoaded", function() {
      renderMathInElement(document.body, {
        delimiters: [
          {left: '$$', right: '$$', display: true},
          {left: '$', right: '$', display: false},
        ],
      });
    });
  </script><link href="apple-touch-icon.png" sizes="180x180" rel="apple-touch-icon"></link><link href="favicon-32x32.png" sizes="32x32" type="image/png" rel="icon"></link><link href="favicon-16x16.png" sizes="16x16" type="image/png" rel="icon"></link></head><body><div id="wrapper"><section class="section"><div class="container"><div class="columns"><aside class="column is-one-fifth"><ul class="menu-list"><p class="is-size-4">LLVM 10.0.0</p><p class="menu-label">Navigation</p><li><a href="index.html">Home</a></li><li><a href="search.html">Search</a></li><li><a href="https://github.com/llvm/llvm-project/">Repository</a></li><li><a href="https://hdoc.io">Made with hdoc</a></li><p class="menu-label">API Documentation</p><li><a href="functions.html">Functions</a></li><li><a href="records.html">Records</a></li><li><a href="enums.html">Enums</a></li><li><a href="namespaces.html">Namespaces</a></li></ul></aside><div class="column" style="overflow-x: auto"><nav class="breadcrumb has-arrow-separator" aria-label="breadcrumbs"><ul><li><a href="namespaces.html#00A4DA910CC17C2D"><span>namespace llvm</span></a></li><li class="is-active"><a aria-current="page866F9A78FF13C61E"><span>class BranchProbabilityInfo</span></a></li></ul></nav><main class="content"><h1>class BranchProbabilityInfo</h1><h2>Declaration</h2><pre class="p-0"><code class="hdoc-record-code language-cpp">class BranchProbabilityInfo { /* full declaration omitted */ };</code></pre><h2>Description</h2><p>Analysis providing branch probability information. This is a function analysis which provides information on the relative probabilities of each &quot;edge&quot; in the function&apos;s CFG where such an edge is defined by a pair (PredBlock and an index in the successors). The probability of an edge from one block is always relative to the probabilities of other edges from the block. The probabilites of all edges from a block sum to exactly one (100%). We use a pair (PredBlock and an index in the successors) to uniquely identify an edge, since we can have multiple edges from Src to Dst. As an example, we can have a switch which jumps to Dst with value 0 and value 10.</p><p>Declared at: <a class="is-family-code" href="https://github.com/llvm/llvm-project/blob/release/10.x/llvm/include/llvm/Analysis/BranchProbabilityInfo.h#L53">llvm/include/llvm/Analysis/BranchProbabilityInfo.h:53</a></p><h2>Method Overview</h2><ul><li class="is-family-code">public  <a href="#F6419F456F606CA7"><b>BranchProbabilityInfo</b></a>()</li><li class="is-family-code">public  <a href="#EF30BFB909DBBE18"><b>BranchProbabilityInfo</b></a>(const llvm::Function &amp; F, const llvm::LoopInfo &amp; LI, const llvm::TargetLibraryInfo * TLI = nullptr)</li><li class="is-family-code">public  <a href="#937F1C67D9D31F14"><b>BranchProbabilityInfo</b></a>(llvm::BranchProbabilityInfo &amp;&amp; Arg)</li><li class="is-family-code">public  <a href="#7040B57790E41A82"><b>BranchProbabilityInfo</b></a>(const llvm::BranchProbabilityInfo &amp;)</li><li class="is-family-code">public void  <a href="#5280F00C9DEDC0EC"><b>calculate</b></a>(const llvm::Function &amp; F, const llvm::LoopInfo &amp; LI, const llvm::TargetLibraryInfo * TLI = nullptr)</li><li class="is-family-code">public void  <a href="#EEBB4976407A3D61"><b>eraseBlock</b></a>(const llvm::BasicBlock * BB)</li><li class="is-family-code">public static llvm::BranchProbability  <a href="#A661DC6D61C4A1AF"><b>getBranchProbStackProtector</b></a>(bool IsLikely)</li><li class="is-family-code">public llvm::BranchProbability  <a href="#AAB32BC75E065E33"><b>getEdgeProbability</b></a>(const llvm::BasicBlock * Src, unsigned int IndexInSuccessors) const</li><li class="is-family-code">public llvm::BranchProbability  <a href="#3F85813F86BABEB5"><b>getEdgeProbability</b></a>(const llvm::BasicBlock * Src, const llvm::BasicBlock * Dst) const</li><li class="is-family-code">public llvm::BranchProbability  <a href="#C17884EC8E2F277A"><b>getEdgeProbability</b></a>(const llvm::BasicBlock * Src, llvm::succ_const_iterator Dst) const</li><li class="is-family-code">public const llvm::BasicBlock *  <a href="#8E472C4EF611A211"><b>getHotSucc</b></a>(const llvm::BasicBlock * BB) const</li><li class="is-family-code">public bool  <a href="#BC4BC732BA795DD9"><b>isEdgeHot</b></a>(const llvm::BasicBlock * Src, const llvm::BasicBlock * Dst) const</li><li class="is-family-code">public void  <a href="#8904CE087CA6B026"><b>print</b></a>(llvm::raw_ostream &amp; OS) const</li><li class="is-family-code">public llvm::raw_ostream &amp;  <a href="#A36BEBEFAC9C658A"><b>printEdgeProbability</b></a>(llvm::raw_ostream &amp; OS, const llvm::BasicBlock * Src, const llvm::BasicBlock * Dst) const</li><li class="is-family-code">public void  <a href="#CE4A86D96D803042"><b>releaseMemory</b></a>()</li><li class="is-family-code">public void  <a href="#6F223D81139A7114"><b>setEdgeProbability</b></a>(const llvm::BasicBlock * Src, unsigned int IndexInSuccessors, llvm::BranchProbability Prob)</li></ul><h2>Methods</h2><h3 id="F6419F456F606CA7"><pre class="p-0 hdoc-pre-parent"><a class="hdoc-permalink-icon" href="#F6419F456F606CA7">¶</a><code class="hdoc-function-code language-cpp">BranchProbabilityInfo()</code></pre></h3><p>Declared at: <a class="is-family-code" href="https://github.com/llvm/llvm-project/blob/release/10.x/llvm/include/llvm/Analysis/BranchProbabilityInfo.h#L55">llvm/include/llvm/Analysis/BranchProbabilityInfo.h:55</a></p><h3 id="EF30BFB909DBBE18"><pre class="p-0 hdoc-pre-parent"><a class="hdoc-permalink-icon" href="#EF30BFB909DBBE18">¶</a><code class="hdoc-function-code language-cpp">BranchProbabilityInfo(
    const <a href="rADBA2A8E0906EC47.html">llvm::Function</a>&amp; F,
    const <a href="r289205FCE270195C.html">llvm::LoopInfo</a>&amp; LI,
    const <a href="r8801A6B76136C2E2.html">llvm::TargetLibraryInfo</a>* TLI = nullptr)</code></pre></h3><p>Declared at: <a class="is-family-code" href="https://github.com/llvm/llvm-project/blob/release/10.x/llvm/include/llvm/Analysis/BranchProbabilityInfo.h#L57">llvm/include/llvm/Analysis/BranchProbabilityInfo.h:57</a></p><h4>Parameters</h4><dl><dt class="is-family-code">const <a href="rADBA2A8E0906EC47.html">llvm::Function</a>&amp;<b> F</b></dt><dt class="is-family-code">const <a href="r289205FCE270195C.html">llvm::LoopInfo</a>&amp;<b> LI</b></dt><dt class="is-family-code">const <a href="r8801A6B76136C2E2.html">llvm::TargetLibraryInfo</a>*<b> TLI</b> = nullptr</dt></dl><h3 id="937F1C67D9D31F14"><pre class="p-0 hdoc-pre-parent"><a class="hdoc-permalink-icon" href="#937F1C67D9D31F14">¶</a><code class="hdoc-function-code language-cpp">BranchProbabilityInfo(
    <a href="r866F9A78FF13C61E.html">llvm::BranchProbabilityInfo</a>&amp;&amp; Arg)</code></pre></h3><p>Declared at: <a class="is-family-code" href="https://github.com/llvm/llvm-project/blob/release/10.x/llvm/include/llvm/Analysis/BranchProbabilityInfo.h#L62">llvm/include/llvm/Analysis/BranchProbabilityInfo.h:62</a></p><h4>Parameters</h4><dl><dt class="is-family-code"><a href="r866F9A78FF13C61E.html">llvm::BranchProbabilityInfo</a>&amp;&amp;<b> Arg</b></dt></dl><h3 id="7040B57790E41A82"><pre class="p-0 hdoc-pre-parent"><a class="hdoc-permalink-icon" href="#7040B57790E41A82">¶</a><code class="hdoc-function-code language-cpp">BranchProbabilityInfo(
    const <a href="r866F9A78FF13C61E.html">llvm::BranchProbabilityInfo</a>&amp;)</code></pre></h3><p>Declared at: <a class="is-family-code" href="https://github.com/llvm/llvm-project/blob/release/10.x/llvm/include/llvm/Analysis/BranchProbabilityInfo.h#L67">llvm/include/llvm/Analysis/BranchProbabilityInfo.h:67</a></p><h4>Parameters</h4><dl><dt class="is-family-code">const <a href="r866F9A78FF13C61E.html">llvm::BranchProbabilityInfo</a>&amp;<b> </b></dt></dl><h3 id="5280F00C9DEDC0EC"><pre class="p-0 hdoc-pre-parent"><a class="hdoc-permalink-icon" href="#5280F00C9DEDC0EC">¶</a><code class="hdoc-function-code language-cpp">void calculate(
    const <a href="rADBA2A8E0906EC47.html">llvm::Function</a>&amp; F,
    const <a href="r289205FCE270195C.html">llvm::LoopInfo</a>&amp; LI,
    const <a href="r8801A6B76136C2E2.html">llvm::TargetLibraryInfo</a>* TLI = nullptr)</code></pre></h3><p>Declared at: <a class="is-family-code" href="https://github.com/llvm/llvm-project/blob/release/10.x/llvm/include/llvm/Analysis/BranchProbabilityInfo.h#L134">llvm/include/llvm/Analysis/BranchProbabilityInfo.h:134</a></p><h4>Parameters</h4><dl><dt class="is-family-code">const <a href="rADBA2A8E0906EC47.html">llvm::Function</a>&amp;<b> F</b></dt><dt class="is-family-code">const <a href="r289205FCE270195C.html">llvm::LoopInfo</a>&amp;<b> LI</b></dt><dt class="is-family-code">const <a href="r8801A6B76136C2E2.html">llvm::TargetLibraryInfo</a>*<b> TLI</b> = nullptr</dt></dl><h3 id="EEBB4976407A3D61"><pre class="p-0 hdoc-pre-parent"><a class="hdoc-permalink-icon" href="#EEBB4976407A3D61">¶</a><code class="hdoc-function-code language-cpp">void eraseBlock(const <a href="r5F23A6FBCC3A87BD.html">llvm::BasicBlock</a>* BB)</code></pre></h3><h4>Description</h4><p>Forget analysis results for the given basic block.</p><p>Declared at: <a class="is-family-code" href="https://github.com/llvm/llvm-project/blob/release/10.x/llvm/include/llvm/Analysis/BranchProbabilityInfo.h#L138">llvm/include/llvm/Analysis/BranchProbabilityInfo.h:138</a></p><h4>Parameters</h4><dl><dt class="is-family-code">const <a href="r5F23A6FBCC3A87BD.html">llvm::BasicBlock</a>*<b> BB</b></dt></dl><h3 id="A661DC6D61C4A1AF"><pre class="p-0 hdoc-pre-parent"><a class="hdoc-permalink-icon" href="#A661DC6D61C4A1AF">¶</a><code class="hdoc-function-code language-cpp">static <a href="r237C322507965758.html">llvm::BranchProbability</a>
getBranchProbStackProtector(bool IsLikely)</code></pre></h3><p>Declared at: <a class="is-family-code" href="https://github.com/llvm/llvm-project/blob/release/10.x/llvm/include/llvm/Analysis/BranchProbabilityInfo.h#L129">llvm/include/llvm/Analysis/BranchProbabilityInfo.h:129</a></p><h4>Parameters</h4><dl><dt class="is-family-code">bool<b> IsLikely</b></dt></dl><h3 id="AAB32BC75E065E33"><pre class="p-0 hdoc-pre-parent"><a class="hdoc-permalink-icon" href="#AAB32BC75E065E33">¶</a><code class="hdoc-function-code language-cpp"><a href="r237C322507965758.html">llvm::BranchProbability</a> getEdgeProbability(
    const <a href="r5F23A6FBCC3A87BD.html">llvm::BasicBlock</a>* Src,
    unsigned int IndexInSuccessors) const</code></pre></h3><h4>Description</h4><p>Get an edge&apos;s probability, relative to other out-edges of the Src. This routine provides access to the fractional probability between zero (0%) and one (100%) of this edge executing, relative to other edges leaving the &apos;Src&apos; block. The returned probability is never zero, and can only be one if the source block has only one successor.</p><p>Declared at: <a class="is-family-code" href="https://github.com/llvm/llvm-project/blob/release/10.x/llvm/include/llvm/Analysis/BranchProbabilityInfo.h#L88">llvm/include/llvm/Analysis/BranchProbabilityInfo.h:88</a></p><h4>Parameters</h4><dl><dt class="is-family-code">const <a href="r5F23A6FBCC3A87BD.html">llvm::BasicBlock</a>*<b> Src</b></dt><dt class="is-family-code">unsigned int<b> IndexInSuccessors</b></dt></dl><h3 id="3F85813F86BABEB5"><pre class="p-0 hdoc-pre-parent"><a class="hdoc-permalink-icon" href="#3F85813F86BABEB5">¶</a><code class="hdoc-function-code language-cpp"><a href="r237C322507965758.html">llvm::BranchProbability</a> getEdgeProbability(
    const <a href="r5F23A6FBCC3A87BD.html">llvm::BasicBlock</a>* Src,
    const <a href="r5F23A6FBCC3A87BD.html">llvm::BasicBlock</a>* Dst) const</code></pre></h3><h4>Description</h4><p>Get the probability of going from Src to Dst. It returns the sum of all probabilities for edges from Src to Dst.</p><p>Declared at: <a class="is-family-code" href="https://github.com/llvm/llvm-project/blob/release/10.x/llvm/include/llvm/Analysis/BranchProbabilityInfo.h#L94">llvm/include/llvm/Analysis/BranchProbabilityInfo.h:94</a></p><h4>Parameters</h4><dl><dt class="is-family-code">const <a href="r5F23A6FBCC3A87BD.html">llvm::BasicBlock</a>*<b> Src</b></dt><dt class="is-family-code">const <a href="r5F23A6FBCC3A87BD.html">llvm::BasicBlock</a>*<b> Dst</b></dt></dl><h3 id="C17884EC8E2F277A"><pre class="p-0 hdoc-pre-parent"><a class="hdoc-permalink-icon" href="#C17884EC8E2F277A">¶</a><code class="hdoc-function-code language-cpp"><a href="r237C322507965758.html">llvm::BranchProbability</a> getEdgeProbability(
    const <a href="r5F23A6FBCC3A87BD.html">llvm::BasicBlock</a>* Src,
    <a href="rCE094AD2768CAA5F.html">llvm::succ_const_iterator</a> Dst) const</code></pre></h3><p>Declared at: <a class="is-family-code" href="https://github.com/llvm/llvm-project/blob/release/10.x/llvm/include/llvm/Analysis/BranchProbabilityInfo.h#L97">llvm/include/llvm/Analysis/BranchProbabilityInfo.h:97</a></p><h4>Parameters</h4><dl><dt class="is-family-code">const <a href="r5F23A6FBCC3A87BD.html">llvm::BasicBlock</a>*<b> Src</b></dt><dt class="is-family-code"><a href="rCE094AD2768CAA5F.html">llvm::succ_const_iterator</a><b> Dst</b></dt></dl><h3 id="8E472C4EF611A211"><pre class="p-0 hdoc-pre-parent"><a class="hdoc-permalink-icon" href="#8E472C4EF611A211">¶</a><code class="hdoc-function-code language-cpp">const <a href="r5F23A6FBCC3A87BD.html">llvm::BasicBlock</a>* getHotSucc(
    const <a href="r5F23A6FBCC3A87BD.html">llvm::BasicBlock</a>* BB) const</code></pre></h3><h4>Description</h4><p>Retrieve the hot successor of a block if one exists. Given a basic block, look through its successors and if one exists for which</p><p>Declared at: <a class="is-family-code" href="https://github.com/llvm/llvm-project/blob/release/10.x/llvm/include/llvm/Analysis/BranchProbabilityInfo.h#L110">llvm/include/llvm/Analysis/BranchProbabilityInfo.h:110</a></p><h4>Parameters</h4><dl><dt class="is-family-code">const <a href="r5F23A6FBCC3A87BD.html">llvm::BasicBlock</a>*<b> BB</b></dt></dl><h3 id="BC4BC732BA795DD9"><pre class="p-0 hdoc-pre-parent"><a class="hdoc-permalink-icon" href="#BC4BC732BA795DD9">¶</a><code class="hdoc-function-code language-cpp">bool isEdgeHot(const <a href="r5F23A6FBCC3A87BD.html">llvm::BasicBlock</a>* Src,
               const <a href="r5F23A6FBCC3A87BD.html">llvm::BasicBlock</a>* Dst) const</code></pre></h3><h4>Description</h4><p>Test if an edge is hot relative to other out-edges of the Src. Check whether this edge out of the source block is &apos;hot&apos;. We define hot as having a relative probability &gt;= 80%.</p><p>Declared at: <a class="is-family-code" href="https://github.com/llvm/llvm-project/blob/release/10.x/llvm/include/llvm/Analysis/BranchProbabilityInfo.h#L104">llvm/include/llvm/Analysis/BranchProbabilityInfo.h:104</a></p><h4>Parameters</h4><dl><dt class="is-family-code">const <a href="r5F23A6FBCC3A87BD.html">llvm::BasicBlock</a>*<b> Src</b></dt><dt class="is-family-code">const <a href="r5F23A6FBCC3A87BD.html">llvm::BasicBlock</a>*<b> Dst</b></dt></dl><h3 id="8904CE087CA6B026"><pre class="p-0 hdoc-pre-parent"><a class="hdoc-permalink-icon" href="#8904CE087CA6B026">¶</a><code class="hdoc-function-code language-cpp">void print(<a href="r6E5FB907260499A2.html">llvm::raw_ostream</a>&amp; OS) const</code></pre></h3><p>Declared at: <a class="is-family-code" href="https://github.com/llvm/llvm-project/blob/release/10.x/llvm/include/llvm/Analysis/BranchProbabilityInfo.h#L80">llvm/include/llvm/Analysis/BranchProbabilityInfo.h:80</a></p><h4>Parameters</h4><dl><dt class="is-family-code"><a href="r6E5FB907260499A2.html">llvm::raw_ostream</a>&amp;<b> OS</b></dt></dl><h3 id="A36BEBEFAC9C658A"><pre class="p-0 hdoc-pre-parent"><a class="hdoc-permalink-icon" href="#A36BEBEFAC9C658A">¶</a><code class="hdoc-function-code language-cpp"><a href="r6E5FB907260499A2.html">llvm::raw_ostream</a>&amp; printEdgeProbability(
    <a href="r6E5FB907260499A2.html">llvm::raw_ostream</a>&amp; OS,
    const <a href="r5F23A6FBCC3A87BD.html">llvm::BasicBlock</a>* Src,
    const <a href="r5F23A6FBCC3A87BD.html">llvm::BasicBlock</a>* Dst) const</code></pre></h3><h4>Description</h4><p>Print an edge&apos;s probability. Retrieves an edge&apos;s probability similarly to</p><p>Declared at: <a class="is-family-code" href="https://github.com/llvm/llvm-project/blob/release/10.x/llvm/include/llvm/Analysis/BranchProbabilityInfo.h#L117">llvm/include/llvm/Analysis/BranchProbabilityInfo.h:117</a></p><h4>Parameters</h4><dl><dt class="is-family-code"><a href="r6E5FB907260499A2.html">llvm::raw_ostream</a>&amp;<b> OS</b></dt><dt class="is-family-code">const <a href="r5F23A6FBCC3A87BD.html">llvm::BasicBlock</a>*<b> Src</b></dt><dt class="is-family-code">const <a href="r5F23A6FBCC3A87BD.html">llvm::BasicBlock</a>*<b> Dst</b></dt></dl><h3 id="CE4A86D96D803042"><pre class="p-0 hdoc-pre-parent"><a class="hdoc-permalink-icon" href="#CE4A86D96D803042">¶</a><code class="hdoc-function-code language-cpp">void releaseMemory()</code></pre></h3><p>Declared at: <a class="is-family-code" href="https://github.com/llvm/llvm-project/blob/release/10.x/llvm/include/llvm/Analysis/BranchProbabilityInfo.h#L78">llvm/include/llvm/Analysis/BranchProbabilityInfo.h:78</a></p><h3 id="6F223D81139A7114"><pre class="p-0 hdoc-pre-parent"><a class="hdoc-permalink-icon" href="#6F223D81139A7114">¶</a><code class="hdoc-function-code language-cpp">void setEdgeProbability(
    const <a href="r5F23A6FBCC3A87BD.html">llvm::BasicBlock</a>* Src,
    unsigned int IndexInSuccessors,
    <a href="r237C322507965758.html">llvm::BranchProbability</a> Prob)</code></pre></h3><h4>Description</h4><p>Set the raw edge probability for the given edge. This allows a pass to explicitly set the edge probability for an edge. It can be used when updating the CFG to update and preserve the branch probability information. Read the implementation of how these edge probabilities are calculated carefully before using!</p><p>Declared at: <a class="is-family-code" href="https://github.com/llvm/llvm-project/blob/release/10.x/llvm/include/llvm/Analysis/BranchProbabilityInfo.h#L126">llvm/include/llvm/Analysis/BranchProbabilityInfo.h:126</a></p><h4>Parameters</h4><dl><dt class="is-family-code">const <a href="r5F23A6FBCC3A87BD.html">llvm::BasicBlock</a>*<b> Src</b></dt><dt class="is-family-code">unsigned int<b> IndexInSuccessors</b></dt><dt class="is-family-code"><a href="r237C322507965758.html">llvm::BranchProbability</a><b> Prob</b></dt></dl></main></div></div></div></section></div><footer class="footer"><p>Documentation for LLVM 10.0.0.</p><p>Generated by <a href="https://hdoc.io/">hdoc</a> version 1.4.0-hdocInternal on 2022-12-14T09:44:14 UTC.</p><p class="has-text-grey-light">19AD43E11B2996</p></footer></body></html>