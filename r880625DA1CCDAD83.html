<!DOCTYPE html><html><head><meta charset="utf-8"></meta><meta content="width=device-width, initial-scale=1" name="viewport"></meta><title>class GsymReader: LLVM 10.0.0 documentation</title><link href="styles.css" rel="stylesheet"></link><script src="highlight.min.js"></script><script>hljs.highlightAll();</script><link href="katex.min.css" rel="stylesheet"></link><script src="katex.min.js"></script><script src="auto-render.min.js"></script><script>
    document.addEventListener("DOMContentLoaded", function() {
      renderMathInElement(document.body, {
        delimiters: [
          {left: '$$', right: '$$', display: true},
          {left: '$', right: '$', display: false},
        ],
      });
    });
  </script><link href="apple-touch-icon.png" sizes="180x180" rel="apple-touch-icon"></link><link href="favicon-32x32.png" sizes="32x32" type="image/png" rel="icon"></link><link href="favicon-16x16.png" sizes="16x16" type="image/png" rel="icon"></link></head><body><div id="wrapper"><section class="section"><div class="container"><div class="columns"><aside class="column is-one-fifth"><ul class="menu-list"><p class="is-size-4">LLVM 10.0.0</p><p class="menu-label">Navigation</p><li><a href="index.html">Home</a></li><li><a href="search.html">Search</a></li><li><a href="https://github.com/llvm/llvm-project/">Repository</a></li><li><a href="https://hdoc.io">Made with hdoc</a></li><p class="menu-label">API Documentation</p><li><a href="functions.html">Functions</a></li><li><a href="records.html">Records</a></li><li><a href="enums.html">Enums</a></li><li><a href="namespaces.html">Namespaces</a></li></ul></aside><div class="column" style="overflow-x: auto"><nav class="breadcrumb has-arrow-separator" aria-label="breadcrumbs"><ul><li><a href="namespaces.html#00A4DA910CC17C2D"><span>namespace llvm</span></a></li><li><a href="namespaces.html#BF3258AEA677DB5D"><span>namespace gsym</span></a></li><li class="is-active"><a aria-current="page880625DA1CCDAD83"><span>class GsymReader</span></a></li></ul></nav><main class="content"><h1>class GsymReader</h1><h2>Declaration</h2><pre class="p-0"><code class="hdoc-record-code language-cpp">class GsymReader { /* full declaration omitted */ };</code></pre><h2>Description</h2><p>GsymReader is used to read GSYM data from a file or buffer. This class is optimized for very quick lookups when the endianness matches the host system. The Header, address table, address info offsets, and file table is designed to be mmap&apos;ed as read only into memory and used without any parsing needed. If the endianness doesn&apos;t match, we swap these objects and tables into GsymReader::SwappedData and then point our header and ArrayRefs to this swapped internal data. GsymReader objects must use one of the static functions to create an instance: GsymReader::openFile(...) and GsymReader::copyBuffer(...).</p><p>Declared at: <a class="is-family-code" href="https://github.com/llvm/llvm-project/blob/release/10.x/llvm/include/llvm/DebugInfo/GSYM/GsymReader.h#L47">llvm/include/llvm/DebugInfo/GSYM/GsymReader.h:47</a></p><h2>Method Overview</h2><ul><li class="is-family-code">public  <a href="#5DA859534881641F"><b>GsymReader</b></a>(llvm::gsym::GsymReader &amp;&amp; RHS)</li><li class="is-family-code">protected template &lt;class T&gt;Optional&lt;uint64_t&gt;  <a href="#06513EEB0601DF8C"><b>addressForIndex</b></a>(size_t Index) const</li><li class="is-family-code">public static llvm::Expected&lt;GsymReader&gt;  <a href="#3B6C6C9097E11E9B"><b>copyBuffer</b></a>(llvm::StringRef Bytes)</li><li class="is-family-code">protected static llvm::Expected&lt;llvm::gsym::GsymReader&gt;  <a href="#A60202C56AF264B1"><b>create</b></a>(std::unique_ptr&lt;MemoryBuffer&gt; &amp; MemBuffer)</li><li class="is-family-code">protected template &lt;class T&gt;ArrayRef&lt;T&gt;  <a href="#5A3C02A0EC2AB5BB"><b>getAddrOffsets</b></a>() const</li><li class="is-family-code">protected Optional&lt;uint64_t&gt;  <a href="#4FC2AF0C99827024"><b>getAddress</b></a>(size_t Index) const</li><li class="is-family-code">protected Expected&lt;uint64_t&gt;  <a href="#6E1E5458BAEBD860"><b>getAddressIndex</b></a>(const uint64_t Addr) const</li><li class="is-family-code">protected Optional&lt;uint64_t&gt;  <a href="#71B4BF7CAF894D36"><b>getAddressInfoOffset</b></a>(size_t Index) const</li><li class="is-family-code">protected template &lt;class T&gt;uint64_t  <a href="#312581CD8EAEE12A"><b>getAddressOffsetIndex</b></a>(const uint64_t AddrOffset) const</li><li class="is-family-code">public Optional&lt;llvm::gsym::FileEntry&gt;  <a href="#C600B3AC8CB0F74C"><b>getFile</b></a>(uint32_t Index) const</li><li class="is-family-code">public llvm::Expected&lt;FunctionInfo&gt;  <a href="#B2101CE322A16105"><b>getFunctionInfo</b></a>(uint64_t Addr) const</li><li class="is-family-code">public const llvm::gsym::Header &amp;  <a href="#39E27A29A4DDC4A3"><b>getHeader</b></a>() const</li><li class="is-family-code">public llvm::StringRef  <a href="#455A760E09A245EE"><b>getString</b></a>(uint32_t Offset) const</li><li class="is-family-code">public llvm::Expected&lt;LookupResult&gt;  <a href="#5B59DFAF88FC6D3F"><b>lookup</b></a>(uint64_t Addr) const</li><li class="is-family-code">public static llvm::Expected&lt;GsymReader&gt;  <a href="#C8B996AE982001FC"><b>openFile</b></a>(llvm::StringRef Path)</li><li class="is-family-code">public  <a href="#61F754B5E6243A3A"><b>~GsymReader</b></a>()</li></ul><h2>Methods</h2><h3 id="5DA859534881641F"><pre class="p-0 hdoc-pre-parent"><a class="hdoc-permalink-icon" href="#5DA859534881641F">¶</a><code class="hdoc-function-code language-cpp">GsymReader(<a href="r880625DA1CCDAD83.html">llvm::gsym::GsymReader</a>&amp;&amp; RHS)</code></pre></h3><p>Declared at: <a class="is-family-code" href="https://github.com/llvm/llvm-project/blob/release/10.x/llvm/include/llvm/DebugInfo/GSYM/GsymReader.h#L72">llvm/include/llvm/DebugInfo/GSYM/GsymReader.h:72</a></p><h4>Parameters</h4><dl><dt class="is-family-code"><a href="r880625DA1CCDAD83.html">llvm::gsym::GsymReader</a>&amp;&amp;<b> RHS</b></dt></dl><h3 id="06513EEB0601DF8C"><pre class="p-0 hdoc-pre-parent"><a class="hdoc-permalink-icon" href="#06513EEB0601DF8C">¶</a><code class="hdoc-function-code language-cpp">template &lt;class T&gt;
<a href="r6607998C23E31109.html">Optional</a>&lt;uint64_t&gt; addressForIndex(
    size_t Index) const</code></pre></h3><h4>Description</h4><p>Get an appropriate address from the address table. The address table in the GSYM file is stored as array of 1, 2, 4 or 8 byte address offsets from the The gsym::Header::BaseAddress. The table is stored internally as a array of bytes that are in the correct endianness. In order to extract an address from the address table we must access the address offset using the correct size and then add it to the BaseAddress in the header.</p><p>Declared at: <a class="is-family-code" href="https://github.com/llvm/llvm-project/blob/release/10.x/llvm/include/llvm/DebugInfo/GSYM/GsymReader.h#L189">llvm/include/llvm/DebugInfo/GSYM/GsymReader.h:189</a></p><h4>Templates</h4><dl><dt class="is-family-code"><b> T</b></dt></dl><h4>Parameters</h4><dl><dt class="is-family-code">size_t<b> Index</b></dt><dd>An index into the AddrOffsets array.</dd></dl><h4>Returns</h4><p>An virtual address that matches the original object file for the address as the specified index, or llvm::None if Index is out of bounds.</p><h3 id="3B6C6C9097E11E9B"><pre class="p-0 hdoc-pre-parent"><a class="hdoc-permalink-icon" href="#3B6C6C9097E11E9B">¶</a><code class="hdoc-function-code language-cpp">static <a href="r004187BCD48C0729.html">llvm::Expected</a>&lt;GsymReader&gt; copyBuffer(
    <a href="rECFCAF624C04523A.html">llvm::StringRef</a> Bytes)</code></pre></h3><h4>Description</h4><p>Construct a GsymReader from a buffer.</p><p>Declared at: <a class="is-family-code" href="https://github.com/llvm/llvm-project/blob/release/10.x/llvm/include/llvm/DebugInfo/GSYM/GsymReader.h#L88">llvm/include/llvm/DebugInfo/GSYM/GsymReader.h:88</a></p><h4>Parameters</h4><dl><dt class="is-family-code"><a href="rECFCAF624C04523A.html">llvm::StringRef</a><b> Bytes</b></dt><dd>A set of bytes that will be copied and owned by the returned object on success.</dd></dl><h4>Returns</h4><p>An expected GsymReader that contains the object or an error object that indicates reason for failing to read the GSYM.</p><h3 id="A60202C56AF264B1"><pre class="p-0 hdoc-pre-parent"><a class="hdoc-permalink-icon" href="#A60202C56AF264B1">¶</a><code class="hdoc-function-code language-cpp">static <a href="r004187BCD48C0729.html">llvm::Expected</a>&lt;llvm::gsym::GsymReader&gt;
create(<a href="https://en.cppreference.com/w/cpp/memory/unique_ptr">std::unique_ptr</a>&lt;MemoryBuffer&gt;&amp; MemBuffer)</code></pre></h3><h4>Description</h4><p>Create a GSYM from a memory buffer. Called by both openFile() and copyBuffer(), this function does all of the work of parsing the GSYM file and returning an error.</p><p>Declared at: <a class="is-family-code" href="https://github.com/llvm/llvm-project/blob/release/10.x/llvm/include/llvm/DebugInfo/GSYM/GsymReader.h#L225">llvm/include/llvm/DebugInfo/GSYM/GsymReader.h:225</a></p><h4>Parameters</h4><dl><dt class="is-family-code"><a href="https://en.cppreference.com/w/cpp/memory/unique_ptr">std::unique_ptr</a>&lt;MemoryBuffer&gt;&amp;<b> MemBuffer</b></dt><dd>A memory buffer that will transfer ownership into the GsymReader.</dd></dl><h4>Returns</h4><p>An expected GsymReader that contains the object or an error object that indicates reason for failing to read the GSYM.</p><h3 id="5A3C02A0EC2AB5BB"><pre class="p-0 hdoc-pre-parent"><a class="hdoc-permalink-icon" href="#5A3C02A0EC2AB5BB">¶</a><code class="hdoc-function-code language-cpp">template &lt;class T&gt;
ArrayRef&lt;T&gt; getAddrOffsets() const</code></pre></h3><h4>Description</h4><p>Get an appropriate address info offsets array. The address table in the GSYM file is stored as array of 1, 2, 4 or 8 byte offsets from the The gsym::Header::BaseAddress. The table is stored internally as a array of bytes that are in the correct endianness. When we access this table we must get an array that matches those sizes. This templatized helper function is used when accessing address offsets in the AddrOffsets member variable.</p><p>Declared at: <a class="is-family-code" href="https://github.com/llvm/llvm-project/blob/release/10.x/llvm/include/llvm/DebugInfo/GSYM/GsymReader.h#L171">llvm/include/llvm/DebugInfo/GSYM/GsymReader.h:171</a></p><h4>Templates</h4><dl><dt class="is-family-code"><b> T</b></dt></dl><h4>Returns</h4><p>An ArrayRef of an appropriate address offset size.</p><h3 id="4FC2AF0C99827024"><pre class="p-0 hdoc-pre-parent"><a class="hdoc-permalink-icon" href="#4FC2AF0C99827024">¶</a><code class="hdoc-function-code language-cpp"><a href="r6607998C23E31109.html">Optional</a>&lt;uint64_t&gt; getAddress(size_t Index) const</code></pre></h3><h4>Description</h4><p>Gets an address from the address table. Addresses are stored as offsets frrom the gsym::Header::BaseAddress.</p><p>Declared at: <a class="is-family-code" href="https://github.com/llvm/llvm-project/blob/release/10.x/llvm/include/llvm/DebugInfo/GSYM/GsymReader.h#L158">llvm/include/llvm/DebugInfo/GSYM/GsymReader.h:158</a></p><h4>Parameters</h4><dl><dt class="is-family-code">size_t<b> Index</b></dt><dd>A index into the address table.</dd></dl><h4>Returns</h4><p>A resolved virtual address for adddress in the address table or llvm::None if Index is out of bounds.</p><h3 id="6E1E5458BAEBD860"><pre class="p-0 hdoc-pre-parent"><a class="hdoc-permalink-icon" href="#6E1E5458BAEBD860">¶</a><code class="hdoc-function-code language-cpp"><a href="r004187BCD48C0729.html">Expected</a>&lt;uint64_t&gt; getAddressIndex(
    const uint64_t Addr) const</code></pre></h3><h4>Description</h4><p>Given an address, find the address index. Binary search the address table and find the matching address index.</p><p>Declared at: <a class="is-family-code" href="https://github.com/llvm/llvm-project/blob/release/10.x/llvm/include/llvm/DebugInfo/GSYM/GsymReader.h#L237">llvm/include/llvm/DebugInfo/GSYM/GsymReader.h:237</a></p><h4>Parameters</h4><dl><dt class="is-family-code">const uint64_t<b> Addr</b></dt><dd>A virtual address that matches the original object file to lookup.</dd></dl><h4>Returns</h4><p>An index into the address table. This index can be used to extract the FunctionInfo data&apos;s offset from the AddrInfoOffsets array. Returns an error if the address isn&apos;t in the GSYM with details of why.</p><h3 id="71B4BF7CAF894D36"><pre class="p-0 hdoc-pre-parent"><a class="hdoc-permalink-icon" href="#71B4BF7CAF894D36">¶</a><code class="hdoc-function-code language-cpp"><a href="r6607998C23E31109.html">Optional</a>&lt;uint64_t&gt; getAddressInfoOffset(
    size_t Index) const</code></pre></h3><h4>Description</h4><p>Given an address index, get the offset for the FunctionInfo. Looking up an address is done by finding the corresponding address index for the address. This index is then used to get the offset of the FunctionInfo data that we will decode using this function.</p><p>Declared at: <a class="is-family-code" href="https://github.com/llvm/llvm-project/blob/release/10.x/llvm/include/llvm/DebugInfo/GSYM/GsymReader.h#L248">llvm/include/llvm/DebugInfo/GSYM/GsymReader.h:248</a></p><h4>Parameters</h4><dl><dt class="is-family-code">size_t<b> Index</b></dt><dd>An index into the address table.</dd></dl><h4>Returns</h4><p>An optional GSYM data offset for the offset of the FunctionInfo that needs to be decoded.</p><h3 id="312581CD8EAEE12A"><pre class="p-0 hdoc-pre-parent"><a class="hdoc-permalink-icon" href="#312581CD8EAEE12A">¶</a><code class="hdoc-function-code language-cpp">template &lt;class T&gt;
uint64_t getAddressOffsetIndex(
    const uint64_t AddrOffset) const</code></pre></h3><h4>Description</h4><p>Lookup an address offset in the AddrOffsets table. Given an address offset, look it up using a binary search of the AddrOffsets table.</p><p>Declared at: <a class="is-family-code" href="https://github.com/llvm/llvm-project/blob/release/10.x/llvm/include/llvm/DebugInfo/GSYM/GsymReader.h#L205">llvm/include/llvm/DebugInfo/GSYM/GsymReader.h:205</a></p><h4>Templates</h4><dl><dt class="is-family-code"><b> T</b></dt></dl><h4>Parameters</h4><dl><dt class="is-family-code">const uint64_t<b> AddrOffset</b></dt><dd>An address offset, that has already been computed by subtracting the gsym::Header::BaseAddress.</dd></dl><h4>Returns</h4><p>The matching address offset index. This index will be used to extract the FunctionInfo data&apos;s offset from the AddrInfoOffsets array.</p><h3 id="C600B3AC8CB0F74C"><pre class="p-0 hdoc-pre-parent"><a class="hdoc-permalink-icon" href="#C600B3AC8CB0F74C">¶</a><code class="hdoc-function-code language-cpp"><a href="r6607998C23E31109.html">Optional</a>&lt;llvm::gsym::FileEntry&gt; getFile(
    uint32_t Index) const</code></pre></h3><h4>Description</h4><p>Get the a file entry for the suppplied file index. Used to convert any file indexes in the FunctionInfo data back into files. This function can be used for iteration, but is more commonly used for random access when doing lookups.</p><p>Declared at: <a class="is-family-code" href="https://github.com/llvm/llvm-project/blob/release/10.x/llvm/include/llvm/DebugInfo/GSYM/GsymReader.h#L144">llvm/include/llvm/DebugInfo/GSYM/GsymReader.h:144</a></p><h4>Parameters</h4><dl><dt class="is-family-code">uint32_t<b> Index</b></dt><dd>An index into the file table.</dd></dl><h4>Returns</h4><p>An optional FileInfo that will be valid if the file index is valid, or llvm::None if the file index is out of bounds,</p><h3 id="B2101CE322A16105"><pre class="p-0 hdoc-pre-parent"><a class="hdoc-permalink-icon" href="#B2101CE322A16105">¶</a><code class="hdoc-function-code language-cpp"><a href="r004187BCD48C0729.html">llvm::Expected</a>&lt;FunctionInfo&gt; getFunctionInfo(
    uint64_t Addr) const</code></pre></h3><h4>Description</h4><p>Get the full function info for an address. This should be called when a client will store a copy of the complete FunctionInfo for a given address. For one off lookups, use the lookup() function below. Symbolication server processes might want to parse the entire function info for a given address and cache it if the process stays around to service many symbolication addresses, like for parsing profiling information.</p><p>Declared at: <a class="is-family-code" href="https://github.com/llvm/llvm-project/blob/release/10.x/llvm/include/llvm/DebugInfo/GSYM/GsymReader.h#L110">llvm/include/llvm/DebugInfo/GSYM/GsymReader.h:110</a></p><h4>Parameters</h4><dl><dt class="is-family-code">uint64_t<b> Addr</b></dt><dd>A virtual address from the orignal object file to lookup.</dd></dl><h4>Returns</h4><p>An expected FunctionInfo that contains the function info object or an error object that indicates reason for failing to lookup the address.</p><h3 id="39E27A29A4DDC4A3"><pre class="p-0 hdoc-pre-parent"><a class="hdoc-permalink-icon" href="#39E27A29A4DDC4A3">¶</a><code class="hdoc-function-code language-cpp">const <a href="rEA75A5A26EB5B316.html">llvm::gsym::Header</a>&amp; getHeader() const</code></pre></h3><h4>Description</h4><p>Access the GSYM header.</p><p>Declared at: <a class="is-family-code" href="https://github.com/llvm/llvm-project/blob/release/10.x/llvm/include/llvm/DebugInfo/GSYM/GsymReader.h#L92">llvm/include/llvm/DebugInfo/GSYM/GsymReader.h:92</a></p><h4>Returns</h4><p>A native endian version of the GSYM header.</p><h3 id="455A760E09A245EE"><pre class="p-0 hdoc-pre-parent"><a class="hdoc-permalink-icon" href="#455A760E09A245EE">¶</a><code class="hdoc-function-code language-cpp"><a href="rECFCAF624C04523A.html">llvm::StringRef</a> getString(uint32_t Offset) const</code></pre></h3><h4>Description</h4><p>Get a string from the string table.</p><p>Declared at: <a class="is-family-code" href="https://github.com/llvm/llvm-project/blob/release/10.x/llvm/include/llvm/DebugInfo/GSYM/GsymReader.h#L133">llvm/include/llvm/DebugInfo/GSYM/GsymReader.h:133</a></p><h4>Parameters</h4><dl><dt class="is-family-code">uint32_t<b> Offset</b></dt><dd>The string table offset for the string to retrieve.</dd></dl><h4>Returns</h4><p>The string from the strin table.</p><h3 id="5B59DFAF88FC6D3F"><pre class="p-0 hdoc-pre-parent"><a class="hdoc-permalink-icon" href="#5B59DFAF88FC6D3F">¶</a><code class="hdoc-function-code language-cpp"><a href="r004187BCD48C0729.html">llvm::Expected</a>&lt;LookupResult&gt; lookup(
    uint64_t Addr) const</code></pre></h3><h4>Description</h4><p>Lookup an address in the a GSYM. Lookup just the information needed for a specific address \a Addr. This function is faster that calling getFunctionInfo() as it will only return information that pertains to \a Addr and allows the parsing to skip any extra information encoded for other addresses. For example the line table parsing can stop when a matching LineEntry has been fouhnd, and the InlineInfo can stop parsing early once a match has been found and also skip information that doesn&apos;t match. This avoids memory allocations and is much faster for lookups.</p><p>Declared at: <a class="is-family-code" href="https://github.com/llvm/llvm-project/blob/release/10.x/llvm/include/llvm/DebugInfo/GSYM/GsymReader.h#L127">llvm/include/llvm/DebugInfo/GSYM/GsymReader.h:127</a></p><h4>Parameters</h4><dl><dt class="is-family-code">uint64_t<b> Addr</b></dt><dd>A virtual address from the orignal object file to lookup.</dd></dl><h4>Returns</h4><p>An expected LookupResult that contains only the information needed for the current address, or an error object that indicates reason for failing to lookup the address.</p><h3 id="C8B996AE982001FC"><pre class="p-0 hdoc-pre-parent"><a class="hdoc-permalink-icon" href="#C8B996AE982001FC">¶</a><code class="hdoc-function-code language-cpp">static <a href="r004187BCD48C0729.html">llvm::Expected</a>&lt;GsymReader&gt; openFile(
    <a href="rECFCAF624C04523A.html">llvm::StringRef</a> Path)</code></pre></h3><h4>Description</h4><p>Construct a GsymReader from a file on disk.</p><p>Declared at: <a class="is-family-code" href="https://github.com/llvm/llvm-project/blob/release/10.x/llvm/include/llvm/DebugInfo/GSYM/GsymReader.h#L80">llvm/include/llvm/DebugInfo/GSYM/GsymReader.h:80</a></p><h4>Parameters</h4><dl><dt class="is-family-code"><a href="rECFCAF624C04523A.html">llvm::StringRef</a><b> Path</b></dt><dd>The file path the GSYM file to read.</dd></dl><h4>Returns</h4><p>An expected GsymReader that contains the object or an error object that indicates reason for failing to read the GSYM.</p><h3 id="61F754B5E6243A3A"><pre class="p-0 hdoc-pre-parent"><a class="hdoc-permalink-icon" href="#61F754B5E6243A3A">¶</a><code class="hdoc-function-code language-cpp">~GsymReader()</code></pre></h3><p>Declared at: <a class="is-family-code" href="https://github.com/llvm/llvm-project/blob/release/10.x/llvm/include/llvm/DebugInfo/GSYM/GsymReader.h#L73">llvm/include/llvm/DebugInfo/GSYM/GsymReader.h:73</a></p></main></div></div></div></section></div><footer class="footer"><p>Documentation for LLVM 10.0.0.</p><p>Generated by <a href="https://hdoc.io/">hdoc</a> version 1.4.0-hdocInternal on 2022-12-14T09:44:14 UTC.</p><p class="has-text-grey-light">19AD43E11B2996</p></footer></body></html>