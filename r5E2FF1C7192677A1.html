<!DOCTYPE html><html><head><meta charset="utf-8"></meta><meta content="width=device-width, initial-scale=1" name="viewport"></meta><title>struct AbstractAttribute: LLVM 10.0.0 documentation</title><link href="styles.css" rel="stylesheet"></link><script src="highlight.min.js"></script><script>hljs.highlightAll();</script><link href="katex.min.css" rel="stylesheet"></link><script src="katex.min.js"></script><script src="auto-render.min.js"></script><script>
    document.addEventListener("DOMContentLoaded", function() {
      renderMathInElement(document.body, {
        delimiters: [
          {left: '$$', right: '$$', display: true},
          {left: '$', right: '$', display: false},
        ],
      });
    });
  </script><link href="apple-touch-icon.png" sizes="180x180" rel="apple-touch-icon"></link><link href="favicon-32x32.png" sizes="32x32" type="image/png" rel="icon"></link><link href="favicon-16x16.png" sizes="16x16" type="image/png" rel="icon"></link></head><body><div id="wrapper"><section class="section"><div class="container"><div class="columns"><aside class="column is-one-fifth"><ul class="menu-list"><p class="is-size-4">LLVM 10.0.0</p><p class="menu-label">Navigation</p><li><a href="index.html">Home</a></li><li><a href="search.html">Search</a></li><li><a href="https://github.com/llvm/llvm-project/">Repository</a></li><li><a href="https://hdoc.io">Made with hdoc</a></li><p class="menu-label">API Documentation</p><li><a href="functions.html">Functions</a></li><li><a href="records.html">Records</a></li><li><a href="enums.html">Enums</a></li><li><a href="namespaces.html">Namespaces</a></li></ul></aside><div class="column" style="overflow-x: auto"><nav class="breadcrumb has-arrow-separator" aria-label="breadcrumbs"><ul><li><a href="namespaces.html#00A4DA910CC17C2D"><span>namespace llvm</span></a></li><li class="is-active"><a aria-current="page5E2FF1C7192677A1"><span>struct AbstractAttribute</span></a></li></ul></nav><main class="content"><h1>struct AbstractAttribute</h1><h2>Declaration</h2><pre class="p-0"><code class="hdoc-record-code language-cpp">struct AbstractAttribute { /* full declaration omitted */ };</code></pre><h2>Description</h2><p>Base struct for all &quot;concrete attribute&quot; deductions. The abstract attribute is a minimal interface that allows the Attributor to orchestrate the abstract/fixpoint analysis. The design allows to hide away implementation choices made for the subclasses but also to structure their implementation and simplify the use of other abstract attributes in-flight. To allow easy creation of new attributes, most methods have default implementations. The ones that do not are generally straight forward, except `AbstractAttribute::updateImpl` which is the location of most reasoning associated with the abstract attribute. The update is invoked by the Attributor in case the situation used to justify the current optimistic state might have changed. The Attributor determines this automatically by monitoring the `Attributor::getAAFor` calls made by abstract attributes. The `updateImpl` method should inspect the IR and other abstract attributes in-flight to justify the best possible (=optimistic) state. The actual implementation is, similar to the underlying abstract state encoding, not exposed. In the most common case, the `updateImpl` will go through a list of reasons why its optimistic state is valid given the current information. If any combination of them holds and is sufficient to justify the current optimistic state, the method shall return UNCHAGED. If not, the optimistic state is adjusted to the situation and the method shall return CHANGED. If the manifestation of the &quot;concrete attribute&quot; deduced by the subclass differs from the &quot;default&quot; behavior, which is a (set of) LLVM-IR attribute(s) for an argument, call site argument, function return value, or function, the `AbstractAttribute::manifest` method should be overloaded. NOTE: If the state obtained via getState() is INVALID, thus if AbstractAttribute::getState().isValidState() returns false, no information provided by the methods of this class should be used. NOTE: The Attributor currently has certain limitations to what we can do. As a general rule of thumb, &quot;concrete&quot; abstract attributes should *for now* only perform &quot;backward&quot; information propagation. That means optimistic information obtained through abstract attributes should only be used at positions that precede the origin of the information with regards to the program flow. More practically, information can *now* be propagated from instructions to their enclosing function, but *not* from call sites to the called function. The mechanisms to allow both directions will be added in the future. NOTE: The mechanics of adding a new &quot;concrete&quot; abstract attribute are described in the file comment.</p><p>Declared at: <a class="is-family-code" href="https://github.com/llvm/llvm-project/blob/release/10.x/llvm/include/llvm/Transforms/IPO/Attributor.h#L1729">llvm/include/llvm/Transforms/IPO/Attributor.h:1729</a></p><h2>Method Overview</h2><ul><li class="is-family-code">public void  <a href="#FD0DE0AF9ABBDC51"><b>dump</b></a>() const</li><li class="is-family-code">public virtual const std::string  <a href="#E30B7112EB7FCB72"><b>getAsStr</b></a>() const</li><li class="is-family-code">public virtual const llvm::IRPosition &amp;  <a href="#A326C1EEA8E82C51"><b>getIRPosition</b></a>() const</li><li class="is-family-code">public virtual llvm::AbstractAttribute::StateType &amp;  <a href="#D8D0AA8AE8B3F572"><b>getState</b></a>()</li><li class="is-family-code">public virtual const llvm::AbstractAttribute::StateType &amp;  <a href="#9AAB3FB7316D5327"><b>getState</b></a>() const</li><li class="is-family-code">public virtual void  <a href="#7AB72EC4E53AB463"><b>initialize</b></a>(llvm::Attributor &amp; A)</li><li class="is-family-code">protected virtual llvm::ChangeStatus  <a href="#4FBE01ABB29865CE"><b>manifest</b></a>(llvm::Attributor &amp; A)</li><li class="is-family-code">public virtual void  <a href="#7D0B230569F9AD3D"><b>print</b></a>(llvm::raw_ostream &amp; OS) const</li><li class="is-family-code">protected virtual void  <a href="#E702B0642A03A64D"><b>trackStatistics</b></a>() const</li><li class="is-family-code">protected llvm::ChangeStatus  <a href="#FF6963F8BDBA060A"><b>update</b></a>(llvm::Attributor &amp; A)</li><li class="is-family-code">protected virtual llvm::ChangeStatus  <a href="#F6A4EB521DFB583A"><b>updateImpl</b></a>(llvm::Attributor &amp; A)</li><li class="is-family-code">public virtual  <a href="#7488EC91F94E285D"><b>~AbstractAttribute</b></a>()</li></ul><h2>Methods</h2><h3 id="FD0DE0AF9ABBDC51"><pre class="p-0 hdoc-pre-parent"><a class="hdoc-permalink-icon" href="#FD0DE0AF9ABBDC51">¶</a><code class="hdoc-function-code language-cpp">void dump() const</code></pre></h3><p>Declared at: <a class="is-family-code" href="https://github.com/llvm/llvm-project/blob/release/10.x/llvm/include/llvm/Transforms/IPO/Attributor.h#L1755">llvm/include/llvm/Transforms/IPO/Attributor.h:1755</a></p><h3 id="E30B7112EB7FCB72"><pre class="p-0 hdoc-pre-parent"><a class="hdoc-permalink-icon" href="#E30B7112EB7FCB72">¶</a><code class="hdoc-function-code language-cpp">virtual const <a href="https://en.cppreference.com/w/cpp/string/basic_string">std::string</a> getAsStr() const</code></pre></h3><h4>Description</h4><p>This function should return the &quot;summarized&quot; assumed state as string.</p><p>Declared at: <a class="is-family-code" href="https://github.com/llvm/llvm-project/blob/release/10.x/llvm/include/llvm/Transforms/IPO/Attributor.h#L1758">llvm/include/llvm/Transforms/IPO/Attributor.h:1758</a></p><h3 id="A326C1EEA8E82C51"><pre class="p-0 hdoc-pre-parent"><a class="hdoc-permalink-icon" href="#A326C1EEA8E82C51">¶</a><code class="hdoc-function-code language-cpp">virtual const <a href="rC81257CA68D97389.html">llvm::IRPosition</a>&amp; getIRPosition()
    const</code></pre></h3><h4>Description</h4><p>Return an IR position, see struct IRPosition.</p><p>Declared at: <a class="is-family-code" href="https://github.com/llvm/llvm-project/blob/release/10.x/llvm/include/llvm/Transforms/IPO/Attributor.h#L1750">llvm/include/llvm/Transforms/IPO/Attributor.h:1750</a></p><h3 id="D8D0AA8AE8B3F572"><pre class="p-0 hdoc-pre-parent"><a class="hdoc-permalink-icon" href="#D8D0AA8AE8B3F572">¶</a><code class="hdoc-function-code language-cpp">virtual <a href="r3D1561D2D13C1F8B.html">llvm::AbstractAttribute::StateType</a>&amp;
getState()</code></pre></h3><h4>Description</h4><p>Return the internal abstract state for inspection.</p><p>Declared at: <a class="is-family-code" href="https://github.com/llvm/llvm-project/blob/release/10.x/llvm/include/llvm/Transforms/IPO/Attributor.h#L1746">llvm/include/llvm/Transforms/IPO/Attributor.h:1746</a></p><h3 id="9AAB3FB7316D5327"><pre class="p-0 hdoc-pre-parent"><a class="hdoc-permalink-icon" href="#9AAB3FB7316D5327">¶</a><code class="hdoc-function-code language-cpp">virtual const <a href="r3D1561D2D13C1F8B.html">llvm::AbstractAttribute::StateType</a>&amp;
getState() const</code></pre></h3><p>Declared at: <a class="is-family-code" href="https://github.com/llvm/llvm-project/blob/release/10.x/llvm/include/llvm/Transforms/IPO/Attributor.h#L1747">llvm/include/llvm/Transforms/IPO/Attributor.h:1747</a></p><h3 id="7AB72EC4E53AB463"><pre class="p-0 hdoc-pre-parent"><a class="hdoc-permalink-icon" href="#7AB72EC4E53AB463">¶</a><code class="hdoc-function-code language-cpp">virtual void initialize(<a href="r2C6CFCCDD6551E5E.html">llvm::Attributor</a>&amp; A)</code></pre></h3><h4>Description</h4><p>Initialize the state with the information in the Attributor \p A. This function is called by the Attributor once all abstract attributes have been identified. It can and shall be used for task like: - identify existing knowledge in the IR and use it for the &quot;known state&quot; - perform any work that is not going to change over time, e.g., determine a subset of the IR, or attributes in-flight, that have to be looked at in the `updateImpl` method.</p><p>Declared at: <a class="is-family-code" href="https://github.com/llvm/llvm-project/blob/release/10.x/llvm/include/llvm/Transforms/IPO/Attributor.h#L1743">llvm/include/llvm/Transforms/IPO/Attributor.h:1743</a></p><h4>Parameters</h4><dl><dt class="is-family-code"><a href="r2C6CFCCDD6551E5E.html">llvm::Attributor</a>&amp;<b> A</b></dt></dl><h3 id="4FBE01ABB29865CE"><pre class="p-0 hdoc-pre-parent"><a class="hdoc-permalink-icon" href="#4FBE01ABB29865CE">¶</a><code class="hdoc-function-code language-cpp">virtual llvm::ChangeStatus manifest(
    <a href="r2C6CFCCDD6551E5E.html">llvm::Attributor</a>&amp; A)</code></pre></h3><h4>Description</h4><p>Hook for the Attributor to trigger the manifestation of the information represented by the abstract attribute in the LLVM-IR.</p><p>Declared at: <a class="is-family-code" href="https://github.com/llvm/llvm-project/blob/release/10.x/llvm/include/llvm/Transforms/IPO/Attributor.h#L1777">llvm/include/llvm/Transforms/IPO/Attributor.h:1777</a></p><h4>Parameters</h4><dl><dt class="is-family-code"><a href="r2C6CFCCDD6551E5E.html">llvm::Attributor</a>&amp;<b> A</b></dt></dl><h4>Returns</h4><p>CHANGED if the IR was altered, otherwise UNCHANGED.</p><h3 id="7D0B230569F9AD3D"><pre class="p-0 hdoc-pre-parent"><a class="hdoc-permalink-icon" href="#7D0B230569F9AD3D">¶</a><code class="hdoc-function-code language-cpp">virtual void print(<a href="r6E5FB907260499A2.html">llvm::raw_ostream</a>&amp; OS) const</code></pre></h3><h4>Description</h4><p>Helper functions, for debug purposes only. {</p><p>Declared at: <a class="is-family-code" href="https://github.com/llvm/llvm-project/blob/release/10.x/llvm/include/llvm/Transforms/IPO/Attributor.h#L1754">llvm/include/llvm/Transforms/IPO/Attributor.h:1754</a></p><h4>Parameters</h4><dl><dt class="is-family-code"><a href="r6E5FB907260499A2.html">llvm::raw_ostream</a>&amp;<b> OS</b></dt></dl><h3 id="E702B0642A03A64D"><pre class="p-0 hdoc-pre-parent"><a class="hdoc-permalink-icon" href="#E702B0642A03A64D">¶</a><code class="hdoc-function-code language-cpp">virtual void trackStatistics() const</code></pre></h3><h4>Description</h4><p>Hook to enable custom statistic tracking, called after manifest that resulted in a change if statistics are enabled. We require subclasses to provide an implementation so we remember to add statistics for them.</p><p>Declared at: <a class="is-family-code" href="https://github.com/llvm/llvm-project/blob/release/10.x/llvm/include/llvm/Transforms/IPO/Attributor.h#L1786">llvm/include/llvm/Transforms/IPO/Attributor.h:1786</a></p><h3 id="FF6963F8BDBA060A"><pre class="p-0 hdoc-pre-parent"><a class="hdoc-permalink-icon" href="#FF6963F8BDBA060A">¶</a><code class="hdoc-function-code language-cpp">llvm::ChangeStatus update(<a href="r2C6CFCCDD6551E5E.html">llvm::Attributor</a>&amp; A)</code></pre></h3><h4>Description</h4><p>Hook for the Attributor to trigger an update of the internal state. If this attribute is already fixed, this method will return UNCHANGED, otherwise it delegates to `AbstractAttribute::updateImpl`.</p><p>Declared at: <a class="is-family-code" href="https://github.com/llvm/llvm-project/blob/release/10.x/llvm/include/llvm/Transforms/IPO/Attributor.h#L1771">llvm/include/llvm/Transforms/IPO/Attributor.h:1771</a></p><h4>Parameters</h4><dl><dt class="is-family-code"><a href="r2C6CFCCDD6551E5E.html">llvm::Attributor</a>&amp;<b> A</b></dt></dl><h4>Returns</h4><p>CHANGED if the internal state changed, otherwise UNCHANGED.</p><h3 id="F6A4EB521DFB583A"><pre class="p-0 hdoc-pre-parent"><a class="hdoc-permalink-icon" href="#F6A4EB521DFB583A">¶</a><code class="hdoc-function-code language-cpp">virtual llvm::ChangeStatus updateImpl(
    <a href="r2C6CFCCDD6551E5E.html">llvm::Attributor</a>&amp; A)</code></pre></h3><h4>Description</h4><p>The actual update/transfer function which has to be implemented by the derived classes. If it is called, the environment has changed and we have to determine if the current information is still valid or adjust it otherwise.</p><p>Declared at: <a class="is-family-code" href="https://github.com/llvm/llvm-project/blob/release/10.x/llvm/include/llvm/Transforms/IPO/Attributor.h#L1795">llvm/include/llvm/Transforms/IPO/Attributor.h:1795</a></p><h4>Parameters</h4><dl><dt class="is-family-code"><a href="r2C6CFCCDD6551E5E.html">llvm::Attributor</a>&amp;<b> A</b></dt></dl><h4>Returns</h4><p>CHANGED if the internal state changed, otherwise UNCHANGED.</p><h3 id="7488EC91F94E285D"><pre class="p-0 hdoc-pre-parent"><a class="hdoc-permalink-icon" href="#7488EC91F94E285D">¶</a><code class="hdoc-function-code language-cpp">virtual ~AbstractAttribute()</code></pre></h3><h4>Description</h4><p>Virtual destructor.</p><p>Declared at: <a class="is-family-code" href="https://github.com/llvm/llvm-project/blob/release/10.x/llvm/include/llvm/Transforms/IPO/Attributor.h#L1733">llvm/include/llvm/Transforms/IPO/Attributor.h:1733</a></p></main></div></div></div></section></div><footer class="footer"><p>Documentation for LLVM 10.0.0.</p><p>Generated by <a href="https://hdoc.io/">hdoc</a> version 1.4.0-hdocInternal on 2022-12-14T09:44:14 UTC.</p><p class="has-text-grey-light">19AD43E11B2996</p></footer></body></html>