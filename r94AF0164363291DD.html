<!DOCTYPE html><html><head><meta charset="utf-8"></meta><meta content="width=device-width, initial-scale=1" name="viewport"></meta><title>class InMemoryFileSystem: LLVM 10.0.0 documentation</title><link href="styles.css" rel="stylesheet"></link><script src="highlight.min.js"></script><script>hljs.highlightAll();</script><link href="katex.min.css" rel="stylesheet"></link><script src="katex.min.js"></script><script src="auto-render.min.js"></script><script>
    document.addEventListener("DOMContentLoaded", function() {
      renderMathInElement(document.body, {
        delimiters: [
          {left: '$$', right: '$$', display: true},
          {left: '$', right: '$', display: false},
        ],
      });
    });
  </script><link href="apple-touch-icon.png" sizes="180x180" rel="apple-touch-icon"></link><link href="favicon-32x32.png" sizes="32x32" type="image/png" rel="icon"></link><link href="favicon-16x16.png" sizes="16x16" type="image/png" rel="icon"></link></head><body><div id="wrapper"><section class="section"><div class="container"><div class="columns"><aside class="column is-one-fifth"><ul class="menu-list"><p class="is-size-4">LLVM 10.0.0</p><p class="menu-label">Navigation</p><li><a href="index.html">Home</a></li><li><a href="search.html">Search</a></li><li><a href="https://github.com/llvm/llvm-project/">Repository</a></li><li><a href="https://hdoc.io">Made with hdoc</a></li><p class="menu-label">API Documentation</p><li><a href="functions.html">Functions</a></li><li><a href="records.html">Records</a></li><li><a href="enums.html">Enums</a></li><li><a href="namespaces.html">Namespaces</a></li></ul></aside><div class="column" style="overflow-x: auto"><nav class="breadcrumb has-arrow-separator" aria-label="breadcrumbs"><ul><li><a href="namespaces.html#00A4DA910CC17C2D"><span>namespace llvm</span></a></li><li><a href="namespaces.html#522D6DF275CF1D5D"><span>namespace vfs</span></a></li><li class="is-active"><a aria-current="page94AF0164363291DD"><span>class InMemoryFileSystem</span></a></li></ul></nav><main class="content"><h1>class InMemoryFileSystem</h1><h2>Declaration</h2><pre class="p-0"><code class="hdoc-record-code language-cpp">class InMemoryFileSystem : public FileSystem { /* full declaration omitted */ };</code></pre><h2>Description</h2><p>An in-memory file system.</p><p>Declared at: <a class="is-family-code" href="https://github.com/llvm/llvm-project/blob/release/10.x/llvm/include/llvm/Support/VirtualFileSystem.h#L415">llvm/include/llvm/Support/VirtualFileSystem.h:415</a></p><p>Inherits from: <a href="r251D365C6F31DA6D.html">FileSystem</a></p><h2>Method Overview</h2><ul><li class="is-family-code">public  <a href="#A34F2299B9BDF394"><b>InMemoryFileSystem</b></a>(bool UseNormalizedPaths = true)</li><li class="is-family-code">public bool  <a href="#14A0A2C8274CA859"><b>addFile</b></a>(const llvm::Twine &amp; Path, time_t ModificationTime, std::unique_ptr&lt;llvm::MemoryBuffer&gt; Buffer, Optional&lt;uint32_t&gt; User = None, Optional&lt;uint32_t&gt; Group = None, Optional&lt;llvm::sys::fs::file_type&gt; Type = None, Optional&lt;llvm::sys::fs::perms&gt; Perms = None)</li><li class="is-family-code">public bool  <a href="#353FDFEEFB7AE943"><b>addFileNoOwn</b></a>(const llvm::Twine &amp; Path, time_t ModificationTime, llvm::MemoryBuffer * Buffer, Optional&lt;uint32_t&gt; User = None, Optional&lt;uint32_t&gt; Group = None, Optional&lt;llvm::sys::fs::file_type&gt; Type = None, Optional&lt;llvm::sys::fs::perms&gt; Perms = None)</li><li class="is-family-code">public bool  <a href="#6FFB2308B3D2FD83"><b>addHardLink</b></a>(const llvm::Twine &amp; From, const llvm::Twine &amp; To)</li><li class="is-family-code">public llvm::vfs::directory_iterator  <a href="#29D8FE564D8F9A6C"><b>dir_begin</b></a>(const llvm::Twine &amp; Dir, std::error_code &amp; EC)</li><li class="is-family-code">public llvm::ErrorOr&lt;std::string&gt;  <a href="#B321E8ABBE65C6A1"><b>getCurrentWorkingDirectory</b></a>() const</li><li class="is-family-code">public std::error_code  <a href="#A459D9AC67619A8D"><b>getRealPath</b></a>(const llvm::Twine &amp; Path, SmallVectorImpl&lt;char&gt; &amp; Output) const</li><li class="is-family-code">public std::error_code  <a href="#FAB330793554D5B8"><b>isLocal</b></a>(const llvm::Twine &amp; Path, bool &amp; Result)</li><li class="is-family-code">public llvm::ErrorOr&lt;std::unique_ptr&lt;File&gt;&gt;  <a href="#463437E8AB2EA88E"><b>openFileForRead</b></a>(const llvm::Twine &amp; Path)</li><li class="is-family-code">public std::error_code  <a href="#3F0AFD58A6F90F2B"><b>setCurrentWorkingDirectory</b></a>(const llvm::Twine &amp; Path)</li><li class="is-family-code">public llvm::ErrorOr&lt;Status&gt;  <a href="#FC6AFDF09FF983F6"><b>status</b></a>(const llvm::Twine &amp; Path)</li><li class="is-family-code">public std::string  <a href="#FF3E3DA1916929C7"><b>toString</b></a>() const</li><li class="is-family-code">public bool  <a href="#75FEA0E03BDEFBB1"><b>useNormalizedPaths</b></a>() const</li><li class="is-family-code">public  <a href="#A081E32B8E257491"><b>~InMemoryFileSystem</b></a>()</li></ul><p>Inherited from <a href="r251D365C6F31DA6D.html">FileSystem</a>:</p><ul><li class="is-family-code"><a href="r251D365C6F31DA6D.html#C7246D706BBA0350">public <b>dir_begin</b></a></li><li class="is-family-code"><a href="r251D365C6F31DA6D.html#08E0503A0EAE5FFF">public <b>exists</b></a></li><li class="is-family-code"><a href="r251D365C6F31DA6D.html#FDD6676AEB173643">public <b>getBufferForFile</b></a></li><li class="is-family-code"><a href="r251D365C6F31DA6D.html#F9492D384682CDFA">public <b>getCurrentWorkingDirectory</b></a></li><li class="is-family-code"><a href="r251D365C6F31DA6D.html#4AF73410DA9AAE1E">public <b>getRealPath</b></a></li><li class="is-family-code"><a href="r251D365C6F31DA6D.html#4E8DFE6602F8E029">public <b>isLocal</b></a></li><li class="is-family-code"><a href="r251D365C6F31DA6D.html#CE4A99F55CA68FE6">public <b>makeAbsolute</b></a></li><li class="is-family-code"><a href="r251D365C6F31DA6D.html#76164F2196CC8121">public <b>openFileForRead</b></a></li><li class="is-family-code"><a href="r251D365C6F31DA6D.html#E70379D5780746E1">public <b>setCurrentWorkingDirectory</b></a></li><li class="is-family-code"><a href="r251D365C6F31DA6D.html#91631C249D8C6DD8">public <b>status</b></a></li></ul><h2>Methods</h2><h3 id="A34F2299B9BDF394"><pre class="p-0 hdoc-pre-parent"><a class="hdoc-permalink-icon" href="#A34F2299B9BDF394">¶</a><code class="hdoc-function-code language-cpp">InMemoryFileSystem(bool UseNormalizedPaths = true)</code></pre></h3><p>Declared at: <a class="is-family-code" href="https://github.com/llvm/llvm-project/blob/release/10.x/llvm/include/llvm/Support/VirtualFileSystem.h#L430">llvm/include/llvm/Support/VirtualFileSystem.h:430</a></p><h4>Parameters</h4><dl><dt class="is-family-code">bool<b> UseNormalizedPaths</b> = true</dt></dl><h3 id="14A0A2C8274CA859"><pre class="p-0 hdoc-pre-parent"><a class="hdoc-permalink-icon" href="#14A0A2C8274CA859">¶</a><code class="hdoc-function-code language-cpp">bool addFile(
    const <a href="rA5E25CD0DF0DA048.html">llvm::Twine</a>&amp; Path,
    time_t ModificationTime,
    <a href="https://en.cppreference.com/w/cpp/memory/unique_ptr">std::unique_ptr</a>&lt;llvm::MemoryBuffer&gt; Buffer,
    <a href="r6607998C23E31109.html">Optional</a>&lt;uint32_t&gt; User = None,
    <a href="r6607998C23E31109.html">Optional</a>&lt;uint32_t&gt; Group = None,
    <a href="r6607998C23E31109.html">Optional</a>&lt;llvm::sys::fs::file_type&gt; Type =
        None,
    <a href="r6607998C23E31109.html">Optional</a>&lt;llvm::sys::fs::perms&gt; Perms = None)</code></pre></h3><h4>Description</h4><p>Add a file containing a buffer or a directory to the VFS with a path. The VFS owns the buffer.  If present, User, Group, Type and Perms apply to the newly-created file or directory.</p><p>Declared at: <a class="is-family-code" href="https://github.com/llvm/llvm-project/blob/release/10.x/llvm/include/llvm/Support/VirtualFileSystem.h#L439">llvm/include/llvm/Support/VirtualFileSystem.h:439</a></p><h4>Parameters</h4><dl><dt class="is-family-code">const <a href="rA5E25CD0DF0DA048.html">llvm::Twine</a>&amp;<b> Path</b></dt><dt class="is-family-code">time_t<b> ModificationTime</b></dt><dt class="is-family-code"><a href="https://en.cppreference.com/w/cpp/memory/unique_ptr">std::unique_ptr</a>&lt;llvm::MemoryBuffer&gt;<b> Buffer</b></dt><dt class="is-family-code"><a href="r6607998C23E31109.html">Optional</a>&lt;uint32_t&gt;<b> User</b> = None</dt><dt class="is-family-code"><a href="r6607998C23E31109.html">Optional</a>&lt;uint32_t&gt;<b> Group</b> = None</dt><dt class="is-family-code"><a href="r6607998C23E31109.html">Optional</a>&lt;llvm::sys::fs::file_type&gt;<b> Type</b> = None</dt><dt class="is-family-code"><a href="r6607998C23E31109.html">Optional</a>&lt;llvm::sys::fs::perms&gt;<b> Perms</b> = None</dt></dl><h4>Returns</h4><p>true if the file or directory was successfully added, false if the file or directory already exists in the file system with different contents.</p><h3 id="353FDFEEFB7AE943"><pre class="p-0 hdoc-pre-parent"><a class="hdoc-permalink-icon" href="#353FDFEEFB7AE943">¶</a><code class="hdoc-function-code language-cpp">bool addFileNoOwn(
    const <a href="rA5E25CD0DF0DA048.html">llvm::Twine</a>&amp; Path,
    time_t ModificationTime,
    <a href="r76C29145F861F747.html">llvm::MemoryBuffer</a>* Buffer,
    <a href="r6607998C23E31109.html">Optional</a>&lt;uint32_t&gt; User = None,
    <a href="r6607998C23E31109.html">Optional</a>&lt;uint32_t&gt; Group = None,
    <a href="r6607998C23E31109.html">Optional</a>&lt;llvm::sys::fs::file_type&gt; Type =
        None,
    <a href="r6607998C23E31109.html">Optional</a>&lt;llvm::sys::fs::perms&gt; Perms = None)</code></pre></h3><h4>Description</h4><p>Add a buffer to the VFS with a path. The VFS does not own the buffer. If present, User, Group, Type and Perms apply to the newly-created file or directory.</p><p>Declared at: <a class="is-family-code" href="https://github.com/llvm/llvm-project/blob/release/10.x/llvm/include/llvm/Support/VirtualFileSystem.h#L465">llvm/include/llvm/Support/VirtualFileSystem.h:465</a></p><h4>Parameters</h4><dl><dt class="is-family-code">const <a href="rA5E25CD0DF0DA048.html">llvm::Twine</a>&amp;<b> Path</b></dt><dt class="is-family-code">time_t<b> ModificationTime</b></dt><dt class="is-family-code"><a href="r76C29145F861F747.html">llvm::MemoryBuffer</a>*<b> Buffer</b></dt><dt class="is-family-code"><a href="r6607998C23E31109.html">Optional</a>&lt;uint32_t&gt;<b> User</b> = None</dt><dt class="is-family-code"><a href="r6607998C23E31109.html">Optional</a>&lt;uint32_t&gt;<b> Group</b> = None</dt><dt class="is-family-code"><a href="r6607998C23E31109.html">Optional</a>&lt;llvm::sys::fs::file_type&gt;<b> Type</b> = None</dt><dt class="is-family-code"><a href="r6607998C23E31109.html">Optional</a>&lt;llvm::sys::fs::perms&gt;<b> Perms</b> = None</dt></dl><h4>Returns</h4><p>true if the file or directory was successfully added, false if the file or directory already exists in the file system with different contents.</p><h3 id="6FFB2308B3D2FD83"><pre class="p-0 hdoc-pre-parent"><a class="hdoc-permalink-icon" href="#6FFB2308B3D2FD83">¶</a><code class="hdoc-function-code language-cpp">bool addHardLink(const <a href="rA5E25CD0DF0DA048.html">llvm::Twine</a>&amp; From,
                 const <a href="rA5E25CD0DF0DA048.html">llvm::Twine</a>&amp; To)</code></pre></h3><h4>Description</h4><p>Add a hard link to a file. Here hard links are not intended to be fully equivalent to the classical filesystem. Both the hard link and the file share the same buffer and status (and thus have the same UniqueID). Because of this there is no way to distinguish between the link and the file after the link has been added. The To path must be an existing file or a hardlink. The From file must not have been added before. The To Path must not be a directory. The From Node is added as a hard link which points to the resolved file of To Node.</p><p>Declared at: <a class="is-family-code" href="https://github.com/llvm/llvm-project/blob/release/10.x/llvm/include/llvm/Support/VirtualFileSystem.h#L457">llvm/include/llvm/Support/VirtualFileSystem.h:457</a></p><h4>Parameters</h4><dl><dt class="is-family-code">const <a href="rA5E25CD0DF0DA048.html">llvm::Twine</a>&amp;<b> From</b></dt><dt class="is-family-code">const <a href="rA5E25CD0DF0DA048.html">llvm::Twine</a>&amp;<b> To</b></dt></dl><h4>Returns</h4><p>true if the above condition is satisfied and hardlink was successfully created, false otherwise.</p><h3 id="29D8FE564D8F9A6C"><pre class="p-0 hdoc-pre-parent"><a class="hdoc-permalink-icon" href="#29D8FE564D8F9A6C">¶</a><code class="hdoc-function-code language-cpp"><a href="r4206B7BCC44B08B3.html">llvm::vfs::directory_iterator</a> dir_begin(
    const <a href="rA5E25CD0DF0DA048.html">llvm::Twine</a>&amp; Dir,
    <a href="https://en.cppreference.com/w/cpp/error/error_code">std::error_code</a>&amp; EC)</code></pre></h3><h4>Description</h4><p>Get a directory_iterator for \p Dir.</p><p>Declared at: <a class="is-family-code" href="https://github.com/llvm/llvm-project/blob/release/10.x/llvm/include/llvm/Support/VirtualFileSystem.h#L479">llvm/include/llvm/Support/VirtualFileSystem.h:479</a></p><h4>Parameters</h4><dl><dt class="is-family-code">const <a href="rA5E25CD0DF0DA048.html">llvm::Twine</a>&amp;<b> Dir</b></dt><dt class="is-family-code"><a href="https://en.cppreference.com/w/cpp/error/error_code">std::error_code</a>&amp;<b> EC</b></dt></dl><h3 id="B321E8ABBE65C6A1"><pre class="p-0 hdoc-pre-parent"><a class="hdoc-permalink-icon" href="#B321E8ABBE65C6A1">¶</a><code class="hdoc-function-code language-cpp"><a href="rD60C34ED5A112927.html">llvm::ErrorOr</a>&lt;std::string&gt;
getCurrentWorkingDirectory() const</code></pre></h3><h4>Description</h4><p>Get the working directory of this file system.</p><p>Declared at: <a class="is-family-code" href="https://github.com/llvm/llvm-project/blob/release/10.x/llvm/include/llvm/Support/VirtualFileSystem.h#L481">llvm/include/llvm/Support/VirtualFileSystem.h:481</a></p><h3 id="A459D9AC67619A8D"><pre class="p-0 hdoc-pre-parent"><a class="hdoc-permalink-icon" href="#A459D9AC67619A8D">¶</a><code class="hdoc-function-code language-cpp"><a href="https://en.cppreference.com/w/cpp/error/error_code">std::error_code</a> getRealPath(
    const <a href="rA5E25CD0DF0DA048.html">llvm::Twine</a>&amp; Path,
    <a href="r6CBD92E95A65634C.html">SmallVectorImpl</a>&lt;char&gt;&amp; Output) const</code></pre></h3><h4>Description</h4><p>Canonicalizes \p Path by combining with the current working directory and normalizing the path (e.g. remove dots). If the current working directory is not set, this returns errc::operation_not_permitted. This doesn&apos;t resolve symlinks as they are not supported in in-memory file system.</p><p>Declared at: <a class="is-family-code" href="https://github.com/llvm/llvm-project/blob/release/10.x/llvm/include/llvm/Support/VirtualFileSystem.h#L490">llvm/include/llvm/Support/VirtualFileSystem.h:490</a></p><h4>Parameters</h4><dl><dt class="is-family-code">const <a href="rA5E25CD0DF0DA048.html">llvm::Twine</a>&amp;<b> Path</b></dt><dt class="is-family-code"><a href="r6CBD92E95A65634C.html">SmallVectorImpl</a>&lt;char&gt;&amp;<b> Output</b></dt></dl><h3 id="FAB330793554D5B8"><pre class="p-0 hdoc-pre-parent"><a class="hdoc-permalink-icon" href="#FAB330793554D5B8">¶</a><code class="hdoc-function-code language-cpp"><a href="https://en.cppreference.com/w/cpp/error/error_code">std::error_code</a> isLocal(const <a href="rA5E25CD0DF0DA048.html">llvm::Twine</a>&amp; Path,
                        bool&amp; Result)</code></pre></h3><h4>Description</h4><p>Is the file mounted on a local filesystem?</p><p>Declared at: <a class="is-family-code" href="https://github.com/llvm/llvm-project/blob/release/10.x/llvm/include/llvm/Support/VirtualFileSystem.h#L492">llvm/include/llvm/Support/VirtualFileSystem.h:492</a></p><h4>Parameters</h4><dl><dt class="is-family-code">const <a href="rA5E25CD0DF0DA048.html">llvm::Twine</a>&amp;<b> Path</b></dt><dt class="is-family-code">bool&amp;<b> Result</b></dt></dl><h3 id="463437E8AB2EA88E"><pre class="p-0 hdoc-pre-parent"><a class="hdoc-permalink-icon" href="#463437E8AB2EA88E">¶</a><code class="hdoc-function-code language-cpp"><a href="rD60C34ED5A112927.html">llvm::ErrorOr</a>&lt;std::unique_ptr&lt;File&gt;&gt;
openFileForRead(const <a href="rA5E25CD0DF0DA048.html">llvm::Twine</a>&amp; Path)</code></pre></h3><h4>Description</h4><p>Get a \p File object for the file at \p Path, if one exists.</p><p>Declared at: <a class="is-family-code" href="https://github.com/llvm/llvm-project/blob/release/10.x/llvm/include/llvm/Support/VirtualFileSystem.h#L478">llvm/include/llvm/Support/VirtualFileSystem.h:478</a></p><h4>Parameters</h4><dl><dt class="is-family-code">const <a href="rA5E25CD0DF0DA048.html">llvm::Twine</a>&amp;<b> Path</b></dt></dl><h3 id="3F0AFD58A6F90F2B"><pre class="p-0 hdoc-pre-parent"><a class="hdoc-permalink-icon" href="#3F0AFD58A6F90F2B">¶</a><code class="hdoc-function-code language-cpp"><a href="https://en.cppreference.com/w/cpp/error/error_code">std::error_code</a> setCurrentWorkingDirectory(
    const <a href="rA5E25CD0DF0DA048.html">llvm::Twine</a>&amp; Path)</code></pre></h3><h4>Description</h4><p>Set the working directory. This will affect all following operations on this file system and may propagate down for nested file systems.</p><p>Declared at: <a class="is-family-code" href="https://github.com/llvm/llvm-project/blob/release/10.x/llvm/include/llvm/Support/VirtualFileSystem.h#L493">llvm/include/llvm/Support/VirtualFileSystem.h:493</a></p><h4>Parameters</h4><dl><dt class="is-family-code">const <a href="rA5E25CD0DF0DA048.html">llvm::Twine</a>&amp;<b> Path</b></dt></dl><h3 id="FC6AFDF09FF983F6"><pre class="p-0 hdoc-pre-parent"><a class="hdoc-permalink-icon" href="#FC6AFDF09FF983F6">¶</a><code class="hdoc-function-code language-cpp"><a href="rD60C34ED5A112927.html">llvm::ErrorOr</a>&lt;Status&gt; status(
    const <a href="rA5E25CD0DF0DA048.html">llvm::Twine</a>&amp; Path)</code></pre></h3><h4>Description</h4><p>Get the status of the entry at \p Path, if one exists.</p><p>Declared at: <a class="is-family-code" href="https://github.com/llvm/llvm-project/blob/release/10.x/llvm/include/llvm/Support/VirtualFileSystem.h#L476">llvm/include/llvm/Support/VirtualFileSystem.h:476</a></p><h4>Parameters</h4><dl><dt class="is-family-code">const <a href="rA5E25CD0DF0DA048.html">llvm::Twine</a>&amp;<b> Path</b></dt></dl><h3 id="FF3E3DA1916929C7"><pre class="p-0 hdoc-pre-parent"><a class="hdoc-permalink-icon" href="#FF3E3DA1916929C7">¶</a><code class="hdoc-function-code language-cpp"><a href="https://en.cppreference.com/w/cpp/string/basic_string">std::string</a> toString() const</code></pre></h3><p>Declared at: <a class="is-family-code" href="https://github.com/llvm/llvm-project/blob/release/10.x/llvm/include/llvm/Support/VirtualFileSystem.h#L471">llvm/include/llvm/Support/VirtualFileSystem.h:471</a></p><h3 id="75FEA0E03BDEFBB1"><pre class="p-0 hdoc-pre-parent"><a class="hdoc-permalink-icon" href="#75FEA0E03BDEFBB1">¶</a><code class="hdoc-function-code language-cpp">bool useNormalizedPaths() const</code></pre></h3><h4>Description</h4><p>Return true if this file system normalizes . and .. in paths.</p><p>Declared at: <a class="is-family-code" href="https://github.com/llvm/llvm-project/blob/release/10.x/llvm/include/llvm/Support/VirtualFileSystem.h#L474">llvm/include/llvm/Support/VirtualFileSystem.h:474</a></p><h3 id="A081E32B8E257491"><pre class="p-0 hdoc-pre-parent"><a class="hdoc-permalink-icon" href="#A081E32B8E257491">¶</a><code class="hdoc-function-code language-cpp">~InMemoryFileSystem()</code></pre></h3><p>Declared at: <a class="is-family-code" href="https://github.com/llvm/llvm-project/blob/release/10.x/llvm/include/llvm/Support/VirtualFileSystem.h#L431">llvm/include/llvm/Support/VirtualFileSystem.h:431</a></p></main></div></div></div></section></div><footer class="footer"><p>Documentation for LLVM 10.0.0.</p><p>Generated by <a href="https://hdoc.io/">hdoc</a> version 1.4.0-hdocInternal on 2022-12-14T09:44:14 UTC.</p><p class="has-text-grey-light">19AD43E11B2996</p></footer></body></html>