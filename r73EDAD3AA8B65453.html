<!DOCTYPE html><html><head><meta charset="utf-8"></meta><meta content="width=device-width, initial-scale=1" name="viewport"></meta><title>class SampleProfileReaderGCC: LLVM 10.0.0 documentation</title><link href="styles.css" rel="stylesheet"></link><script src="highlight.min.js"></script><script>hljs.highlightAll();</script><link href="katex.min.css" rel="stylesheet"></link><script src="katex.min.js"></script><script src="auto-render.min.js"></script><script>
    document.addEventListener("DOMContentLoaded", function() {
      renderMathInElement(document.body, {
        delimiters: [
          {left: '$$', right: '$$', display: true},
          {left: '$', right: '$', display: false},
        ],
      });
    });
  </script><link href="apple-touch-icon.png" sizes="180x180" rel="apple-touch-icon"></link><link href="favicon-32x32.png" sizes="32x32" type="image/png" rel="icon"></link><link href="favicon-16x16.png" sizes="16x16" type="image/png" rel="icon"></link></head><body><div id="wrapper"><section class="section"><div class="container"><div class="columns"><aside class="column is-one-fifth"><ul class="menu-list"><p class="is-size-4">LLVM 10.0.0</p><p class="menu-label">Navigation</p><li><a href="index.html">Home</a></li><li><a href="search.html">Search</a></li><li><a href="https://github.com/llvm/llvm-project/">Repository</a></li><li><a href="https://hdoc.io">Made with hdoc</a></li><p class="menu-label">API Documentation</p><li><a href="functions.html">Functions</a></li><li><a href="records.html">Records</a></li><li><a href="enums.html">Enums</a></li><li><a href="namespaces.html">Namespaces</a></li></ul></aside><div class="column" style="overflow-x: auto"><nav class="breadcrumb has-arrow-separator" aria-label="breadcrumbs"><ul><li><a href="namespaces.html#00A4DA910CC17C2D"><span>namespace llvm</span></a></li><li><a href="namespaces.html#9F885E681E5C88EE"><span>namespace sampleprof</span></a></li><li class="is-active"><a aria-current="page73EDAD3AA8B65453"><span>class SampleProfileReaderGCC</span></a></li></ul></nav><main class="content"><h1>class SampleProfileReaderGCC</h1><h2>Declaration</h2><pre class="p-0"><code class="hdoc-record-code language-cpp">class SampleProfileReaderGCC : public SampleProfileReader { /* full declaration omitted */ };</code></pre><h2>Description</h2><p>Sample-based profile reader. Each profile contains sample counts for all the functions executed. Inside each function, statements are annotated with the collected samples on all the instructions associated with that statement. For this to produce meaningful data, the program needs to be compiled with some debug information (at minimum, line numbers: -gline-tables-only). Otherwise, it will be impossible to match IR instructions to the line numbers collected by the profiler. From the profile file, we are interested in collecting the following information: * A list of functions included in the profile (mangled names). * For each function F: 1. The total number of samples collected in F. 2. The samples collected at each line in F. To provide some protection against source code shuffling, line numbers should be relative to the start of the function. The reader supports two file formats: text and binary. The text format is useful for debugging and testing, while the binary format is more compact and I/O efficient. They can both be used interchangeably.</p><p>Declared at: <a class="is-family-code" href="https://github.com/llvm/llvm-project/blob/release/10.x/llvm/include/llvm/ProfileData/SampleProfReader.h#L691">llvm/include/llvm/ProfileData/SampleProfReader.h:691</a></p><p>Inherits from: <a href="r083D117B30C9A9CA.html">SampleProfileReader</a></p><h2>Member Variables</h2><dl><dt class="is-family-code" id="var_GcovBuffer">protected  <a href="r9A7E8216A9A705B5.html">llvm::GCOVBuffer</a> <b>GcovBuffer</b></dt><dd>GCOV buffer containing the profile.</dd><dt class="is-family-code" id="var_Names">protected  <a href="https://en.cppreference.com/w/cpp/container/vector">std::vector</a>&lt;std::string&gt; <b>Names</b></dt><dd>Function names in this profile.</dd><dt class="is-family-code" id="var_GCOVTagAFDOFileNames">protected static  const uint32_t <b>GCOVTagAFDOFileNames</b> = 2852126720U</dt><dd>GCOV tags used to separate sections in the profile file.</dd><dt class="is-family-code" id="var_GCOVTagAFDOFunction">protected static  const uint32_t <b>GCOVTagAFDOFunction</b> = 2885681152U</dt></dl><p>Inherited from <a href="r083D117B30C9A9CA.html">SampleProfileReader</a>:</p><dl><dt class="is-family-code"><a href="r083D117B30C9A9CA.html#var_Profiles">protected <b>Profiles</b></a></dt><dt class="is-family-code"><a href="r083D117B30C9A9CA.html#var_Ctx">protected <b>Ctx</b></a></dt><dt class="is-family-code"><a href="r083D117B30C9A9CA.html#var_Buffer">protected <b>Buffer</b></a></dt><dt class="is-family-code"><a href="r083D117B30C9A9CA.html#var_Summary">protected <b>Summary</b></a></dt><dt class="is-family-code"><a href="r083D117B30C9A9CA.html#var_Remapper">protected <b>Remapper</b></a></dt><dt class="is-family-code"><a href="r083D117B30C9A9CA.html#var_Format">protected <b>Format</b></a> = SPF_None</dt></dl><h2>Method Overview</h2><ul><li class="is-family-code">public  <a href="#FD5FC97C51DF1E8B"><b>SampleProfileReaderGCC</b></a>(std::unique_ptr&lt;MemoryBuffer&gt; B, llvm::LLVMContext &amp; C)</li><li class="is-family-code">public static bool  <a href="#23461BE97C80AD16"><b>hasFormat</b></a>(const llvm::MemoryBuffer &amp; Buffer)</li><li class="is-family-code">protected std::error_code  <a href="#A64634F934983B34"><b>readFunctionProfiles</b></a>()</li><li class="is-family-code">public std::error_code  <a href="#88DB7D8715B15098"><b>readHeader</b></a>()</li><li class="is-family-code">public std::error_code  <a href="#21F60AA6534CD53C"><b>readImpl</b></a>()</li><li class="is-family-code">protected std::error_code  <a href="#9248FEDA621B91CF"><b>readNameTable</b></a>()</li><li class="is-family-code">protected template &lt;typename T&gt;ErrorOr&lt;T&gt;  <a href="#C182521B3D0EFEE4"><b>readNumber</b></a>()</li><li class="is-family-code">protected std::error_code  <a href="#A024DB87958C940A"><b>readOneFunctionProfile</b></a>(const llvm::sampleprof::InlineCallStack &amp; InlineStack, bool Update, uint32_t Offset)</li><li class="is-family-code">protected std::error_code  <a href="#B4FA542490C221C9"><b>readSectionTag</b></a>(uint32_t Expected)</li><li class="is-family-code">protected ErrorOr&lt;llvm::StringRef&gt;  <a href="#3263C28DD0121CF6"><b>readString</b></a>()</li><li class="is-family-code">protected std::error_code  <a href="#46571E39B03A2594"><b>skipNextWord</b></a>()</li></ul><p>Inherited from <a href="r083D117B30C9A9CA.html">SampleProfileReader</a>:</p><ul><li class="is-family-code"><a href="r083D117B30C9A9CA.html#C2D62FA9142F952F">public <b>collectFuncsFrom</b></a></li><li class="is-family-code"><a href="r083D117B30C9A9CA.html#BE6693C7E1A603E3">protected <b>computeSummary</b></a></li><li class="is-family-code"><a href="r083D117B30C9A9CA.html#AD1D27D05DC0B3D3">public <b>create</b></a></li><li class="is-family-code"><a href="r083D117B30C9A9CA.html#91368375C709FC78">public <b>create</b></a></li><li class="is-family-code"><a href="r083D117B30C9A9CA.html#90FD6D454B6A01CA">public <b>dump</b></a></li><li class="is-family-code"><a href="r083D117B30C9A9CA.html#764EAB5EBE1293A9">public <b>dumpFunctionProfile</b></a></li><li class="is-family-code"><a href="r083D117B30C9A9CA.html#065476C0F72F53CE">public <b>dumpSectionInfo</b></a></li><li class="is-family-code"><a href="r083D117B30C9A9CA.html#95C0E8D8D38CD14E">public <b>getBuffer</b></a></li><li class="is-family-code"><a href="r083D117B30C9A9CA.html#D5080D6C6B56A3C9">public <b>getFormat</b></a></li><li class="is-family-code"><a href="r083D117B30C9A9CA.html#AAB87FFDA49B7614">public <b>getNameTable</b></a></li><li class="is-family-code"><a href="r083D117B30C9A9CA.html#4E73C7A91D32B93C">public <b>getOrCreateSamplesFor</b></a></li><li class="is-family-code"><a href="r083D117B30C9A9CA.html#9F3B61F25BD1A8F2">public <b>getProfileSymbolList</b></a></li><li class="is-family-code"><a href="r083D117B30C9A9CA.html#DEFDE17DBF5C1783">public <b>getProfiles</b></a></li><li class="is-family-code"><a href="r083D117B30C9A9CA.html#EC3CFE7105031B18">public <b>getSamplesFor</b></a></li><li class="is-family-code"><a href="r083D117B30C9A9CA.html#83DC29D22713674D">public <b>getSamplesFor</b></a></li><li class="is-family-code"><a href="r083D117B30C9A9CA.html#83D5B331AFE57B45">public <b>getSummary</b></a></li><li class="is-family-code"><a href="r083D117B30C9A9CA.html#D12B5A589BAB230A">public <b>read</b></a></li><li class="is-family-code"><a href="r083D117B30C9A9CA.html#85975E3A89FE0CBF">public <b>readHeader</b></a></li><li class="is-family-code"><a href="r083D117B30C9A9CA.html#D16245A7852645A7">public <b>readImpl</b></a></li><li class="is-family-code"><a href="r083D117B30C9A9CA.html#CEF45989C3A14DF2">public <b>reportError</b></a></li><li class="is-family-code"><a href="r083D117B30C9A9CA.html#42FCD96F278CB921">protected <b>takeSummary</b></a></li></ul><h2>Methods</h2><h3 id="FD5FC97C51DF1E8B"><pre class="p-0 hdoc-pre-parent"><a class="hdoc-permalink-icon" href="#FD5FC97C51DF1E8B">Â¶</a><code class="hdoc-function-code language-cpp">SampleProfileReaderGCC(
    <a href="https://en.cppreference.com/w/cpp/memory/unique_ptr">std::unique_ptr</a>&lt;MemoryBuffer&gt; B,
    <a href="rB8F46D3CD599E2BD.html">llvm::LLVMContext</a>&amp; C)</code></pre></h3><p>Declared at: <a class="is-family-code" href="https://github.com/llvm/llvm-project/blob/release/10.x/llvm/include/llvm/ProfileData/SampleProfReader.h#L693">llvm/include/llvm/ProfileData/SampleProfReader.h:693</a></p><h4>Parameters</h4><dl><dt class="is-family-code"><a href="https://en.cppreference.com/w/cpp/memory/unique_ptr">std::unique_ptr</a>&lt;MemoryBuffer&gt;<b> B</b></dt><dt class="is-family-code"><a href="rB8F46D3CD599E2BD.html">llvm::LLVMContext</a>&amp;<b> C</b></dt></dl><h3 id="23461BE97C80AD16"><pre class="p-0 hdoc-pre-parent"><a class="hdoc-permalink-icon" href="#23461BE97C80AD16">Â¶</a><code class="hdoc-function-code language-cpp">static bool hasFormat(
    const <a href="r76C29145F861F747.html">llvm::MemoryBuffer</a>&amp; Buffer)</code></pre></h3><h4>Description</h4><p>Return true if \p Buffer is in the format supported by this class.</p><p>Declared at: <a class="is-family-code" href="https://github.com/llvm/llvm-project/blob/release/10.x/llvm/include/llvm/ProfileData/SampleProfReader.h#L704">llvm/include/llvm/ProfileData/SampleProfReader.h:704</a></p><h4>Parameters</h4><dl><dt class="is-family-code">const <a href="r76C29145F861F747.html">llvm::MemoryBuffer</a>&amp;<b> Buffer</b></dt></dl><h3 id="A64634F934983B34"><pre class="p-0 hdoc-pre-parent"><a class="hdoc-permalink-icon" href="#A64634F934983B34">Â¶</a><code class="hdoc-function-code language-cpp"><a href="https://en.cppreference.com/w/cpp/error/error_code">std::error_code</a> readFunctionProfiles()</code></pre></h3><p>Declared at: <a class="is-family-code" href="https://github.com/llvm/llvm-project/blob/release/10.x/llvm/include/llvm/ProfileData/SampleProfReader.h#L710">llvm/include/llvm/ProfileData/SampleProfReader.h:710</a></p><h3 id="88DB7D8715B15098"><pre class="p-0 hdoc-pre-parent"><a class="hdoc-permalink-icon" href="#88DB7D8715B15098">Â¶</a><code class="hdoc-function-code language-cpp"><a href="https://en.cppreference.com/w/cpp/error/error_code">std::error_code</a> readHeader()</code></pre></h3><h4>Description</h4><p>Read and validate the file header.</p><p>Declared at: <a class="is-family-code" href="https://github.com/llvm/llvm-project/blob/release/10.x/llvm/include/llvm/ProfileData/SampleProfReader.h#L698">llvm/include/llvm/ProfileData/SampleProfReader.h:698</a></p><h3 id="21F60AA6534CD53C"><pre class="p-0 hdoc-pre-parent"><a class="hdoc-permalink-icon" href="#21F60AA6534CD53C">Â¶</a><code class="hdoc-function-code language-cpp"><a href="https://en.cppreference.com/w/cpp/error/error_code">std::error_code</a> readImpl()</code></pre></h3><h4>Description</h4><p>Read sample profiles from the associated file.</p><p>Declared at: <a class="is-family-code" href="https://github.com/llvm/llvm-project/blob/release/10.x/llvm/include/llvm/ProfileData/SampleProfReader.h#L701">llvm/include/llvm/ProfileData/SampleProfReader.h:701</a></p><h3 id="9248FEDA621B91CF"><pre class="p-0 hdoc-pre-parent"><a class="hdoc-permalink-icon" href="#9248FEDA621B91CF">Â¶</a><code class="hdoc-function-code language-cpp"><a href="https://en.cppreference.com/w/cpp/error/error_code">std::error_code</a> readNameTable()</code></pre></h3><p>Declared at: <a class="is-family-code" href="https://github.com/llvm/llvm-project/blob/release/10.x/llvm/include/llvm/ProfileData/SampleProfReader.h#L707">llvm/include/llvm/ProfileData/SampleProfReader.h:707</a></p><h3 id="C182521B3D0EFEE4"><pre class="p-0 hdoc-pre-parent"><a class="hdoc-permalink-icon" href="#C182521B3D0EFEE4">Â¶</a><code class="hdoc-function-code language-cpp">template &lt;typename T&gt;
ErrorOr&lt;T&gt; readNumber()</code></pre></h3><p>Declared at: <a class="is-family-code" href="https://github.com/llvm/llvm-project/blob/release/10.x/llvm/include/llvm/ProfileData/SampleProfReader.h#L712">llvm/include/llvm/ProfileData/SampleProfReader.h:712</a></p><h4>Templates</h4><dl><dt class="is-family-code"><b> T</b></dt></dl><h3 id="A024DB87958C940A"><pre class="p-0 hdoc-pre-parent"><a class="hdoc-permalink-icon" href="#A024DB87958C940A">Â¶</a><code class="hdoc-function-code language-cpp"><a href="https://en.cppreference.com/w/cpp/error/error_code">std::error_code</a> readOneFunctionProfile(
    const <a href="r62CD0592E97953B6.html">llvm::sampleprof::InlineCallStack</a>&amp;
        InlineStack,
    bool Update,
    uint32_t Offset)</code></pre></h3><p>Declared at: <a class="is-family-code" href="https://github.com/llvm/llvm-project/blob/release/10.x/llvm/include/llvm/ProfileData/SampleProfReader.h#L708">llvm/include/llvm/ProfileData/SampleProfReader.h:708</a></p><h4>Parameters</h4><dl><dt class="is-family-code">const <a href="r62CD0592E97953B6.html">llvm::sampleprof::InlineCallStack</a>&amp;<b> InlineStack</b></dt><dt class="is-family-code">bool<b> Update</b></dt><dt class="is-family-code">uint32_t<b> Offset</b></dt></dl><h3 id="B4FA542490C221C9"><pre class="p-0 hdoc-pre-parent"><a class="hdoc-permalink-icon" href="#B4FA542490C221C9">Â¶</a><code class="hdoc-function-code language-cpp"><a href="https://en.cppreference.com/w/cpp/error/error_code">std::error_code</a> readSectionTag(uint32_t Expected)</code></pre></h3><h4>Description</h4><p>Read the section tag and check that it&apos;s the same as \p Expected.</p><p>Declared at: <a class="is-family-code" href="https://github.com/llvm/llvm-project/blob/release/10.x/llvm/include/llvm/ProfileData/SampleProfReader.h#L716">llvm/include/llvm/ProfileData/SampleProfReader.h:716</a></p><h4>Parameters</h4><dl><dt class="is-family-code">uint32_t<b> Expected</b></dt></dl><h3 id="3263C28DD0121CF6"><pre class="p-0 hdoc-pre-parent"><a class="hdoc-permalink-icon" href="#3263C28DD0121CF6">Â¶</a><code class="hdoc-function-code language-cpp"><a href="rD60C34ED5A112927.html">ErrorOr</a>&lt;llvm::StringRef&gt; readString()</code></pre></h3><p>Declared at: <a class="is-family-code" href="https://github.com/llvm/llvm-project/blob/release/10.x/llvm/include/llvm/ProfileData/SampleProfReader.h#L713">llvm/include/llvm/ProfileData/SampleProfReader.h:713</a></p><h3 id="46571E39B03A2594"><pre class="p-0 hdoc-pre-parent"><a class="hdoc-permalink-icon" href="#46571E39B03A2594">Â¶</a><code class="hdoc-function-code language-cpp"><a href="https://en.cppreference.com/w/cpp/error/error_code">std::error_code</a> skipNextWord()</code></pre></h3><p>Declared at: <a class="is-family-code" href="https://github.com/llvm/llvm-project/blob/release/10.x/llvm/include/llvm/ProfileData/SampleProfReader.h#L711">llvm/include/llvm/ProfileData/SampleProfReader.h:711</a></p></main></div></div></div></section></div><footer class="footer"><p>Documentation for LLVM 10.0.0.</p><p>Generated by <a href="https://hdoc.io/">hdoc</a> version 1.4.0-hdocInternal on 2022-12-14T09:44:14 UTC.</p><p class="has-text-grey-light">19AD43E11B2996</p></footer></body></html>