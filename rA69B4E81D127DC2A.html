<!DOCTYPE html><html><head><meta charset="utf-8"></meta><meta content="width=device-width, initial-scale=1" name="viewport"></meta><title>class SampleProfileReaderCompactBinary: LLVM 10.0.0 documentation</title><link href="styles.css" rel="stylesheet"></link><script src="highlight.min.js"></script><script>hljs.highlightAll();</script><link href="katex.min.css" rel="stylesheet"></link><script src="katex.min.js"></script><script src="auto-render.min.js"></script><script>
    document.addEventListener("DOMContentLoaded", function() {
      renderMathInElement(document.body, {
        delimiters: [
          {left: '$$', right: '$$', display: true},
          {left: '$', right: '$', display: false},
        ],
      });
    });
  </script><link href="apple-touch-icon.png" sizes="180x180" rel="apple-touch-icon"></link><link href="favicon-32x32.png" sizes="32x32" type="image/png" rel="icon"></link><link href="favicon-16x16.png" sizes="16x16" type="image/png" rel="icon"></link></head><body><div id="wrapper"><section class="section"><div class="container"><div class="columns"><aside class="column is-one-fifth"><ul class="menu-list"><p class="is-size-4">LLVM 10.0.0</p><p class="menu-label">Navigation</p><li><a href="index.html">Home</a></li><li><a href="search.html">Search</a></li><li><a href="https://github.com/llvm/llvm-project/">Repository</a></li><li><a href="https://hdoc.io">Made with hdoc</a></li><p class="menu-label">API Documentation</p><li><a href="functions.html">Functions</a></li><li><a href="records.html">Records</a></li><li><a href="enums.html">Enums</a></li><li><a href="namespaces.html">Namespaces</a></li></ul></aside><div class="column" style="overflow-x: auto"><nav class="breadcrumb has-arrow-separator" aria-label="breadcrumbs"><ul><li><a href="namespaces.html#00A4DA910CC17C2D"><span>namespace llvm</span></a></li><li><a href="namespaces.html#9F885E681E5C88EE"><span>namespace sampleprof</span></a></li><li class="is-active"><a aria-current="pageA69B4E81D127DC2A"><span>class SampleProfileReaderCompactBinary</span></a></li></ul></nav><main class="content"><h1>class SampleProfileReaderCompactBinary</h1><h2>Declaration</h2><pre class="p-0"><code class="hdoc-record-code language-cpp">class SampleProfileReaderCompactBinary
    : public SampleProfileReaderBinary { /* full declaration omitted */ };</code></pre><h2>Description</h2><p>Sample-based profile reader. Each profile contains sample counts for all the functions executed. Inside each function, statements are annotated with the collected samples on all the instructions associated with that statement. For this to produce meaningful data, the program needs to be compiled with some debug information (at minimum, line numbers: -gline-tables-only). Otherwise, it will be impossible to match IR instructions to the line numbers collected by the profiler. From the profile file, we are interested in collecting the following information: * A list of functions included in the profile (mangled names). * For each function F: 1. The total number of samples collected in F. 2. The samples collected at each line in F. To provide some protection against source code shuffling, line numbers should be relative to the start of the function. The reader supports two file formats: text and binary. The text format is useful for debugging and testing, while the binary format is more compact and I/O efficient. They can both be used interchangeably.</p><p>Declared at: <a class="is-family-code" href="https://github.com/llvm/llvm-project/blob/release/10.x/llvm/include/llvm/ProfileData/SampleProfReader.h#L643">llvm/include/llvm/ProfileData/SampleProfReader.h:643</a></p><p>Inherits from: <a href="rB586D9ABAB0CE7CF.html">SampleProfileReaderBinary</a></p><h2>Member Variables</h2><p>Inherited from <a href="rB586D9ABAB0CE7CF.html">SampleProfileReaderBinary</a>:</p><dl><dt class="is-family-code"><a href="rB586D9ABAB0CE7CF.html#var_Data">protected <b>Data</b></a> = nullptr</dt><dt class="is-family-code"><a href="rB586D9ABAB0CE7CF.html#var_End">protected <b>End</b></a> = nullptr</dt><dt class="is-family-code"><a href="rB586D9ABAB0CE7CF.html#var_NameTable">protected <b>NameTable</b></a></dt></dl><p>Inherited from <a href="r083D117B30C9A9CA.html">SampleProfileReader</a>:</p><dl><dt class="is-family-code"><a href="r083D117B30C9A9CA.html#var_Profiles">protected <b>Profiles</b></a></dt><dt class="is-family-code"><a href="r083D117B30C9A9CA.html#var_Ctx">protected <b>Ctx</b></a></dt><dt class="is-family-code"><a href="r083D117B30C9A9CA.html#var_Buffer">protected <b>Buffer</b></a></dt><dt class="is-family-code"><a href="r083D117B30C9A9CA.html#var_Summary">protected <b>Summary</b></a></dt><dt class="is-family-code"><a href="r083D117B30C9A9CA.html#var_Remapper">protected <b>Remapper</b></a></dt><dt class="is-family-code"><a href="r083D117B30C9A9CA.html#var_Format">protected <b>Format</b></a> = SPF_None</dt></dl><h2>Method Overview</h2><ul><li class="is-family-code">public  <a href="#12EB0C25135058DB"><b>SampleProfileReaderCompactBinary</b></a>(std::unique_ptr&lt;MemoryBuffer&gt; B, llvm::LLVMContext &amp; C)</li><li class="is-family-code">public void  <a href="#73B3B5EB73E759C8"><b>collectFuncsFrom</b></a>(const llvm::Module &amp; M)</li><li class="is-family-code">public static bool  <a href="#BBA653506019FB67"><b>hasFormat</b></a>(const llvm::MemoryBuffer &amp; Buffer)</li><li class="is-family-code">public std::error_code  <a href="#D6F0CBE060D74238"><b>readImpl</b></a>()</li></ul><p>Inherited from <a href="rB586D9ABAB0CE7CF.html">SampleProfileReaderBinary</a>:</p><ul><li class="is-family-code"><a href="rB586D9ABAB0CE7CF.html#DCEE2903FBA1E3B8">protected <b>at_eof</b></a></li><li class="is-family-code"><a href="rB586D9ABAB0CE7CF.html#973ADA4B18473A4A">public <b>getNameTable</b></a></li><li class="is-family-code"><a href="rB586D9ABAB0CE7CF.html#EADB25CDCADED411">protected <b>readFuncProfile</b></a></li><li class="is-family-code"><a href="rB586D9ABAB0CE7CF.html#066E2C3FC5C24BC3">public <b>readHeader</b></a></li><li class="is-family-code"><a href="rB586D9ABAB0CE7CF.html#87F3BACB9971FC19">public <b>readImpl</b></a></li><li class="is-family-code"><a href="rB586D9ABAB0CE7CF.html#BBC7C596D5443EA4">protected <b>readMagicIdent</b></a></li><li class="is-family-code"><a href="rB586D9ABAB0CE7CF.html#982AB04AE24EE73A">protected <b>readNameTable</b></a></li><li class="is-family-code"><a href="rB586D9ABAB0CE7CF.html#E27B8DDF4E268646">protected <b>readNumber</b></a></li><li class="is-family-code"><a href="rB586D9ABAB0CE7CF.html#4837EC0CF1B49EA4">protected <b>readProfile</b></a></li><li class="is-family-code"><a href="rB586D9ABAB0CE7CF.html#C1BC3BEC28C03F06">protected <b>readString</b></a></li><li class="is-family-code"><a href="rB586D9ABAB0CE7CF.html#4CEE879EA321ECDA">protected <b>readStringFromTable</b></a></li><li class="is-family-code"><a href="rB586D9ABAB0CE7CF.html#F710D9F1A0510637">protected <b>readStringIndex</b></a></li><li class="is-family-code"><a href="rB586D9ABAB0CE7CF.html#9214B46A860DE566">protected <b>readSummary</b></a></li><li class="is-family-code"><a href="rB586D9ABAB0CE7CF.html#0E2E70F3E29A6455">protected <b>readUnencodedNumber</b></a></li></ul><p>Inherited from <a href="r083D117B30C9A9CA.html">SampleProfileReader</a>:</p><ul><li class="is-family-code"><a href="r083D117B30C9A9CA.html#C2D62FA9142F952F">public <b>collectFuncsFrom</b></a></li><li class="is-family-code"><a href="r083D117B30C9A9CA.html#BE6693C7E1A603E3">protected <b>computeSummary</b></a></li><li class="is-family-code"><a href="r083D117B30C9A9CA.html#AD1D27D05DC0B3D3">public <b>create</b></a></li><li class="is-family-code"><a href="r083D117B30C9A9CA.html#91368375C709FC78">public <b>create</b></a></li><li class="is-family-code"><a href="r083D117B30C9A9CA.html#90FD6D454B6A01CA">public <b>dump</b></a></li><li class="is-family-code"><a href="r083D117B30C9A9CA.html#764EAB5EBE1293A9">public <b>dumpFunctionProfile</b></a></li><li class="is-family-code"><a href="r083D117B30C9A9CA.html#065476C0F72F53CE">public <b>dumpSectionInfo</b></a></li><li class="is-family-code"><a href="r083D117B30C9A9CA.html#95C0E8D8D38CD14E">public <b>getBuffer</b></a></li><li class="is-family-code"><a href="r083D117B30C9A9CA.html#D5080D6C6B56A3C9">public <b>getFormat</b></a></li><li class="is-family-code"><a href="r083D117B30C9A9CA.html#AAB87FFDA49B7614">public <b>getNameTable</b></a></li><li class="is-family-code"><a href="r083D117B30C9A9CA.html#4E73C7A91D32B93C">public <b>getOrCreateSamplesFor</b></a></li><li class="is-family-code"><a href="r083D117B30C9A9CA.html#9F3B61F25BD1A8F2">public <b>getProfileSymbolList</b></a></li><li class="is-family-code"><a href="r083D117B30C9A9CA.html#DEFDE17DBF5C1783">public <b>getProfiles</b></a></li><li class="is-family-code"><a href="r083D117B30C9A9CA.html#EC3CFE7105031B18">public <b>getSamplesFor</b></a></li><li class="is-family-code"><a href="r083D117B30C9A9CA.html#83DC29D22713674D">public <b>getSamplesFor</b></a></li><li class="is-family-code"><a href="r083D117B30C9A9CA.html#83D5B331AFE57B45">public <b>getSummary</b></a></li><li class="is-family-code"><a href="r083D117B30C9A9CA.html#D12B5A589BAB230A">public <b>read</b></a></li><li class="is-family-code"><a href="r083D117B30C9A9CA.html#85975E3A89FE0CBF">public <b>readHeader</b></a></li><li class="is-family-code"><a href="r083D117B30C9A9CA.html#D16245A7852645A7">public <b>readImpl</b></a></li><li class="is-family-code"><a href="r083D117B30C9A9CA.html#CEF45989C3A14DF2">public <b>reportError</b></a></li><li class="is-family-code"><a href="r083D117B30C9A9CA.html#42FCD96F278CB921">protected <b>takeSummary</b></a></li></ul><h2>Methods</h2><h3 id="12EB0C25135058DB"><pre class="p-0 hdoc-pre-parent"><a class="hdoc-permalink-icon" href="#12EB0C25135058DB">Â¶</a><code class="hdoc-function-code language-cpp">SampleProfileReaderCompactBinary(
    <a href="https://en.cppreference.com/w/cpp/memory/unique_ptr">std::unique_ptr</a>&lt;MemoryBuffer&gt; B,
    <a href="rB8F46D3CD599E2BD.html">llvm::LLVMContext</a>&amp; C)</code></pre></h3><p>Declared at: <a class="is-family-code" href="https://github.com/llvm/llvm-project/blob/release/10.x/llvm/include/llvm/ProfileData/SampleProfReader.h#L662">llvm/include/llvm/ProfileData/SampleProfReader.h:662</a></p><h4>Parameters</h4><dl><dt class="is-family-code"><a href="https://en.cppreference.com/w/cpp/memory/unique_ptr">std::unique_ptr</a>&lt;MemoryBuffer&gt;<b> B</b></dt><dt class="is-family-code"><a href="rB8F46D3CD599E2BD.html">llvm::LLVMContext</a>&amp;<b> C</b></dt></dl><h3 id="73B3B5EB73E759C8"><pre class="p-0 hdoc-pre-parent"><a class="hdoc-permalink-icon" href="#73B3B5EB73E759C8">Â¶</a><code class="hdoc-function-code language-cpp">void collectFuncsFrom(const <a href="r1428BC327E1751C3.html">llvm::Module</a>&amp; M)</code></pre></h3><h4>Description</h4><p>Collect functions to be used when compiling Module \p M.</p><p>Declared at: <a class="is-family-code" href="https://github.com/llvm/llvm-project/blob/release/10.x/llvm/include/llvm/ProfileData/SampleProfReader.h#L673">llvm/include/llvm/ProfileData/SampleProfReader.h:673</a></p><h4>Parameters</h4><dl><dt class="is-family-code">const <a href="r1428BC327E1751C3.html">llvm::Module</a>&amp;<b> M</b></dt></dl><h3 id="BBA653506019FB67"><pre class="p-0 hdoc-pre-parent"><a class="hdoc-permalink-icon" href="#BBA653506019FB67">Â¶</a><code class="hdoc-function-code language-cpp">static bool hasFormat(
    const <a href="r76C29145F861F747.html">llvm::MemoryBuffer</a>&amp; Buffer)</code></pre></h3><h4>Description</h4><p>Return true if \p Buffer is in the format supported by this class.</p><p>Declared at: <a class="is-family-code" href="https://github.com/llvm/llvm-project/blob/release/10.x/llvm/include/llvm/ProfileData/SampleProfReader.h#L667">llvm/include/llvm/ProfileData/SampleProfReader.h:667</a></p><h4>Parameters</h4><dl><dt class="is-family-code">const <a href="r76C29145F861F747.html">llvm::MemoryBuffer</a>&amp;<b> Buffer</b></dt></dl><h3 id="D6F0CBE060D74238"><pre class="p-0 hdoc-pre-parent"><a class="hdoc-permalink-icon" href="#D6F0CBE060D74238">Â¶</a><code class="hdoc-function-code language-cpp"><a href="https://en.cppreference.com/w/cpp/error/error_code">std::error_code</a> readImpl()</code></pre></h3><h4>Description</h4><p>Read samples only for functions to use.</p><p>Declared at: <a class="is-family-code" href="https://github.com/llvm/llvm-project/blob/release/10.x/llvm/include/llvm/ProfileData/SampleProfReader.h#L670">llvm/include/llvm/ProfileData/SampleProfReader.h:670</a></p></main></div></div></div></section></div><footer class="footer"><p>Documentation for LLVM 10.0.0.</p><p>Generated by <a href="https://hdoc.io/">hdoc</a> version 1.4.0-hdocInternal on 2022-12-14T09:44:14 UTC.</p><p class="has-text-grey-light">19AD43E11B2996</p></footer></body></html>