<!DOCTYPE html><html><head><meta charset="utf-8"></meta><meta content="width=device-width, initial-scale=1" name="viewport"></meta><title>class GsymCreator: LLVM 10.0.0 documentation</title><link href="styles.css" rel="stylesheet"></link><script src="highlight.min.js"></script><script>hljs.highlightAll();</script><link href="katex.min.css" rel="stylesheet"></link><script src="katex.min.js"></script><script src="auto-render.min.js"></script><script>
    document.addEventListener("DOMContentLoaded", function() {
      renderMathInElement(document.body, {
        delimiters: [
          {left: '$$', right: '$$', display: true},
          {left: '$', right: '$', display: false},
        ],
      });
    });
  </script><link href="apple-touch-icon.png" sizes="180x180" rel="apple-touch-icon"></link><link href="favicon-32x32.png" sizes="32x32" type="image/png" rel="icon"></link><link href="favicon-16x16.png" sizes="16x16" type="image/png" rel="icon"></link></head><body><div id="wrapper"><section class="section"><div class="container"><div class="columns"><aside class="column is-one-fifth"><ul class="menu-list"><p class="is-size-4">LLVM 10.0.0</p><p class="menu-label">Navigation</p><li><a href="index.html">Home</a></li><li><a href="search.html">Search</a></li><li><a href="https://github.com/llvm/llvm-project/">Repository</a></li><li><a href="https://hdoc.io">Made with hdoc</a></li><p class="menu-label">API Documentation</p><li><a href="functions.html">Functions</a></li><li><a href="records.html">Records</a></li><li><a href="enums.html">Enums</a></li><li><a href="namespaces.html">Namespaces</a></li></ul></aside><div class="column" style="overflow-x: auto"><nav class="breadcrumb has-arrow-separator" aria-label="breadcrumbs"><ul><li><a href="namespaces.html#00A4DA910CC17C2D"><span>namespace llvm</span></a></li><li><a href="namespaces.html#BF3258AEA677DB5D"><span>namespace gsym</span></a></li><li class="is-active"><a aria-current="page46AF3F0DC5E0AF86"><span>class GsymCreator</span></a></li></ul></nav><main class="content"><h1>class GsymCreator</h1><h2>Declaration</h2><pre class="p-0"><code class="hdoc-record-code language-cpp">class GsymCreator { /* full declaration omitted */ };</code></pre><h2>Description</h2><p>GsymCreator is used to emit GSYM data to a stand alone file or section within a file. The GsymCreator is designed to be used in 3 stages: - Create FunctionInfo objects and add them - Finalize the GsymCreator object - Save to file or section The first stage involves creating FunctionInfo objects from another source of information like compiler debug info metadata, DWARF or Breakpad files. Any strings in the FunctionInfo or contained information, like InlineInfo or LineTable objects, should get the string table offsets by calling GsymCreator::insertString(...). Any file indexes that are needed should be obtained by calling GsymCreator::insertFile(...). All of the function calls in GsymCreator are thread safe. This allows multiple threads to create and add FunctionInfo objects while parsing debug information. Once all of the FunctionInfo objects have been added, the GsymCreator::finalize(...) must be called prior to saving. This function will sort the FunctionInfo objects, finalize the string table, and do any other passes on the information needed to prepare the information to be saved. Once the object has been finalized, it can be saved to a file or section. ENCODING GSYM files are designed to be memory mapped into a process as shared, read only data, and used as is. The GSYM file format when in a stand alone file consists of: - Header - Address Table - Function Info Offsets - File Table - String Table - Function Info Data HEADER The header is fully described in &quot;llvm/DebugInfo/GSYM/Header.h&quot;. ADDRESS TABLE The address table immediately follows the header in the file and consists of Header.NumAddresses address offsets. These offsets are sorted and can be binary searched for efficient lookups. Addresses in the address table are stored as offsets from a 64 bit base address found in Header.BaseAddress. This allows the address table to contain 8, 16, or 32 offsets. This allows the address table to not require full 64 bit addresses for each address. The resulting GSYM size is smaller and causes fewer pages to be touched during address lookups when the address table is smaller. The size of the address offsets in the address table is specified in the header in Header.AddrOffSize. The first offset in the address table is aligned to Header.AddrOffSize alignment to ensure efficient access when loaded into memory. FUNCTION INFO OFFSETS TABLE The function info offsets table immediately follows the address table and consists of Header.NumAddresses 32 bit file offsets: one for each address in the address table. This data is aligned to a 4 byte boundary. The offsets in this table are the relative offsets from the start offset of the GSYM header and point to the function info data for each address in the address table. Keeping this data separate from the address table helps to reduce the number of pages that are touched when address lookups occur on a GSYM file. FILE TABLE The file table immediately follows the function info offsets table. The encoding of the FileTable is: struct FileTable { uint32_t Count; FileEntry Files[]; }; The file table starts with a 32 bit count of the number of files that are used in all of the function info, followed by that number of FileEntry structures. The file table is aligned to a 4 byte boundary, Each file in the file table is represented with a FileEntry structure. See &quot;llvm/DebugInfo/GSYM/FileEntry.h&quot; for details. STRING TABLE The string table follows the file table in stand alone GSYM files and contains all strings for everything contained in the GSYM file. Any string data should be added to the string table and any references to strings inside GSYM information must be stored as 32 bit string table offsets into this string table. The string table always starts with an empty string at offset zero and is followed by any strings needed by the GSYM information. The start of the string table is not aligned to any boundary. FUNCTION INFO DATA The function info data is the payload that contains information about the address that is being looked up. It contains all of the encoded FunctionInfo objects. Each encoded FunctionInfo&apos;s data is pointed to by an entry in the Function Info Offsets Table. For details on the exact encoding of FunctionInfo objects, see &quot;llvm/DebugInfo/GSYM/FunctionInfo.h&quot;.</p><p>Declared at: <a class="is-family-code" href="https://github.com/llvm/llvm-project/blob/release/10.x/llvm/include/llvm/DebugInfo/GSYM/GsymCreator.h#L133">llvm/include/llvm/DebugInfo/GSYM/GsymCreator.h:133</a></p><h2>Method Overview</h2><ul><li class="is-family-code">public  <a href="#029FB1035A708240"><b>GsymCreator</b></a>()</li><li class="is-family-code">public void  <a href="#CF026338C37EBC45"><b>addFunctionInfo</b></a>(llvm::gsym::FunctionInfo &amp;&amp; FI)</li><li class="is-family-code">public llvm::Error  <a href="#25A7D190ABF83C61"><b>encode</b></a>(llvm::gsym::FileWriter &amp; O) const</li><li class="is-family-code">public llvm::Error  <a href="#59F891B9C0889ACB"><b>finalize</b></a>(llvm::raw_ostream &amp; OS)</li><li class="is-family-code">public void  <a href="#FFAF6B39F8224BC2"><b>forEachFunctionInfo</b></a>(const std::function&lt;bool (FunctionInfo &amp;)&gt; &amp; Callback)</li><li class="is-family-code">public void  <a href="#494186230EE84080"><b>forEachFunctionInfo</b></a>(const std::function&lt;bool (const FunctionInfo &amp;)&gt; &amp; Callback) const</li><li class="is-family-code">public uint32_t  <a href="#EF30FA245CD46433"><b>insertFile</b></a>(llvm::StringRef Path, sys::path::Style Style = sys::path::Style::native)</li><li class="is-family-code">public uint32_t  <a href="#430CF0B1AA7CB388"><b>insertString</b></a>(llvm::StringRef S)</li><li class="is-family-code">public llvm::Error  <a href="#A9B2BCE6576A7C80"><b>save</b></a>(llvm::StringRef Path, llvm::support::endianness ByteOrder) const</li><li class="is-family-code">public void  <a href="#22D5F28848D77D8C"><b>setUUID</b></a>(llvm::ArrayRef&lt;uint8_t&gt; UUIDBytes)</li></ul><h2>Methods</h2><h3 id="029FB1035A708240"><pre class="p-0 hdoc-pre-parent"><a class="hdoc-permalink-icon" href="#029FB1035A708240">¶</a><code class="hdoc-function-code language-cpp">GsymCreator()</code></pre></h3><p>Declared at: <a class="is-family-code" href="https://github.com/llvm/llvm-project/blob/release/10.x/llvm/include/llvm/DebugInfo/GSYM/GsymCreator.h#L145">llvm/include/llvm/DebugInfo/GSYM/GsymCreator.h:145</a></p><h3 id="CF026338C37EBC45"><pre class="p-0 hdoc-pre-parent"><a class="hdoc-permalink-icon" href="#CF026338C37EBC45">¶</a><code class="hdoc-function-code language-cpp">void addFunctionInfo(
    <a href="r90D903A8E089D92B.html">llvm::gsym::FunctionInfo</a>&amp;&amp; FI)</code></pre></h3><h4>Description</h4><p>Add a function info to this GSYM creator. All information in the FunctionInfo object must use the GsymCreator::insertString(...) function when creating string table offsets for names and other strings.</p><p>Declared at: <a class="is-family-code" href="https://github.com/llvm/llvm-project/blob/release/10.x/llvm/include/llvm/DebugInfo/GSYM/GsymCreator.h#L190">llvm/include/llvm/DebugInfo/GSYM/GsymCreator.h:190</a></p><h4>Parameters</h4><dl><dt class="is-family-code"><a href="r90D903A8E089D92B.html">llvm::gsym::FunctionInfo</a>&amp;&amp;<b> FI</b></dt><dd>The function info object to emplace into our functions list.</dd></dl><h3 id="25A7D190ABF83C61"><pre class="p-0 hdoc-pre-parent"><a class="hdoc-permalink-icon" href="#25A7D190ABF83C61">¶</a><code class="hdoc-function-code language-cpp"><a href="r40593E26768E0096.html">llvm::Error</a> encode(
    <a href="r8C7403547ECE28F8.html">llvm::gsym::FileWriter</a>&amp; O) const</code></pre></h3><h4>Description</h4><p>Encode a GSYM into the file writer stream at the current position.</p><p>Declared at: <a class="is-family-code" href="https://github.com/llvm/llvm-project/blob/release/10.x/llvm/include/llvm/DebugInfo/GSYM/GsymCreator.h#L158">llvm/include/llvm/DebugInfo/GSYM/GsymCreator.h:158</a></p><h4>Parameters</h4><dl><dt class="is-family-code"><a href="r8C7403547ECE28F8.html">llvm::gsym::FileWriter</a>&amp;<b> O</b></dt><dd>The stream to save the binary data to</dd></dl><h4>Returns</h4><p>An error object that indicates success or failure of the save.</p><h3 id="59F891B9C0889ACB"><pre class="p-0 hdoc-pre-parent"><a class="hdoc-permalink-icon" href="#59F891B9C0889ACB">¶</a><code class="hdoc-function-code language-cpp"><a href="r40593E26768E0096.html">llvm::Error</a> finalize(<a href="r6E5FB907260499A2.html">llvm::raw_ostream</a>&amp; OS)</code></pre></h3><h4>Description</h4><p>Finalize the data in the GSYM creator prior to saving the data out. Finalize must be called after all FunctionInfo objects have been added and before GsymCreator::save() is called.</p><p>Declared at: <a class="is-family-code" href="https://github.com/llvm/llvm-project/blob/release/10.x/llvm/include/llvm/DebugInfo/GSYM/GsymCreator.h#L201">llvm/include/llvm/DebugInfo/GSYM/GsymCreator.h:201</a></p><h4>Parameters</h4><dl><dt class="is-family-code"><a href="r6E5FB907260499A2.html">llvm::raw_ostream</a>&amp;<b> OS</b></dt><dd>Output stream to report duplicate function infos, overlapping function infos, and function infos that were merged or removed.</dd></dl><h4>Returns</h4><p>An error object that indicates success or failure of the finalize.</p><h3 id="FFAF6B39F8224BC2"><pre class="p-0 hdoc-pre-parent"><a class="hdoc-permalink-icon" href="#FFAF6B39F8224BC2">¶</a><code class="hdoc-function-code language-cpp">void forEachFunctionInfo(
    const <a href="https://en.cppreference.com/w/cpp/utility/functional/function">std::function</a>&lt;bool(FunctionInfo&amp;)&gt;&amp;
        Callback)</code></pre></h3><h4>Description</h4><p>Thread safe iteration over all function infos.</p><p>Declared at: <a class="is-family-code" href="https://github.com/llvm/llvm-project/blob/release/10.x/llvm/include/llvm/DebugInfo/GSYM/GsymCreator.h#L214">llvm/include/llvm/DebugInfo/GSYM/GsymCreator.h:214</a></p><h4>Parameters</h4><dl><dt class="is-family-code">const <a href="https://en.cppreference.com/w/cpp/utility/functional/function">std::function</a>&lt;bool(FunctionInfo&amp;)&gt;&amp;<b> Callback</b></dt><dd>A callback function that will get called with each FunctionInfo. If the callback returns false, stop iterating.</dd></dl><h3 id="494186230EE84080"><pre class="p-0 hdoc-pre-parent"><a class="hdoc-permalink-icon" href="#494186230EE84080">¶</a><code class="hdoc-function-code language-cpp">void forEachFunctionInfo(
    const <a href="https://en.cppreference.com/w/cpp/utility/functional/function">std::function</a>&lt;bool(
        const FunctionInfo&amp;)&gt;&amp; Callback) const</code></pre></h3><h4>Description</h4><p>Thread safe const iteration over all function infos.</p><p>Declared at: <a class="is-family-code" href="https://github.com/llvm/llvm-project/blob/release/10.x/llvm/include/llvm/DebugInfo/GSYM/GsymCreator.h#L221">llvm/include/llvm/DebugInfo/GSYM/GsymCreator.h:221</a></p><h4>Parameters</h4><dl><dt class="is-family-code">const <a href="https://en.cppreference.com/w/cpp/utility/functional/function">std::function</a>&lt;bool(const FunctionInfo&amp;)&gt;&amp;<b> Callback</b></dt><dd>A callback function that will get called with each FunctionInfo. If the callback returns false, stop iterating.</dd></dl><h3 id="EF30FA245CD46433"><pre class="p-0 hdoc-pre-parent"><a class="hdoc-permalink-icon" href="#EF30FA245CD46433">¶</a><code class="hdoc-function-code language-cpp">uint32_t insertFile(<a href="rECFCAF624C04523A.html">llvm::StringRef</a> Path,
                    sys::path::Style Style =
                        sys::path::Style::native)</code></pre></h3><h4>Description</h4><p>Insert a file into this GSYM creator. Inserts a file by adding a FileEntry into the &quot;Files&quot; member variable if the file has not already been added. The file path is split into directory and filename which are both added to the string table. This allows paths to be stored efficiently by reusing the directories that are common between multiple files.</p><p>Declared at: <a class="is-family-code" href="https://github.com/llvm/llvm-project/blob/release/10.x/llvm/include/llvm/DebugInfo/GSYM/GsymCreator.h#L180">llvm/include/llvm/DebugInfo/GSYM/GsymCreator.h:180</a></p><h4>Parameters</h4><dl><dt class="is-family-code"><a href="rECFCAF624C04523A.html">llvm::StringRef</a><b> Path</b></dt><dd>The path to the file to insert.</dd><dt class="is-family-code">sys::path::Style<b> Style</b> = sys::path::Style::native</dt><dd>The path style for the &quot;Path&quot; parameter.</dd></dl><h4>Returns</h4><p>The unique file index for the inserted file.</p><h3 id="430CF0B1AA7CB388"><pre class="p-0 hdoc-pre-parent"><a class="hdoc-permalink-icon" href="#430CF0B1AA7CB388">¶</a><code class="hdoc-function-code language-cpp">uint32_t insertString(<a href="rECFCAF624C04523A.html">llvm::StringRef</a> S)</code></pre></h3><h4>Description</h4><p>Insert a string into the GSYM string table. All strings used by GSYM files must be uniqued by adding them to this string pool and using the returned offset for any string values.</p><p>Declared at: <a class="is-family-code" href="https://github.com/llvm/llvm-project/blob/release/10.x/llvm/include/llvm/DebugInfo/GSYM/GsymCreator.h#L167">llvm/include/llvm/DebugInfo/GSYM/GsymCreator.h:167</a></p><h4>Parameters</h4><dl><dt class="is-family-code"><a href="rECFCAF624C04523A.html">llvm::StringRef</a><b> S</b></dt><dd>The string to insert into the string table.</dd></dl><h4>Returns</h4><p>The unique 32 bit offset into the string table.</p><h3 id="A9B2BCE6576A7C80"><pre class="p-0 hdoc-pre-parent"><a class="hdoc-permalink-icon" href="#A9B2BCE6576A7C80">¶</a><code class="hdoc-function-code language-cpp"><a href="r40593E26768E0096.html">llvm::Error</a> save(
    <a href="rECFCAF624C04523A.html">llvm::StringRef</a> Path,
    llvm::support::endianness ByteOrder) const</code></pre></h3><h4>Description</h4><p>Save a GSYM file to a stand alone file.</p><p>Declared at: <a class="is-family-code" href="https://github.com/llvm/llvm-project/blob/release/10.x/llvm/include/llvm/DebugInfo/GSYM/GsymCreator.h#L152">llvm/include/llvm/DebugInfo/GSYM/GsymCreator.h:152</a></p><h4>Parameters</h4><dl><dt class="is-family-code"><a href="rECFCAF624C04523A.html">llvm::StringRef</a><b> Path</b></dt><dd>The file path to save the GSYM file to.</dd><dt class="is-family-code">llvm::support::endianness<b> ByteOrder</b></dt><dd>The endianness to use when saving the file.</dd></dl><h4>Returns</h4><p>An error object that indicates success or failure of the save.</p><h3 id="22D5F28848D77D8C"><pre class="p-0 hdoc-pre-parent"><a class="hdoc-permalink-icon" href="#22D5F28848D77D8C">¶</a><code class="hdoc-function-code language-cpp">void setUUID(<a href="r88137505AF2B6C74.html">llvm::ArrayRef</a>&lt;uint8_t&gt; UUIDBytes)</code></pre></h3><h4>Description</h4><p>Set the UUID value.</p><p>Declared at: <a class="is-family-code" href="https://github.com/llvm/llvm-project/blob/release/10.x/llvm/include/llvm/DebugInfo/GSYM/GsymCreator.h#L206">llvm/include/llvm/DebugInfo/GSYM/GsymCreator.h:206</a></p><h4>Parameters</h4><dl><dt class="is-family-code"><a href="r88137505AF2B6C74.html">llvm::ArrayRef</a>&lt;uint8_t&gt;<b> UUIDBytes</b></dt><dd>The new UUID bytes.</dd></dl></main></div></div></div></section></div><footer class="footer"><p>Documentation for LLVM 10.0.0.</p><p>Generated by <a href="https://hdoc.io/">hdoc</a> version 1.4.0-hdocInternal on 2022-12-14T09:44:14 UTC.</p><p class="has-text-grey-light">19AD43E11B2996</p></footer></body></html>