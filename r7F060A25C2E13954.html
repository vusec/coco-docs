<!DOCTYPE html><html><head><meta charset="utf-8"></meta><meta content="width=device-width, initial-scale=1" name="viewport"></meta><title>class InstrProfSymtab: LLVM 10.0.0 documentation</title><link href="styles.css" rel="stylesheet"></link><script src="highlight.min.js"></script><script>hljs.highlightAll();</script><link href="katex.min.css" rel="stylesheet"></link><script src="katex.min.js"></script><script src="auto-render.min.js"></script><script>
    document.addEventListener("DOMContentLoaded", function() {
      renderMathInElement(document.body, {
        delimiters: [
          {left: '$$', right: '$$', display: true},
          {left: '$', right: '$', display: false},
        ],
      });
    });
  </script><link href="apple-touch-icon.png" sizes="180x180" rel="apple-touch-icon"></link><link href="favicon-32x32.png" sizes="32x32" type="image/png" rel="icon"></link><link href="favicon-16x16.png" sizes="16x16" type="image/png" rel="icon"></link></head><body><div id="wrapper"><section class="section"><div class="container"><div class="columns"><aside class="column is-one-fifth"><ul class="menu-list"><p class="is-size-4">LLVM 10.0.0</p><p class="menu-label">Navigation</p><li><a href="index.html">Home</a></li><li><a href="search.html">Search</a></li><li><a href="https://github.com/llvm/llvm-project/">Repository</a></li><li><a href="https://hdoc.io">Made with hdoc</a></li><p class="menu-label">API Documentation</p><li><a href="functions.html">Functions</a></li><li><a href="records.html">Records</a></li><li><a href="enums.html">Enums</a></li><li><a href="namespaces.html">Namespaces</a></li></ul></aside><div class="column" style="overflow-x: auto"><nav class="breadcrumb has-arrow-separator" aria-label="breadcrumbs"><ul><li><a href="namespaces.html#00A4DA910CC17C2D"><span>namespace llvm</span></a></li><li class="is-active"><a aria-current="page7F060A25C2E13954"><span>class InstrProfSymtab</span></a></li></ul></nav><main class="content"><h1>class InstrProfSymtab</h1><h2>Declaration</h2><pre class="p-0"><code class="hdoc-record-code language-cpp">class InstrProfSymtab { /* full declaration omitted */ };</code></pre><h2>Description</h2><p>A symbol table used for function PGO name look-up with keys (such as pointers, md5hash values) to the function. A function&apos;s PGO name or name&apos;s md5hash are used in retrieving the profile data of the function. See \c getPGOFuncName() method for details on how PGO name is formed.</p><p>Declared at: <a class="is-family-code" href="https://github.com/llvm/llvm-project/blob/release/10.x/llvm/include/llvm/ProfileData/InstrProf.h#L406">llvm/include/llvm/ProfileData/InstrProf.h:406</a></p><h2>Method Overview</h2><ul><li class="is-family-code">public  <a href="#3CB33C385A4CC0F6"><b>InstrProfSymtab</b></a>()</li><li class="is-family-code">public llvm::Error  <a href="#B69D01B6A14D93F9"><b>addFuncName</b></a>(llvm::StringRef FuncName)</li><li class="is-family-code">public llvm::Error  <a href="#F81DEA944279F49D"><b>create</b></a>(object::SectionRef &amp; Section)</li><li class="is-family-code">public inline llvm::Error  <a href="#177745AEAF02D958"><b>create</b></a>(llvm::StringRef D, uint64_t BaseAddr)</li><li class="is-family-code">public inline llvm::Error  <a href="#443080CFC2749492"><b>create</b></a>(llvm::StringRef NameStrings)</li><li class="is-family-code">public llvm::Error  <a href="#62CC2A1AD6329B09"><b>create</b></a>(llvm::Module &amp; M, bool InLTO = false)</li><li class="is-family-code">public template &lt;typename NameIterRange&gt;llvm::Error  <a href="#9948334E581B156C"><b>create</b></a>(const NameIterRange &amp; IterRange)</li><li class="is-family-code">public llvm::StringRef  <a href="#8EC03A2C5BB55847"><b>getFuncName</b></a>(uint64_t FuncNameAddress, size_t NameSize)</li><li class="is-family-code">public inline llvm::StringRef  <a href="#EEF90933DB4378F6"><b>getFuncName</b></a>(uint64_t FuncMD5Hash)</li><li class="is-family-code">public inline llvm::StringRef  <a href="#5D79307833463512"><b>getFuncNameOrExternalSymbol</b></a>(uint64_t FuncMD5Hash)</li><li class="is-family-code">public inline llvm::Function *  <a href="#E86F11141B44D306"><b>getFunction</b></a>(uint64_t FuncMD5Hash)</li><li class="is-family-code">public uint64_t  <a href="#5812479803CFD38A"><b>getFunctionHashFromAddress</b></a>(uint64_t Address)</li><li class="is-family-code">public inline llvm::StringRef  <a href="#79371E8CED7AB716"><b>getNameData</b></a>() const</li><li class="is-family-code">public inline llvm::StringRef  <a href="#DB180EE4D08C8A32"><b>getOrigFuncName</b></a>(uint64_t FuncMD5Hash)</li><li class="is-family-code">public static bool  <a href="#395C1EA0F26F2715"><b>isExternalSymbol</b></a>(const llvm::StringRef &amp; Symbol)</li><li class="is-family-code">public void  <a href="#AF6D262130A50087"><b>mapAddress</b></a>(uint64_t Addr, uint64_t MD5Val)</li></ul><h2>Methods</h2><h3 id="3CB33C385A4CC0F6"><pre class="p-0 hdoc-pre-parent"><a class="hdoc-permalink-icon" href="#3CB33C385A4CC0F6">¶</a><code class="hdoc-function-code language-cpp">InstrProfSymtab()</code></pre></h3><p>Declared at: <a class="is-family-code" href="https://github.com/llvm/llvm-project/blob/release/10.x/llvm/include/llvm/ProfileData/InstrProf.h#L436">llvm/include/llvm/ProfileData/InstrProf.h:436</a></p><h3 id="B69D01B6A14D93F9"><pre class="p-0 hdoc-pre-parent"><a class="hdoc-permalink-icon" href="#B69D01B6A14D93F9">¶</a><code class="hdoc-function-code language-cpp"><a href="r40593E26768E0096.html">llvm::Error</a> addFuncName(<a href="rECFCAF624C04523A.html">llvm::StringRef</a> FuncName)</code></pre></h3><h4>Description</h4><p>Update the symtab by adding \p FuncName to the table. This interface is used by the raw and text profile readers.</p><p>Declared at: <a class="is-family-code" href="https://github.com/llvm/llvm-project/blob/release/10.x/llvm/include/llvm/ProfileData/InstrProf.h#L467">llvm/include/llvm/ProfileData/InstrProf.h:467</a></p><h4>Parameters</h4><dl><dt class="is-family-code"><a href="rECFCAF624C04523A.html">llvm::StringRef</a><b> FuncName</b></dt></dl><h3 id="F81DEA944279F49D"><pre class="p-0 hdoc-pre-parent"><a class="hdoc-permalink-icon" href="#F81DEA944279F49D">¶</a><code class="hdoc-function-code language-cpp"><a href="r40593E26768E0096.html">llvm::Error</a> create(object::SectionRef&amp; Section)</code></pre></h3><h4>Description</h4><p>Create InstrProfSymtab from an object file section which contains function PGO names. When section may contain raw string data or string data in compressed form. This method only initialize the symtab with reference to the data and the section base address. The decompression will be delayed until before it is used. See also \c create(StringRef) method.</p><p>Declared at: <a class="is-family-code" href="https://github.com/llvm/llvm-project/blob/release/10.x/llvm/include/llvm/ProfileData/InstrProf.h#L444">llvm/include/llvm/ProfileData/InstrProf.h:444</a></p><h4>Parameters</h4><dl><dt class="is-family-code">object::SectionRef&amp;<b> Section</b></dt></dl><h3 id="177745AEAF02D958"><pre class="p-0 hdoc-pre-parent"><a class="hdoc-permalink-icon" href="#177745AEAF02D958">¶</a><code class="hdoc-function-code language-cpp">inline <a href="r40593E26768E0096.html">llvm::Error</a> create(<a href="rECFCAF624C04523A.html">llvm::StringRef</a> D,
                          uint64_t BaseAddr)</code></pre></h3><h4>Description</h4><p>This interface is used by reader of CoverageMapping test format.</p><p>Declared at: <a class="is-family-code" href="https://github.com/llvm/llvm-project/blob/release/10.x/llvm/include/llvm/ProfileData/InstrProf.h#L448">llvm/include/llvm/ProfileData/InstrProf.h:448</a></p><h4>Parameters</h4><dl><dt class="is-family-code"><a href="rECFCAF624C04523A.html">llvm::StringRef</a><b> D</b></dt><dt class="is-family-code">uint64_t<b> BaseAddr</b></dt></dl><h3 id="443080CFC2749492"><pre class="p-0 hdoc-pre-parent"><a class="hdoc-permalink-icon" href="#443080CFC2749492">¶</a><code class="hdoc-function-code language-cpp">inline <a href="r40593E26768E0096.html">llvm::Error</a> create(
    <a href="rECFCAF624C04523A.html">llvm::StringRef</a> NameStrings)</code></pre></h3><h4>Description</h4><p>\c NameStrings is a string composed of one of more sub-strings encoded in the format described in \c collectPGOFuncNameStrings. This method is a wrapper to \c readPGOFuncNameStrings method.</p><p>Declared at: <a class="is-family-code" href="https://github.com/llvm/llvm-project/blob/release/10.x/llvm/include/llvm/ProfileData/InstrProf.h#L453">llvm/include/llvm/ProfileData/InstrProf.h:453</a></p><h4>Parameters</h4><dl><dt class="is-family-code"><a href="rECFCAF624C04523A.html">llvm::StringRef</a><b> NameStrings</b></dt></dl><h3 id="62CC2A1AD6329B09"><pre class="p-0 hdoc-pre-parent"><a class="hdoc-permalink-icon" href="#62CC2A1AD6329B09">¶</a><code class="hdoc-function-code language-cpp"><a href="r40593E26768E0096.html">llvm::Error</a> create(<a href="r1428BC327E1751C3.html">llvm::Module</a>&amp; M,
                   bool InLTO = false)</code></pre></h3><h4>Description</h4><p>A wrapper interface to populate the PGO symtab with functions decls from module \c M. This interface is used by transformation passes such as indirect function call promotion. Variable \c InLTO indicates if this is called from LTO optimization passes.</p><p>Declared at: <a class="is-family-code" href="https://github.com/llvm/llvm-project/blob/release/10.x/llvm/include/llvm/ProfileData/InstrProf.h#L459">llvm/include/llvm/ProfileData/InstrProf.h:459</a></p><h4>Parameters</h4><dl><dt class="is-family-code"><a href="r1428BC327E1751C3.html">llvm::Module</a>&amp;<b> M</b></dt><dt class="is-family-code">bool<b> InLTO</b> = false</dt></dl><h3 id="9948334E581B156C"><pre class="p-0 hdoc-pre-parent"><a class="hdoc-permalink-icon" href="#9948334E581B156C">¶</a><code class="hdoc-function-code language-cpp">template &lt;typename NameIterRange&gt;
<a href="r40593E26768E0096.html">llvm::Error</a> create(const NameIterRange&amp; IterRange)</code></pre></h3><h4>Description</h4><p>Create InstrProfSymtab from a set of names iteratable from\p IterRange. This interface is used by IndexedProfReader.</p><p>Declared at: <a class="is-family-code" href="https://github.com/llvm/llvm-project/blob/release/10.x/llvm/include/llvm/ProfileData/InstrProf.h#L463">llvm/include/llvm/ProfileData/InstrProf.h:463</a></p><h4>Templates</h4><dl><dt class="is-family-code"><b> NameIterRange</b></dt></dl><h4>Parameters</h4><dl><dt class="is-family-code">const NameIterRange&amp;<b> IterRange</b></dt></dl><h3 id="8EC03A2C5BB55847"><pre class="p-0 hdoc-pre-parent"><a class="hdoc-permalink-icon" href="#8EC03A2C5BB55847">¶</a><code class="hdoc-function-code language-cpp"><a href="rECFCAF624C04523A.html">llvm::StringRef</a> getFuncName(
    uint64_t FuncNameAddress,
    size_t NameSize)</code></pre></h3><h4>Description</h4><p>Return function&apos;s PGO name from the function name&apos;s symbol address in the object file. If an error occurs, return an empty string.</p><p>Declared at: <a class="is-family-code" href="https://github.com/llvm/llvm-project/blob/release/10.x/llvm/include/llvm/ProfileData/InstrProf.h#L491">llvm/include/llvm/ProfileData/InstrProf.h:491</a></p><h4>Parameters</h4><dl><dt class="is-family-code">uint64_t<b> FuncNameAddress</b></dt><dt class="is-family-code">size_t<b> NameSize</b></dt></dl><h3 id="EEF90933DB4378F6"><pre class="p-0 hdoc-pre-parent"><a class="hdoc-permalink-icon" href="#EEF90933DB4378F6">¶</a><code class="hdoc-function-code language-cpp">inline <a href="rECFCAF624C04523A.html">llvm::StringRef</a> getFuncName(
    uint64_t FuncMD5Hash)</code></pre></h3><h4>Description</h4><p>Return function&apos;s PGO name from the name&apos;s md5 hash value. If not found, return an empty string.</p><p>Declared at: <a class="is-family-code" href="https://github.com/llvm/llvm-project/blob/release/10.x/llvm/include/llvm/ProfileData/InstrProf.h#L495">llvm/include/llvm/ProfileData/InstrProf.h:495</a></p><h4>Parameters</h4><dl><dt class="is-family-code">uint64_t<b> FuncMD5Hash</b></dt></dl><h3 id="5D79307833463512"><pre class="p-0 hdoc-pre-parent"><a class="hdoc-permalink-icon" href="#5D79307833463512">¶</a><code class="hdoc-function-code language-cpp">inline <a href="rECFCAF624C04523A.html">llvm::StringRef</a>
getFuncNameOrExternalSymbol(uint64_t FuncMD5Hash)</code></pre></h3><h4>Description</h4><p>Just like getFuncName, except that it will return a non-empty StringRef if the function is external to this symbol table. All such cases will be represented using the same StringRef value.</p><p>Declared at: <a class="is-family-code" href="https://github.com/llvm/llvm-project/blob/release/10.x/llvm/include/llvm/ProfileData/InstrProf.h#L500">llvm/include/llvm/ProfileData/InstrProf.h:500</a></p><h4>Parameters</h4><dl><dt class="is-family-code">uint64_t<b> FuncMD5Hash</b></dt></dl><h3 id="E86F11141B44D306"><pre class="p-0 hdoc-pre-parent"><a class="hdoc-permalink-icon" href="#E86F11141B44D306">¶</a><code class="hdoc-function-code language-cpp">inline <a href="rADBA2A8E0906EC47.html">llvm::Function</a>* getFunction(
    uint64_t FuncMD5Hash)</code></pre></h3><h4>Description</h4><p>Return function from the name&apos;s md5 hash. Return nullptr if not found.</p><p>Declared at: <a class="is-family-code" href="https://github.com/llvm/llvm-project/blob/release/10.x/llvm/include/llvm/ProfileData/InstrProf.h#L508">llvm/include/llvm/ProfileData/InstrProf.h:508</a></p><h4>Parameters</h4><dl><dt class="is-family-code">uint64_t<b> FuncMD5Hash</b></dt></dl><h3 id="5812479803CFD38A"><pre class="p-0 hdoc-pre-parent"><a class="hdoc-permalink-icon" href="#5812479803CFD38A">¶</a><code class="hdoc-function-code language-cpp">uint64_t getFunctionHashFromAddress(
    uint64_t Address)</code></pre></h3><h4>Description</h4><p>Return a function&apos;s hash, or 0, if the function isn&apos;t in this SymTab.</p><p>Declared at: <a class="is-family-code" href="https://github.com/llvm/llvm-project/blob/release/10.x/llvm/include/llvm/ProfileData/InstrProf.h#L486">llvm/include/llvm/ProfileData/InstrProf.h:486</a></p><h4>Parameters</h4><dl><dt class="is-family-code">uint64_t<b> Address</b></dt></dl><h3 id="79371E8CED7AB716"><pre class="p-0 hdoc-pre-parent"><a class="hdoc-permalink-icon" href="#79371E8CED7AB716">¶</a><code class="hdoc-function-code language-cpp">inline <a href="rECFCAF624C04523A.html">llvm::StringRef</a> getNameData() const</code></pre></h3><h4>Description</h4><p>Return the name section data.</p><p>Declared at: <a class="is-family-code" href="https://github.com/llvm/llvm-project/blob/release/10.x/llvm/include/llvm/ProfileData/InstrProf.h#L516">llvm/include/llvm/ProfileData/InstrProf.h:516</a></p><h3 id="DB180EE4D08C8A32"><pre class="p-0 hdoc-pre-parent"><a class="hdoc-permalink-icon" href="#DB180EE4D08C8A32">¶</a><code class="hdoc-function-code language-cpp">inline <a href="rECFCAF624C04523A.html">llvm::StringRef</a> getOrigFuncName(
    uint64_t FuncMD5Hash)</code></pre></h3><h4>Description</h4><p>Return the function&apos;s original assembly name by stripping off the prefix attached (to symbols with priviate linkage). For global functions, it returns the same string as getFuncName.</p><p>Declared at: <a class="is-family-code" href="https://github.com/llvm/llvm-project/blob/release/10.x/llvm/include/llvm/ProfileData/InstrProf.h#L513">llvm/include/llvm/ProfileData/InstrProf.h:513</a></p><h4>Parameters</h4><dl><dt class="is-family-code">uint64_t<b> FuncMD5Hash</b></dt></dl><h3 id="395C1EA0F26F2715"><pre class="p-0 hdoc-pre-parent"><a class="hdoc-permalink-icon" href="#395C1EA0F26F2715">¶</a><code class="hdoc-function-code language-cpp">static bool isExternalSymbol(
    const <a href="rECFCAF624C04523A.html">llvm::StringRef</a>&amp; Symbol)</code></pre></h3><h4>Description</h4><p>True if Symbol is the value used to represent external symbols.</p><p>Declared at: <a class="is-family-code" href="https://github.com/llvm/llvm-project/blob/release/10.x/llvm/include/llvm/ProfileData/InstrProf.h#L503">llvm/include/llvm/ProfileData/InstrProf.h:503</a></p><h4>Parameters</h4><dl><dt class="is-family-code">const <a href="rECFCAF624C04523A.html">llvm::StringRef</a>&amp;<b> Symbol</b></dt></dl><h3 id="AF6D262130A50087"><pre class="p-0 hdoc-pre-parent"><a class="hdoc-permalink-icon" href="#AF6D262130A50087">¶</a><code class="hdoc-function-code language-cpp">void mapAddress(uint64_t Addr, uint64_t MD5Val)</code></pre></h3><h4>Description</h4><p>Map a function address to its name&apos;s MD5 hash. This interface is only used by the raw profiler reader.</p><p>Declared at: <a class="is-family-code" href="https://github.com/llvm/llvm-project/blob/release/10.x/llvm/include/llvm/ProfileData/InstrProf.h#L481">llvm/include/llvm/ProfileData/InstrProf.h:481</a></p><h4>Parameters</h4><dl><dt class="is-family-code">uint64_t<b> Addr</b></dt><dt class="is-family-code">uint64_t<b> MD5Val</b></dt></dl></main></div></div></div></section></div><footer class="footer"><p>Documentation for LLVM 10.0.0.</p><p>Generated by <a href="https://hdoc.io/">hdoc</a> version 1.4.0-hdocInternal on 2022-12-14T09:44:14 UTC.</p><p class="has-text-grey-light">19AD43E11B2996</p></footer></body></html>