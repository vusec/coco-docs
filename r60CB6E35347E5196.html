<!DOCTYPE html><html><head><meta charset="utf-8"></meta><meta content="width=device-width, initial-scale=1" name="viewport"></meta><title>class ValueProfileCollector: LLVM 10.0.0 documentation</title><link href="styles.css" rel="stylesheet"></link><script src="highlight.min.js"></script><script>hljs.highlightAll();</script><link href="katex.min.css" rel="stylesheet"></link><script src="katex.min.js"></script><script src="auto-render.min.js"></script><script>
    document.addEventListener("DOMContentLoaded", function() {
      renderMathInElement(document.body, {
        delimiters: [
          {left: '$$', right: '$$', display: true},
          {left: '$', right: '$', display: false},
        ],
      });
    });
  </script><link href="apple-touch-icon.png" sizes="180x180" rel="apple-touch-icon"></link><link href="favicon-32x32.png" sizes="32x32" type="image/png" rel="icon"></link><link href="favicon-16x16.png" sizes="16x16" type="image/png" rel="icon"></link></head><body><div id="wrapper"><section class="section"><div class="container"><div class="columns"><aside class="column is-one-fifth"><ul class="menu-list"><p class="is-size-4">LLVM 10.0.0</p><p class="menu-label">Navigation</p><li><a href="index.html">Home</a></li><li><a href="search.html">Search</a></li><li><a href="https://github.com/llvm/llvm-project/">Repository</a></li><li><a href="https://hdoc.io">Made with hdoc</a></li><p class="menu-label">API Documentation</p><li><a href="functions.html">Functions</a></li><li><a href="records.html">Records</a></li><li><a href="enums.html">Enums</a></li><li><a href="namespaces.html">Namespaces</a></li></ul></aside><div class="column" style="overflow-x: auto"><nav class="breadcrumb has-arrow-separator" aria-label="breadcrumbs"><ul><li><a href="namespaces.html#00A4DA910CC17C2D"><span>namespace llvm</span></a></li><li class="is-active"><a aria-current="page60CB6E35347E5196"><span>class ValueProfileCollector</span></a></li></ul></nav><main class="content"><h1>class ValueProfileCollector</h1><h2>Declaration</h2><pre class="p-0"><code class="hdoc-record-code language-cpp">class ValueProfileCollector { /* full declaration omitted */ };</code></pre><h2>Description</h2><p>Utility analysis that determines what values are worth profiling. The actual logic is inside the ValueProfileCollectorImpl, whose job is to populate the Candidates vector. Value profiling an expression means to track the values that this expression takes at runtime and the frequency of each value. It is important to distinguish between two sets of value profiles for a particular expression: 1) The set of values at the point of evaluation. 2) The set of values at the point of use. In some cases, the two sets are identical, but it&apos;s not unusual for the two to differ. To elaborate more, consider this C code, and focus on the expression `nn`: void foo(int nn, bool b) { if (b)  memcpy(x, y, nn); } The point of evaluation can be as early as the start of the function, and let&apos;s say the value profile for `nn` is: total=100; (value,freq) set = {(8,10), (32,50)} The point of use is right before we call memcpy, and since we execute the memcpy conditionally, the value profile of `nn` can be: total=15; (value,freq) set = {(8,10), (4,5)} For this reason, a plugin is responsible for computing the insertion point for each value to be profiled. The `CandidateInfo` structure encapsulates all the information needed for each value profile site.</p><p>Declared at: <a class="is-family-code" href="https://github.com/llvm/llvm-project/blob/release/10.x/llvm/lib/Transforms/Instrumentation/ValueProfileCollector.h#L53">llvm/lib/Transforms/Instrumentation/ValueProfileCollector.h:53</a></p><h2>Method Overview</h2><ul><li class="is-family-code">public  <a href="#CE5ABE94A840175A"><b>ValueProfileCollector</b></a>(llvm::Function &amp; Fn)</li><li class="is-family-code">public  <a href="#A7629ECD6816ED56"><b>ValueProfileCollector</b></a>(llvm::ValueProfileCollector &amp;&amp;)</li><li class="is-family-code">public  <a href="#16D0EA152D975D97"><b>ValueProfileCollector</b></a>(const llvm::ValueProfileCollector &amp;)</li><li class="is-family-code">public std::vector&lt;CandidateInfo&gt;  <a href="#18FFD3BE422C3AD8"><b>get</b></a>(llvm::InstrProfValueKind Kind) const</li><li class="is-family-code">public  <a href="#F680DE01BEBBFEE8"><b>~ValueProfileCollector</b></a>()</li></ul><h2>Methods</h2><h3 id="CE5ABE94A840175A"><pre class="p-0 hdoc-pre-parent"><a class="hdoc-permalink-icon" href="#CE5ABE94A840175A">¶</a><code class="hdoc-function-code language-cpp">ValueProfileCollector(<a href="rADBA2A8E0906EC47.html">llvm::Function</a>&amp; Fn)</code></pre></h3><p>Declared at: <a class="is-family-code" href="https://github.com/llvm/llvm-project/blob/release/10.x/llvm/lib/Transforms/Instrumentation/ValueProfileCollector.h#L61">llvm/lib/Transforms/Instrumentation/ValueProfileCollector.h:61</a></p><h4>Parameters</h4><dl><dt class="is-family-code"><a href="rADBA2A8E0906EC47.html">llvm::Function</a>&amp;<b> Fn</b></dt></dl><h3 id="A7629ECD6816ED56"><pre class="p-0 hdoc-pre-parent"><a class="hdoc-permalink-icon" href="#A7629ECD6816ED56">¶</a><code class="hdoc-function-code language-cpp">ValueProfileCollector(
    <a href="r60CB6E35347E5196.html">llvm::ValueProfileCollector</a>&amp;&amp;)</code></pre></h3><p>Declared at: <a class="is-family-code" href="https://github.com/llvm/llvm-project/blob/release/10.x/llvm/lib/Transforms/Instrumentation/ValueProfileCollector.h#L62">llvm/lib/Transforms/Instrumentation/ValueProfileCollector.h:62</a></p><h4>Parameters</h4><dl><dt class="is-family-code"><a href="r60CB6E35347E5196.html">llvm::ValueProfileCollector</a>&amp;&amp;<b> </b></dt></dl><h3 id="16D0EA152D975D97"><pre class="p-0 hdoc-pre-parent"><a class="hdoc-permalink-icon" href="#16D0EA152D975D97">¶</a><code class="hdoc-function-code language-cpp">ValueProfileCollector(
    const <a href="r60CB6E35347E5196.html">llvm::ValueProfileCollector</a>&amp;)</code></pre></h3><p>Declared at: <a class="is-family-code" href="https://github.com/llvm/llvm-project/blob/release/10.x/llvm/lib/Transforms/Instrumentation/ValueProfileCollector.h#L65">llvm/lib/Transforms/Instrumentation/ValueProfileCollector.h:65</a></p><h4>Parameters</h4><dl><dt class="is-family-code">const <a href="r60CB6E35347E5196.html">llvm::ValueProfileCollector</a>&amp;<b> </b></dt></dl><h3 id="18FFD3BE422C3AD8"><pre class="p-0 hdoc-pre-parent"><a class="hdoc-permalink-icon" href="#18FFD3BE422C3AD8">¶</a><code class="hdoc-function-code language-cpp"><a href="https://en.cppreference.com/w/cpp/container/vector">std::vector</a>&lt;CandidateInfo&gt; get(
    llvm::InstrProfValueKind Kind) const</code></pre></h3><h4>Description</h4><p>returns a list of value profiling candidates of the given kind</p><p>Declared at: <a class="is-family-code" href="https://github.com/llvm/llvm-project/blob/release/10.x/llvm/lib/Transforms/Instrumentation/ValueProfileCollector.h#L70">llvm/lib/Transforms/Instrumentation/ValueProfileCollector.h:70</a></p><h4>Parameters</h4><dl><dt class="is-family-code">llvm::InstrProfValueKind<b> Kind</b></dt></dl><h3 id="F680DE01BEBBFEE8"><pre class="p-0 hdoc-pre-parent"><a class="hdoc-permalink-icon" href="#F680DE01BEBBFEE8">¶</a><code class="hdoc-function-code language-cpp">~ValueProfileCollector()</code></pre></h3><p>Declared at: <a class="is-family-code" href="https://github.com/llvm/llvm-project/blob/release/10.x/llvm/lib/Transforms/Instrumentation/ValueProfileCollector.h#L67">llvm/lib/Transforms/Instrumentation/ValueProfileCollector.h:67</a></p></main></div></div></div></section></div><footer class="footer"><p>Documentation for LLVM 10.0.0.</p><p>Generated by <a href="https://hdoc.io/">hdoc</a> version 1.4.0-hdocInternal on 2022-12-14T09:44:14 UTC.</p><p class="has-text-grey-light">19AD43E11B2996</p></footer></body></html>