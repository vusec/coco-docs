<!DOCTYPE html><html><head><meta charset="utf-8"></meta><meta content="width=device-width, initial-scale=1" name="viewport"></meta><title>class PointerSumType: LLVM 10.0.0 documentation</title><link href="styles.css" rel="stylesheet"></link><script src="highlight.min.js"></script><script>hljs.highlightAll();</script><link href="katex.min.css" rel="stylesheet"></link><script src="katex.min.js"></script><script src="auto-render.min.js"></script><script>
    document.addEventListener("DOMContentLoaded", function() {
      renderMathInElement(document.body, {
        delimiters: [
          {left: '$$', right: '$$', display: true},
          {left: '$', right: '$', display: false},
        ],
      });
    });
  </script><link href="apple-touch-icon.png" sizes="180x180" rel="apple-touch-icon"></link><link href="favicon-32x32.png" sizes="32x32" type="image/png" rel="icon"></link><link href="favicon-16x16.png" sizes="16x16" type="image/png" rel="icon"></link></head><body><div id="wrapper"><section class="section"><div class="container"><div class="columns"><aside class="column is-one-fifth"><ul class="menu-list"><p class="is-size-4">LLVM 10.0.0</p><p class="menu-label">Navigation</p><li><a href="index.html">Home</a></li><li><a href="search.html">Search</a></li><li><a href="https://github.com/llvm/llvm-project/">Repository</a></li><li><a href="https://hdoc.io">Made with hdoc</a></li><p class="menu-label">API Documentation</p><li><a href="functions.html">Functions</a></li><li><a href="records.html">Records</a></li><li><a href="enums.html">Enums</a></li><li><a href="namespaces.html">Namespaces</a></li></ul></aside><div class="column" style="overflow-x: auto"><nav class="breadcrumb has-arrow-separator" aria-label="breadcrumbs"><ul><li><a href="namespaces.html#00A4DA910CC17C2D"><span>namespace llvm</span></a></li><li class="is-active"><a aria-current="page619CB3F99A3B659A"><span>class PointerSumType</span></a></li></ul></nav><main class="content"><h1>class PointerSumType</h1><h2>Declaration</h2><pre class="p-0"><code class="hdoc-record-code language-cpp">template &lt;typename TagT, typename... MemberTs&gt;
class PointerSumType { /* full declaration omitted */ };</code></pre><h2>Description</h2><p>A sum type over pointer-like types. This is a normal tagged union across pointer-like types that uses the low bits of the pointers to store the tag. Each member of the sum type is specified by passing a \c PointerSumTypeMember specialization in the variadic member argument list. This allows the user to control the particular tag value associated with a particular type, use the same type for multiple different tags, and customize the pointer-like traits used for a particular member. Note that these *must* be specializations of \c PointerSumTypeMember, no other type will suffice, even if it provides a compatible interface. This type implements all of the comparison operators and even hash table support by comparing the underlying storage of the pointer values. It doesn&apos;t support delegating to particular members for comparisons. It also default constructs to a zero tag with a null pointer, whatever that would be. This means that the zero value for the tag type is significant and may be desirable to set to a state that is particularly desirable to default construct. Having a supported zero-valued tag also enables getting the address of a pointer stored with that tag provided it is stored in its natural bit representation. This works because in the case of a zero-valued tag, the pointer&apos;s value is directly stored into this object and we can expose the address of that internal storage. This is especially useful when building an `ArrayRef` of a single pointer stored in a sum type. There is no support for constructing or accessing with a dynamic tag as that would fundamentally violate the type safety provided by the sum type.</p><p>Declared at: <a class="is-family-code" href="https://github.com/llvm/llvm-project/blob/release/10.x/llvm/include/llvm/ADT/PointerSumType.h#L70">llvm/include/llvm/ADT/PointerSumType.h:70</a></p><h2>Templates</h2><dl><dt class="is-family-code"><b> TagT</b></dt><dt class="is-family-code"><b> MemberTs</b></dt></dl><h2>Method Overview</h2><ul><li class="is-family-code">public  <a href="#9152E61D92F9F6F9"><b>PointerSumType&lt;TagT, MemberTs...&gt;</b></a>()</li><li class="is-family-code">public template &lt;TagT N&gt;typename HelperT::template Lookup&lt;N&gt;::PointerT  <a href="#DC717BE3A8ADD08C"><b>cast</b></a>() const</li><li class="is-family-code">public void  <a href="#89787F1E72A601BB"><b>clear</b></a>()</li><li class="is-family-code">public template &lt;TagT N&gt;static PointerSumType&lt;TagT, MemberTs...&gt;  <a href="#15BFB057E3697FFD"><b>create</b></a>(typename HelperT::template Lookup&lt;N&gt;::PointerT Pointer)</li><li class="is-family-code">public template &lt;TagT N&gt;typename HelperT::template Lookup&lt;N&gt;::PointerT  <a href="#6BF5089DFE43047D"><b>get</b></a>() const</li><li class="is-family-code">public const typename HelperT::template Lookup&lt;HelperT::MinTag&gt;::PointerT *  <a href="#AACC36E04B821B0C"><b>getAddrOfZeroTagPointer</b></a>() const</li><li class="is-family-code">public typename HelperT::template Lookup&lt;HelperT::MinTag&gt;::PointerT *  <a href="#7231C106345EB609"><b>getAddrOfZeroTagPointer</b></a>()</li><li class="is-family-code">public uintptr_t  <a href="#39CADF4BFEDB9013"><b>getOpaqueValue</b></a>() const</li><li class="is-family-code">public TagT  <a href="#EE7C679167AC2087"><b>getTag</b></a>() const</li><li class="is-family-code">protected void *  <a href="#3BA3B512B31CE56F"><b>getVoidPtr</b></a>() const</li><li class="is-family-code">public template &lt;TagT N&gt;bool  <a href="#1E93E02FC8487224"><b>is</b></a>() const</li><li class="is-family-code">public bool  <a href="#1EAB83B978852947"><b>operator bool</b></a>() const</li><li class="is-family-code">public template &lt;TagT N&gt;void  <a href="#12E2EB777C4654A3"><b>set</b></a>(typename HelperT::template Lookup&lt;N&gt;::PointerT Pointer)</li></ul><h2>Methods</h2><h3 id="9152E61D92F9F6F9"><pre class="p-0 hdoc-pre-parent"><a class="hdoc-permalink-icon" href="#9152E61D92F9F6F9">¶</a><code class="hdoc-function-code language-cpp">PointerSumType&lt;TagT, MemberTs...&gt;()</code></pre></h3><p>Declared at: <a class="is-family-code" href="https://github.com/llvm/llvm-project/blob/release/10.x/llvm/include/llvm/ADT/PointerSumType.h#L96">llvm/include/llvm/ADT/PointerSumType.h:96</a></p><h3 id="DC717BE3A8ADD08C"><pre class="p-0 hdoc-pre-parent"><a class="hdoc-permalink-icon" href="#DC717BE3A8ADD08C">¶</a><code class="hdoc-function-code language-cpp">template &lt;TagT N&gt;
typename HelperT::template Lookup&lt;N&gt;::PointerT
cast() const</code></pre></h3><p>Declared at: <a class="is-family-code" href="https://github.com/llvm/llvm-project/blob/release/10.x/llvm/include/llvm/ADT/PointerSumType.h#L131">llvm/include/llvm/ADT/PointerSumType.h:131</a></p><h4>Templates</h4><dl><dt class="is-family-code">TagT<b> N</b></dt></dl><h3 id="89787F1E72A601BB"><pre class="p-0 hdoc-pre-parent"><a class="hdoc-permalink-icon" href="#89787F1E72A601BB">¶</a><code class="hdoc-function-code language-cpp">void clear()</code></pre></h3><h4>Description</h4><p>Clear the value to null with the min tag type.</p><p>Declared at: <a class="is-family-code" href="https://github.com/llvm/llvm-project/blob/release/10.x/llvm/include/llvm/ADT/PointerSumType.h#L117">llvm/include/llvm/ADT/PointerSumType.h:117</a></p><h3 id="15BFB057E3697FFD"><pre class="p-0 hdoc-pre-parent"><a class="hdoc-permalink-icon" href="#15BFB057E3697FFD">¶</a><code class="hdoc-function-code language-cpp">template &lt;TagT N&gt;
static <a href="r619CB3F99A3B659A.html">PointerSumType</a>&lt;TagT, MemberTs...&gt; create(
    typename HelperT::template Lookup&lt;N&gt;::PointerT
        Pointer)</code></pre></h3><h4>Description</h4><p>A typed constructor for a specific tagged member of the sum type.</p><p>Declared at: <a class="is-family-code" href="https://github.com/llvm/llvm-project/blob/release/10.x/llvm/include/llvm/ADT/PointerSumType.h#L110">llvm/include/llvm/ADT/PointerSumType.h:110</a></p><h4>Templates</h4><dl><dt class="is-family-code">TagT<b> N</b></dt></dl><h4>Parameters</h4><dl><dt class="is-family-code">typename HelperT::template Lookup&lt;N&gt;::PointerT<b> Pointer</b></dt></dl><h3 id="6BF5089DFE43047D"><pre class="p-0 hdoc-pre-parent"><a class="hdoc-permalink-icon" href="#6BF5089DFE43047D">¶</a><code class="hdoc-function-code language-cpp">template &lt;TagT N&gt;
typename HelperT::template Lookup&lt;N&gt;::PointerT
get() const</code></pre></h3><p>Declared at: <a class="is-family-code" href="https://github.com/llvm/llvm-project/blob/release/10.x/llvm/include/llvm/ADT/PointerSumType.h#L125">llvm/include/llvm/ADT/PointerSumType.h:125</a></p><h4>Templates</h4><dl><dt class="is-family-code">TagT<b> N</b></dt></dl><h3 id="AACC36E04B821B0C"><pre class="p-0 hdoc-pre-parent"><a class="hdoc-permalink-icon" href="#AACC36E04B821B0C">¶</a><code class="hdoc-function-code language-cpp">const typename HelperT::template Lookup&lt;
    HelperT::MinTag&gt;::PointerT*
getAddrOfZeroTagPointer() const</code></pre></h3><h4>Description</h4><p>If the tag is zero and the pointer&apos;s value isn&apos;t changed when being stored, get the address of the stored value type-punned to the zero-tag&apos;s pointer type.</p><p>Declared at: <a class="is-family-code" href="https://github.com/llvm/llvm-project/blob/release/10.x/llvm/include/llvm/ADT/PointerSumType.h#L141">llvm/include/llvm/ADT/PointerSumType.h:141</a></p><h3 id="7231C106345EB609"><pre class="p-0 hdoc-pre-parent"><a class="hdoc-permalink-icon" href="#7231C106345EB609">¶</a><code class="hdoc-function-code language-cpp">typename HelperT::template Lookup&lt;
    HelperT::MinTag&gt;::PointerT*
getAddrOfZeroTagPointer()</code></pre></h3><h4>Description</h4><p>If the tag is zero and the pointer&apos;s value isn&apos;t changed when being stored, get the address of the stored value type-punned to the zero-tag&apos;s pointer type.</p><p>Declared at: <a class="is-family-code" href="https://github.com/llvm/llvm-project/blob/release/10.x/llvm/include/llvm/ADT/PointerSumType.h#L149">llvm/include/llvm/ADT/PointerSumType.h:149</a></p><h3 id="39CADF4BFEDB9013"><pre class="p-0 hdoc-pre-parent"><a class="hdoc-permalink-icon" href="#39CADF4BFEDB9013">¶</a><code class="hdoc-function-code language-cpp">uintptr_t getOpaqueValue() const</code></pre></h3><p>Declared at: <a class="is-family-code" href="https://github.com/llvm/llvm-project/blob/release/10.x/llvm/include/llvm/ADT/PointerSumType.h#L188">llvm/include/llvm/ADT/PointerSumType.h:188</a></p><h3 id="EE7C679167AC2087"><pre class="p-0 hdoc-pre-parent"><a class="hdoc-permalink-icon" href="#EE7C679167AC2087">¶</a><code class="hdoc-function-code language-cpp">TagT getTag() const</code></pre></h3><p>Declared at: <a class="is-family-code" href="https://github.com/llvm/llvm-project/blob/release/10.x/llvm/include/llvm/ADT/PointerSumType.h#L119">llvm/include/llvm/ADT/PointerSumType.h:119</a></p><h3 id="3BA3B512B31CE56F"><pre class="p-0 hdoc-pre-parent"><a class="hdoc-permalink-icon" href="#3BA3B512B31CE56F">¶</a><code class="hdoc-function-code language-cpp">void* getVoidPtr() const</code></pre></h3><p>Declared at: <a class="is-family-code" href="https://github.com/llvm/llvm-project/blob/release/10.x/llvm/include/llvm/ADT/PointerSumType.h#L195">llvm/include/llvm/ADT/PointerSumType.h:195</a></p><h3 id="1E93E02FC8487224"><pre class="p-0 hdoc-pre-parent"><a class="hdoc-permalink-icon" href="#1E93E02FC8487224">¶</a><code class="hdoc-function-code language-cpp">template &lt;TagT N&gt;
bool is() const</code></pre></h3><p>Declared at: <a class="is-family-code" href="https://github.com/llvm/llvm-project/blob/release/10.x/llvm/include/llvm/ADT/PointerSumType.h#L123">llvm/include/llvm/ADT/PointerSumType.h:123</a></p><h4>Templates</h4><dl><dt class="is-family-code">TagT<b> N</b></dt></dl><h3 id="1EAB83B978852947"><pre class="p-0 hdoc-pre-parent"><a class="hdoc-permalink-icon" href="#1EAB83B978852947">¶</a><code class="hdoc-function-code language-cpp">bool operator bool() const</code></pre></h3><p>Declared at: <a class="is-family-code" href="https://github.com/llvm/llvm-project/blob/release/10.x/llvm/include/llvm/ADT/PointerSumType.h#L166">llvm/include/llvm/ADT/PointerSumType.h:166</a></p><h3 id="12E2EB777C4654A3"><pre class="p-0 hdoc-pre-parent"><a class="hdoc-permalink-icon" href="#12E2EB777C4654A3">¶</a><code class="hdoc-function-code language-cpp">template &lt;TagT N&gt;
void set(
    typename HelperT::template Lookup&lt;N&gt;::PointerT
        Pointer)</code></pre></h3><h4>Description</h4><p>A typed setter to a given tagged member of the sum type.</p><p>Declared at: <a class="is-family-code" href="https://github.com/llvm/llvm-project/blob/release/10.x/llvm/include/llvm/ADT/PointerSumType.h#L100">llvm/include/llvm/ADT/PointerSumType.h:100</a></p><h4>Templates</h4><dl><dt class="is-family-code">TagT<b> N</b></dt></dl><h4>Parameters</h4><dl><dt class="is-family-code">typename HelperT::template Lookup&lt;N&gt;::PointerT<b> Pointer</b></dt></dl></main></div></div></div></section></div><footer class="footer"><p>Documentation for LLVM 10.0.0.</p><p>Generated by <a href="https://hdoc.io/">hdoc</a> version 1.4.0-hdocInternal on 2022-12-14T09:44:14 UTC.</p><p class="has-text-grey-light">19AD43E11B2996</p></footer></body></html>