<!DOCTYPE html><html><head><meta charset="utf-8"></meta><meta content="width=device-width, initial-scale=1" name="viewport"></meta><title>class LoopTraversal: LLVM 10.0.0 documentation</title><link href="styles.css" rel="stylesheet"></link><script src="highlight.min.js"></script><script>hljs.highlightAll();</script><link href="katex.min.css" rel="stylesheet"></link><script src="katex.min.js"></script><script src="auto-render.min.js"></script><script>
    document.addEventListener("DOMContentLoaded", function() {
      renderMathInElement(document.body, {
        delimiters: [
          {left: '$$', right: '$$', display: true},
          {left: '$', right: '$', display: false},
        ],
      });
    });
  </script><link href="apple-touch-icon.png" sizes="180x180" rel="apple-touch-icon"></link><link href="favicon-32x32.png" sizes="32x32" type="image/png" rel="icon"></link><link href="favicon-16x16.png" sizes="16x16" type="image/png" rel="icon"></link></head><body><div id="wrapper"><section class="section"><div class="container"><div class="columns"><aside class="column is-one-fifth"><ul class="menu-list"><p class="is-size-4">LLVM 10.0.0</p><p class="menu-label">Navigation</p><li><a href="index.html">Home</a></li><li><a href="search.html">Search</a></li><li><a href="https://github.com/llvm/llvm-project/">Repository</a></li><li><a href="https://hdoc.io">Made with hdoc</a></li><p class="menu-label">API Documentation</p><li><a href="functions.html">Functions</a></li><li><a href="records.html">Records</a></li><li><a href="enums.html">Enums</a></li><li><a href="namespaces.html">Namespaces</a></li></ul></aside><div class="column" style="overflow-x: auto"><nav class="breadcrumb has-arrow-separator" aria-label="breadcrumbs"><ul><li><a href="namespaces.html#00A4DA910CC17C2D"><span>namespace llvm</span></a></li><li class="is-active"><a aria-current="page7AFC3BAC7EC5110D"><span>class LoopTraversal</span></a></li></ul></nav><main class="content"><h1>class LoopTraversal</h1><h2>Declaration</h2><pre class="p-0"><code class="hdoc-record-code language-cpp">class LoopTraversal { /* full declaration omitted */ };</code></pre><h2>Description</h2><p>This class provides the basic blocks traversal order used by passes like ReachingDefAnalysis and ExecutionDomainFix. It identifies basic blocks that are part of loops and should to be visited twice and returns efficient traversal order for all the blocks. We want to visit every instruction in every basic block in order to update it&apos;s execution domain or collect clearance information. However, for the clearance calculation, we need to know clearances from all predecessors (including any backedges), therfore we need to visit some blocks twice. As an example, consider the following loop. PH -&gt; A -&gt; B (xmm &lt;Undef &gt; -&gt; xmm &lt;Def &gt;) -&gt; C -&gt; D -&gt; EXIT ^                                  | +----------------------------------+ The iteration order this pass will return is as follows: Optimized: PH A B C A&apos; B&apos; C&apos; D The basic block order is constructed as follows: Once we finish processing some block, we update the counters in MBBInfos and re-process any successors that are now &apos;done&apos;. We call a block that is ready for its final round of processing `done` (isBlockDone), e.g. when all predecessor information is known. Note that a naive traversal order would be to do two complete passes over all basic blocks/instructions, the first for recording clearances, the second for updating clearance based on backedges. However, for functions without backedges, or functions with a lot of straight-line code, and a small loop, that would be a lot of unnecessary work (since only the BBs that are part of the loop require two passes). E.g., the naive iteration order for the above exmple is as follows: Naive: PH A B C D A&apos; B&apos; C&apos; D&apos; In the optimized approach we avoid processing D twice, because we can entirely process the predecessors before getting to D.</p><p>Declared at: <a class="is-family-code" href="https://github.com/llvm/llvm-project/blob/release/10.x/llvm/include/llvm/CodeGen/LoopTraversal.h#L65">llvm/include/llvm/CodeGen/LoopTraversal.h:65</a></p><h2>Method Overview</h2><ul><li class="is-family-code">public  <a href="#BCD019B58C5E621D"><b>LoopTraversal</b></a>()</li><li class="is-family-code">public llvm::LoopTraversal::TraversalOrder  <a href="#4FEBFEDC53E564F9"><b>traverse</b></a>(llvm::MachineFunction &amp; MF)</li></ul><h2>Methods</h2><h3 id="BCD019B58C5E621D"><pre class="p-0 hdoc-pre-parent"><a class="hdoc-permalink-icon" href="#BCD019B58C5E621D">¶</a><code class="hdoc-function-code language-cpp">LoopTraversal()</code></pre></h3><p>Declared at: <a class="is-family-code" href="https://github.com/llvm/llvm-project/blob/release/10.x/llvm/include/llvm/CodeGen/LoopTraversal.h#L101">llvm/include/llvm/CodeGen/LoopTraversal.h:101</a></p><h3 id="4FEBFEDC53E564F9"><pre class="p-0 hdoc-pre-parent"><a class="hdoc-permalink-icon" href="#4FEBFEDC53E564F9">¶</a><code class="hdoc-function-code language-cpp"><a href="r62CD0592E97953B6.html">llvm::LoopTraversal::TraversalOrder</a> traverse(
    <a href="r0899A788A19F8C40.html">llvm::MachineFunction</a>&amp; MF)</code></pre></h3><p>Declared at: <a class="is-family-code" href="https://github.com/llvm/llvm-project/blob/release/10.x/llvm/include/llvm/CodeGen/LoopTraversal.h#L106">llvm/include/llvm/CodeGen/LoopTraversal.h:106</a></p><h4>Parameters</h4><dl><dt class="is-family-code"><a href="r0899A788A19F8C40.html">llvm::MachineFunction</a>&amp;<b> MF</b></dt></dl></main></div></div></div></section></div><footer class="footer"><p>Documentation for LLVM 10.0.0.</p><p>Generated by <a href="https://hdoc.io/">hdoc</a> version 1.4.0-hdocInternal on 2022-12-14T09:44:14 UTC.</p><p class="has-text-grey-light">19AD43E11B2996</p></footer></body></html>