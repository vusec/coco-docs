<!DOCTYPE html><html><head><meta charset="utf-8"></meta><meta content="width=device-width, initial-scale=1" name="viewport"></meta><title>class SampleProfileReaderExtBinaryBase: LLVM 10.0.0 documentation</title><link href="styles.css" rel="stylesheet"></link><script src="highlight.min.js"></script><script>hljs.highlightAll();</script><link href="katex.min.css" rel="stylesheet"></link><script src="katex.min.js"></script><script src="auto-render.min.js"></script><script>
    document.addEventListener("DOMContentLoaded", function() {
      renderMathInElement(document.body, {
        delimiters: [
          {left: '$$', right: '$$', display: true},
          {left: '$', right: '$', display: false},
        ],
      });
    });
  </script><link href="apple-touch-icon.png" sizes="180x180" rel="apple-touch-icon"></link><link href="favicon-32x32.png" sizes="32x32" type="image/png" rel="icon"></link><link href="favicon-16x16.png" sizes="16x16" type="image/png" rel="icon"></link></head><body><div id="wrapper"><section class="section"><div class="container"><div class="columns"><aside class="column is-one-fifth"><ul class="menu-list"><p class="is-size-4">LLVM 10.0.0</p><p class="menu-label">Navigation</p><li><a href="index.html">Home</a></li><li><a href="search.html">Search</a></li><li><a href="https://github.com/llvm/llvm-project/">Repository</a></li><li><a href="https://hdoc.io">Made with hdoc</a></li><p class="menu-label">API Documentation</p><li><a href="functions.html">Functions</a></li><li><a href="records.html">Records</a></li><li><a href="enums.html">Enums</a></li><li><a href="namespaces.html">Namespaces</a></li></ul></aside><div class="column" style="overflow-x: auto"><nav class="breadcrumb has-arrow-separator" aria-label="breadcrumbs"><ul><li><a href="namespaces.html#00A4DA910CC17C2D"><span>namespace llvm</span></a></li><li><a href="namespaces.html#9F885E681E5C88EE"><span>namespace sampleprof</span></a></li><li class="is-active"><a aria-current="pageA2FE180F890FB370"><span>class SampleProfileReaderExtBinaryBase</span></a></li></ul></nav><main class="content"><h1>class SampleProfileReaderExtBinaryBase</h1><h2>Declaration</h2><pre class="p-0"><code class="hdoc-record-code language-cpp">class SampleProfileReaderExtBinaryBase
    : public SampleProfileReaderBinary { /* full declaration omitted */ };</code></pre><h2>Description</h2><p>SampleProfileReaderExtBinaryBase/SampleProfileWriterExtBinaryBase defines the basic structure of the extensible binary format. The format is organized in sections except the magic and version number at the beginning. There is a section table before all the sections, and each entry in the table describes the entry type, start, size and attributes. The format in each section is defined by the section itself. It is easy to add a new section while maintaining the backward compatibility of the profile. Nothing extra needs to be done. If we want to extend an existing section, like add cache misses information in addition to the sample count in the profile body, we can add a new section with the extension and retire the existing section, and we could choose to keep the parser of the old section if we want the reader to be able to read both new and old format profile. SampleProfileReaderExtBinary/SampleProfileWriterExtBinary define the commonly used sections of a profile in extensible binary format. It is possible to define other types of profile inherited from SampleProfileReaderExtBinaryBase/SampleProfileWriterExtBinaryBase.</p><p>Declared at: <a class="is-family-code" href="https://github.com/llvm/llvm-project/blob/release/10.x/llvm/include/llvm/ProfileData/SampleProfReader.h#L576">llvm/include/llvm/ProfileData/SampleProfReader.h:576</a></p><p>Inherits from: <a href="rB586D9ABAB0CE7CF.html">SampleProfileReaderBinary</a></p><h2>Member Variables</h2><dl><dt class="is-family-code" id="var_SecHdrTable">protected  <a href="https://en.cppreference.com/w/cpp/container/vector">std::vector</a>&lt;SecHdrTableEntry&gt; <b>SecHdrTable</b></dt><dt class="is-family-code" id="var_ProfSymList">protected  <a href="https://en.cppreference.com/w/cpp/memory/unique_ptr">std::unique_ptr</a>&lt;ProfileSymbolList&gt; <b>ProfSymList</b></dt></dl><p>Inherited from <a href="rB586D9ABAB0CE7CF.html">SampleProfileReaderBinary</a>:</p><dl><dt class="is-family-code"><a href="rB586D9ABAB0CE7CF.html#var_Data">protected <b>Data</b></a> = nullptr</dt><dt class="is-family-code"><a href="rB586D9ABAB0CE7CF.html#var_End">protected <b>End</b></a> = nullptr</dt><dt class="is-family-code"><a href="rB586D9ABAB0CE7CF.html#var_NameTable">protected <b>NameTable</b></a></dt></dl><p>Inherited from <a href="r083D117B30C9A9CA.html">SampleProfileReader</a>:</p><dl><dt class="is-family-code"><a href="r083D117B30C9A9CA.html#var_Profiles">protected <b>Profiles</b></a></dt><dt class="is-family-code"><a href="r083D117B30C9A9CA.html#var_Ctx">protected <b>Ctx</b></a></dt><dt class="is-family-code"><a href="r083D117B30C9A9CA.html#var_Buffer">protected <b>Buffer</b></a></dt><dt class="is-family-code"><a href="r083D117B30C9A9CA.html#var_Summary">protected <b>Summary</b></a></dt><dt class="is-family-code"><a href="r083D117B30C9A9CA.html#var_Remapper">protected <b>Remapper</b></a></dt><dt class="is-family-code"><a href="r083D117B30C9A9CA.html#var_Format">protected <b>Format</b></a> = SPF_None</dt></dl><h2>Method Overview</h2><ul><li class="is-family-code">public  <a href="#0A86B938D86D9D90"><b>SampleProfileReaderExtBinaryBase</b></a>(std::unique_ptr&lt;MemoryBuffer&gt; B, llvm::LLVMContext &amp; C, llvm::sampleprof::SampleProfileFormat Format)</li><li class="is-family-code">public virtual bool  <a href="#96E10E9170D3589B"><b>dumpSectionInfo</b></a>(llvm::raw_ostream &amp; OS = dbgs())</li><li class="is-family-code">public uint64_t  <a href="#75B4F3A5C157CCFA"><b>getFileSize</b></a>()</li><li class="is-family-code">public uint64_t  <a href="#5EA43A7D014BCD31"><b>getSectionSize</b></a>(llvm::sampleprof::SecType Type)</li><li class="is-family-code">protected virtual std::error_code  <a href="#023366CFE6278F6F"><b>readHeader</b></a>()</li><li class="is-family-code">public std::error_code  <a href="#E63461F3D74EE026"><b>readImpl</b></a>()</li><li class="is-family-code">protected virtual std::error_code  <a href="#114EE3E934F1BC6F"><b>readOneSection</b></a>(const uint8_t * Start, uint64_t Size, llvm::sampleprof::SecType Type)</li><li class="is-family-code">protected std::error_code  <a href="#6FD5B80A1491DF9E"><b>readSecHdrTable</b></a>()</li><li class="is-family-code">protected std::error_code  <a href="#85D5B8FE470285AF"><b>readSecHdrTableEntry</b></a>()</li><li class="is-family-code">protected virtual std::error_code  <a href="#90B2813C9A8446B6"><b>verifySPMagic</b></a>(uint64_t Magic)</li></ul><p>Inherited from <a href="rB586D9ABAB0CE7CF.html">SampleProfileReaderBinary</a>:</p><ul><li class="is-family-code"><a href="rB586D9ABAB0CE7CF.html#DCEE2903FBA1E3B8">protected <b>at_eof</b></a></li><li class="is-family-code"><a href="rB586D9ABAB0CE7CF.html#973ADA4B18473A4A">public <b>getNameTable</b></a></li><li class="is-family-code"><a href="rB586D9ABAB0CE7CF.html#EADB25CDCADED411">protected <b>readFuncProfile</b></a></li><li class="is-family-code"><a href="rB586D9ABAB0CE7CF.html#066E2C3FC5C24BC3">public <b>readHeader</b></a></li><li class="is-family-code"><a href="rB586D9ABAB0CE7CF.html#87F3BACB9971FC19">public <b>readImpl</b></a></li><li class="is-family-code"><a href="rB586D9ABAB0CE7CF.html#BBC7C596D5443EA4">protected <b>readMagicIdent</b></a></li><li class="is-family-code"><a href="rB586D9ABAB0CE7CF.html#982AB04AE24EE73A">protected <b>readNameTable</b></a></li><li class="is-family-code"><a href="rB586D9ABAB0CE7CF.html#E27B8DDF4E268646">protected <b>readNumber</b></a></li><li class="is-family-code"><a href="rB586D9ABAB0CE7CF.html#4837EC0CF1B49EA4">protected <b>readProfile</b></a></li><li class="is-family-code"><a href="rB586D9ABAB0CE7CF.html#C1BC3BEC28C03F06">protected <b>readString</b></a></li><li class="is-family-code"><a href="rB586D9ABAB0CE7CF.html#4CEE879EA321ECDA">protected <b>readStringFromTable</b></a></li><li class="is-family-code"><a href="rB586D9ABAB0CE7CF.html#F710D9F1A0510637">protected <b>readStringIndex</b></a></li><li class="is-family-code"><a href="rB586D9ABAB0CE7CF.html#9214B46A860DE566">protected <b>readSummary</b></a></li><li class="is-family-code"><a href="rB586D9ABAB0CE7CF.html#0E2E70F3E29A6455">protected <b>readUnencodedNumber</b></a></li></ul><p>Inherited from <a href="r083D117B30C9A9CA.html">SampleProfileReader</a>:</p><ul><li class="is-family-code"><a href="r083D117B30C9A9CA.html#C2D62FA9142F952F">public <b>collectFuncsFrom</b></a></li><li class="is-family-code"><a href="r083D117B30C9A9CA.html#BE6693C7E1A603E3">protected <b>computeSummary</b></a></li><li class="is-family-code"><a href="r083D117B30C9A9CA.html#AD1D27D05DC0B3D3">public <b>create</b></a></li><li class="is-family-code"><a href="r083D117B30C9A9CA.html#91368375C709FC78">public <b>create</b></a></li><li class="is-family-code"><a href="r083D117B30C9A9CA.html#90FD6D454B6A01CA">public <b>dump</b></a></li><li class="is-family-code"><a href="r083D117B30C9A9CA.html#764EAB5EBE1293A9">public <b>dumpFunctionProfile</b></a></li><li class="is-family-code"><a href="r083D117B30C9A9CA.html#065476C0F72F53CE">public <b>dumpSectionInfo</b></a></li><li class="is-family-code"><a href="r083D117B30C9A9CA.html#95C0E8D8D38CD14E">public <b>getBuffer</b></a></li><li class="is-family-code"><a href="r083D117B30C9A9CA.html#D5080D6C6B56A3C9">public <b>getFormat</b></a></li><li class="is-family-code"><a href="r083D117B30C9A9CA.html#AAB87FFDA49B7614">public <b>getNameTable</b></a></li><li class="is-family-code"><a href="r083D117B30C9A9CA.html#4E73C7A91D32B93C">public <b>getOrCreateSamplesFor</b></a></li><li class="is-family-code"><a href="r083D117B30C9A9CA.html#9F3B61F25BD1A8F2">public <b>getProfileSymbolList</b></a></li><li class="is-family-code"><a href="r083D117B30C9A9CA.html#DEFDE17DBF5C1783">public <b>getProfiles</b></a></li><li class="is-family-code"><a href="r083D117B30C9A9CA.html#EC3CFE7105031B18">public <b>getSamplesFor</b></a></li><li class="is-family-code"><a href="r083D117B30C9A9CA.html#83DC29D22713674D">public <b>getSamplesFor</b></a></li><li class="is-family-code"><a href="r083D117B30C9A9CA.html#83D5B331AFE57B45">public <b>getSummary</b></a></li><li class="is-family-code"><a href="r083D117B30C9A9CA.html#D12B5A589BAB230A">public <b>read</b></a></li><li class="is-family-code"><a href="r083D117B30C9A9CA.html#85975E3A89FE0CBF">public <b>readHeader</b></a></li><li class="is-family-code"><a href="r083D117B30C9A9CA.html#D16245A7852645A7">public <b>readImpl</b></a></li><li class="is-family-code"><a href="r083D117B30C9A9CA.html#CEF45989C3A14DF2">public <b>reportError</b></a></li><li class="is-family-code"><a href="r083D117B30C9A9CA.html#42FCD96F278CB921">protected <b>takeSummary</b></a></li></ul><h2>Methods</h2><h3 id="0A86B938D86D9D90"><pre class="p-0 hdoc-pre-parent"><a class="hdoc-permalink-icon" href="#0A86B938D86D9D90">¶</a><code class="hdoc-function-code language-cpp">SampleProfileReaderExtBinaryBase(
    <a href="https://en.cppreference.com/w/cpp/memory/unique_ptr">std::unique_ptr</a>&lt;MemoryBuffer&gt; B,
    <a href="rB8F46D3CD599E2BD.html">llvm::LLVMContext</a>&amp; C,
    llvm::sampleprof::SampleProfileFormat Format)</code></pre></h3><p>Declared at: <a class="is-family-code" href="https://github.com/llvm/llvm-project/blob/release/10.x/llvm/include/llvm/ProfileData/SampleProfReader.h#L596">llvm/include/llvm/ProfileData/SampleProfReader.h:596</a></p><h4>Parameters</h4><dl><dt class="is-family-code"><a href="https://en.cppreference.com/w/cpp/memory/unique_ptr">std::unique_ptr</a>&lt;MemoryBuffer&gt;<b> B</b></dt><dt class="is-family-code"><a href="rB8F46D3CD599E2BD.html">llvm::LLVMContext</a>&amp;<b> C</b></dt><dt class="is-family-code">llvm::sampleprof::SampleProfileFormat<b> Format</b></dt></dl><h3 id="96E10E9170D3589B"><pre class="p-0 hdoc-pre-parent"><a class="hdoc-permalink-icon" href="#96E10E9170D3589B">¶</a><code class="hdoc-function-code language-cpp">virtual bool dumpSectionInfo(
    <a href="r6E5FB907260499A2.html">llvm::raw_ostream</a>&amp; OS = dbgs())</code></pre></h3><p>Declared at: <a class="is-family-code" href="https://github.com/llvm/llvm-project/blob/release/10.x/llvm/include/llvm/ProfileData/SampleProfReader.h#L607">llvm/include/llvm/ProfileData/SampleProfReader.h:607</a></p><h4>Parameters</h4><dl><dt class="is-family-code"><a href="r6E5FB907260499A2.html">llvm::raw_ostream</a>&amp;<b> OS</b> = dbgs()</dt></dl><h3 id="75B4F3A5C157CCFA"><pre class="p-0 hdoc-pre-parent"><a class="hdoc-permalink-icon" href="#75B4F3A5C157CCFA">¶</a><code class="hdoc-function-code language-cpp">uint64_t getFileSize()</code></pre></h3><h4>Description</h4><p>Get the total size of header and all sections.</p><p>Declared at: <a class="is-family-code" href="https://github.com/llvm/llvm-project/blob/release/10.x/llvm/include/llvm/ProfileData/SampleProfReader.h#L606">llvm/include/llvm/ProfileData/SampleProfReader.h:606</a></p><h3 id="5EA43A7D014BCD31"><pre class="p-0 hdoc-pre-parent"><a class="hdoc-permalink-icon" href="#5EA43A7D014BCD31">¶</a><code class="hdoc-function-code language-cpp">uint64_t getSectionSize(
    llvm::sampleprof::SecType Type)</code></pre></h3><h4>Description</h4><p>Get the total size of all \p Type sections.</p><p>Declared at: <a class="is-family-code" href="https://github.com/llvm/llvm-project/blob/release/10.x/llvm/include/llvm/ProfileData/SampleProfReader.h#L604">llvm/include/llvm/ProfileData/SampleProfReader.h:604</a></p><h4>Parameters</h4><dl><dt class="is-family-code">llvm::sampleprof::SecType<b> Type</b></dt></dl><h3 id="023366CFE6278F6F"><pre class="p-0 hdoc-pre-parent"><a class="hdoc-permalink-icon" href="#023366CFE6278F6F">¶</a><code class="hdoc-function-code language-cpp">virtual <a href="https://en.cppreference.com/w/cpp/error/error_code">std::error_code</a> readHeader()</code></pre></h3><h4>Description</h4><p>Read and validate the file header.</p><p>Declared at: <a class="is-family-code" href="https://github.com/llvm/llvm-project/blob/release/10.x/llvm/include/llvm/ProfileData/SampleProfReader.h#L590">llvm/include/llvm/ProfileData/SampleProfReader.h:590</a></p><h3 id="E63461F3D74EE026"><pre class="p-0 hdoc-pre-parent"><a class="hdoc-permalink-icon" href="#E63461F3D74EE026">¶</a><code class="hdoc-function-code language-cpp"><a href="https://en.cppreference.com/w/cpp/error/error_code">std::error_code</a> readImpl()</code></pre></h3><h4>Description</h4><p>Read sample profiles in extensible format from the associated file.</p><p>Declared at: <a class="is-family-code" href="https://github.com/llvm/llvm-project/blob/release/10.x/llvm/include/llvm/ProfileData/SampleProfReader.h#L601">llvm/include/llvm/ProfileData/SampleProfReader.h:601</a></p><h3 id="114EE3E934F1BC6F"><pre class="p-0 hdoc-pre-parent"><a class="hdoc-permalink-icon" href="#114EE3E934F1BC6F">¶</a><code class="hdoc-function-code language-cpp">virtual <a href="https://en.cppreference.com/w/cpp/error/error_code">std::error_code</a> readOneSection(
    const uint8_t* Start,
    uint64_t Size,
    llvm::sampleprof::SecType Type)</code></pre></h3><p>Declared at: <a class="is-family-code" href="https://github.com/llvm/llvm-project/blob/release/10.x/llvm/include/llvm/ProfileData/SampleProfReader.h#L592">llvm/include/llvm/ProfileData/SampleProfReader.h:592</a></p><h4>Parameters</h4><dl><dt class="is-family-code">const uint8_t*<b> Start</b></dt><dt class="is-family-code">uint64_t<b> Size</b></dt><dt class="is-family-code">llvm::sampleprof::SecType<b> Type</b></dt></dl><h3 id="6FD5B80A1491DF9E"><pre class="p-0 hdoc-pre-parent"><a class="hdoc-permalink-icon" href="#6FD5B80A1491DF9E">¶</a><code class="hdoc-function-code language-cpp"><a href="https://en.cppreference.com/w/cpp/error/error_code">std::error_code</a> readSecHdrTable()</code></pre></h3><p>Declared at: <a class="is-family-code" href="https://github.com/llvm/llvm-project/blob/release/10.x/llvm/include/llvm/ProfileData/SampleProfReader.h#L589">llvm/include/llvm/ProfileData/SampleProfReader.h:589</a></p><h3 id="85D5B8FE470285AF"><pre class="p-0 hdoc-pre-parent"><a class="hdoc-permalink-icon" href="#85D5B8FE470285AF">¶</a><code class="hdoc-function-code language-cpp"><a href="https://en.cppreference.com/w/cpp/error/error_code">std::error_code</a> readSecHdrTableEntry()</code></pre></h3><p>Declared at: <a class="is-family-code" href="https://github.com/llvm/llvm-project/blob/release/10.x/llvm/include/llvm/ProfileData/SampleProfReader.h#L588">llvm/include/llvm/ProfileData/SampleProfReader.h:588</a></p><h3 id="90B2813C9A8446B6"><pre class="p-0 hdoc-pre-parent"><a class="hdoc-permalink-icon" href="#90B2813C9A8446B6">¶</a><code class="hdoc-function-code language-cpp">virtual <a href="https://en.cppreference.com/w/cpp/error/error_code">std::error_code</a> verifySPMagic(
    uint64_t Magic)</code></pre></h3><p>Declared at: <a class="is-family-code" href="https://github.com/llvm/llvm-project/blob/release/10.x/llvm/include/llvm/ProfileData/SampleProfReader.h#L591">llvm/include/llvm/ProfileData/SampleProfReader.h:591</a></p><h4>Parameters</h4><dl><dt class="is-family-code">uint64_t<b> Magic</b></dt></dl></main></div></div></div></section></div><footer class="footer"><p>Documentation for LLVM 10.0.0.</p><p>Generated by <a href="https://hdoc.io/">hdoc</a> version 1.4.0-hdocInternal on 2022-12-14T09:44:14 UTC.</p><p class="has-text-grey-light">19AD43E11B2996</p></footer></body></html>