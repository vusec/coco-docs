<!DOCTYPE html><html><head><meta charset="utf-8"></meta><meta content="width=device-width, initial-scale=1" name="viewport"></meta><title>class VPRecipeBuilder: LLVM 10.0.0 documentation</title><link href="styles.css" rel="stylesheet"></link><script src="highlight.min.js"></script><script>hljs.highlightAll();</script><link href="katex.min.css" rel="stylesheet"></link><script src="katex.min.js"></script><script src="auto-render.min.js"></script><script>
    document.addEventListener("DOMContentLoaded", function() {
      renderMathInElement(document.body, {
        delimiters: [
          {left: '$$', right: '$$', display: true},
          {left: '$', right: '$', display: false},
        ],
      });
    });
  </script><link href="apple-touch-icon.png" sizes="180x180" rel="apple-touch-icon"></link><link href="favicon-32x32.png" sizes="32x32" type="image/png" rel="icon"></link><link href="favicon-16x16.png" sizes="16x16" type="image/png" rel="icon"></link></head><body><div id="wrapper"><section class="section"><div class="container"><div class="columns"><aside class="column is-one-fifth"><ul class="menu-list"><p class="is-size-4">LLVM 10.0.0</p><p class="menu-label">Navigation</p><li><a href="index.html">Home</a></li><li><a href="search.html">Search</a></li><li><a href="https://github.com/llvm/llvm-project/">Repository</a></li><li><a href="https://hdoc.io">Made with hdoc</a></li><p class="menu-label">API Documentation</p><li><a href="functions.html">Functions</a></li><li><a href="records.html">Records</a></li><li><a href="enums.html">Enums</a></li><li><a href="namespaces.html">Namespaces</a></li></ul></aside><div class="column" style="overflow-x: auto"><nav class="breadcrumb has-arrow-separator" aria-label="breadcrumbs"><ul><li><a href="namespaces.html#00A4DA910CC17C2D"><span>namespace llvm</span></a></li><li class="is-active"><a aria-current="pageD1FD1BB519B1A770"><span>class VPRecipeBuilder</span></a></li></ul></nav><main class="content"><h1>class VPRecipeBuilder</h1><h2>Declaration</h2><pre class="p-0"><code class="hdoc-record-code language-cpp">class VPRecipeBuilder { /* full declaration omitted */ };</code></pre><h2>Description</h2><p>Helper class to create VPRecipies from IR instructions.</p><p>Declared at: <a class="is-family-code" href="https://github.com/llvm/llvm-project/blob/release/10.x/llvm/lib/Transforms/Vectorize/VPRecipeBuilder.h#L25">llvm/lib/Transforms/Vectorize/VPRecipeBuilder.h:25</a></p><h2>Method Overview</h2><ul><li class="is-family-code">public  <a href="#DA9329C2541B7014"><b>VPRecipeBuilder</b></a>(llvm::Loop * OrigLoop, const llvm::TargetLibraryInfo * TLI, llvm::LoopVectorizationLegality * Legal, llvm::LoopVectorizationCostModel &amp; CM, llvm::VPBuilder &amp; Builder)</li><li class="is-family-code">public llvm::VPValue *  <a href="#DAC35F8E1A9F4A86"><b>createBlockInMask</b></a>(llvm::BasicBlock * BB, llvm::VPlanPtr &amp; Plan)</li><li class="is-family-code">public llvm::VPValue *  <a href="#E8627112D2E119D6"><b>createEdgeMask</b></a>(llvm::BasicBlock * Src, llvm::BasicBlock * Dst, llvm::VPlanPtr &amp; Plan)</li><li class="is-family-code">public llvm::VPRegionBlock *  <a href="#044C2B96AC028B02"><b>createReplicateRegion</b></a>(llvm::Instruction * I, llvm::VPRecipeBase * PredRecipe, llvm::VPlanPtr &amp; Plan)</li><li class="is-family-code">public llvm::VPRecipeBase *  <a href="#9A1652F5DA575EB9"><b>getRecipe</b></a>(llvm::Instruction * I)</li><li class="is-family-code">public llvm::VPBasicBlock *  <a href="#485BB07547F5F475"><b>handleReplication</b></a>(llvm::Instruction * I, llvm::VFRange &amp; Range, llvm::VPBasicBlock * VPBB, DenseMap&lt;llvm::Instruction *, llvm::VPReplicateRecipe *&gt; &amp; PredInst2Recipe, llvm::VPlanPtr &amp; Plan)</li><li class="is-family-code">public void  <a href="#A6C9E9B8476C50C7"><b>recordRecipeOf</b></a>(llvm::Instruction * I)</li><li class="is-family-code">public llvm::VPBlendRecipe *  <a href="#364FA794C0532E67"><b>tryToBlend</b></a>(llvm::Instruction * I, llvm::VPlanPtr &amp; Plan)</li><li class="is-family-code">public bool  <a href="#3D89F25CFABE8A36"><b>tryToCreateRecipe</b></a>(llvm::Instruction * Instr, llvm::VFRange &amp; Range, llvm::VPlanPtr &amp; Plan, llvm::VPBasicBlock * VPBB)</li><li class="is-family-code">public llvm::VPWidenIntOrFpInductionRecipe *  <a href="#7D42D09746E73704"><b>tryToOptimizeInduction</b></a>(llvm::Instruction * I, llvm::VFRange &amp; Range)</li><li class="is-family-code">public bool  <a href="#A66F83CEC97F7DD9"><b>tryToWiden</b></a>(llvm::Instruction * I, llvm::VPBasicBlock * VPBB, llvm::VFRange &amp; Range)</li><li class="is-family-code">public llvm::VPWidenMemoryInstructionRecipe *  <a href="#484678CDC65A048A"><b>tryToWidenMemory</b></a>(llvm::Instruction * I, llvm::VFRange &amp; Range, llvm::VPlanPtr &amp; Plan)</li></ul><h2>Methods</h2><h3 id="DA9329C2541B7014"><pre class="p-0 hdoc-pre-parent"><a class="hdoc-permalink-icon" href="#DA9329C2541B7014">¶</a><code class="hdoc-function-code language-cpp">VPRecipeBuilder(
    <a href="r210AF08D1E341AC3.html">llvm::Loop</a>* OrigLoop,
    const <a href="r8801A6B76136C2E2.html">llvm::TargetLibraryInfo</a>* TLI,
    <a href="r34A790BE0D292910.html">llvm::LoopVectorizationLegality</a>* Legal,
    <a href="rD478F0D4DBC4BB42.html">llvm::LoopVectorizationCostModel</a>&amp; CM,
    <a href="r0F0152493DD797DB.html">llvm::VPBuilder</a>&amp; Builder)</code></pre></h3><p>Declared at: <a class="is-family-code" href="https://github.com/llvm/llvm-project/blob/release/10.x/llvm/lib/Transforms/Vectorize/VPRecipeBuilder.h#L127">llvm/lib/Transforms/Vectorize/VPRecipeBuilder.h:127</a></p><h4>Parameters</h4><dl><dt class="is-family-code"><a href="r210AF08D1E341AC3.html">llvm::Loop</a>*<b> OrigLoop</b></dt><dt class="is-family-code">const <a href="r8801A6B76136C2E2.html">llvm::TargetLibraryInfo</a>*<b> TLI</b></dt><dt class="is-family-code"><a href="r34A790BE0D292910.html">llvm::LoopVectorizationLegality</a>*<b> Legal</b></dt><dt class="is-family-code"><a href="rD478F0D4DBC4BB42.html">llvm::LoopVectorizationCostModel</a>&amp;<b> CM</b></dt><dt class="is-family-code"><a href="r0F0152493DD797DB.html">llvm::VPBuilder</a>&amp;<b> Builder</b></dt></dl><h3 id="DAC35F8E1A9F4A86"><pre class="p-0 hdoc-pre-parent"><a class="hdoc-permalink-icon" href="#DAC35F8E1A9F4A86">¶</a><code class="hdoc-function-code language-cpp"><a href="r5387BDC129002C87.html">llvm::VPValue</a>* createBlockInMask(
    <a href="r5F23A6FBCC3A87BD.html">llvm::BasicBlock</a>* BB,
    llvm::VPlanPtr&amp; Plan)</code></pre></h3><h4>Description</h4><p>A helper function that computes the predicate of the block BB, assuming that the header block of the loop is set to True. It returns the *entry* mask for the block BB.</p><p>Declared at: <a class="is-family-code" href="https://github.com/llvm/llvm-project/blob/release/10.x/llvm/lib/Transforms/Vectorize/VPRecipeBuilder.h#L72">llvm/lib/Transforms/Vectorize/VPRecipeBuilder.h:72</a></p><h4>Parameters</h4><dl><dt class="is-family-code"><a href="r5F23A6FBCC3A87BD.html">llvm::BasicBlock</a>*<b> BB</b></dt><dt class="is-family-code">llvm::VPlanPtr&amp;<b> Plan</b></dt></dl><h3 id="E8627112D2E119D6"><pre class="p-0 hdoc-pre-parent"><a class="hdoc-permalink-icon" href="#E8627112D2E119D6">¶</a><code class="hdoc-function-code language-cpp"><a href="r5387BDC129002C87.html">llvm::VPValue</a>* createEdgeMask(
    <a href="r5F23A6FBCC3A87BD.html">llvm::BasicBlock</a>* Src,
    <a href="r5F23A6FBCC3A87BD.html">llvm::BasicBlock</a>* Dst,
    llvm::VPlanPtr&amp; Plan)</code></pre></h3><h4>Description</h4><p>A helper function that computes the predicate of the edge between SRC and DST.</p><p>Declared at: <a class="is-family-code" href="https://github.com/llvm/llvm-project/blob/release/10.x/llvm/lib/Transforms/Vectorize/VPRecipeBuilder.h#L76">llvm/lib/Transforms/Vectorize/VPRecipeBuilder.h:76</a></p><h4>Parameters</h4><dl><dt class="is-family-code"><a href="r5F23A6FBCC3A87BD.html">llvm::BasicBlock</a>*<b> Src</b></dt><dt class="is-family-code"><a href="r5F23A6FBCC3A87BD.html">llvm::BasicBlock</a>*<b> Dst</b></dt><dt class="is-family-code">llvm::VPlanPtr&amp;<b> Plan</b></dt></dl><h3 id="044C2B96AC028B02"><pre class="p-0 hdoc-pre-parent"><a class="hdoc-permalink-icon" href="#044C2B96AC028B02">¶</a><code class="hdoc-function-code language-cpp"><a href="r1E5E9E80710C543C.html">llvm::VPRegionBlock</a>* createReplicateRegion(
    <a href="rE266D8602316BABC.html">llvm::Instruction</a>* I,
    <a href="r416C53C8483BD3C6.html">llvm::VPRecipeBase</a>* PredRecipe,
    llvm::VPlanPtr&amp; Plan)</code></pre></h3><h4>Description</h4><p>Create a replicating region for instruction \p I that requires predication. \p PredRecipe is a VPReplicateRecipe holding \p I.</p><p>Declared at: <a class="is-family-code" href="https://github.com/llvm/llvm-project/blob/release/10.x/llvm/lib/Transforms/Vectorize/VPRecipeBuilder.h#L123">llvm/lib/Transforms/Vectorize/VPRecipeBuilder.h:123</a></p><h4>Parameters</h4><dl><dt class="is-family-code"><a href="rE266D8602316BABC.html">llvm::Instruction</a>*<b> I</b></dt><dt class="is-family-code"><a href="r416C53C8483BD3C6.html">llvm::VPRecipeBase</a>*<b> PredRecipe</b></dt><dt class="is-family-code">llvm::VPlanPtr&amp;<b> Plan</b></dt></dl><h3 id="9A1652F5DA575EB9"><pre class="p-0 hdoc-pre-parent"><a class="hdoc-permalink-icon" href="#9A1652F5DA575EB9">¶</a><code class="hdoc-function-code language-cpp"><a href="r416C53C8483BD3C6.html">llvm::VPRecipeBase</a>* getRecipe(
    <a href="rE266D8602316BABC.html">llvm::Instruction</a>* I)</code></pre></h3><h4>Description</h4><p>Return the recipe created for given ingredient.</p><p>Declared at: <a class="is-family-code" href="https://github.com/llvm/llvm-project/blob/release/10.x/llvm/lib/Transforms/Vectorize/VPRecipeBuilder.h#L87">llvm/lib/Transforms/Vectorize/VPRecipeBuilder.h:87</a></p><h4>Parameters</h4><dl><dt class="is-family-code"><a href="rE266D8602316BABC.html">llvm::Instruction</a>*<b> I</b></dt></dl><h3 id="485BB07547F5F475"><pre class="p-0 hdoc-pre-parent"><a class="hdoc-permalink-icon" href="#485BB07547F5F475">¶</a><code class="hdoc-function-code language-cpp"><a href="r98A6016861825C76.html">llvm::VPBasicBlock</a>* handleReplication(
    <a href="rE266D8602316BABC.html">llvm::Instruction</a>* I,
    <a href="r8C39DE2D1769C581.html">llvm::VFRange</a>&amp; Range,
    <a href="r98A6016861825C76.html">llvm::VPBasicBlock</a>* VPBB,
    <a href="rC2880C7E8E458B54.html">DenseMap</a>&lt;llvm::Instruction*,
             llvm::VPReplicateRecipe*&gt;&amp;
        PredInst2Recipe,
    llvm::VPlanPtr&amp; Plan)</code></pre></h3><h4>Description</h4><p>Build a VPReplicationRecipe for \p I and enclose it within a Region if it is predicated.</p><p>Declared at: <a class="is-family-code" href="https://github.com/llvm/llvm-project/blob/release/10.x/llvm/lib/Transforms/Vectorize/VPRecipeBuilder.h#L143">llvm/lib/Transforms/Vectorize/VPRecipeBuilder.h:143</a></p><h4>Parameters</h4><dl><dt class="is-family-code"><a href="rE266D8602316BABC.html">llvm::Instruction</a>*<b> I</b></dt><dt class="is-family-code"><a href="r8C39DE2D1769C581.html">llvm::VFRange</a>&amp;<b> Range</b></dt><dt class="is-family-code"><a href="r98A6016861825C76.html">llvm::VPBasicBlock</a>*<b> VPBB</b></dt><dt class="is-family-code"><a href="rC2880C7E8E458B54.html">DenseMap</a>&lt;llvm::Instruction*,
         llvm::VPReplicateRecipe*&gt;&amp;<b> PredInst2Recipe</b></dt><dt class="is-family-code">llvm::VPlanPtr&amp;<b> Plan</b></dt></dl><h4>Returns</h4><p>a new VPBasicBlock that succeeds the new Region. Update the packing decision of predicated instructions if they feed \p I. Range.End may be decreased to ensure same recipe behavior from\p Range.Start to \p Range.End.</p><h3 id="A6C9E9B8476C50C7"><pre class="p-0 hdoc-pre-parent"><a class="hdoc-permalink-icon" href="#A6C9E9B8476C50C7">¶</a><code class="hdoc-function-code language-cpp">void recordRecipeOf(<a href="rE266D8602316BABC.html">llvm::Instruction</a>* I)</code></pre></h3><h4>Description</h4><p>Mark given ingredient for recording its recipe once one is created for it.</p><p>Declared at: <a class="is-family-code" href="https://github.com/llvm/llvm-project/blob/release/10.x/llvm/lib/Transforms/Vectorize/VPRecipeBuilder.h#L80">llvm/lib/Transforms/Vectorize/VPRecipeBuilder.h:80</a></p><h4>Parameters</h4><dl><dt class="is-family-code"><a href="rE266D8602316BABC.html">llvm::Instruction</a>*<b> I</b></dt></dl><h3 id="364FA794C0532E67"><pre class="p-0 hdoc-pre-parent"><a class="hdoc-permalink-icon" href="#364FA794C0532E67">¶</a><code class="hdoc-function-code language-cpp"><a href="r8AC74F89EDCF18A7.html">llvm::VPBlendRecipe</a>* tryToBlend(
    <a href="rE266D8602316BABC.html">llvm::Instruction</a>* I,
    llvm::VPlanPtr&amp; Plan)</code></pre></h3><h4>Description</h4><p>Handle non-loop phi nodes. Currently all such phi nodes are turned into a sequence of select instructions as the vectorizer currently performs full if-conversion.</p><p>Declared at: <a class="is-family-code" href="https://github.com/llvm/llvm-project/blob/release/10.x/llvm/lib/Transforms/Vectorize/VPRecipeBuilder.h#L111">llvm/lib/Transforms/Vectorize/VPRecipeBuilder.h:111</a></p><h4>Parameters</h4><dl><dt class="is-family-code"><a href="rE266D8602316BABC.html">llvm::Instruction</a>*<b> I</b></dt><dt class="is-family-code">llvm::VPlanPtr&amp;<b> Plan</b></dt></dl><h3 id="3D89F25CFABE8A36"><pre class="p-0 hdoc-pre-parent"><a class="hdoc-permalink-icon" href="#3D89F25CFABE8A36">¶</a><code class="hdoc-function-code language-cpp">bool tryToCreateRecipe(<a href="rE266D8602316BABC.html">llvm::Instruction</a>* Instr,
                       <a href="r8C39DE2D1769C581.html">llvm::VFRange</a>&amp; Range,
                       llvm::VPlanPtr&amp; Plan,
                       <a href="r98A6016861825C76.html">llvm::VPBasicBlock</a>* VPBB)</code></pre></h3><h4>Description</h4><p>Check if a recipe can be create for \p I withing the given VF \p Range. If a recipe can be created, it adds it to \p VPBB.</p><p>Declared at: <a class="is-family-code" href="https://github.com/llvm/llvm-project/blob/release/10.x/llvm/lib/Transforms/Vectorize/VPRecipeBuilder.h#L134">llvm/lib/Transforms/Vectorize/VPRecipeBuilder.h:134</a></p><h4>Parameters</h4><dl><dt class="is-family-code"><a href="rE266D8602316BABC.html">llvm::Instruction</a>*<b> Instr</b></dt><dt class="is-family-code"><a href="r8C39DE2D1769C581.html">llvm::VFRange</a>&amp;<b> Range</b></dt><dt class="is-family-code">llvm::VPlanPtr&amp;<b> Plan</b></dt><dt class="is-family-code"><a href="r98A6016861825C76.html">llvm::VPBasicBlock</a>*<b> VPBB</b></dt></dl><h3 id="7D42D09746E73704"><pre class="p-0 hdoc-pre-parent"><a class="hdoc-permalink-icon" href="#7D42D09746E73704">¶</a><code class="hdoc-function-code language-cpp"><a href="rF060B731E1A76220.html">llvm::VPWidenIntOrFpInductionRecipe</a>*
tryToOptimizeInduction(<a href="rE266D8602316BABC.html">llvm::Instruction</a>* I,
                       <a href="r8C39DE2D1769C581.html">llvm::VFRange</a>&amp; Range)</code></pre></h3><h4>Description</h4><p>Check if an induction recipe should be constructed for \Iwithin the given VF \p Range. If so build and return it. If not, return null. \p Range.End may be decreased to ensure same decision from \p Range.Start to\p Range.End.</p><p>Declared at: <a class="is-family-code" href="https://github.com/llvm/llvm-project/blob/release/10.x/llvm/lib/Transforms/Vectorize/VPRecipeBuilder.h#L105">llvm/lib/Transforms/Vectorize/VPRecipeBuilder.h:105</a></p><h4>Parameters</h4><dl><dt class="is-family-code"><a href="rE266D8602316BABC.html">llvm::Instruction</a>*<b> I</b></dt><dt class="is-family-code"><a href="r8C39DE2D1769C581.html">llvm::VFRange</a>&amp;<b> Range</b></dt></dl><h3 id="A66F83CEC97F7DD9"><pre class="p-0 hdoc-pre-parent"><a class="hdoc-permalink-icon" href="#A66F83CEC97F7DD9">¶</a><code class="hdoc-function-code language-cpp">bool tryToWiden(<a href="rE266D8602316BABC.html">llvm::Instruction</a>* I,
                <a href="r98A6016861825C76.html">llvm::VPBasicBlock</a>* VPBB,
                <a href="r8C39DE2D1769C581.html">llvm::VFRange</a>&amp; Range)</code></pre></h3><h4>Description</h4><p>Check if \p I can be widened within the given VF \p Range. If \p I can be widened for \p Range.Start, check if the last recipe of \p VPBB can be extended to include \p I or else build a new VPWidenRecipe for it and append it to \p VPBB. Return true if \p I can be widened for Range.Start, false otherwise. Range.End may be decreased to ensure same decision from\p Range.Start to \p Range.End.</p><p>Declared at: <a class="is-family-code" href="https://github.com/llvm/llvm-project/blob/release/10.x/llvm/lib/Transforms/Vectorize/VPRecipeBuilder.h#L119">llvm/lib/Transforms/Vectorize/VPRecipeBuilder.h:119</a></p><h4>Parameters</h4><dl><dt class="is-family-code"><a href="rE266D8602316BABC.html">llvm::Instruction</a>*<b> I</b></dt><dt class="is-family-code"><a href="r98A6016861825C76.html">llvm::VPBasicBlock</a>*<b> VPBB</b></dt><dt class="is-family-code"><a href="r8C39DE2D1769C581.html">llvm::VFRange</a>&amp;<b> Range</b></dt></dl><h3 id="484678CDC65A048A"><pre class="p-0 hdoc-pre-parent"><a class="hdoc-permalink-icon" href="#484678CDC65A048A">¶</a><code class="hdoc-function-code language-cpp"><a href="r5990C4E6814C6174.html">llvm::VPWidenMemoryInstructionRecipe</a>*
tryToWidenMemory(<a href="rE266D8602316BABC.html">llvm::Instruction</a>* I,
                 <a href="r8C39DE2D1769C581.html">llvm::VFRange</a>&amp; Range,
                 llvm::VPlanPtr&amp; Plan)</code></pre></h3><h4>Description</h4><p>Check if \Iis a memory instruction to be widened for \p Range.Start and potentially masked. Such instructions are handled by a recipe that takes an additional VPInstruction for the mask.</p><p>Declared at: <a class="is-family-code" href="https://github.com/llvm/llvm-project/blob/release/10.x/llvm/lib/Transforms/Vectorize/VPRecipeBuilder.h#L99">llvm/lib/Transforms/Vectorize/VPRecipeBuilder.h:99</a></p><h4>Parameters</h4><dl><dt class="is-family-code"><a href="rE266D8602316BABC.html">llvm::Instruction</a>*<b> I</b></dt><dt class="is-family-code"><a href="r8C39DE2D1769C581.html">llvm::VFRange</a>&amp;<b> Range</b></dt><dt class="is-family-code">llvm::VPlanPtr&amp;<b> Plan</b></dt></dl></main></div></div></div></section></div><footer class="footer"><p>Documentation for LLVM 10.0.0.</p><p>Generated by <a href="https://hdoc.io/">hdoc</a> version 1.4.0-hdocInternal on 2022-12-14T09:44:14 UTC.</p><p class="has-text-grey-light">19AD43E11B2996</p></footer></body></html>