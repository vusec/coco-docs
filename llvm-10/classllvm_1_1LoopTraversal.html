<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.13"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>LLVM: llvm::LoopTraversal Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<script type="text/x-mathjax-config">
  MathJax.Hub.Config({
    extensions: ["tex2jax.js"],
    jax: ["input/TeX","output/HTML-CSS"],
});
</script><script type="text/javascript" src="http://cdn.mathjax.org/mathjax/latest/MathJax.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">LLVM
   &#160;<span id="projectnumber">10.0.0</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.13 -->
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('',false,false,'search.php','Search');
});
</script>
<div id="main-nav"></div>
<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="namespacellvm.html">llvm</a></li><li class="navelem"><a class="el" href="classllvm_1_1LoopTraversal.html">LoopTraversal</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#nested-classes">Classes</a> &#124;
<a href="#pub-types">Public Types</a> &#124;
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="classllvm_1_1LoopTraversal-members.html">List of all members</a>  </div>
  <div class="headertitle">
<div class="title">llvm::LoopTraversal Class Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p>This class provides the basic blocks traversal order used by passes like <a class="el" href="classllvm_1_1ReachingDefAnalysis.html" title="This class provides the reaching def analysis. ">ReachingDefAnalysis</a> and <a class="el" href="classllvm_1_1ExecutionDomainFix.html">ExecutionDomainFix</a>.  
 <a href="classllvm_1_1LoopTraversal.html#details">More...</a></p>

<p><code>#include &quot;<a class="el" href="LoopTraversal_8h_source.html">llvm/CodeGen/LoopTraversal.h</a>&quot;</code></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="nested-classes"></a>
Classes</h2></td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structllvm_1_1LoopTraversal_1_1TraversedMBBInfo.html">TraversedMBBInfo</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-types"></a>
Public Types</h2></td></tr>
<tr class="memitem:adb30e4144436f66defa2ce2454e0fde8"><td class="memItemLeft" align="right" valign="top">typedef <a class="el" href="classllvm_1_1SmallVector.html">SmallVector</a>&lt; <a class="el" href="structllvm_1_1LoopTraversal_1_1TraversedMBBInfo.html">TraversedMBBInfo</a>, 4 &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classllvm_1_1LoopTraversal.html#adb30e4144436f66defa2ce2454e0fde8">TraversalOrder</a></td></tr>
<tr class="memdesc:adb30e4144436f66defa2ce2454e0fde8"><td class="mdescLeft">&#160;</td><td class="mdescRight">Identifies basic blocks that are part of loops and should to be visited twice and returns efficient traversal order for all the blocks.  <a href="#adb30e4144436f66defa2ce2454e0fde8">More...</a><br /></td></tr>
<tr class="separator:adb30e4144436f66defa2ce2454e0fde8"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:aca9ed1b16ed49290112d56b3ef814f39"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classllvm_1_1LoopTraversal.html#aca9ed1b16ed49290112d56b3ef814f39">LoopTraversal</a> ()</td></tr>
<tr class="separator:aca9ed1b16ed49290112d56b3ef814f39"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a87cd9704fc800af5dddb87f26badfb3a"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classllvm_1_1LoopTraversal.html#adb30e4144436f66defa2ce2454e0fde8">TraversalOrder</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classllvm_1_1LoopTraversal.html#a87cd9704fc800af5dddb87f26badfb3a">traverse</a> (<a class="el" href="classllvm_1_1MachineFunction.html">MachineFunction</a> &amp;MF)</td></tr>
<tr class="separator:a87cd9704fc800af5dddb87f26badfb3a"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>This class provides the basic blocks traversal order used by passes like <a class="el" href="classllvm_1_1ReachingDefAnalysis.html" title="This class provides the reaching def analysis. ">ReachingDefAnalysis</a> and <a class="el" href="classllvm_1_1ExecutionDomainFix.html">ExecutionDomainFix</a>. </p>
<p>It identifies basic blocks that are part of loops and should to be visited twice and returns efficient traversal order for all the blocks.</p>
<p>We want to visit every instruction in every basic block in order to update it's execution domain or collect clearance information. However, for the clearance calculation, we need to know clearances from all predecessors (including any backedges), therfore we need to visit some blocks twice. As an example, consider the following loop.</p>
<p>PH -&gt; A -&gt; B (xmm&lt;Undef&gt; -&gt; xmm&lt;Def&gt;) -&gt; C -&gt; D -&gt; EXIT ^ | +-------------------------------&mdash;+</p>
<p>The iteration order this pass will return is as follows: Optimized: PH A B C A' B' C' D</p>
<p>The basic block order is constructed as follows: Once we finish processing some block, we update the counters in MBBInfos and re-process any successors that are now 'done'. We call a block that is ready for its final round of processing <code>done</code> (isBlockDone), e.g. when all predecessor information is known.</p>
<p>Note that a naive traversal order would be to do two complete passes over all basic blocks/instructions, the first for recording clearances, the second for updating clearance based on backedges. However, for functions without backedges, or functions with a lot of straight-line code, and a small loop, that would be a lot of unnecessary work (since only the BBs that are part of the loop require two passes).</p>
<p>E.g., the naive iteration order for the above exmple is as follows: Naive: PH A B C D A' B' C' D'</p>
<p>In the optimized approach we avoid processing D twice, because we can entirely process the predecessors before getting to D. </p>

<p class="definition">Definition at line <a class="el" href="LoopTraversal_8h_source.html#l00065">65</a> of file <a class="el" href="LoopTraversal_8h_source.html">LoopTraversal.h</a>.</p>
</div><h2 class="groupheader">Member Typedef Documentation</h2>
<a id="adb30e4144436f66defa2ce2454e0fde8"></a>
<h2 class="memtitle"><span class="permalink"><a href="#adb30e4144436f66defa2ce2454e0fde8">&#9670;&nbsp;</a></span>TraversalOrder</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef <a class="el" href="classllvm_1_1SmallVector.html">SmallVector</a>&lt;<a class="el" href="structllvm_1_1LoopTraversal_1_1TraversedMBBInfo.html">TraversedMBBInfo</a>, 4&gt; <a class="el" href="classllvm_1_1LoopTraversal.html#adb30e4144436f66defa2ce2454e0fde8">llvm::LoopTraversal::TraversalOrder</a></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Identifies basic blocks that are part of loops and should to be visited twice and returns efficient traversal order for all the blocks. </p>

<p class="definition">Definition at line <a class="el" href="LoopTraversal_8h_source.html#l00105">105</a> of file <a class="el" href="LoopTraversal_8h_source.html">LoopTraversal.h</a>.</p>

</div>
</div>
<h2 class="groupheader">Constructor &amp; Destructor Documentation</h2>
<a id="aca9ed1b16ed49290112d56b3ef814f39"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aca9ed1b16ed49290112d56b3ef814f39">&#9670;&nbsp;</a></span>LoopTraversal()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">llvm::LoopTraversal::LoopTraversal </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="LoopTraversal_8h_source.html#l00101">101</a> of file <a class="el" href="LoopTraversal_8h_source.html">LoopTraversal.h</a>.</p>

</div>
</div>
<h2 class="groupheader">Member Function Documentation</h2>
<a id="a87cd9704fc800af5dddb87f26badfb3a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a87cd9704fc800af5dddb87f26badfb3a">&#9670;&nbsp;</a></span>traverse()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classllvm_1_1LoopTraversal.html#adb30e4144436f66defa2ce2454e0fde8">LoopTraversal::TraversalOrder</a> LoopTraversal::traverse </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classllvm_1_1MachineFunction.html">MachineFunction</a> &amp;&#160;</td>
          <td class="paramname"><em>MF</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="LoopTraversal_8cpp_source.html#l00024">24</a> of file <a class="el" href="LoopTraversal_8cpp_source.html">LoopTraversal.cpp</a>.</p>

<p class="reference">References <a class="el" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert()</a>, <a class="el" href="SmallVector_8h_source.html#l00412">llvm::SmallVectorImpl&lt; T &gt;::assign()</a>, <a class="el" href="SmallVector_8h_source.html#l00166">llvm::SmallVectorTemplateCommon&lt; T &gt;::back()</a>, <a class="el" href="MachineFunction_8h_source.html#l00651">llvm::MachineFunction::begin()</a>, <a class="el" href="SmallVector_8h_source.html#l00339">llvm::SmallVectorImpl&lt; T &gt;::clear()</a>, <a class="el" href="SmallVector_8h_source.html#l00055">llvm::SmallVectorBase::empty()</a>, <a class="el" href="MachineBasicBlock_8h_source.html#l00800">llvm::MachineBasicBlock::getNumber()</a>, <a class="el" href="MachineFunction_8h_source.html#l00596">llvm::MachineFunction::getNumBlockIDs()</a>, <a class="el" href="SmallVector_8h_source.html#l00225">llvm::SmallVectorTemplateBase&lt; T &gt;::pop_back()</a>, <a class="el" href="SmallVector_8h_source.html#l00211">llvm::SmallVectorTemplateBase&lt; T &gt;::push_back()</a>, <a class="el" href="SmallVector_8h_source.html#l00052">llvm::SmallVectorBase::size()</a>, and <a class="el" href="MachineBasicBlock_8h_source.html#l00303">llvm::MachineBasicBlock::successors()</a>.</p>

<p class="reference">Referenced by <a class="el" href="ReachingDefAnalysis_8cpp_source.html#l00135">llvm::ReachingDefAnalysis::runOnMachineFunction()</a>, and <a class="el" href="ExecutionDomainFix_8cpp_source.html#l00413">llvm::ExecutionDomainFix::runOnMachineFunction()</a>.</p>

</div>
</div>
<hr/>The documentation for this class was generated from the following files:<ul>
<li>include/llvm/CodeGen/<a class="el" href="LoopTraversal_8h_source.html">LoopTraversal.h</a></li>
<li>lib/CodeGen/<a class="el" href="LoopTraversal_8cpp_source.html">LoopTraversal.cpp</a></li>
</ul>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Tue Mar 24 2020 13:21:02 for LLVM by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.13
</small></address>
</body>
</html>
