<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.13"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>LLVM: lib/CodeGen/LiveRangeShrink.cpp File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<script type="text/x-mathjax-config">
  MathJax.Hub.Config({
    extensions: ["tex2jax.js"],
    jax: ["input/TeX","output/HTML-CSS"],
});
</script><script type="text/javascript" src="http://cdn.mathjax.org/mathjax/latest/MathJax.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">LLVM
   &#160;<span id="projectnumber">10.0.0</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.13 -->
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('',false,false,'search.php','Search');
});
</script>
<div id="main-nav"></div>
<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="dir_97aefd0d527b934f1d99a682da8fe6a9.html">lib</a></li><li class="navelem"><a class="el" href="dir_1e8ad0574bd6e387992681ee57691a07.html">CodeGen</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#define-members">Macros</a> &#124;
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<div class="title">LiveRangeShrink.cpp File Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p>===------------------------------------------------------------------&mdash;===//  
<a href="#details">More...</a></p>
<div class="textblock"><code>#include &quot;<a class="el" href="DenseMap_8h_source.html">llvm/ADT/DenseMap.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="Statistic_8h_source.html">llvm/ADT/Statistic.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="iterator__range_8h_source.html">llvm/ADT/iterator_range.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="MachineBasicBlock_8h_source.html">llvm/CodeGen/MachineBasicBlock.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="MachineFunction_8h_source.html">llvm/CodeGen/MachineFunction.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="MachineFunctionPass_8h_source.html">llvm/CodeGen/MachineFunctionPass.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="MachineInstr_8h_source.html">llvm/CodeGen/MachineInstr.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="MachineOperand_8h_source.html">llvm/CodeGen/MachineOperand.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="MachineRegisterInfo_8h_source.html">llvm/CodeGen/MachineRegisterInfo.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="TargetRegisterInfo_8h_source.html">llvm/CodeGen/TargetRegisterInfo.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="InitializePasses_8h_source.html">llvm/InitializePasses.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="Pass_8h_source.html">llvm/Pass.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="Debug_8h_source.html">llvm/Support/Debug.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="raw__ostream_8h_source.html">llvm/Support/raw_ostream.h</a>&quot;</code><br />
<code>#include &lt;iterator&gt;</code><br />
<code>#include &lt;utility&gt;</code><br />
</div><div class="textblock"><div class="dynheader">
Include dependency graph for LiveRangeShrink.cpp:</div>
<div class="dyncontent">
<div class="center"><iframe scrolling="no" frameborder="0" src="LiveRangeShrink_8cpp__incl.svg" width="5474" height="843"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe>
</div>
</div>
</div>
<p><a href="LiveRangeShrink_8cpp_source.html">Go to the source code of this file.</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="define-members"></a>
Macros</h2></td></tr>
<tr class="memitem:ad78e062f62e0d6e453941fb4ca843e4d"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="LiveRangeShrink_8cpp.html#ad78e062f62e0d6e453941fb4ca843e4d">DEBUG_TYPE</a>&#160;&#160;&#160;&quot;lrshrink&quot;</td></tr>
<tr class="separator:ad78e062f62e0d6e453941fb4ca843e4d"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:a3c1f73524bfcc75349a07345e7720653"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="LiveRangeShrink_8cpp.html#a3c1f73524bfcc75349a07345e7720653">STATISTIC</a> (NumInstrsHoistedToShrinkLiveRange, &quot;Number of insructions hoisted to shrink live range.&quot;)</td></tr>
<tr class="separator:a3c1f73524bfcc75349a07345e7720653"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa9a28a82beaed5e5f8876260a7630919"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="LiveRangeShrink_8cpp.html#aa9a28a82beaed5e5f8876260a7630919">INITIALIZE_PASS</a> (LiveRangeShrink, &quot;lrshrink&quot;, &quot;Live Range Shrink <a class="el" href="classllvm_1_1Pass.html">Pass</a>&quot;, false, <a class="el" href="LoadStoreVectorizer_8cpp.html#a1321ae04c732793cd2d0ee2db36636ca">false</a>) using InstOrderMap</td></tr>
<tr class="separator:aa9a28a82beaed5e5f8876260a7630919"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7dc3a72bd831db17ef0816f0f27701dc"><td class="memItemLeft" align="right" valign="top">static <a class="el" href="classllvm_1_1MachineInstr.html">MachineInstr</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="LiveRangeShrink_8cpp.html#a7dc3a72bd831db17ef0816f0f27701dc">FindDominatedInstruction</a> (<a class="el" href="classllvm_1_1MachineInstr.html">MachineInstr</a> &amp;New, <a class="el" href="classllvm_1_1MachineInstr.html">MachineInstr</a> *Old, <a class="el" href="AArch64PromoteConstant_8cpp.html#a90f8350fecae261c25be85d38b451bff">const</a> InstOrderMap &amp;M)</td></tr>
<tr class="memdesc:a7dc3a72bd831db17ef0816f0f27701dc"><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns <code>New</code> if it's dominated by <code>Old</code>, otherwise return <code>Old</code>.  <a href="#a7dc3a72bd831db17ef0816f0f27701dc">More...</a><br /></td></tr>
<tr class="separator:a7dc3a72bd831db17ef0816f0f27701dc"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9c00cd40906624e5a95821ff3db6e543"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="LiveRangeShrink_8cpp.html#a9c00cd40906624e5a95821ff3db6e543">BuildInstOrderMap</a> (<a class="el" href="classllvm_1_1MachineBasicBlock.html#ae34c996b58df9b9ce6695a0c8b70c533">MachineBasicBlock::iterator</a> Start, InstOrderMap &amp;M)</td></tr>
<tr class="memdesc:a9c00cd40906624e5a95821ff3db6e543"><td class="mdescLeft">&#160;</td><td class="mdescRight">Builds Instruction to its dominating order number map <code>M</code> by traversing from instruction <code>Start</code>.  <a href="#a9c00cd40906624e5a95821ff3db6e543">More...</a><br /></td></tr>
<tr class="separator:a9c00cd40906624e5a95821ff3db6e543"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>===------------------------------------------------------------------&mdash;===// </p>
<p>This pass moves instructions close to the definition of its operands to shrink live range of the def instruction. The code motion is limited within the basic block. The moved instruction should have 1 def, and more than one uses, all of which are the only use of the def.</p>
<p>===------------------------------------------------------------------&mdash;===// </p>

<p class="definition">Definition in file <a class="el" href="LiveRangeShrink_8cpp_source.html">LiveRangeShrink.cpp</a>.</p>
</div><h2 class="groupheader">Macro Definition Documentation</h2>
<a id="ad78e062f62e0d6e453941fb4ca843e4d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad78e062f62e0d6e453941fb4ca843e4d">&#9670;&nbsp;</a></span>DEBUG_TYPE</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define DEBUG_TYPE&#160;&#160;&#160;&quot;lrshrink&quot;</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="LiveRangeShrink_8cpp_source.html#l00036">36</a> of file <a class="el" href="LiveRangeShrink_8cpp_source.html">LiveRangeShrink.cpp</a>.</p>

</div>
</div>
<h2 class="groupheader">Function Documentation</h2>
<a id="a9c00cd40906624e5a95821ff3db6e543"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9c00cd40906624e5a95821ff3db6e543">&#9670;&nbsp;</a></span>BuildInstOrderMap()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void BuildInstOrderMap </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classllvm_1_1MachineBasicBlock.html#ae34c996b58df9b9ce6695a0c8b70c533">MachineBasicBlock::iterator</a>&#160;</td>
          <td class="paramname"><em>Start</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">InstOrderMap &amp;&#160;</td>
          <td class="paramname"><em>M</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Builds Instruction to its dominating order number map <code>M</code> by traversing from instruction <code>Start</code>. </p>

<p class="definition">Definition at line <a class="el" href="LiveRangeShrink_8cpp_source.html#l00100">100</a> of file <a class="el" href="LiveRangeShrink_8cpp_source.html">LiveRangeShrink.cpp</a>.</p>

</div>
</div>
<a id="a7dc3a72bd831db17ef0816f0f27701dc"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7dc3a72bd831db17ef0816f0f27701dc">&#9670;&nbsp;</a></span>FindDominatedInstruction()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static <a class="el" href="classllvm_1_1MachineInstr.html">MachineInstr</a>* FindDominatedInstruction </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classllvm_1_1MachineInstr.html">MachineInstr</a> &amp;&#160;</td>
          <td class="paramname"><em>New</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classllvm_1_1MachineInstr.html">MachineInstr</a> *&#160;</td>
          <td class="paramname"><em>Old</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="AArch64PromoteConstant_8cpp.html#a90f8350fecae261c25be85d38b451bff">const</a> InstOrderMap &amp;&#160;</td>
          <td class="paramname"><em>M</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Returns <code>New</code> if it's dominated by <code>Old</code>, otherwise return <code>Old</code>. </p>
<p><code>M</code> maintains a map from instruction to its dominating order that satisfies M[A] &gt; M[B] guarantees that A is dominated by B. If <code>New</code> is not in <code>M</code>, return <code>Old</code>. Otherwise if <code>Old</code> is null, return <code>New</code>. </p>

<p class="definition">Definition at line <a class="el" href="LiveRangeShrink_8cpp_source.html#l00077">77</a> of file <a class="el" href="LiveRangeShrink_8cpp_source.html">LiveRangeShrink.cpp</a>.</p>

<p class="reference">References <a class="el" href="MD5_8cpp_source.html#l00058">I</a>.</p>

</div>
</div>
<a id="aa9a28a82beaed5e5f8876260a7630919"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa9a28a82beaed5e5f8876260a7630919">&#9670;&nbsp;</a></span>INITIALIZE_PASS()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">INITIALIZE_PASS </td>
          <td>(</td>
          <td class="paramtype">LiveRangeShrink&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&quot;lrshrink&quot;&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&quot;Live Range Shrink <a class="el" href="classllvm_1_1Pass.html">Pass</a>&quot;&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="LoadStoreVectorizer_8cpp.html#a1321ae04c732793cd2d0ee2db36636ca">false</a>&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="LoadStoreVectorizer_8cpp.html#a1321ae04c732793cd2d0ee2db36636ca">false</a>&#160;</td>
          <td class="paramname">&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="a3c1f73524bfcc75349a07345e7720653"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3c1f73524bfcc75349a07345e7720653">&#9670;&nbsp;</a></span>STATISTIC()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">STATISTIC </td>
          <td>(</td>
          <td class="paramtype">NumInstrsHoistedToShrinkLiveRange&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&quot;Number of insructions hoisted to shrink live range.&quot;&#160;</td>
          <td class="paramname">&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Tue Mar 24 2020 13:15:55 for LLVM by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.13
</small></address>
</body>
</html>
