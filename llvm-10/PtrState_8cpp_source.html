<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.13"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>LLVM: lib/Transforms/ObjCARC/PtrState.cpp Source File</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<script type="text/x-mathjax-config">
  MathJax.Hub.Config({
    extensions: ["tex2jax.js"],
    jax: ["input/TeX","output/HTML-CSS"],
});
</script><script type="text/javascript" src="http://cdn.mathjax.org/mathjax/latest/MathJax.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">LLVM
   &#160;<span id="projectnumber">10.0.0</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.13 -->
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('',false,false,'search.php','Search');
});
</script>
<div id="main-nav"></div>
<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="dir_97aefd0d527b934f1d99a682da8fe6a9.html">lib</a></li><li class="navelem"><a class="el" href="dir_a72932e0778af28115095468f6286ff8.html">Transforms</a></li><li class="navelem"><a class="el" href="dir_296957ed9f72a005efdf3fbc578416d5.html">ObjCARC</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="headertitle">
<div class="title">PtrState.cpp</div>  </div>
</div><!--header-->
<div class="contents">
<a href="PtrState_8cpp.html">Go to the documentation of this file.</a><div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;<span class="comment">//===- PtrState.cpp -------------------------------------------------------===//</span></div><div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;<span class="comment">//</span></div><div class="line"><a name="l00003"></a><span class="lineno">    3</span>&#160;<span class="comment">// Part of the LLVM Project, under the Apache License v2.0 with LLVM Exceptions.</span></div><div class="line"><a name="l00004"></a><span class="lineno">    4</span>&#160;<span class="comment">// See https://llvm.org/LICENSE.txt for license information.</span></div><div class="line"><a name="l00005"></a><span class="lineno">    5</span>&#160;<span class="comment">// SPDX-License-Identifier: Apache-2.0 WITH LLVM-exception</span></div><div class="line"><a name="l00006"></a><span class="lineno">    6</span>&#160;<span class="comment">//</span></div><div class="line"><a name="l00007"></a><span class="lineno">    7</span>&#160;<span class="comment">//===----------------------------------------------------------------------===//</span></div><div class="line"><a name="l00008"></a><span class="lineno">    8</span>&#160;</div><div class="line"><a name="l00009"></a><span class="lineno">    9</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="PtrState_8h.html">PtrState.h</a>&quot;</span></div><div class="line"><a name="l00010"></a><span class="lineno">   10</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="DependencyAnalysis_8h.html">DependencyAnalysis.h</a>&quot;</span></div><div class="line"><a name="l00011"></a><span class="lineno">   11</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="lib_2Transforms_2ObjCARC_2ObjCARC_8h.html">ObjCARC.h</a>&quot;</span></div><div class="line"><a name="l00012"></a><span class="lineno">   12</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="ObjCARCAnalysisUtils_8h.html">llvm/Analysis/ObjCARCAnalysisUtils.h</a>&quot;</span></div><div class="line"><a name="l00013"></a><span class="lineno">   13</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="ObjCARCInstKind_8h.html">llvm/Analysis/ObjCARCInstKind.h</a>&quot;</span></div><div class="line"><a name="l00014"></a><span class="lineno">   14</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="BasicBlock_8h.html">llvm/IR/BasicBlock.h</a>&quot;</span></div><div class="line"><a name="l00015"></a><span class="lineno">   15</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="IR_2Instruction_8h.html">llvm/IR/Instruction.h</a>&quot;</span></div><div class="line"><a name="l00016"></a><span class="lineno">   16</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="Instructions_8h.html">llvm/IR/Instructions.h</a>&quot;</span></div><div class="line"><a name="l00017"></a><span class="lineno">   17</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="Value_8h.html">llvm/IR/Value.h</a>&quot;</span></div><div class="line"><a name="l00018"></a><span class="lineno">   18</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="Casting_8h.html">llvm/Support/Casting.h</a>&quot;</span></div><div class="line"><a name="l00019"></a><span class="lineno">   19</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="Compiler_8h.html">llvm/Support/Compiler.h</a>&quot;</span></div><div class="line"><a name="l00020"></a><span class="lineno">   20</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="Debug_8h.html">llvm/Support/Debug.h</a>&quot;</span></div><div class="line"><a name="l00021"></a><span class="lineno">   21</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="Support_2ErrorHandling_8h.html">llvm/Support/ErrorHandling.h</a>&quot;</span></div><div class="line"><a name="l00022"></a><span class="lineno">   22</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="raw__ostream_8h.html">llvm/Support/raw_ostream.h</a>&quot;</span></div><div class="line"><a name="l00023"></a><span class="lineno">   23</span>&#160;<span class="preprocessor">#include &lt;cassert&gt;</span></div><div class="line"><a name="l00024"></a><span class="lineno">   24</span>&#160;<span class="preprocessor">#include &lt;iterator&gt;</span></div><div class="line"><a name="l00025"></a><span class="lineno">   25</span>&#160;<span class="preprocessor">#include &lt;utility&gt;</span></div><div class="line"><a name="l00026"></a><span class="lineno">   26</span>&#160;</div><div class="line"><a name="l00027"></a><span class="lineno">   27</span>&#160;<span class="keyword">using namespace </span><a class="code" href="namespacellvm.html">llvm</a>;</div><div class="line"><a name="l00028"></a><span class="lineno">   28</span>&#160;<span class="keyword">using namespace </span><a class="code" href="namespacellvm_1_1objcarc.html">llvm::objcarc</a>;</div><div class="line"><a name="l00029"></a><span class="lineno">   29</span>&#160;</div><div class="line"><a name="l00030"></a><span class="lineno"><a class="line" href="PtrState_8cpp.html#ad78e062f62e0d6e453941fb4ca843e4d">   30</a></span>&#160;<span class="preprocessor">#define DEBUG_TYPE &quot;objc-arc-ptr-state&quot;</span></div><div class="line"><a name="l00031"></a><span class="lineno">   31</span>&#160;</div><div class="line"><a name="l00032"></a><span class="lineno">   32</span>&#160;<span class="comment">//===----------------------------------------------------------------------===//</span></div><div class="line"><a name="l00033"></a><span class="lineno">   33</span>&#160;<span class="comment">//                                  Utility</span></div><div class="line"><a name="l00034"></a><span class="lineno">   34</span>&#160;<span class="comment">//===----------------------------------------------------------------------===//</span></div><div class="line"><a name="l00035"></a><span class="lineno">   35</span>&#160;</div><div class="line"><a name="l00036"></a><span class="lineno"><a class="line" href="namespacellvm_1_1objcarc.html#aa64f33dab36439392f06079db2d740e4">   36</a></span>&#160;<a class="code" href="classllvm_1_1raw__ostream.html">raw_ostream</a> &amp;<a class="code" href="namespacellvm_1_1objcarc.html#a2cfd2097e9e2cea7a8eb50a369146e85">llvm::objcarc::operator&lt;&lt;</a>(<a class="code" href="classllvm_1_1raw__ostream.html">raw_ostream</a> &amp;OS, <span class="keyword">const</span> <a class="code" href="namespacellvm_1_1objcarc.html#a845b8f76f8bd22e4e2eb851121db306d">Sequence</a> S) {</div><div class="line"><a name="l00037"></a><span class="lineno">   37</span>&#160;  <span class="keywordflow">switch</span> (S) {</div><div class="line"><a name="l00038"></a><span class="lineno">   38</span>&#160;  <span class="keywordflow">case</span> <a class="code" href="namespacellvm_1_1objcarc.html#a845b8f76f8bd22e4e2eb851121db306da6e431a7ec0fee74cc2ae9a79bd965122">S_None</a>:</div><div class="line"><a name="l00039"></a><span class="lineno">   39</span>&#160;    <span class="keywordflow">return</span> OS &lt;&lt; <span class="stringliteral">&quot;S_None&quot;</span>;</div><div class="line"><a name="l00040"></a><span class="lineno">   40</span>&#160;  <span class="keywordflow">case</span> <a class="code" href="namespacellvm_1_1objcarc.html#a845b8f76f8bd22e4e2eb851121db306daac10e4a5d85a196bcb2578c2700f3ff3">S_Retain</a>:</div><div class="line"><a name="l00041"></a><span class="lineno">   41</span>&#160;    <span class="keywordflow">return</span> OS &lt;&lt; <span class="stringliteral">&quot;S_Retain&quot;</span>;</div><div class="line"><a name="l00042"></a><span class="lineno">   42</span>&#160;  <span class="keywordflow">case</span> <a class="code" href="namespacellvm_1_1objcarc.html#a845b8f76f8bd22e4e2eb851121db306da8902051603b385fb4587620a0650b4f7">S_CanRelease</a>:</div><div class="line"><a name="l00043"></a><span class="lineno">   43</span>&#160;    <span class="keywordflow">return</span> OS &lt;&lt; <span class="stringliteral">&quot;S_CanRelease&quot;</span>;</div><div class="line"><a name="l00044"></a><span class="lineno">   44</span>&#160;  <span class="keywordflow">case</span> <a class="code" href="namespacellvm_1_1objcarc.html#a845b8f76f8bd22e4e2eb851121db306da8e1b337cadca1fc899129d307df7d68e">S_Use</a>:</div><div class="line"><a name="l00045"></a><span class="lineno">   45</span>&#160;    <span class="keywordflow">return</span> OS &lt;&lt; <span class="stringliteral">&quot;S_Use&quot;</span>;</div><div class="line"><a name="l00046"></a><span class="lineno">   46</span>&#160;  <span class="keywordflow">case</span> <a class="code" href="namespacellvm_1_1objcarc.html#a845b8f76f8bd22e4e2eb851121db306dafb02c89bd59643eb187b7223a531cb37">S_Release</a>:</div><div class="line"><a name="l00047"></a><span class="lineno">   47</span>&#160;    <span class="keywordflow">return</span> OS &lt;&lt; <span class="stringliteral">&quot;S_Release&quot;</span>;</div><div class="line"><a name="l00048"></a><span class="lineno">   48</span>&#160;  <span class="keywordflow">case</span> <a class="code" href="namespacellvm_1_1objcarc.html#a845b8f76f8bd22e4e2eb851121db306daff34dfb06d8316048c533bac105bfbe6">S_MovableRelease</a>:</div><div class="line"><a name="l00049"></a><span class="lineno">   49</span>&#160;    <span class="keywordflow">return</span> OS &lt;&lt; <span class="stringliteral">&quot;S_MovableRelease&quot;</span>;</div><div class="line"><a name="l00050"></a><span class="lineno">   50</span>&#160;  <span class="keywordflow">case</span> <a class="code" href="namespacellvm_1_1objcarc.html#a845b8f76f8bd22e4e2eb851121db306daadd43d88dff4dfb5f9620f2151822b64">S_Stop</a>:</div><div class="line"><a name="l00051"></a><span class="lineno">   51</span>&#160;    <span class="keywordflow">return</span> OS &lt;&lt; <span class="stringliteral">&quot;S_Stop&quot;</span>;</div><div class="line"><a name="l00052"></a><span class="lineno">   52</span>&#160;  }</div><div class="line"><a name="l00053"></a><span class="lineno">   53</span>&#160;  <a class="code" href="Support_2ErrorHandling_8h.html#ace243f5c25697a1107cce46626b3dc94">llvm_unreachable</a>(<span class="stringliteral">&quot;Unknown sequence type.&quot;</span>);</div><div class="line"><a name="l00054"></a><span class="lineno">   54</span>&#160;}</div><div class="line"><a name="l00055"></a><span class="lineno">   55</span>&#160;</div><div class="line"><a name="l00056"></a><span class="lineno">   56</span>&#160;<span class="comment">//===----------------------------------------------------------------------===//</span></div><div class="line"><a name="l00057"></a><span class="lineno">   57</span>&#160;<span class="comment">//                                  Sequence</span></div><div class="line"><a name="l00058"></a><span class="lineno">   58</span>&#160;<span class="comment">//===----------------------------------------------------------------------===//</span></div><div class="line"><a name="l00059"></a><span class="lineno">   59</span>&#160;</div><div class="line"><a name="l00060"></a><span class="lineno"><a class="line" href="PtrState_8cpp.html#a01c7014451484f9784e68d42412d1b9c">   60</a></span>&#160;<span class="keyword">static</span> <a class="code" href="namespacellvm_1_1objcarc.html#a845b8f76f8bd22e4e2eb851121db306d">Sequence</a> <a class="code" href="PtrState_8cpp.html#a01c7014451484f9784e68d42412d1b9c">MergeSeqs</a>(<a class="code" href="namespacellvm_1_1objcarc.html#a845b8f76f8bd22e4e2eb851121db306d">Sequence</a> A, <a class="code" href="namespacellvm_1_1objcarc.html#a845b8f76f8bd22e4e2eb851121db306d">Sequence</a> <a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>, <span class="keywordtype">bool</span> TopDown) {</div><div class="line"><a name="l00061"></a><span class="lineno">   61</span>&#160;  <span class="comment">// The easy cases.</span></div><div class="line"><a name="l00062"></a><span class="lineno">   62</span>&#160;  <span class="keywordflow">if</span> (A == B)</div><div class="line"><a name="l00063"></a><span class="lineno">   63</span>&#160;    <span class="keywordflow">return</span> A;</div><div class="line"><a name="l00064"></a><span class="lineno">   64</span>&#160;  <span class="keywordflow">if</span> (A == <a class="code" href="namespacellvm_1_1objcarc.html#a845b8f76f8bd22e4e2eb851121db306da6e431a7ec0fee74cc2ae9a79bd965122">S_None</a> || B == <a class="code" href="namespacellvm_1_1objcarc.html#a845b8f76f8bd22e4e2eb851121db306da6e431a7ec0fee74cc2ae9a79bd965122">S_None</a>)</div><div class="line"><a name="l00065"></a><span class="lineno">   65</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="namespacellvm_1_1objcarc.html#a845b8f76f8bd22e4e2eb851121db306da6e431a7ec0fee74cc2ae9a79bd965122">S_None</a>;</div><div class="line"><a name="l00066"></a><span class="lineno">   66</span>&#160;</div><div class="line"><a name="l00067"></a><span class="lineno">   67</span>&#160;  <span class="keywordflow">if</span> (A &gt; B)</div><div class="line"><a name="l00068"></a><span class="lineno">   68</span>&#160;    <a class="code" href="namespacestd.html#ab8424022895aee3e366fb9a32f2883cb">std::swap</a>(A, B);</div><div class="line"><a name="l00069"></a><span class="lineno">   69</span>&#160;  <span class="keywordflow">if</span> (TopDown) {</div><div class="line"><a name="l00070"></a><span class="lineno">   70</span>&#160;    <span class="comment">// Choose the side which is further along in the sequence.</span></div><div class="line"><a name="l00071"></a><span class="lineno">   71</span>&#160;    <span class="keywordflow">if</span> ((A == <a class="code" href="namespacellvm_1_1objcarc.html#a845b8f76f8bd22e4e2eb851121db306daac10e4a5d85a196bcb2578c2700f3ff3">S_Retain</a> || A == <a class="code" href="namespacellvm_1_1objcarc.html#a845b8f76f8bd22e4e2eb851121db306da8902051603b385fb4587620a0650b4f7">S_CanRelease</a>) &amp;&amp;</div><div class="line"><a name="l00072"></a><span class="lineno">   72</span>&#160;        (B == <a class="code" href="namespacellvm_1_1objcarc.html#a845b8f76f8bd22e4e2eb851121db306da8902051603b385fb4587620a0650b4f7">S_CanRelease</a> || B == <a class="code" href="namespacellvm_1_1objcarc.html#a845b8f76f8bd22e4e2eb851121db306da8e1b337cadca1fc899129d307df7d68e">S_Use</a>))</div><div class="line"><a name="l00073"></a><span class="lineno">   73</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>;</div><div class="line"><a name="l00074"></a><span class="lineno">   74</span>&#160;  } <span class="keywordflow">else</span> {</div><div class="line"><a name="l00075"></a><span class="lineno">   75</span>&#160;    <span class="comment">// Choose the side which is further along in the sequence.</span></div><div class="line"><a name="l00076"></a><span class="lineno">   76</span>&#160;    <span class="keywordflow">if</span> ((A == <a class="code" href="namespacellvm_1_1objcarc.html#a845b8f76f8bd22e4e2eb851121db306da8e1b337cadca1fc899129d307df7d68e">S_Use</a> || A == <a class="code" href="namespacellvm_1_1objcarc.html#a845b8f76f8bd22e4e2eb851121db306da8902051603b385fb4587620a0650b4f7">S_CanRelease</a>) &amp;&amp;</div><div class="line"><a name="l00077"></a><span class="lineno">   77</span>&#160;        (B == <a class="code" href="namespacellvm_1_1objcarc.html#a845b8f76f8bd22e4e2eb851121db306da8e1b337cadca1fc899129d307df7d68e">S_Use</a> || B == <a class="code" href="namespacellvm_1_1objcarc.html#a845b8f76f8bd22e4e2eb851121db306dafb02c89bd59643eb187b7223a531cb37">S_Release</a> || B == <a class="code" href="namespacellvm_1_1objcarc.html#a845b8f76f8bd22e4e2eb851121db306daadd43d88dff4dfb5f9620f2151822b64">S_Stop</a> || B == <a class="code" href="namespacellvm_1_1objcarc.html#a845b8f76f8bd22e4e2eb851121db306daff34dfb06d8316048c533bac105bfbe6">S_MovableRelease</a>))</div><div class="line"><a name="l00078"></a><span class="lineno">   78</span>&#160;      <span class="keywordflow">return</span> A;</div><div class="line"><a name="l00079"></a><span class="lineno">   79</span>&#160;    <span class="comment">// If both sides are releases, choose the more conservative one.</span></div><div class="line"><a name="l00080"></a><span class="lineno">   80</span>&#160;    <span class="keywordflow">if</span> (A == <a class="code" href="namespacellvm_1_1objcarc.html#a845b8f76f8bd22e4e2eb851121db306daadd43d88dff4dfb5f9620f2151822b64">S_Stop</a> &amp;&amp; (B == <a class="code" href="namespacellvm_1_1objcarc.html#a845b8f76f8bd22e4e2eb851121db306dafb02c89bd59643eb187b7223a531cb37">S_Release</a> || B == <a class="code" href="namespacellvm_1_1objcarc.html#a845b8f76f8bd22e4e2eb851121db306daff34dfb06d8316048c533bac105bfbe6">S_MovableRelease</a>))</div><div class="line"><a name="l00081"></a><span class="lineno">   81</span>&#160;      <span class="keywordflow">return</span> A;</div><div class="line"><a name="l00082"></a><span class="lineno">   82</span>&#160;    <span class="keywordflow">if</span> (A == <a class="code" href="namespacellvm_1_1objcarc.html#a845b8f76f8bd22e4e2eb851121db306dafb02c89bd59643eb187b7223a531cb37">S_Release</a> &amp;&amp; B == <a class="code" href="namespacellvm_1_1objcarc.html#a845b8f76f8bd22e4e2eb851121db306daff34dfb06d8316048c533bac105bfbe6">S_MovableRelease</a>)</div><div class="line"><a name="l00083"></a><span class="lineno">   83</span>&#160;      <span class="keywordflow">return</span> A;</div><div class="line"><a name="l00084"></a><span class="lineno">   84</span>&#160;  }</div><div class="line"><a name="l00085"></a><span class="lineno">   85</span>&#160;</div><div class="line"><a name="l00086"></a><span class="lineno">   86</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="namespacellvm_1_1objcarc.html#a845b8f76f8bd22e4e2eb851121db306da6e431a7ec0fee74cc2ae9a79bd965122">S_None</a>;</div><div class="line"><a name="l00087"></a><span class="lineno">   87</span>&#160;}</div><div class="line"><a name="l00088"></a><span class="lineno">   88</span>&#160;</div><div class="line"><a name="l00089"></a><span class="lineno">   89</span>&#160;<span class="comment">//===----------------------------------------------------------------------===//</span></div><div class="line"><a name="l00090"></a><span class="lineno">   90</span>&#160;<span class="comment">//                                   RRInfo</span></div><div class="line"><a name="l00091"></a><span class="lineno">   91</span>&#160;<span class="comment">//===----------------------------------------------------------------------===//</span></div><div class="line"><a name="l00092"></a><span class="lineno">   92</span>&#160;</div><div class="line"><a name="l00093"></a><span class="lineno"><a class="line" href="structllvm_1_1objcarc_1_1RRInfo.html#ae219d35c9d1bb909cd32110815007c7f">   93</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="structllvm_1_1objcarc_1_1RRInfo.html#ae219d35c9d1bb909cd32110815007c7f">RRInfo::clear</a>() {</div><div class="line"><a name="l00094"></a><span class="lineno">   94</span>&#160;  <a class="code" href="structllvm_1_1objcarc_1_1RRInfo.html#a5770bc64392d64b9900226f925521b94">KnownSafe</a> = <span class="keyword">false</span>;</div><div class="line"><a name="l00095"></a><span class="lineno">   95</span>&#160;  <a class="code" href="structllvm_1_1objcarc_1_1RRInfo.html#ac9afa1dadab0e6367ce487573142be4e">IsTailCallRelease</a> = <span class="keyword">false</span>;</div><div class="line"><a name="l00096"></a><span class="lineno">   96</span>&#160;  <a class="code" href="structllvm_1_1objcarc_1_1RRInfo.html#ab976ce410e551d37ce2f43177bb96995">ReleaseMetadata</a> = <span class="keyword">nullptr</span>;</div><div class="line"><a name="l00097"></a><span class="lineno">   97</span>&#160;  <a class="code" href="structllvm_1_1objcarc_1_1RRInfo.html#a937b2f49aeebc9752e9ff219acbd93f0">Calls</a>.clear();</div><div class="line"><a name="l00098"></a><span class="lineno">   98</span>&#160;  <a class="code" href="structllvm_1_1objcarc_1_1RRInfo.html#aed932d067cad4f2d928df9bee21af52a">ReverseInsertPts</a>.clear();</div><div class="line"><a name="l00099"></a><span class="lineno">   99</span>&#160;  <a class="code" href="structllvm_1_1objcarc_1_1RRInfo.html#ac287dbb01fd38c21bbf0dafdbcfcb8cf">CFGHazardAfflicted</a> = <span class="keyword">false</span>;</div><div class="line"><a name="l00100"></a><span class="lineno">  100</span>&#160;}</div><div class="line"><a name="l00101"></a><span class="lineno">  101</span>&#160;</div><div class="line"><a name="l00102"></a><span class="lineno"><a class="line" href="structllvm_1_1objcarc_1_1RRInfo.html#a090a8b4357ddca03d984584db3b6bc69">  102</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="structllvm_1_1objcarc_1_1RRInfo.html#a090a8b4357ddca03d984584db3b6bc69">RRInfo::Merge</a>(<span class="keyword">const</span> <a class="code" href="structllvm_1_1objcarc_1_1RRInfo.html">RRInfo</a> &amp;Other) {</div><div class="line"><a name="l00103"></a><span class="lineno">  103</span>&#160;  <span class="comment">// Conservatively merge the ReleaseMetadata information.</span></div><div class="line"><a name="l00104"></a><span class="lineno">  104</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="structllvm_1_1objcarc_1_1RRInfo.html#ab976ce410e551d37ce2f43177bb96995">ReleaseMetadata</a> != Other.<a class="code" href="structllvm_1_1objcarc_1_1RRInfo.html#ab976ce410e551d37ce2f43177bb96995">ReleaseMetadata</a>)</div><div class="line"><a name="l00105"></a><span class="lineno">  105</span>&#160;    <a class="code" href="structllvm_1_1objcarc_1_1RRInfo.html#ab976ce410e551d37ce2f43177bb96995">ReleaseMetadata</a> = <span class="keyword">nullptr</span>;</div><div class="line"><a name="l00106"></a><span class="lineno">  106</span>&#160;</div><div class="line"><a name="l00107"></a><span class="lineno">  107</span>&#160;  <span class="comment">// Conservatively merge the boolean state.</span></div><div class="line"><a name="l00108"></a><span class="lineno">  108</span>&#160;  <a class="code" href="structllvm_1_1objcarc_1_1RRInfo.html#a5770bc64392d64b9900226f925521b94">KnownSafe</a> &amp;= Other.<a class="code" href="structllvm_1_1objcarc_1_1RRInfo.html#a5770bc64392d64b9900226f925521b94">KnownSafe</a>;</div><div class="line"><a name="l00109"></a><span class="lineno">  109</span>&#160;  <a class="code" href="structllvm_1_1objcarc_1_1RRInfo.html#ac9afa1dadab0e6367ce487573142be4e">IsTailCallRelease</a> &amp;= Other.<a class="code" href="structllvm_1_1objcarc_1_1RRInfo.html#ac9afa1dadab0e6367ce487573142be4e">IsTailCallRelease</a>;</div><div class="line"><a name="l00110"></a><span class="lineno">  110</span>&#160;  <a class="code" href="structllvm_1_1objcarc_1_1RRInfo.html#ac287dbb01fd38c21bbf0dafdbcfcb8cf">CFGHazardAfflicted</a> |= Other.<a class="code" href="structllvm_1_1objcarc_1_1RRInfo.html#ac287dbb01fd38c21bbf0dafdbcfcb8cf">CFGHazardAfflicted</a>;</div><div class="line"><a name="l00111"></a><span class="lineno">  111</span>&#160;</div><div class="line"><a name="l00112"></a><span class="lineno">  112</span>&#160;  <span class="comment">// Merge the call sets.</span></div><div class="line"><a name="l00113"></a><span class="lineno">  113</span>&#160;  <a class="code" href="structllvm_1_1objcarc_1_1RRInfo.html#a937b2f49aeebc9752e9ff219acbd93f0">Calls</a>.insert(Other.<a class="code" href="structllvm_1_1objcarc_1_1RRInfo.html#a937b2f49aeebc9752e9ff219acbd93f0">Calls</a>.begin(), Other.<a class="code" href="structllvm_1_1objcarc_1_1RRInfo.html#a937b2f49aeebc9752e9ff219acbd93f0">Calls</a>.end());</div><div class="line"><a name="l00114"></a><span class="lineno">  114</span>&#160;</div><div class="line"><a name="l00115"></a><span class="lineno">  115</span>&#160;  <span class="comment">// Merge the insert point sets. If there are any differences,</span></div><div class="line"><a name="l00116"></a><span class="lineno">  116</span>&#160;  <span class="comment">// that makes this a partial merge.</span></div><div class="line"><a name="l00117"></a><span class="lineno">  117</span>&#160;  <span class="keywordtype">bool</span> Partial = <a class="code" href="structllvm_1_1objcarc_1_1RRInfo.html#aed932d067cad4f2d928df9bee21af52a">ReverseInsertPts</a>.size() != Other.<a class="code" href="structllvm_1_1objcarc_1_1RRInfo.html#aed932d067cad4f2d928df9bee21af52a">ReverseInsertPts</a>.size();</div><div class="line"><a name="l00118"></a><span class="lineno">  118</span>&#160;  <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *Inst : Other.<a class="code" href="structllvm_1_1objcarc_1_1RRInfo.html#aed932d067cad4f2d928df9bee21af52a">ReverseInsertPts</a>)</div><div class="line"><a name="l00119"></a><span class="lineno">  119</span>&#160;    Partial |= <a class="code" href="structllvm_1_1objcarc_1_1RRInfo.html#aed932d067cad4f2d928df9bee21af52a">ReverseInsertPts</a>.insert(Inst).second;</div><div class="line"><a name="l00120"></a><span class="lineno">  120</span>&#160;  <span class="keywordflow">return</span> Partial;</div><div class="line"><a name="l00121"></a><span class="lineno">  121</span>&#160;}</div><div class="line"><a name="l00122"></a><span class="lineno">  122</span>&#160;</div><div class="line"><a name="l00123"></a><span class="lineno">  123</span>&#160;<span class="comment">//===----------------------------------------------------------------------===//</span></div><div class="line"><a name="l00124"></a><span class="lineno">  124</span>&#160;<span class="comment">//                                  PtrState</span></div><div class="line"><a name="l00125"></a><span class="lineno">  125</span>&#160;<span class="comment">//===----------------------------------------------------------------------===//</span></div><div class="line"><a name="l00126"></a><span class="lineno">  126</span>&#160;</div><div class="line"><a name="l00127"></a><span class="lineno"><a class="line" href="classllvm_1_1objcarc_1_1PtrState.html#a1f7d5f6394d44b1dca0c23d13625c9c0">  127</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classllvm_1_1objcarc_1_1PtrState.html#a1f7d5f6394d44b1dca0c23d13625c9c0">PtrState::SetKnownPositiveRefCount</a>() {</div><div class="line"><a name="l00128"></a><span class="lineno">  128</span>&#160;  <a class="code" href="Debug_8h.html#a08efc68d15935eb8889400a46c3749ba">LLVM_DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;        Setting Known Positive.\n&quot;</span>);</div><div class="line"><a name="l00129"></a><span class="lineno">  129</span>&#160;  KnownPositiveRefCount = <span class="keyword">true</span>;</div><div class="line"><a name="l00130"></a><span class="lineno">  130</span>&#160;}</div><div class="line"><a name="l00131"></a><span class="lineno">  131</span>&#160;</div><div class="line"><a name="l00132"></a><span class="lineno"><a class="line" href="classllvm_1_1objcarc_1_1PtrState.html#a75b7969d370fa510130319080bc10426">  132</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classllvm_1_1objcarc_1_1PtrState.html#a75b7969d370fa510130319080bc10426">PtrState::ClearKnownPositiveRefCount</a>() {</div><div class="line"><a name="l00133"></a><span class="lineno">  133</span>&#160;  <a class="code" href="Debug_8h.html#a08efc68d15935eb8889400a46c3749ba">LLVM_DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;        Clearing Known Positive.\n&quot;</span>);</div><div class="line"><a name="l00134"></a><span class="lineno">  134</span>&#160;  KnownPositiveRefCount = <span class="keyword">false</span>;</div><div class="line"><a name="l00135"></a><span class="lineno">  135</span>&#160;}</div><div class="line"><a name="l00136"></a><span class="lineno">  136</span>&#160;</div><div class="line"><a name="l00137"></a><span class="lineno"><a class="line" href="classllvm_1_1objcarc_1_1PtrState.html#ad14c921bb46309b6b0ef0439c44737b8">  137</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classllvm_1_1objcarc_1_1PtrState.html#ad14c921bb46309b6b0ef0439c44737b8">PtrState::SetSeq</a>(<a class="code" href="namespacellvm_1_1objcarc.html#a845b8f76f8bd22e4e2eb851121db306d">Sequence</a> NewSeq) {</div><div class="line"><a name="l00138"></a><span class="lineno">  138</span>&#160;  <a class="code" href="Debug_8h.html#a08efc68d15935eb8889400a46c3749ba">LLVM_DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;            Old: &quot;</span> &lt;&lt; GetSeq() &lt;&lt; <span class="stringliteral">&quot;; New: &quot;</span> &lt;&lt; NewSeq</div><div class="line"><a name="l00139"></a><span class="lineno">  139</span>&#160;                    &lt;&lt; <span class="stringliteral">&quot;\n&quot;</span>);</div><div class="line"><a name="l00140"></a><span class="lineno">  140</span>&#160;  Seq = NewSeq;</div><div class="line"><a name="l00141"></a><span class="lineno">  141</span>&#160;}</div><div class="line"><a name="l00142"></a><span class="lineno">  142</span>&#160;</div><div class="line"><a name="l00143"></a><span class="lineno"><a class="line" href="classllvm_1_1objcarc_1_1PtrState.html#ac3996894452fd20d95e7135ff0b01f30">  143</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classllvm_1_1objcarc_1_1PtrState.html#ac3996894452fd20d95e7135ff0b01f30">PtrState::ResetSequenceProgress</a>(<a class="code" href="namespacellvm_1_1objcarc.html#a845b8f76f8bd22e4e2eb851121db306d">Sequence</a> NewSeq) {</div><div class="line"><a name="l00144"></a><span class="lineno">  144</span>&#160;  <a class="code" href="Debug_8h.html#a08efc68d15935eb8889400a46c3749ba">LLVM_DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;        Resetting sequence progress.\n&quot;</span>);</div><div class="line"><a name="l00145"></a><span class="lineno">  145</span>&#160;  SetSeq(NewSeq);</div><div class="line"><a name="l00146"></a><span class="lineno">  146</span>&#160;  Partial = <span class="keyword">false</span>;</div><div class="line"><a name="l00147"></a><span class="lineno">  147</span>&#160;  RRI.clear();</div><div class="line"><a name="l00148"></a><span class="lineno">  148</span>&#160;}</div><div class="line"><a name="l00149"></a><span class="lineno">  149</span>&#160;</div><div class="line"><a name="l00150"></a><span class="lineno"><a class="line" href="classllvm_1_1objcarc_1_1PtrState.html#adf8b72d488312f8c7229b2beee07e28d">  150</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classllvm_1_1objcarc_1_1PtrState.html#adf8b72d488312f8c7229b2beee07e28d">PtrState::Merge</a>(<span class="keyword">const</span> <a class="code" href="classllvm_1_1objcarc_1_1PtrState.html">PtrState</a> &amp;Other, <span class="keywordtype">bool</span> TopDown) {</div><div class="line"><a name="l00151"></a><span class="lineno">  151</span>&#160;  Seq = <a class="code" href="PtrState_8cpp.html#a01c7014451484f9784e68d42412d1b9c">MergeSeqs</a>(GetSeq(), Other.<a class="code" href="classllvm_1_1objcarc_1_1PtrState.html#a1488167d90017e45843bfae0b00aaf49">GetSeq</a>(), TopDown);</div><div class="line"><a name="l00152"></a><span class="lineno">  152</span>&#160;  KnownPositiveRefCount &amp;= Other.<a class="code" href="classllvm_1_1objcarc_1_1PtrState.html#a09c5b919d9e1f9dcef809dee375c8d5f">KnownPositiveRefCount</a>;</div><div class="line"><a name="l00153"></a><span class="lineno">  153</span>&#160;</div><div class="line"><a name="l00154"></a><span class="lineno">  154</span>&#160;  <span class="comment">// If we&#39;re not in a sequence (anymore), drop all associated state.</span></div><div class="line"><a name="l00155"></a><span class="lineno">  155</span>&#160;  <span class="keywordflow">if</span> (Seq == <a class="code" href="namespacellvm_1_1objcarc.html#a845b8f76f8bd22e4e2eb851121db306da6e431a7ec0fee74cc2ae9a79bd965122">S_None</a>) {</div><div class="line"><a name="l00156"></a><span class="lineno">  156</span>&#160;    Partial = <span class="keyword">false</span>;</div><div class="line"><a name="l00157"></a><span class="lineno">  157</span>&#160;    RRI.clear();</div><div class="line"><a name="l00158"></a><span class="lineno">  158</span>&#160;  } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (Partial || Other.<a class="code" href="classllvm_1_1objcarc_1_1PtrState.html#af6e88dbced93e1293da494b9a981b313">Partial</a>) {</div><div class="line"><a name="l00159"></a><span class="lineno">  159</span>&#160;    <span class="comment">// If we&#39;re doing a merge on a path that&#39;s previously seen a partial</span></div><div class="line"><a name="l00160"></a><span class="lineno">  160</span>&#160;    <span class="comment">// merge, conservatively drop the sequence, to avoid doing partial</span></div><div class="line"><a name="l00161"></a><span class="lineno">  161</span>&#160;    <span class="comment">// RR elimination. If the branch predicates for the two merge differ,</span></div><div class="line"><a name="l00162"></a><span class="lineno">  162</span>&#160;    <span class="comment">// mixing them is unsafe.</span></div><div class="line"><a name="l00163"></a><span class="lineno">  163</span>&#160;    ClearSequenceProgress();</div><div class="line"><a name="l00164"></a><span class="lineno">  164</span>&#160;  } <span class="keywordflow">else</span> {</div><div class="line"><a name="l00165"></a><span class="lineno">  165</span>&#160;    <span class="comment">// Otherwise merge the other PtrState&#39;s RRInfo into our RRInfo. At this</span></div><div class="line"><a name="l00166"></a><span class="lineno">  166</span>&#160;    <span class="comment">// point, we know that currently we are not partial. Stash whether or not</span></div><div class="line"><a name="l00167"></a><span class="lineno">  167</span>&#160;    <span class="comment">// the merge operation caused us to undergo a partial merging of reverse</span></div><div class="line"><a name="l00168"></a><span class="lineno">  168</span>&#160;    <span class="comment">// insertion points.</span></div><div class="line"><a name="l00169"></a><span class="lineno">  169</span>&#160;    Partial = RRI.Merge(Other.<a class="code" href="classllvm_1_1objcarc_1_1PtrState.html#a1dd5217efd31b0f4b30ab95d462dd816">RRI</a>);</div><div class="line"><a name="l00170"></a><span class="lineno">  170</span>&#160;  }</div><div class="line"><a name="l00171"></a><span class="lineno">  171</span>&#160;}</div><div class="line"><a name="l00172"></a><span class="lineno">  172</span>&#160;</div><div class="line"><a name="l00173"></a><span class="lineno">  173</span>&#160;<span class="comment">//===----------------------------------------------------------------------===//</span></div><div class="line"><a name="l00174"></a><span class="lineno">  174</span>&#160;<span class="comment">//                              BottomUpPtrState</span></div><div class="line"><a name="l00175"></a><span class="lineno">  175</span>&#160;<span class="comment">//===----------------------------------------------------------------------===//</span></div><div class="line"><a name="l00176"></a><span class="lineno">  176</span>&#160;</div><div class="line"><a name="l00177"></a><span class="lineno"><a class="line" href="structllvm_1_1objcarc_1_1BottomUpPtrState.html#a0b6f153e14da3299ec487acbf39e22ae">  177</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="structllvm_1_1objcarc_1_1BottomUpPtrState.html#a0b6f153e14da3299ec487acbf39e22ae">BottomUpPtrState::InitBottomUp</a>(<a class="code" href="classllvm_1_1objcarc_1_1ARCMDKindCache.html">ARCMDKindCache</a> &amp;Cache, <a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>) {</div><div class="line"><a name="l00178"></a><span class="lineno">  178</span>&#160;  <span class="comment">// If we see two releases in a row on the same pointer. If so, make</span></div><div class="line"><a name="l00179"></a><span class="lineno">  179</span>&#160;  <span class="comment">// a note, and we&#39;ll cicle back to revisit it after we&#39;ve</span></div><div class="line"><a name="l00180"></a><span class="lineno">  180</span>&#160;  <span class="comment">// hopefully eliminated the second release, which may allow us to</span></div><div class="line"><a name="l00181"></a><span class="lineno">  181</span>&#160;  <span class="comment">// eliminate the first release too.</span></div><div class="line"><a name="l00182"></a><span class="lineno">  182</span>&#160;  <span class="comment">// Theoretically we could implement removal of nested retain+release</span></div><div class="line"><a name="l00183"></a><span class="lineno">  183</span>&#160;  <span class="comment">// pairs by making PtrState hold a stack of states, but this is</span></div><div class="line"><a name="l00184"></a><span class="lineno">  184</span>&#160;  <span class="comment">// simple and avoids adding overhead for the non-nested case.</span></div><div class="line"><a name="l00185"></a><span class="lineno">  185</span>&#160;  <span class="keywordtype">bool</span> NestingDetected = <span class="keyword">false</span>;</div><div class="line"><a name="l00186"></a><span class="lineno">  186</span>&#160;  <span class="keywordflow">if</span> (GetSeq() == <a class="code" href="namespacellvm_1_1objcarc.html#a845b8f76f8bd22e4e2eb851121db306dafb02c89bd59643eb187b7223a531cb37">S_Release</a> || GetSeq() == <a class="code" href="namespacellvm_1_1objcarc.html#a845b8f76f8bd22e4e2eb851121db306daff34dfb06d8316048c533bac105bfbe6">S_MovableRelease</a>) {</div><div class="line"><a name="l00187"></a><span class="lineno">  187</span>&#160;    <a class="code" href="Debug_8h.html#a08efc68d15935eb8889400a46c3749ba">LLVM_DEBUG</a>(</div><div class="line"><a name="l00188"></a><span class="lineno">  188</span>&#160;        <a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;        Found nested releases (i.e. a release pair)\n&quot;</span>);</div><div class="line"><a name="l00189"></a><span class="lineno">  189</span>&#160;    NestingDetected = <span class="keyword">true</span>;</div><div class="line"><a name="l00190"></a><span class="lineno">  190</span>&#160;  }</div><div class="line"><a name="l00191"></a><span class="lineno">  191</span>&#160;</div><div class="line"><a name="l00192"></a><span class="lineno">  192</span>&#160;  <a class="code" href="classllvm_1_1MDNode.html">MDNode</a> *<a class="code" href="structllvm_1_1objcarc_1_1RRInfo.html#ab976ce410e551d37ce2f43177bb96995">ReleaseMetadata</a> =</div><div class="line"><a name="l00193"></a><span class="lineno">  193</span>&#160;      I-&gt;<a class="code" href="classllvm_1_1Instruction.html#ae22f493ba8327ce92e87d3b96bce7017">getMetadata</a>(Cache.<a class="code" href="classllvm_1_1objcarc_1_1ARCMDKindCache.html#a062cf10f8ea9fc45291d700b2e8da648">get</a>(<a class="code" href="namespacellvm_1_1objcarc.html#a749ec59e4812b00a3cf7e7036fb39c06ab1ec2e3fd61b7a763d9173e07016906c">ARCMDKindID::ImpreciseRelease</a>));</div><div class="line"><a name="l00194"></a><span class="lineno">  194</span>&#160;  <a class="code" href="namespacellvm_1_1objcarc.html#a845b8f76f8bd22e4e2eb851121db306d">Sequence</a> NewSeq = ReleaseMetadata ? <a class="code" href="namespacellvm_1_1objcarc.html#a845b8f76f8bd22e4e2eb851121db306daff34dfb06d8316048c533bac105bfbe6">S_MovableRelease</a> : <a class="code" href="namespacellvm_1_1objcarc.html#a845b8f76f8bd22e4e2eb851121db306dafb02c89bd59643eb187b7223a531cb37">S_Release</a>;</div><div class="line"><a name="l00195"></a><span class="lineno">  195</span>&#160;  ResetSequenceProgress(NewSeq);</div><div class="line"><a name="l00196"></a><span class="lineno">  196</span>&#160;  SetReleaseMetadata(ReleaseMetadata);</div><div class="line"><a name="l00197"></a><span class="lineno">  197</span>&#160;  SetKnownSafe(HasKnownPositiveRefCount());</div><div class="line"><a name="l00198"></a><span class="lineno">  198</span>&#160;  SetTailCallRelease(cast&lt;CallInst&gt;(I)-&gt;isTailCall());</div><div class="line"><a name="l00199"></a><span class="lineno">  199</span>&#160;  InsertCall(I);</div><div class="line"><a name="l00200"></a><span class="lineno">  200</span>&#160;  SetKnownPositiveRefCount();</div><div class="line"><a name="l00201"></a><span class="lineno">  201</span>&#160;  <span class="keywordflow">return</span> NestingDetected;</div><div class="line"><a name="l00202"></a><span class="lineno">  202</span>&#160;}</div><div class="line"><a name="l00203"></a><span class="lineno">  203</span>&#160;</div><div class="line"><a name="l00204"></a><span class="lineno"><a class="line" href="structllvm_1_1objcarc_1_1BottomUpPtrState.html#a91ef366645fbd66f709174e3b396fb92">  204</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="structllvm_1_1objcarc_1_1BottomUpPtrState.html#a91ef366645fbd66f709174e3b396fb92">BottomUpPtrState::MatchWithRetain</a>() {</div><div class="line"><a name="l00205"></a><span class="lineno">  205</span>&#160;  SetKnownPositiveRefCount();</div><div class="line"><a name="l00206"></a><span class="lineno">  206</span>&#160;</div><div class="line"><a name="l00207"></a><span class="lineno">  207</span>&#160;  <a class="code" href="namespacellvm_1_1objcarc.html#a845b8f76f8bd22e4e2eb851121db306d">Sequence</a> OldSeq = GetSeq();</div><div class="line"><a name="l00208"></a><span class="lineno">  208</span>&#160;  <span class="keywordflow">switch</span> (OldSeq) {</div><div class="line"><a name="l00209"></a><span class="lineno">  209</span>&#160;  <span class="keywordflow">case</span> <a class="code" href="namespacellvm_1_1objcarc.html#a845b8f76f8bd22e4e2eb851121db306daadd43d88dff4dfb5f9620f2151822b64">S_Stop</a>:</div><div class="line"><a name="l00210"></a><span class="lineno">  210</span>&#160;  <span class="keywordflow">case</span> <a class="code" href="namespacellvm_1_1objcarc.html#a845b8f76f8bd22e4e2eb851121db306dafb02c89bd59643eb187b7223a531cb37">S_Release</a>:</div><div class="line"><a name="l00211"></a><span class="lineno">  211</span>&#160;  <span class="keywordflow">case</span> <a class="code" href="namespacellvm_1_1objcarc.html#a845b8f76f8bd22e4e2eb851121db306daff34dfb06d8316048c533bac105bfbe6">S_MovableRelease</a>:</div><div class="line"><a name="l00212"></a><span class="lineno">  212</span>&#160;  <span class="keywordflow">case</span> <a class="code" href="namespacellvm_1_1objcarc.html#a845b8f76f8bd22e4e2eb851121db306da8e1b337cadca1fc899129d307df7d68e">S_Use</a>:</div><div class="line"><a name="l00213"></a><span class="lineno">  213</span>&#160;    <span class="comment">// If OldSeq is not S_Use or OldSeq is S_Use and we are tracking an</span></div><div class="line"><a name="l00214"></a><span class="lineno">  214</span>&#160;    <span class="comment">// imprecise release, clear our reverse insertion points.</span></div><div class="line"><a name="l00215"></a><span class="lineno">  215</span>&#160;    <span class="keywordflow">if</span> (OldSeq != <a class="code" href="namespacellvm_1_1objcarc.html#a845b8f76f8bd22e4e2eb851121db306da8e1b337cadca1fc899129d307df7d68e">S_Use</a> || IsTrackingImpreciseReleases())</div><div class="line"><a name="l00216"></a><span class="lineno">  216</span>&#160;      ClearReverseInsertPts();</div><div class="line"><a name="l00217"></a><span class="lineno">  217</span>&#160;    <a class="code" href="Compiler_8h.html#a9579881de06b1560d242d15171ca1b86">LLVM_FALLTHROUGH</a>;</div><div class="line"><a name="l00218"></a><span class="lineno">  218</span>&#160;  <span class="keywordflow">case</span> <a class="code" href="namespacellvm_1_1objcarc.html#a845b8f76f8bd22e4e2eb851121db306da8902051603b385fb4587620a0650b4f7">S_CanRelease</a>:</div><div class="line"><a name="l00219"></a><span class="lineno">  219</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div><div class="line"><a name="l00220"></a><span class="lineno">  220</span>&#160;  <span class="keywordflow">case</span> <a class="code" href="namespacellvm_1_1objcarc.html#a845b8f76f8bd22e4e2eb851121db306da6e431a7ec0fee74cc2ae9a79bd965122">S_None</a>:</div><div class="line"><a name="l00221"></a><span class="lineno">  221</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div><div class="line"><a name="l00222"></a><span class="lineno">  222</span>&#160;  <span class="keywordflow">case</span> <a class="code" href="namespacellvm_1_1objcarc.html#a845b8f76f8bd22e4e2eb851121db306daac10e4a5d85a196bcb2578c2700f3ff3">S_Retain</a>:</div><div class="line"><a name="l00223"></a><span class="lineno">  223</span>&#160;    <a class="code" href="Support_2ErrorHandling_8h.html#ace243f5c25697a1107cce46626b3dc94">llvm_unreachable</a>(<span class="stringliteral">&quot;bottom-up pointer in retain state!&quot;</span>);</div><div class="line"><a name="l00224"></a><span class="lineno">  224</span>&#160;  }</div><div class="line"><a name="l00225"></a><span class="lineno">  225</span>&#160;  <a class="code" href="Support_2ErrorHandling_8h.html#ace243f5c25697a1107cce46626b3dc94">llvm_unreachable</a>(<span class="stringliteral">&quot;Sequence unknown enum value&quot;</span>);</div><div class="line"><a name="l00226"></a><span class="lineno">  226</span>&#160;}</div><div class="line"><a name="l00227"></a><span class="lineno">  227</span>&#160;</div><div class="line"><a name="l00228"></a><span class="lineno"><a class="line" href="structllvm_1_1objcarc_1_1BottomUpPtrState.html#a004bf866c0303839642a34b82e15eee5">  228</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="structllvm_1_1objcarc_1_1BottomUpPtrState.html#a004bf866c0303839642a34b82e15eee5">BottomUpPtrState::HandlePotentialAlterRefCount</a>(<a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *Inst,</div><div class="line"><a name="l00229"></a><span class="lineno">  229</span>&#160;                                                    <span class="keyword">const</span> <a class="code" href="classllvm_1_1Value.html">Value</a> *Ptr,</div><div class="line"><a name="l00230"></a><span class="lineno">  230</span>&#160;                                                    <a class="code" href="classllvm_1_1objcarc_1_1ProvenanceAnalysis.html">ProvenanceAnalysis</a> &amp;PA,</div><div class="line"><a name="l00231"></a><span class="lineno">  231</span>&#160;                                                    <a class="code" href="namespacellvm_1_1objcarc.html#a494b44abeacdfac8bb26d3203571d1c2">ARCInstKind</a> Class) {</div><div class="line"><a name="l00232"></a><span class="lineno">  232</span>&#160;  <a class="code" href="namespacellvm_1_1objcarc.html#a845b8f76f8bd22e4e2eb851121db306d">Sequence</a> S = GetSeq();</div><div class="line"><a name="l00233"></a><span class="lineno">  233</span>&#160;</div><div class="line"><a name="l00234"></a><span class="lineno">  234</span>&#160;  <span class="comment">// Check for possible releases.</span></div><div class="line"><a name="l00235"></a><span class="lineno">  235</span>&#160;  <span class="keywordflow">if</span> (!<a class="code" href="namespacellvm_1_1objcarc.html#a1b3a1bca1f908fbc09a8c4cb5df7e155">CanAlterRefCount</a>(Inst, Ptr, PA, Class))</div><div class="line"><a name="l00236"></a><span class="lineno">  236</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div><div class="line"><a name="l00237"></a><span class="lineno">  237</span>&#160;</div><div class="line"><a name="l00238"></a><span class="lineno">  238</span>&#160;  <a class="code" href="Debug_8h.html#a08efc68d15935eb8889400a46c3749ba">LLVM_DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;            CanAlterRefCount: Seq: &quot;</span> &lt;&lt; S &lt;&lt; <span class="stringliteral">&quot;; &quot;</span></div><div class="line"><a name="l00239"></a><span class="lineno">  239</span>&#160;                    &lt;&lt; *Ptr &lt;&lt; <span class="stringliteral">&quot;\n&quot;</span>);</div><div class="line"><a name="l00240"></a><span class="lineno">  240</span>&#160;  <span class="keywordflow">switch</span> (S) {</div><div class="line"><a name="l00241"></a><span class="lineno">  241</span>&#160;  <span class="keywordflow">case</span> <a class="code" href="namespacellvm_1_1objcarc.html#a845b8f76f8bd22e4e2eb851121db306da8e1b337cadca1fc899129d307df7d68e">S_Use</a>:</div><div class="line"><a name="l00242"></a><span class="lineno">  242</span>&#160;    SetSeq(<a class="code" href="namespacellvm_1_1objcarc.html#a845b8f76f8bd22e4e2eb851121db306da8902051603b385fb4587620a0650b4f7">S_CanRelease</a>);</div><div class="line"><a name="l00243"></a><span class="lineno">  243</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div><div class="line"><a name="l00244"></a><span class="lineno">  244</span>&#160;  <span class="keywordflow">case</span> <a class="code" href="namespacellvm_1_1objcarc.html#a845b8f76f8bd22e4e2eb851121db306da8902051603b385fb4587620a0650b4f7">S_CanRelease</a>:</div><div class="line"><a name="l00245"></a><span class="lineno">  245</span>&#160;  <span class="keywordflow">case</span> <a class="code" href="namespacellvm_1_1objcarc.html#a845b8f76f8bd22e4e2eb851121db306dafb02c89bd59643eb187b7223a531cb37">S_Release</a>:</div><div class="line"><a name="l00246"></a><span class="lineno">  246</span>&#160;  <span class="keywordflow">case</span> <a class="code" href="namespacellvm_1_1objcarc.html#a845b8f76f8bd22e4e2eb851121db306daff34dfb06d8316048c533bac105bfbe6">S_MovableRelease</a>:</div><div class="line"><a name="l00247"></a><span class="lineno">  247</span>&#160;  <span class="keywordflow">case</span> <a class="code" href="namespacellvm_1_1objcarc.html#a845b8f76f8bd22e4e2eb851121db306daadd43d88dff4dfb5f9620f2151822b64">S_Stop</a>:</div><div class="line"><a name="l00248"></a><span class="lineno">  248</span>&#160;  <span class="keywordflow">case</span> <a class="code" href="namespacellvm_1_1objcarc.html#a845b8f76f8bd22e4e2eb851121db306da6e431a7ec0fee74cc2ae9a79bd965122">S_None</a>:</div><div class="line"><a name="l00249"></a><span class="lineno">  249</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div><div class="line"><a name="l00250"></a><span class="lineno">  250</span>&#160;  <span class="keywordflow">case</span> <a class="code" href="namespacellvm_1_1objcarc.html#a845b8f76f8bd22e4e2eb851121db306daac10e4a5d85a196bcb2578c2700f3ff3">S_Retain</a>:</div><div class="line"><a name="l00251"></a><span class="lineno">  251</span>&#160;    <a class="code" href="Support_2ErrorHandling_8h.html#ace243f5c25697a1107cce46626b3dc94">llvm_unreachable</a>(<span class="stringliteral">&quot;bottom-up pointer in retain state!&quot;</span>);</div><div class="line"><a name="l00252"></a><span class="lineno">  252</span>&#160;  }</div><div class="line"><a name="l00253"></a><span class="lineno">  253</span>&#160;  <a class="code" href="Support_2ErrorHandling_8h.html#ace243f5c25697a1107cce46626b3dc94">llvm_unreachable</a>(<span class="stringliteral">&quot;Sequence unknown enum value&quot;</span>);</div><div class="line"><a name="l00254"></a><span class="lineno">  254</span>&#160;}</div><div class="line"><a name="l00255"></a><span class="lineno">  255</span>&#160;</div><div class="line"><a name="l00256"></a><span class="lineno"><a class="line" href="structllvm_1_1objcarc_1_1BottomUpPtrState.html#a92756d26ffe5c46811ee48f629857ba2">  256</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="structllvm_1_1objcarc_1_1BottomUpPtrState.html#a92756d26ffe5c46811ee48f629857ba2">BottomUpPtrState::HandlePotentialUse</a>(<a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *BB, <a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *Inst,</div><div class="line"><a name="l00257"></a><span class="lineno">  257</span>&#160;                                          <span class="keyword">const</span> <a class="code" href="classllvm_1_1Value.html">Value</a> *Ptr,</div><div class="line"><a name="l00258"></a><span class="lineno">  258</span>&#160;                                          <a class="code" href="classllvm_1_1objcarc_1_1ProvenanceAnalysis.html">ProvenanceAnalysis</a> &amp;PA,</div><div class="line"><a name="l00259"></a><span class="lineno">  259</span>&#160;                                          <a class="code" href="namespacellvm_1_1objcarc.html#a494b44abeacdfac8bb26d3203571d1c2">ARCInstKind</a> Class) {</div><div class="line"><a name="l00260"></a><span class="lineno">  260</span>&#160;  <span class="keyword">auto</span> SetSeqAndInsertReverseInsertPt = [&amp;](<a class="code" href="namespacellvm_1_1objcarc.html#a845b8f76f8bd22e4e2eb851121db306d">Sequence</a> NewSeq){</div><div class="line"><a name="l00261"></a><span class="lineno">  261</span>&#160;    <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(!HasReverseInsertPts());</div><div class="line"><a name="l00262"></a><span class="lineno">  262</span>&#160;    SetSeq(NewSeq);</div><div class="line"><a name="l00263"></a><span class="lineno">  263</span>&#160;    <span class="comment">// If this is an invoke instruction, we&#39;re scanning it as part of</span></div><div class="line"><a name="l00264"></a><span class="lineno">  264</span>&#160;    <span class="comment">// one of its successor blocks, since we can&#39;t insert code after it</span></div><div class="line"><a name="l00265"></a><span class="lineno">  265</span>&#160;    <span class="comment">// in its own block, and we don&#39;t want to split critical edges.</span></div><div class="line"><a name="l00266"></a><span class="lineno">  266</span>&#160;    <a class="code" href="classllvm_1_1ilist__iterator.html">BasicBlock::iterator</a> InsertAfter;</div><div class="line"><a name="l00267"></a><span class="lineno">  267</span>&#160;    <span class="keywordflow">if</span> (isa&lt;InvokeInst&gt;(Inst)) {</div><div class="line"><a name="l00268"></a><span class="lineno">  268</span>&#160;      <span class="keyword">const</span> <span class="keyword">auto</span> IP = BB-&gt;<a class="code" href="classllvm_1_1BasicBlock.html#a161fd4e9fa5367f64c2a4c9e921c3ad3">getFirstInsertionPt</a>();</div><div class="line"><a name="l00269"></a><span class="lineno">  269</span>&#160;      InsertAfter = IP == BB-&gt;<a class="code" href="classllvm_1_1BasicBlock.html#a0b4e7bee9b8575cc7db73329f1a561bd">end</a>() ? std::prev(BB-&gt;<a class="code" href="classllvm_1_1BasicBlock.html#a0b4e7bee9b8575cc7db73329f1a561bd">end</a>()) : IP;</div><div class="line"><a name="l00270"></a><span class="lineno">  270</span>&#160;      <span class="keywordflow">if</span> (isa&lt;CatchSwitchInst&gt;(InsertAfter))</div><div class="line"><a name="l00271"></a><span class="lineno">  271</span>&#160;        <span class="comment">// A catchswitch must be the only non-phi instruction in its basic</span></div><div class="line"><a name="l00272"></a><span class="lineno">  272</span>&#160;        <span class="comment">// block, so attempting to insert an instruction into such a block would</span></div><div class="line"><a name="l00273"></a><span class="lineno">  273</span>&#160;        <span class="comment">// produce invalid IR.</span></div><div class="line"><a name="l00274"></a><span class="lineno">  274</span>&#160;        SetCFGHazardAfflicted(<span class="keyword">true</span>);</div><div class="line"><a name="l00275"></a><span class="lineno">  275</span>&#160;    } <span class="keywordflow">else</span> {</div><div class="line"><a name="l00276"></a><span class="lineno">  276</span>&#160;      InsertAfter = std::next(Inst-&gt;<a class="code" href="classllvm_1_1ilist__node__impl.html#af719fc783be6589465137d997701a432">getIterator</a>());</div><div class="line"><a name="l00277"></a><span class="lineno">  277</span>&#160;    }</div><div class="line"><a name="l00278"></a><span class="lineno">  278</span>&#160;</div><div class="line"><a name="l00279"></a><span class="lineno">  279</span>&#160;    <span class="keywordflow">if</span> (InsertAfter != BB-&gt;<a class="code" href="classllvm_1_1BasicBlock.html#a0b4e7bee9b8575cc7db73329f1a561bd">end</a>())</div><div class="line"><a name="l00280"></a><span class="lineno">  280</span>&#160;      InsertAfter = <a class="code" href="namespacellvm.html#a6577ad74b2f1a18729c71543850d8616">skipDebugIntrinsics</a>(InsertAfter);</div><div class="line"><a name="l00281"></a><span class="lineno">  281</span>&#160;</div><div class="line"><a name="l00282"></a><span class="lineno">  282</span>&#160;    InsertReverseInsertPt(&amp;*InsertAfter);</div><div class="line"><a name="l00283"></a><span class="lineno">  283</span>&#160;  };</div><div class="line"><a name="l00284"></a><span class="lineno">  284</span>&#160;</div><div class="line"><a name="l00285"></a><span class="lineno">  285</span>&#160;  <span class="comment">// Check for possible direct uses.</span></div><div class="line"><a name="l00286"></a><span class="lineno">  286</span>&#160;  <span class="keywordflow">switch</span> (GetSeq()) {</div><div class="line"><a name="l00287"></a><span class="lineno">  287</span>&#160;  <span class="keywordflow">case</span> <a class="code" href="namespacellvm_1_1objcarc.html#a845b8f76f8bd22e4e2eb851121db306dafb02c89bd59643eb187b7223a531cb37">S_Release</a>:</div><div class="line"><a name="l00288"></a><span class="lineno">  288</span>&#160;  <span class="keywordflow">case</span> <a class="code" href="namespacellvm_1_1objcarc.html#a845b8f76f8bd22e4e2eb851121db306daff34dfb06d8316048c533bac105bfbe6">S_MovableRelease</a>:</div><div class="line"><a name="l00289"></a><span class="lineno">  289</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="namespacellvm_1_1objcarc.html#af467748c4e634ace0c19cbbeb0af5fee">CanUse</a>(Inst, Ptr, PA, Class)) {</div><div class="line"><a name="l00290"></a><span class="lineno">  290</span>&#160;      <a class="code" href="Debug_8h.html#a08efc68d15935eb8889400a46c3749ba">LLVM_DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;            CanUse: Seq: &quot;</span> &lt;&lt; GetSeq() &lt;&lt; <span class="stringliteral">&quot;; &quot;</span></div><div class="line"><a name="l00291"></a><span class="lineno">  291</span>&#160;                        &lt;&lt; *Ptr &lt;&lt; <span class="stringliteral">&quot;\n&quot;</span>);</div><div class="line"><a name="l00292"></a><span class="lineno">  292</span>&#160;      SetSeqAndInsertReverseInsertPt(<a class="code" href="namespacellvm_1_1objcarc.html#a845b8f76f8bd22e4e2eb851121db306da8e1b337cadca1fc899129d307df7d68e">S_Use</a>);</div><div class="line"><a name="l00293"></a><span class="lineno">  293</span>&#160;    } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (Seq == <a class="code" href="namespacellvm_1_1objcarc.html#a845b8f76f8bd22e4e2eb851121db306dafb02c89bd59643eb187b7223a531cb37">S_Release</a> &amp;&amp; <a class="code" href="namespacellvm_1_1objcarc.html#a2b4438068b1237fb0319d216d473d00b">IsUser</a>(Class)) {</div><div class="line"><a name="l00294"></a><span class="lineno">  294</span>&#160;      <a class="code" href="Debug_8h.html#a08efc68d15935eb8889400a46c3749ba">LLVM_DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;            PreciseReleaseUse: Seq: &quot;</span> &lt;&lt; GetSeq()</div><div class="line"><a name="l00295"></a><span class="lineno">  295</span>&#160;                        &lt;&lt; <span class="stringliteral">&quot;; &quot;</span> &lt;&lt; *Ptr &lt;&lt; <span class="stringliteral">&quot;\n&quot;</span>);</div><div class="line"><a name="l00296"></a><span class="lineno">  296</span>&#160;      <span class="comment">// Non-movable releases depend on any possible objc pointer use.</span></div><div class="line"><a name="l00297"></a><span class="lineno">  297</span>&#160;      SetSeqAndInsertReverseInsertPt(<a class="code" href="namespacellvm_1_1objcarc.html#a845b8f76f8bd22e4e2eb851121db306daadd43d88dff4dfb5f9620f2151822b64">S_Stop</a>);</div><div class="line"><a name="l00298"></a><span class="lineno">  298</span>&#160;    } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<span class="keyword">const</span> <span class="keyword">auto</span> *<a class="code" href="namespacellvm_1_1objcarc.html#a494b44abeacdfac8bb26d3203571d1c2ac3755e61202abd74da5885d2e9c9160e">Call</a> = <a class="code" href="namespacellvm_1_1objcarc.html#a842490036bd86108a14db3839fcba504">getreturnRVOperand</a>(*Inst, Class)) {</div><div class="line"><a name="l00299"></a><span class="lineno">  299</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="namespacellvm_1_1objcarc.html#af467748c4e634ace0c19cbbeb0af5fee">CanUse</a>(<a class="code" href="namespacellvm_1_1objcarc.html#a494b44abeacdfac8bb26d3203571d1c2ac3755e61202abd74da5885d2e9c9160e">Call</a>, Ptr, PA, <a class="code" href="namespacellvm_1_1objcarc.html#a86cdbdf3773be3c67bc193b473b75708">GetBasicARCInstKind</a>(<a class="code" href="namespacellvm_1_1objcarc.html#a494b44abeacdfac8bb26d3203571d1c2ac3755e61202abd74da5885d2e9c9160e">Call</a>))) {</div><div class="line"><a name="l00300"></a><span class="lineno">  300</span>&#160;        <a class="code" href="Debug_8h.html#a08efc68d15935eb8889400a46c3749ba">LLVM_DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;            ReleaseUse: Seq: &quot;</span> &lt;&lt; GetSeq() &lt;&lt; <span class="stringliteral">&quot;; &quot;</span></div><div class="line"><a name="l00301"></a><span class="lineno">  301</span>&#160;                          &lt;&lt; *Ptr &lt;&lt; <span class="stringliteral">&quot;\n&quot;</span>);</div><div class="line"><a name="l00302"></a><span class="lineno">  302</span>&#160;        SetSeqAndInsertReverseInsertPt(<a class="code" href="namespacellvm_1_1objcarc.html#a845b8f76f8bd22e4e2eb851121db306daadd43d88dff4dfb5f9620f2151822b64">S_Stop</a>);</div><div class="line"><a name="l00303"></a><span class="lineno">  303</span>&#160;      }</div><div class="line"><a name="l00304"></a><span class="lineno">  304</span>&#160;    }</div><div class="line"><a name="l00305"></a><span class="lineno">  305</span>&#160;    <span class="keywordflow">break</span>;</div><div class="line"><a name="l00306"></a><span class="lineno">  306</span>&#160;  <span class="keywordflow">case</span> <a class="code" href="namespacellvm_1_1objcarc.html#a845b8f76f8bd22e4e2eb851121db306daadd43d88dff4dfb5f9620f2151822b64">S_Stop</a>:</div><div class="line"><a name="l00307"></a><span class="lineno">  307</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="namespacellvm_1_1objcarc.html#af467748c4e634ace0c19cbbeb0af5fee">CanUse</a>(Inst, Ptr, PA, Class)) {</div><div class="line"><a name="l00308"></a><span class="lineno">  308</span>&#160;      <a class="code" href="Debug_8h.html#a08efc68d15935eb8889400a46c3749ba">LLVM_DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;            PreciseStopUse: Seq: &quot;</span> &lt;&lt; GetSeq()</div><div class="line"><a name="l00309"></a><span class="lineno">  309</span>&#160;                        &lt;&lt; <span class="stringliteral">&quot;; &quot;</span> &lt;&lt; *Ptr &lt;&lt; <span class="stringliteral">&quot;\n&quot;</span>);</div><div class="line"><a name="l00310"></a><span class="lineno">  310</span>&#160;      SetSeq(<a class="code" href="namespacellvm_1_1objcarc.html#a845b8f76f8bd22e4e2eb851121db306da8e1b337cadca1fc899129d307df7d68e">S_Use</a>);</div><div class="line"><a name="l00311"></a><span class="lineno">  311</span>&#160;    }</div><div class="line"><a name="l00312"></a><span class="lineno">  312</span>&#160;    <span class="keywordflow">break</span>;</div><div class="line"><a name="l00313"></a><span class="lineno">  313</span>&#160;  <span class="keywordflow">case</span> <a class="code" href="namespacellvm_1_1objcarc.html#a845b8f76f8bd22e4e2eb851121db306da8902051603b385fb4587620a0650b4f7">S_CanRelease</a>:</div><div class="line"><a name="l00314"></a><span class="lineno">  314</span>&#160;  <span class="keywordflow">case</span> <a class="code" href="namespacellvm_1_1objcarc.html#a845b8f76f8bd22e4e2eb851121db306da8e1b337cadca1fc899129d307df7d68e">S_Use</a>:</div><div class="line"><a name="l00315"></a><span class="lineno">  315</span>&#160;  <span class="keywordflow">case</span> <a class="code" href="namespacellvm_1_1objcarc.html#a845b8f76f8bd22e4e2eb851121db306da6e431a7ec0fee74cc2ae9a79bd965122">S_None</a>:</div><div class="line"><a name="l00316"></a><span class="lineno">  316</span>&#160;    <span class="keywordflow">break</span>;</div><div class="line"><a name="l00317"></a><span class="lineno">  317</span>&#160;  <span class="keywordflow">case</span> <a class="code" href="namespacellvm_1_1objcarc.html#a845b8f76f8bd22e4e2eb851121db306daac10e4a5d85a196bcb2578c2700f3ff3">S_Retain</a>:</div><div class="line"><a name="l00318"></a><span class="lineno">  318</span>&#160;    <a class="code" href="Support_2ErrorHandling_8h.html#ace243f5c25697a1107cce46626b3dc94">llvm_unreachable</a>(<span class="stringliteral">&quot;bottom-up pointer in retain state!&quot;</span>);</div><div class="line"><a name="l00319"></a><span class="lineno">  319</span>&#160;  }</div><div class="line"><a name="l00320"></a><span class="lineno">  320</span>&#160;}</div><div class="line"><a name="l00321"></a><span class="lineno">  321</span>&#160;</div><div class="line"><a name="l00322"></a><span class="lineno">  322</span>&#160;<span class="comment">//===----------------------------------------------------------------------===//</span></div><div class="line"><a name="l00323"></a><span class="lineno">  323</span>&#160;<span class="comment">//                              TopDownPtrState</span></div><div class="line"><a name="l00324"></a><span class="lineno">  324</span>&#160;<span class="comment">//===----------------------------------------------------------------------===//</span></div><div class="line"><a name="l00325"></a><span class="lineno">  325</span>&#160;</div><div class="line"><a name="l00326"></a><span class="lineno"><a class="line" href="structllvm_1_1objcarc_1_1TopDownPtrState.html#a5e7821981d45cb3fada161fbd0b5b3ae">  326</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="structllvm_1_1objcarc_1_1TopDownPtrState.html#a5e7821981d45cb3fada161fbd0b5b3ae">TopDownPtrState::InitTopDown</a>(<a class="code" href="namespacellvm_1_1objcarc.html#a494b44abeacdfac8bb26d3203571d1c2">ARCInstKind</a> <a class="code" href="namespacellvm_1_1EngineKind.html#a9df47239a42cd9621ac26d9ecbd57441">Kind</a>, <a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>) {</div><div class="line"><a name="l00327"></a><span class="lineno">  327</span>&#160;  <span class="keywordtype">bool</span> NestingDetected = <span class="keyword">false</span>;</div><div class="line"><a name="l00328"></a><span class="lineno">  328</span>&#160;  <span class="comment">// Don&#39;t do retain+release tracking for ARCInstKind::RetainRV, because</span></div><div class="line"><a name="l00329"></a><span class="lineno">  329</span>&#160;  <span class="comment">// it&#39;s</span></div><div class="line"><a name="l00330"></a><span class="lineno">  330</span>&#160;  <span class="comment">// better to let it remain as the first instruction after a call.</span></div><div class="line"><a name="l00331"></a><span class="lineno">  331</span>&#160;  <span class="keywordflow">if</span> (Kind != <a class="code" href="namespacellvm_1_1objcarc.html#a494b44abeacdfac8bb26d3203571d1c2aa1226b5450384ce6ea5ed47c317303ee">ARCInstKind::RetainRV</a>) {</div><div class="line"><a name="l00332"></a><span class="lineno">  332</span>&#160;    <span class="comment">// If we see two retains in a row on the same pointer. If so, make</span></div><div class="line"><a name="l00333"></a><span class="lineno">  333</span>&#160;    <span class="comment">// a note, and we&#39;ll cicle back to revisit it after we&#39;ve</span></div><div class="line"><a name="l00334"></a><span class="lineno">  334</span>&#160;    <span class="comment">// hopefully eliminated the second retain, which may allow us to</span></div><div class="line"><a name="l00335"></a><span class="lineno">  335</span>&#160;    <span class="comment">// eliminate the first retain too.</span></div><div class="line"><a name="l00336"></a><span class="lineno">  336</span>&#160;    <span class="comment">// Theoretically we could implement removal of nested retain+release</span></div><div class="line"><a name="l00337"></a><span class="lineno">  337</span>&#160;    <span class="comment">// pairs by making PtrState hold a stack of states, but this is</span></div><div class="line"><a name="l00338"></a><span class="lineno">  338</span>&#160;    <span class="comment">// simple and avoids adding overhead for the non-nested case.</span></div><div class="line"><a name="l00339"></a><span class="lineno">  339</span>&#160;    <span class="keywordflow">if</span> (GetSeq() == <a class="code" href="namespacellvm_1_1objcarc.html#a845b8f76f8bd22e4e2eb851121db306daac10e4a5d85a196bcb2578c2700f3ff3">S_Retain</a>)</div><div class="line"><a name="l00340"></a><span class="lineno">  340</span>&#160;      NestingDetected = <span class="keyword">true</span>;</div><div class="line"><a name="l00341"></a><span class="lineno">  341</span>&#160;</div><div class="line"><a name="l00342"></a><span class="lineno">  342</span>&#160;    ResetSequenceProgress(<a class="code" href="namespacellvm_1_1objcarc.html#a845b8f76f8bd22e4e2eb851121db306daac10e4a5d85a196bcb2578c2700f3ff3">S_Retain</a>);</div><div class="line"><a name="l00343"></a><span class="lineno">  343</span>&#160;    SetKnownSafe(HasKnownPositiveRefCount());</div><div class="line"><a name="l00344"></a><span class="lineno">  344</span>&#160;    InsertCall(I);</div><div class="line"><a name="l00345"></a><span class="lineno">  345</span>&#160;  }</div><div class="line"><a name="l00346"></a><span class="lineno">  346</span>&#160;</div><div class="line"><a name="l00347"></a><span class="lineno">  347</span>&#160;  SetKnownPositiveRefCount();</div><div class="line"><a name="l00348"></a><span class="lineno">  348</span>&#160;  <span class="keywordflow">return</span> NestingDetected;</div><div class="line"><a name="l00349"></a><span class="lineno">  349</span>&#160;}</div><div class="line"><a name="l00350"></a><span class="lineno">  350</span>&#160;</div><div class="line"><a name="l00351"></a><span class="lineno"><a class="line" href="structllvm_1_1objcarc_1_1TopDownPtrState.html#a58e7f78b0c740eb2f30b8a24ee170f7a">  351</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="structllvm_1_1objcarc_1_1TopDownPtrState.html#a58e7f78b0c740eb2f30b8a24ee170f7a">TopDownPtrState::MatchWithRelease</a>(<a class="code" href="classllvm_1_1objcarc_1_1ARCMDKindCache.html">ARCMDKindCache</a> &amp;Cache,</div><div class="line"><a name="l00352"></a><span class="lineno">  352</span>&#160;                                       <a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *<a class="code" href="namespacellvm_1_1objcarc.html#a494b44abeacdfac8bb26d3203571d1c2ab8e7b465df7c5979dc731d06e84ce2cf">Release</a>) {</div><div class="line"><a name="l00353"></a><span class="lineno">  353</span>&#160;  ClearKnownPositiveRefCount();</div><div class="line"><a name="l00354"></a><span class="lineno">  354</span>&#160;</div><div class="line"><a name="l00355"></a><span class="lineno">  355</span>&#160;  <a class="code" href="namespacellvm_1_1objcarc.html#a845b8f76f8bd22e4e2eb851121db306d">Sequence</a> OldSeq = GetSeq();</div><div class="line"><a name="l00356"></a><span class="lineno">  356</span>&#160;</div><div class="line"><a name="l00357"></a><span class="lineno">  357</span>&#160;  <a class="code" href="classllvm_1_1MDNode.html">MDNode</a> *<a class="code" href="structllvm_1_1objcarc_1_1RRInfo.html#ab976ce410e551d37ce2f43177bb96995">ReleaseMetadata</a> =</div><div class="line"><a name="l00358"></a><span class="lineno">  358</span>&#160;      Release-&gt;<a class="code" href="classllvm_1_1Instruction.html#ae22f493ba8327ce92e87d3b96bce7017">getMetadata</a>(Cache.<a class="code" href="classllvm_1_1objcarc_1_1ARCMDKindCache.html#a062cf10f8ea9fc45291d700b2e8da648">get</a>(<a class="code" href="namespacellvm_1_1objcarc.html#a749ec59e4812b00a3cf7e7036fb39c06ab1ec2e3fd61b7a763d9173e07016906c">ARCMDKindID::ImpreciseRelease</a>));</div><div class="line"><a name="l00359"></a><span class="lineno">  359</span>&#160;</div><div class="line"><a name="l00360"></a><span class="lineno">  360</span>&#160;  <span class="keywordflow">switch</span> (OldSeq) {</div><div class="line"><a name="l00361"></a><span class="lineno">  361</span>&#160;  <span class="keywordflow">case</span> <a class="code" href="namespacellvm_1_1objcarc.html#a845b8f76f8bd22e4e2eb851121db306daac10e4a5d85a196bcb2578c2700f3ff3">S_Retain</a>:</div><div class="line"><a name="l00362"></a><span class="lineno">  362</span>&#160;  <span class="keywordflow">case</span> <a class="code" href="namespacellvm_1_1objcarc.html#a845b8f76f8bd22e4e2eb851121db306da8902051603b385fb4587620a0650b4f7">S_CanRelease</a>:</div><div class="line"><a name="l00363"></a><span class="lineno">  363</span>&#160;    <span class="keywordflow">if</span> (OldSeq == <a class="code" href="namespacellvm_1_1objcarc.html#a845b8f76f8bd22e4e2eb851121db306daac10e4a5d85a196bcb2578c2700f3ff3">S_Retain</a> || ReleaseMetadata != <span class="keyword">nullptr</span>)</div><div class="line"><a name="l00364"></a><span class="lineno">  364</span>&#160;      ClearReverseInsertPts();</div><div class="line"><a name="l00365"></a><span class="lineno">  365</span>&#160;    <a class="code" href="Compiler_8h.html#a9579881de06b1560d242d15171ca1b86">LLVM_FALLTHROUGH</a>;</div><div class="line"><a name="l00366"></a><span class="lineno">  366</span>&#160;  <span class="keywordflow">case</span> <a class="code" href="namespacellvm_1_1objcarc.html#a845b8f76f8bd22e4e2eb851121db306da8e1b337cadca1fc899129d307df7d68e">S_Use</a>:</div><div class="line"><a name="l00367"></a><span class="lineno">  367</span>&#160;    SetReleaseMetadata(ReleaseMetadata);</div><div class="line"><a name="l00368"></a><span class="lineno">  368</span>&#160;    SetTailCallRelease(cast&lt;CallInst&gt;(Release)-&gt;isTailCall());</div><div class="line"><a name="l00369"></a><span class="lineno">  369</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div><div class="line"><a name="l00370"></a><span class="lineno">  370</span>&#160;  <span class="keywordflow">case</span> <a class="code" href="namespacellvm_1_1objcarc.html#a845b8f76f8bd22e4e2eb851121db306da6e431a7ec0fee74cc2ae9a79bd965122">S_None</a>:</div><div class="line"><a name="l00371"></a><span class="lineno">  371</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div><div class="line"><a name="l00372"></a><span class="lineno">  372</span>&#160;  <span class="keywordflow">case</span> <a class="code" href="namespacellvm_1_1objcarc.html#a845b8f76f8bd22e4e2eb851121db306daadd43d88dff4dfb5f9620f2151822b64">S_Stop</a>:</div><div class="line"><a name="l00373"></a><span class="lineno">  373</span>&#160;  <span class="keywordflow">case</span> <a class="code" href="namespacellvm_1_1objcarc.html#a845b8f76f8bd22e4e2eb851121db306dafb02c89bd59643eb187b7223a531cb37">S_Release</a>:</div><div class="line"><a name="l00374"></a><span class="lineno">  374</span>&#160;  <span class="keywordflow">case</span> <a class="code" href="namespacellvm_1_1objcarc.html#a845b8f76f8bd22e4e2eb851121db306daff34dfb06d8316048c533bac105bfbe6">S_MovableRelease</a>:</div><div class="line"><a name="l00375"></a><span class="lineno">  375</span>&#160;    <a class="code" href="Support_2ErrorHandling_8h.html#ace243f5c25697a1107cce46626b3dc94">llvm_unreachable</a>(<span class="stringliteral">&quot;top-down pointer in bottom up state!&quot;</span>);</div><div class="line"><a name="l00376"></a><span class="lineno">  376</span>&#160;  }</div><div class="line"><a name="l00377"></a><span class="lineno">  377</span>&#160;  <a class="code" href="Support_2ErrorHandling_8h.html#ace243f5c25697a1107cce46626b3dc94">llvm_unreachable</a>(<span class="stringliteral">&quot;Sequence unknown enum value&quot;</span>);</div><div class="line"><a name="l00378"></a><span class="lineno">  378</span>&#160;}</div><div class="line"><a name="l00379"></a><span class="lineno">  379</span>&#160;</div><div class="line"><a name="l00380"></a><span class="lineno"><a class="line" href="structllvm_1_1objcarc_1_1TopDownPtrState.html#a818ef1ac739e03bcbccd0a9fada9c4a6">  380</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="structllvm_1_1objcarc_1_1TopDownPtrState.html#a818ef1ac739e03bcbccd0a9fada9c4a6">TopDownPtrState::HandlePotentialAlterRefCount</a>(<a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *Inst,</div><div class="line"><a name="l00381"></a><span class="lineno">  381</span>&#160;                                                   <span class="keyword">const</span> <a class="code" href="classllvm_1_1Value.html">Value</a> *Ptr,</div><div class="line"><a name="l00382"></a><span class="lineno">  382</span>&#160;                                                   <a class="code" href="classllvm_1_1objcarc_1_1ProvenanceAnalysis.html">ProvenanceAnalysis</a> &amp;PA,</div><div class="line"><a name="l00383"></a><span class="lineno">  383</span>&#160;                                                   <a class="code" href="namespacellvm_1_1objcarc.html#a494b44abeacdfac8bb26d3203571d1c2">ARCInstKind</a> Class) {</div><div class="line"><a name="l00384"></a><span class="lineno">  384</span>&#160;  <span class="comment">// Check for possible releases. Treat clang.arc.use as a releasing instruction</span></div><div class="line"><a name="l00385"></a><span class="lineno">  385</span>&#160;  <span class="comment">// to prevent sinking a retain past it.</span></div><div class="line"><a name="l00386"></a><span class="lineno">  386</span>&#160;  <span class="keywordflow">if</span> (!<a class="code" href="namespacellvm_1_1objcarc.html#a1b3a1bca1f908fbc09a8c4cb5df7e155">CanAlterRefCount</a>(Inst, Ptr, PA, Class) &amp;&amp;</div><div class="line"><a name="l00387"></a><span class="lineno">  387</span>&#160;      Class != <a class="code" href="namespacellvm_1_1objcarc.html#a494b44abeacdfac8bb26d3203571d1c2af635fed4a9fb967d38c264ed1106844f">ARCInstKind::IntrinsicUser</a>)</div><div class="line"><a name="l00388"></a><span class="lineno">  388</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div><div class="line"><a name="l00389"></a><span class="lineno">  389</span>&#160;</div><div class="line"><a name="l00390"></a><span class="lineno">  390</span>&#160;  <a class="code" href="Debug_8h.html#a08efc68d15935eb8889400a46c3749ba">LLVM_DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;            CanAlterRefCount: Seq: &quot;</span> &lt;&lt; GetSeq() &lt;&lt; <span class="stringliteral">&quot;; &quot;</span></div><div class="line"><a name="l00391"></a><span class="lineno">  391</span>&#160;                    &lt;&lt; *Ptr &lt;&lt; <span class="stringliteral">&quot;\n&quot;</span>);</div><div class="line"><a name="l00392"></a><span class="lineno">  392</span>&#160;  ClearKnownPositiveRefCount();</div><div class="line"><a name="l00393"></a><span class="lineno">  393</span>&#160;  <span class="keywordflow">switch</span> (GetSeq()) {</div><div class="line"><a name="l00394"></a><span class="lineno">  394</span>&#160;  <span class="keywordflow">case</span> <a class="code" href="namespacellvm_1_1objcarc.html#a845b8f76f8bd22e4e2eb851121db306daac10e4a5d85a196bcb2578c2700f3ff3">S_Retain</a>:</div><div class="line"><a name="l00395"></a><span class="lineno">  395</span>&#160;    SetSeq(<a class="code" href="namespacellvm_1_1objcarc.html#a845b8f76f8bd22e4e2eb851121db306da8902051603b385fb4587620a0650b4f7">S_CanRelease</a>);</div><div class="line"><a name="l00396"></a><span class="lineno">  396</span>&#160;    <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(!HasReverseInsertPts());</div><div class="line"><a name="l00397"></a><span class="lineno">  397</span>&#160;    InsertReverseInsertPt(Inst);</div><div class="line"><a name="l00398"></a><span class="lineno">  398</span>&#160;</div><div class="line"><a name="l00399"></a><span class="lineno">  399</span>&#160;    <span class="comment">// One call can&#39;t cause a transition from S_Retain to S_CanRelease</span></div><div class="line"><a name="l00400"></a><span class="lineno">  400</span>&#160;    <span class="comment">// and S_CanRelease to S_Use. If we&#39;ve made the first transition,</span></div><div class="line"><a name="l00401"></a><span class="lineno">  401</span>&#160;    <span class="comment">// we&#39;re done.</span></div><div class="line"><a name="l00402"></a><span class="lineno">  402</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div><div class="line"><a name="l00403"></a><span class="lineno">  403</span>&#160;  <span class="keywordflow">case</span> <a class="code" href="namespacellvm_1_1objcarc.html#a845b8f76f8bd22e4e2eb851121db306da8e1b337cadca1fc899129d307df7d68e">S_Use</a>:</div><div class="line"><a name="l00404"></a><span class="lineno">  404</span>&#160;  <span class="keywordflow">case</span> <a class="code" href="namespacellvm_1_1objcarc.html#a845b8f76f8bd22e4e2eb851121db306da8902051603b385fb4587620a0650b4f7">S_CanRelease</a>:</div><div class="line"><a name="l00405"></a><span class="lineno">  405</span>&#160;  <span class="keywordflow">case</span> <a class="code" href="namespacellvm_1_1objcarc.html#a845b8f76f8bd22e4e2eb851121db306da6e431a7ec0fee74cc2ae9a79bd965122">S_None</a>:</div><div class="line"><a name="l00406"></a><span class="lineno">  406</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div><div class="line"><a name="l00407"></a><span class="lineno">  407</span>&#160;  <span class="keywordflow">case</span> <a class="code" href="namespacellvm_1_1objcarc.html#a845b8f76f8bd22e4e2eb851121db306daadd43d88dff4dfb5f9620f2151822b64">S_Stop</a>:</div><div class="line"><a name="l00408"></a><span class="lineno">  408</span>&#160;  <span class="keywordflow">case</span> <a class="code" href="namespacellvm_1_1objcarc.html#a845b8f76f8bd22e4e2eb851121db306dafb02c89bd59643eb187b7223a531cb37">S_Release</a>:</div><div class="line"><a name="l00409"></a><span class="lineno">  409</span>&#160;  <span class="keywordflow">case</span> <a class="code" href="namespacellvm_1_1objcarc.html#a845b8f76f8bd22e4e2eb851121db306daff34dfb06d8316048c533bac105bfbe6">S_MovableRelease</a>:</div><div class="line"><a name="l00410"></a><span class="lineno">  410</span>&#160;    <a class="code" href="Support_2ErrorHandling_8h.html#ace243f5c25697a1107cce46626b3dc94">llvm_unreachable</a>(<span class="stringliteral">&quot;top-down pointer in release state!&quot;</span>);</div><div class="line"><a name="l00411"></a><span class="lineno">  411</span>&#160;  }</div><div class="line"><a name="l00412"></a><span class="lineno">  412</span>&#160;  <a class="code" href="Support_2ErrorHandling_8h.html#ace243f5c25697a1107cce46626b3dc94">llvm_unreachable</a>(<span class="stringliteral">&quot;covered switch is not covered!?&quot;</span>);</div><div class="line"><a name="l00413"></a><span class="lineno">  413</span>&#160;}</div><div class="line"><a name="l00414"></a><span class="lineno">  414</span>&#160;</div><div class="line"><a name="l00415"></a><span class="lineno"><a class="line" href="structllvm_1_1objcarc_1_1TopDownPtrState.html#ad0da3c507a530abd23de4894502b3199">  415</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="structllvm_1_1objcarc_1_1TopDownPtrState.html#ad0da3c507a530abd23de4894502b3199">TopDownPtrState::HandlePotentialUse</a>(<a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *Inst, <span class="keyword">const</span> <a class="code" href="classllvm_1_1Value.html">Value</a> *Ptr,</div><div class="line"><a name="l00416"></a><span class="lineno">  416</span>&#160;                                         <a class="code" href="classllvm_1_1objcarc_1_1ProvenanceAnalysis.html">ProvenanceAnalysis</a> &amp;PA,</div><div class="line"><a name="l00417"></a><span class="lineno">  417</span>&#160;                                         <a class="code" href="namespacellvm_1_1objcarc.html#a494b44abeacdfac8bb26d3203571d1c2">ARCInstKind</a> Class) {</div><div class="line"><a name="l00418"></a><span class="lineno">  418</span>&#160;  <span class="comment">// Check for possible direct uses.</span></div><div class="line"><a name="l00419"></a><span class="lineno">  419</span>&#160;  <span class="keywordflow">switch</span> (GetSeq()) {</div><div class="line"><a name="l00420"></a><span class="lineno">  420</span>&#160;  <span class="keywordflow">case</span> <a class="code" href="namespacellvm_1_1objcarc.html#a845b8f76f8bd22e4e2eb851121db306da8902051603b385fb4587620a0650b4f7">S_CanRelease</a>:</div><div class="line"><a name="l00421"></a><span class="lineno">  421</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="namespacellvm_1_1objcarc.html#af467748c4e634ace0c19cbbeb0af5fee">CanUse</a>(Inst, Ptr, PA, Class))</div><div class="line"><a name="l00422"></a><span class="lineno">  422</span>&#160;      <span class="keywordflow">return</span>;</div><div class="line"><a name="l00423"></a><span class="lineno">  423</span>&#160;    <a class="code" href="Debug_8h.html#a08efc68d15935eb8889400a46c3749ba">LLVM_DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;             CanUse: Seq: &quot;</span> &lt;&lt; GetSeq() &lt;&lt; <span class="stringliteral">&quot;; &quot;</span></div><div class="line"><a name="l00424"></a><span class="lineno">  424</span>&#160;                      &lt;&lt; *Ptr &lt;&lt; <span class="stringliteral">&quot;\n&quot;</span>);</div><div class="line"><a name="l00425"></a><span class="lineno">  425</span>&#160;    SetSeq(<a class="code" href="namespacellvm_1_1objcarc.html#a845b8f76f8bd22e4e2eb851121db306da8e1b337cadca1fc899129d307df7d68e">S_Use</a>);</div><div class="line"><a name="l00426"></a><span class="lineno">  426</span>&#160;    <span class="keywordflow">return</span>;</div><div class="line"><a name="l00427"></a><span class="lineno">  427</span>&#160;  <span class="keywordflow">case</span> <a class="code" href="namespacellvm_1_1objcarc.html#a845b8f76f8bd22e4e2eb851121db306daac10e4a5d85a196bcb2578c2700f3ff3">S_Retain</a>:</div><div class="line"><a name="l00428"></a><span class="lineno">  428</span>&#160;  <span class="keywordflow">case</span> <a class="code" href="namespacellvm_1_1objcarc.html#a845b8f76f8bd22e4e2eb851121db306da8e1b337cadca1fc899129d307df7d68e">S_Use</a>:</div><div class="line"><a name="l00429"></a><span class="lineno">  429</span>&#160;  <span class="keywordflow">case</span> <a class="code" href="namespacellvm_1_1objcarc.html#a845b8f76f8bd22e4e2eb851121db306da6e431a7ec0fee74cc2ae9a79bd965122">S_None</a>:</div><div class="line"><a name="l00430"></a><span class="lineno">  430</span>&#160;    <span class="keywordflow">return</span>;</div><div class="line"><a name="l00431"></a><span class="lineno">  431</span>&#160;  <span class="keywordflow">case</span> <a class="code" href="namespacellvm_1_1objcarc.html#a845b8f76f8bd22e4e2eb851121db306daadd43d88dff4dfb5f9620f2151822b64">S_Stop</a>:</div><div class="line"><a name="l00432"></a><span class="lineno">  432</span>&#160;  <span class="keywordflow">case</span> <a class="code" href="namespacellvm_1_1objcarc.html#a845b8f76f8bd22e4e2eb851121db306dafb02c89bd59643eb187b7223a531cb37">S_Release</a>:</div><div class="line"><a name="l00433"></a><span class="lineno">  433</span>&#160;  <span class="keywordflow">case</span> <a class="code" href="namespacellvm_1_1objcarc.html#a845b8f76f8bd22e4e2eb851121db306daff34dfb06d8316048c533bac105bfbe6">S_MovableRelease</a>:</div><div class="line"><a name="l00434"></a><span class="lineno">  434</span>&#160;    <a class="code" href="Support_2ErrorHandling_8h.html#ace243f5c25697a1107cce46626b3dc94">llvm_unreachable</a>(<span class="stringliteral">&quot;top-down pointer in release state!&quot;</span>);</div><div class="line"><a name="l00435"></a><span class="lineno">  435</span>&#160;  }</div><div class="line"><a name="l00436"></a><span class="lineno">  436</span>&#160;}</div><div class="ttc" id="structllvm_1_1objcarc_1_1RRInfo_html_a090a8b4357ddca03d984584db3b6bc69"><div class="ttname"><a href="structllvm_1_1objcarc_1_1RRInfo.html#a090a8b4357ddca03d984584db3b6bc69">llvm::objcarc::RRInfo::Merge</a></div><div class="ttdeci">bool Merge(const RRInfo &amp;Other)</div><div class="ttdoc">Conservatively merge the two RRInfo. </div><div class="ttdef"><b>Definition:</b> <a href="PtrState_8cpp_source.html#l00102">PtrState.cpp:102</a></div></div>
<div class="ttc" id="IR_2Instruction_8h_html"><div class="ttname"><a href="IR_2Instruction_8h.html">Instruction.h</a></div></div>
<div class="ttc" id="classllvm_1_1objcarc_1_1PtrState_html_a1488167d90017e45843bfae0b00aaf49"><div class="ttname"><a href="classllvm_1_1objcarc_1_1PtrState.html#a1488167d90017e45843bfae0b00aaf49">llvm::objcarc::PtrState::GetSeq</a></div><div class="ttdeci">Sequence GetSeq() const</div><div class="ttdef"><b>Definition:</b> <a href="PtrState_8h_source.html#l00150">PtrState.h:150</a></div></div>
<div class="ttc" id="DependencyAnalysis_8h_html"><div class="ttname"><a href="DependencyAnalysis_8h.html">DependencyAnalysis.h</a></div><div class="ttdoc">This file declares special dependency analysis routines used in Objective C ARC Optimizations. </div></div>
<div class="ttc" id="namespacellvm_1_1objcarc_html_a2b4438068b1237fb0319d216d473d00b"><div class="ttname"><a href="namespacellvm_1_1objcarc.html#a2b4438068b1237fb0319d216d473d00b">llvm::objcarc::IsUser</a></div><div class="ttdeci">bool IsUser(ARCInstKind Class)</div><div class="ttdoc">Test if the given class is a kind of user. </div><div class="ttdef"><b>Definition:</b> <a href="ObjCARCInstKind_8cpp_source.html#l00311">ObjCARCInstKind.cpp:311</a></div></div>
<div class="ttc" id="structllvm_1_1objcarc_1_1RRInfo_html_a937b2f49aeebc9752e9ff219acbd93f0"><div class="ttname"><a href="structllvm_1_1objcarc_1_1RRInfo.html#a937b2f49aeebc9752e9ff219acbd93f0">llvm::objcarc::RRInfo::Calls</a></div><div class="ttdeci">SmallPtrSet&lt; Instruction *, 2 &gt; Calls</div><div class="ttdoc">For a top-down sequence, the set of objc_retains or objc_retainBlocks. </div><div class="ttdef"><b>Definition:</b> <a href="PtrState_8h_source.html#l00080">PtrState.h:80</a></div></div>
<div class="ttc" id="Instructions_8h_html"><div class="ttname"><a href="Instructions_8h.html">Instructions.h</a></div></div>
<div class="ttc" id="namespacellvm_html"><div class="ttname"><a href="namespacellvm.html">llvm</a></div><div class="ttdoc">This class represents lattice values for constants. </div><div class="ttdef"><b>Definition:</b> <a href="AllocatorList_8h_source.html#l00023">AllocatorList.h:23</a></div></div>
<div class="ttc" id="namespacellvm_1_1objcarc_html_af467748c4e634ace0c19cbbeb0af5fee"><div class="ttname"><a href="namespacellvm_1_1objcarc.html#af467748c4e634ace0c19cbbeb0af5fee">llvm::objcarc::CanUse</a></div><div class="ttdeci">bool CanUse(const Instruction *Inst, const Value *Ptr, ProvenanceAnalysis &amp;PA, ARCInstKind Class)</div><div class="ttdoc">Test whether the given instruction can &quot;use&quot; the given pointer&amp;#39;s object in a way that requires the re...</div><div class="ttdef"><b>Definition:</b> <a href="DependencyAnalysis_8cpp_source.html#l00081">DependencyAnalysis.cpp:81</a></div></div>
<div class="ttc" id="structllvm_1_1objcarc_1_1BottomUpPtrState_html_a004bf866c0303839642a34b82e15eee5"><div class="ttname"><a href="structllvm_1_1objcarc_1_1BottomUpPtrState.html#a004bf866c0303839642a34b82e15eee5">llvm::objcarc::BottomUpPtrState::HandlePotentialAlterRefCount</a></div><div class="ttdeci">bool HandlePotentialAlterRefCount(Instruction *Inst, const Value *Ptr, ProvenanceAnalysis &amp;PA, ARCInstKind Class)</div><div class="ttdef"><b>Definition:</b> <a href="PtrState_8cpp_source.html#l00228">PtrState.cpp:228</a></div></div>
<div class="ttc" id="Debug_8h_html"><div class="ttname"><a href="Debug_8h.html">Debug.h</a></div></div>
<div class="ttc" id="namespacellvm_1_1objcarc_html_a845b8f76f8bd22e4e2eb851121db306da8e1b337cadca1fc899129d307df7d68e"><div class="ttname"><a href="namespacellvm_1_1objcarc.html#a845b8f76f8bd22e4e2eb851121db306da8e1b337cadca1fc899129d307df7d68e">llvm::objcarc::S_Use</a></div><div class="ttdoc">any use of x. </div><div class="ttdef"><b>Definition:</b> <a href="PtrState_8h_source.html#l00044">PtrState.h:44</a></div></div>
<div class="ttc" id="BasicBlock_8h_html"><div class="ttname"><a href="BasicBlock_8h.html">BasicBlock.h</a></div></div>
<div class="ttc" id="structllvm_1_1objcarc_1_1TopDownPtrState_html_a58e7f78b0c740eb2f30b8a24ee170f7a"><div class="ttname"><a href="structllvm_1_1objcarc_1_1TopDownPtrState.html#a58e7f78b0c740eb2f30b8a24ee170f7a">llvm::objcarc::TopDownPtrState::MatchWithRelease</a></div><div class="ttdeci">bool MatchWithRelease(ARCMDKindCache &amp;Cache, Instruction *Release)</div><div class="ttdoc">Return true if this set of retains can be paired with the given release. </div><div class="ttdef"><b>Definition:</b> <a href="PtrState_8cpp_source.html#l00351">PtrState.cpp:351</a></div></div>
<div class="ttc" id="classllvm_1_1MDNode_html"><div class="ttname"><a href="classllvm_1_1MDNode.html">llvm::MDNode</a></div><div class="ttdoc">Metadata node. </div><div class="ttdef"><b>Definition:</b> <a href="Metadata_8h_source.html#l00872">Metadata.h:872</a></div></div>
<div class="ttc" id="namespacellvm_1_1objcarc_html_a494b44abeacdfac8bb26d3203571d1c2ac3755e61202abd74da5885d2e9c9160e"><div class="ttname"><a href="namespacellvm_1_1objcarc.html#a494b44abeacdfac8bb26d3203571d1c2ac3755e61202abd74da5885d2e9c9160e">llvm::objcarc::ARCInstKind::Call</a></div><div class="ttdoc">could call objc_release </div></div>
<div class="ttc" id="structllvm_1_1objcarc_1_1RRInfo_html_aed932d067cad4f2d928df9bee21af52a"><div class="ttname"><a href="structllvm_1_1objcarc_1_1RRInfo.html#aed932d067cad4f2d928df9bee21af52a">llvm::objcarc::RRInfo::ReverseInsertPts</a></div><div class="ttdeci">SmallPtrSet&lt; Instruction *, 2 &gt; ReverseInsertPts</div><div class="ttdoc">The set of optimal insert positions for moving calls in the opposite sequence. </div><div class="ttdef"><b>Definition:</b> <a href="PtrState_8h_source.html#l00084">PtrState.h:84</a></div></div>
<div class="ttc" id="namespacellvm_1_1objcarc_html"><div class="ttname"><a href="namespacellvm_1_1objcarc.html">llvm::objcarc</a></div><div class="ttdef"><b>Definition:</b> <a href="ObjCARCAliasAnalysis_8h_source.html#l00029">ObjCARCAliasAnalysis.h:29</a></div></div>
<div class="ttc" id="classllvm_1_1objcarc_1_1PtrState_html"><div class="ttname"><a href="classllvm_1_1objcarc_1_1PtrState.html">llvm::objcarc::PtrState</a></div><div class="ttdoc">This class summarizes several per-pointer runtime properties which are propagated through the flow gr...</div><div class="ttdef"><b>Definition:</b> <a href="PtrState_8h_source.html#l00101">PtrState.h:101</a></div></div>
<div class="ttc" id="classllvm_1_1objcarc_1_1ARCMDKindCache_html_a062cf10f8ea9fc45291d700b2e8da648"><div class="ttname"><a href="classllvm_1_1objcarc_1_1ARCMDKindCache.html#a062cf10f8ea9fc45291d700b2e8da648">llvm::objcarc::ARCMDKindCache::get</a></div><div class="ttdeci">unsigned get(ARCMDKindID ID)</div><div class="ttdef"><b>Definition:</b> <a href="ObjCARCAnalysisUtils_8h_source.html#l00275">ObjCARCAnalysisUtils.h:275</a></div></div>
<div class="ttc" id="classllvm_1_1Instruction_html"><div class="ttname"><a href="classllvm_1_1Instruction.html">llvm::Instruction</a></div><div class="ttdef"><b>Definition:</b> <a href="IR_2Instruction_8h_source.html#l00043">Instruction.h:43</a></div></div>
<div class="ttc" id="lib_2Transforms_2ObjCARC_2ObjCARC_8h_html"><div class="ttname"><a href="lib_2Transforms_2ObjCARC_2ObjCARC_8h.html">ObjCARC.h</a></div><div class="ttdoc">This file defines common definitions/declarations used by the ObjC ARC Optimizer. ...</div></div>
<div class="ttc" id="structllvm_1_1objcarc_1_1RRInfo_html_ac9afa1dadab0e6367ce487573142be4e"><div class="ttname"><a href="structllvm_1_1objcarc_1_1RRInfo.html#ac9afa1dadab0e6367ce487573142be4e">llvm::objcarc::RRInfo::IsTailCallRelease</a></div><div class="ttdeci">bool IsTailCallRelease</div><div class="ttdoc">True of the objc_release calls are all marked with the &quot;tail&quot; keyword. </div><div class="ttdef"><b>Definition:</b> <a href="PtrState_8h_source.html#l00072">PtrState.h:72</a></div></div>
<div class="ttc" id="structllvm_1_1objcarc_1_1BottomUpPtrState_html_a0b6f153e14da3299ec487acbf39e22ae"><div class="ttname"><a href="structllvm_1_1objcarc_1_1BottomUpPtrState.html#a0b6f153e14da3299ec487acbf39e22ae">llvm::objcarc::BottomUpPtrState::InitBottomUp</a></div><div class="ttdeci">bool InitBottomUp(ARCMDKindCache &amp;Cache, Instruction *I)</div><div class="ttdoc">(Re-)Initialize this bottom up pointer returning true if we detected a pointer with nested releases...</div><div class="ttdef"><b>Definition:</b> <a href="PtrState_8cpp_source.html#l00177">PtrState.cpp:177</a></div></div>
<div class="ttc" id="namespacellvm_1_1objcarc_html_a494b44abeacdfac8bb26d3203571d1c2af635fed4a9fb967d38c264ed1106844f"><div class="ttname"><a href="namespacellvm_1_1objcarc.html#a494b44abeacdfac8bb26d3203571d1c2af635fed4a9fb967d38c264ed1106844f">llvm::objcarc::ARCInstKind::IntrinsicUser</a></div><div class="ttdoc">llvm.objc.clang.arc.use </div></div>
<div class="ttc" id="namespacellvm_1_1objcarc_html_a494b44abeacdfac8bb26d3203571d1c2aa1226b5450384ce6ea5ed47c317303ee"><div class="ttname"><a href="namespacellvm_1_1objcarc.html#a494b44abeacdfac8bb26d3203571d1c2aa1226b5450384ce6ea5ed47c317303ee">llvm::objcarc::ARCInstKind::RetainRV</a></div><div class="ttdoc">objc_retainAutoreleasedReturnValue </div></div>
<div class="ttc" id="classllvm_1_1objcarc_1_1PtrState_html_a75b7969d370fa510130319080bc10426"><div class="ttname"><a href="classllvm_1_1objcarc_1_1PtrState.html#a75b7969d370fa510130319080bc10426">llvm::objcarc::PtrState::ClearKnownPositiveRefCount</a></div><div class="ttdeci">void ClearKnownPositiveRefCount()</div><div class="ttdef"><b>Definition:</b> <a href="PtrState_8cpp_source.html#l00132">PtrState.cpp:132</a></div></div>
<div class="ttc" id="classllvm_1_1Instruction_html_ae22f493ba8327ce92e87d3b96bce7017"><div class="ttname"><a href="classllvm_1_1Instruction.html#ae22f493ba8327ce92e87d3b96bce7017">llvm::Instruction::getMetadata</a></div><div class="ttdeci">MDNode * getMetadata(unsigned KindID) const</div><div class="ttdoc">Get the metadata of given kind attached to this Instruction. </div><div class="ttdef"><b>Definition:</b> <a href="IR_2Instruction_8h_source.html#l00244">Instruction.h:244</a></div></div>
<div class="ttc" id="structllvm_1_1objcarc_1_1BottomUpPtrState_html_a92756d26ffe5c46811ee48f629857ba2"><div class="ttname"><a href="structllvm_1_1objcarc_1_1BottomUpPtrState.html#a92756d26ffe5c46811ee48f629857ba2">llvm::objcarc::BottomUpPtrState::HandlePotentialUse</a></div><div class="ttdeci">void HandlePotentialUse(BasicBlock *BB, Instruction *Inst, const Value *Ptr, ProvenanceAnalysis &amp;PA, ARCInstKind Class)</div><div class="ttdef"><b>Definition:</b> <a href="PtrState_8cpp_source.html#l00256">PtrState.cpp:256</a></div></div>
<div class="ttc" id="structllvm_1_1objcarc_1_1RRInfo_html"><div class="ttname"><a href="structllvm_1_1objcarc_1_1RRInfo.html">llvm::objcarc::RRInfo</a></div><div class="ttdoc">Unidirectional information about either a retain-decrement-use-release sequence or release-use-decrem...</div><div class="ttdef"><b>Definition:</b> <a href="PtrState_8h_source.html#l00056">PtrState.h:56</a></div></div>
<div class="ttc" id="namespacellvm_1_1objcarc_html_a2cfd2097e9e2cea7a8eb50a369146e85"><div class="ttname"><a href="namespacellvm_1_1objcarc.html#a2cfd2097e9e2cea7a8eb50a369146e85">llvm::objcarc::operator&lt;&lt;</a></div><div class="ttdeci">raw_ostream &amp; operator&lt;&lt;(raw_ostream &amp;OS, const ARCInstKind Class)</div><div class="ttdef"><b>Definition:</b> <a href="ObjCARCInstKind_8cpp_source.html#l00029">ObjCARCInstKind.cpp:29</a></div></div>
<div class="ttc" id="namespacellvm_1_1objcarc_html_a494b44abeacdfac8bb26d3203571d1c2ab8e7b465df7c5979dc731d06e84ce2cf"><div class="ttname"><a href="namespacellvm_1_1objcarc.html#a494b44abeacdfac8bb26d3203571d1c2ab8e7b465df7c5979dc731d06e84ce2cf">llvm::objcarc::ARCInstKind::Release</a></div><div class="ttdoc">objc_release </div></div>
<div class="ttc" id="structllvm_1_1objcarc_1_1RRInfo_html_ae219d35c9d1bb909cd32110815007c7f"><div class="ttname"><a href="structllvm_1_1objcarc_1_1RRInfo.html#ae219d35c9d1bb909cd32110815007c7f">llvm::objcarc::RRInfo::clear</a></div><div class="ttdeci">void clear()</div><div class="ttdef"><b>Definition:</b> <a href="PtrState_8cpp_source.html#l00093">PtrState.cpp:93</a></div></div>
<div class="ttc" id="namespacellvm_1_1objcarc_html_a845b8f76f8bd22e4e2eb851121db306da6e431a7ec0fee74cc2ae9a79bd965122"><div class="ttname"><a href="namespacellvm_1_1objcarc.html#a845b8f76f8bd22e4e2eb851121db306da6e431a7ec0fee74cc2ae9a79bd965122">llvm::objcarc::S_None</a></div><div class="ttdef"><b>Definition:</b> <a href="PtrState_8h_source.html#l00041">PtrState.h:41</a></div></div>
<div class="ttc" id="namespacellvm_1_1objcarc_html_a749ec59e4812b00a3cf7e7036fb39c06ab1ec2e3fd61b7a763d9173e07016906c"><div class="ttname"><a href="namespacellvm_1_1objcarc.html#a749ec59e4812b00a3cf7e7036fb39c06ab1ec2e3fd61b7a763d9173e07016906c">llvm::objcarc::ARCMDKindID::ImpreciseRelease</a></div></div>
<div class="ttc" id="BuiltinGCs_8cpp_html_a7abf5fb4071cb25dbce06dfb5ee3c937"><div class="ttname"><a href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a></div><div class="ttdeci">static GCRegistry::Add&lt; OcamlGC &gt; B(&quot;ocaml&quot;, &quot;ocaml 3.10-compatible GC&quot;)</div></div>
<div class="ttc" id="structllvm_1_1objcarc_1_1TopDownPtrState_html_ad0da3c507a530abd23de4894502b3199"><div class="ttname"><a href="structllvm_1_1objcarc_1_1TopDownPtrState.html#ad0da3c507a530abd23de4894502b3199">llvm::objcarc::TopDownPtrState::HandlePotentialUse</a></div><div class="ttdeci">void HandlePotentialUse(Instruction *Inst, const Value *Ptr, ProvenanceAnalysis &amp;PA, ARCInstKind Class)</div><div class="ttdef"><b>Definition:</b> <a href="PtrState_8cpp_source.html#l00415">PtrState.cpp:415</a></div></div>
<div class="ttc" id="classllvm_1_1BasicBlock_html_a161fd4e9fa5367f64c2a4c9e921c3ad3"><div class="ttname"><a href="classllvm_1_1BasicBlock.html#a161fd4e9fa5367f64c2a4c9e921c3ad3">llvm::BasicBlock::getFirstInsertionPt</a></div><div class="ttdeci">const_iterator getFirstInsertionPt() const</div><div class="ttdoc">Returns an iterator to the first instruction in this block that is suitable for inserting a non-PHI i...</div><div class="ttdef"><b>Definition:</b> <a href="BasicBlock_8cpp_source.html#l00223">BasicBlock.cpp:223</a></div></div>
<div class="ttc" id="classllvm_1_1objcarc_1_1PtrState_html_a1dd5217efd31b0f4b30ab95d462dd816"><div class="ttname"><a href="classllvm_1_1objcarc_1_1PtrState.html#a1dd5217efd31b0f4b30ab95d462dd816">llvm::objcarc::PtrState::RRI</a></div><div class="ttdeci">RRInfo RRI</div><div class="ttdoc">Unidirectional information about the current sequence. </div><div class="ttdef"><b>Definition:</b> <a href="PtrState_8h_source.html#l00114">PtrState.h:114</a></div></div>
<div class="ttc" id="classllvm_1_1BasicBlock_html"><div class="ttname"><a href="classllvm_1_1BasicBlock.html">llvm::BasicBlock</a></div><div class="ttdoc">LLVM Basic Block Representation. </div><div class="ttdef"><b>Definition:</b> <a href="BasicBlock_8h_source.html#l00057">BasicBlock.h:57</a></div></div>
<div class="ttc" id="classllvm_1_1objcarc_1_1PtrState_html_a09c5b919d9e1f9dcef809dee375c8d5f"><div class="ttname"><a href="classllvm_1_1objcarc_1_1PtrState.html#a09c5b919d9e1f9dcef809dee375c8d5f">llvm::objcarc::PtrState::KnownPositiveRefCount</a></div><div class="ttdeci">bool KnownPositiveRefCount</div><div class="ttdoc">True if the reference count is known to be incremented. </div><div class="ttdef"><b>Definition:</b> <a href="PtrState_8h_source.html#l00104">PtrState.h:104</a></div></div>
<div class="ttc" id="Compiler_8h_html"><div class="ttname"><a href="Compiler_8h.html">Compiler.h</a></div></div>
<div class="ttc" id="classllvm_1_1objcarc_1_1PtrState_html_adf8b72d488312f8c7229b2beee07e28d"><div class="ttname"><a href="classllvm_1_1objcarc_1_1PtrState.html#adf8b72d488312f8c7229b2beee07e28d">llvm::objcarc::PtrState::Merge</a></div><div class="ttdeci">void Merge(const PtrState &amp;Other, bool TopDown)</div><div class="ttdef"><b>Definition:</b> <a href="PtrState_8cpp_source.html#l00150">PtrState.cpp:150</a></div></div>
<div class="ttc" id="namespacellvm_1_1objcarc_html_a845b8f76f8bd22e4e2eb851121db306daadd43d88dff4dfb5f9620f2151822b64"><div class="ttname"><a href="namespacellvm_1_1objcarc.html#a845b8f76f8bd22e4e2eb851121db306daadd43d88dff4dfb5f9620f2151822b64">llvm::objcarc::S_Stop</a></div><div class="ttdoc">like S_Release, but code motion is stopped. </div><div class="ttdef"><b>Definition:</b> <a href="PtrState_8h_source.html#l00045">PtrState.h:45</a></div></div>
<div class="ttc" id="classllvm_1_1ilist__node__impl_html_af719fc783be6589465137d997701a432"><div class="ttname"><a href="classllvm_1_1ilist__node__impl.html#af719fc783be6589465137d997701a432">llvm::ilist_node_impl::getIterator</a></div><div class="ttdeci">self_iterator getIterator()</div><div class="ttdef"><b>Definition:</b> <a href="ilist__node_8h_source.html#l00081">ilist_node.h:81</a></div></div>
<div class="ttc" id="classllvm_1_1objcarc_1_1ARCMDKindCache_html"><div class="ttname"><a href="classllvm_1_1objcarc_1_1ARCMDKindCache.html">llvm::objcarc::ARCMDKindCache</a></div><div class="ttdoc">A cache of MDKinds used by various ARC optimizations. </div><div class="ttdef"><b>Definition:</b> <a href="ObjCARCAnalysisUtils_8h_source.html#l00255">ObjCARCAnalysisUtils.h:255</a></div></div>
<div class="ttc" id="structllvm_1_1objcarc_1_1BottomUpPtrState_html_a91ef366645fbd66f709174e3b396fb92"><div class="ttname"><a href="structllvm_1_1objcarc_1_1BottomUpPtrState.html#a91ef366645fbd66f709174e3b396fb92">llvm::objcarc::BottomUpPtrState::MatchWithRetain</a></div><div class="ttdeci">bool MatchWithRetain()</div><div class="ttdoc">Return true if this set of releases can be paired with a release. </div><div class="ttdef"><b>Definition:</b> <a href="PtrState_8cpp_source.html#l00204">PtrState.cpp:204</a></div></div>
<div class="ttc" id="ObjCARCAnalysisUtils_8h_html"><div class="ttname"><a href="ObjCARCAnalysisUtils_8h.html">ObjCARCAnalysisUtils.h</a></div><div class="ttdoc">This file defines common analysis utilities used by the ObjC ARC Optimizer. </div></div>
<div class="ttc" id="Support_2ErrorHandling_8h_html_ace243f5c25697a1107cce46626b3dc94"><div class="ttname"><a href="Support_2ErrorHandling_8h.html#ace243f5c25697a1107cce46626b3dc94">llvm_unreachable</a></div><div class="ttdeci">#define llvm_unreachable(msg)</div><div class="ttdoc">Marks that the current location is not supposed to be reachable. </div><div class="ttdef"><b>Definition:</b> <a href="Support_2ErrorHandling_8h_source.html#l00135">ErrorHandling.h:135</a></div></div>
<div class="ttc" id="classllvm_1_1objcarc_1_1PtrState_html_ac3996894452fd20d95e7135ff0b01f30"><div class="ttname"><a href="classllvm_1_1objcarc_1_1PtrState.html#ac3996894452fd20d95e7135ff0b01f30">llvm::objcarc::PtrState::ResetSequenceProgress</a></div><div class="ttdeci">void ResetSequenceProgress(Sequence NewSeq)</div><div class="ttdef"><b>Definition:</b> <a href="PtrState_8cpp_source.html#l00143">PtrState.cpp:143</a></div></div>
<div class="ttc" id="structllvm_1_1objcarc_1_1RRInfo_html_ac287dbb01fd38c21bbf0dafdbcfcb8cf"><div class="ttname"><a href="structllvm_1_1objcarc_1_1RRInfo.html#ac287dbb01fd38c21bbf0dafdbcfcb8cf">llvm::objcarc::RRInfo::CFGHazardAfflicted</a></div><div class="ttdeci">bool CFGHazardAfflicted</div><div class="ttdoc">If this is true, we cannot perform code motion but can still remove retain/release pairs...</div><div class="ttdef"><b>Definition:</b> <a href="PtrState_8h_source.html#l00088">PtrState.h:88</a></div></div>
<div class="ttc" id="namespacellvm_1_1objcarc_html_a86cdbdf3773be3c67bc193b473b75708"><div class="ttname"><a href="namespacellvm_1_1objcarc.html#a86cdbdf3773be3c67bc193b473b75708">llvm::objcarc::GetBasicARCInstKind</a></div><div class="ttdeci">ARCInstKind GetBasicARCInstKind(const Value *V)</div><div class="ttdoc">Determine which objc runtime call instruction class V belongs to. </div><div class="ttdef"><b>Definition:</b> <a href="ObjCARCInstKind_8h_source.html#l00106">ObjCARCInstKind.h:106</a></div></div>
<div class="ttc" id="namespacellvm_1_1objcarc_html_a845b8f76f8bd22e4e2eb851121db306daff34dfb06d8316048c533bac105bfbe6"><div class="ttname"><a href="namespacellvm_1_1objcarc.html#a845b8f76f8bd22e4e2eb851121db306daff34dfb06d8316048c533bac105bfbe6">llvm::objcarc::S_MovableRelease</a></div><div class="ttdoc">objc_release(x), !clang.imprecise_release. </div><div class="ttdef"><b>Definition:</b> <a href="PtrState_8h_source.html#l00047">PtrState.h:47</a></div></div>
<div class="ttc" id="classllvm_1_1ilist__iterator_html"><div class="ttname"><a href="classllvm_1_1ilist__iterator.html">llvm::ilist_iterator</a></div><div class="ttdoc">Iterator for intrusive lists based on ilist_node. </div><div class="ttdef"><b>Definition:</b> <a href="ilist__iterator_8h_source.html#l00057">ilist_iterator.h:57</a></div></div>
<div class="ttc" id="namespacellvm_1_1objcarc_html_a845b8f76f8bd22e4e2eb851121db306dafb02c89bd59643eb187b7223a531cb37"><div class="ttname"><a href="namespacellvm_1_1objcarc.html#a845b8f76f8bd22e4e2eb851121db306dafb02c89bd59643eb187b7223a531cb37">llvm::objcarc::S_Release</a></div><div class="ttdoc">objc_release(x). </div><div class="ttdef"><b>Definition:</b> <a href="PtrState_8h_source.html#l00046">PtrState.h:46</a></div></div>
<div class="ttc" id="ObjCARCInstKind_8h_html"><div class="ttname"><a href="ObjCARCInstKind_8h.html">ObjCARCInstKind.h</a></div></div>
<div class="ttc" id="namespacellvm_1_1objcarc_html_a842490036bd86108a14db3839fcba504"><div class="ttname"><a href="namespacellvm_1_1objcarc.html#a842490036bd86108a14db3839fcba504">llvm::objcarc::getreturnRVOperand</a></div><div class="ttdeci">static const Instruction * getreturnRVOperand(const Instruction &amp;Inst, ARCInstKind Class)</div><div class="ttdoc">If Inst is a ReturnRV and its operand is a call or invoke, return the operand. </div><div class="ttdef"><b>Definition:</b> <a href="lib_2Transforms_2ObjCARC_2ObjCARC_8h_source.html#l00073">ObjCARC.h:73</a></div></div>
<div class="ttc" id="classllvm_1_1objcarc_1_1PtrState_html_af6e88dbced93e1293da494b9a981b313"><div class="ttname"><a href="classllvm_1_1objcarc_1_1PtrState.html#af6e88dbced93e1293da494b9a981b313">llvm::objcarc::PtrState::Partial</a></div><div class="ttdeci">bool Partial</div><div class="ttdoc">True if we&amp;#39;ve seen an opportunity for partial RR elimination, such as pushing calls into a CFG triang...</div><div class="ttdef"><b>Definition:</b> <a href="PtrState_8h_source.html#l00108">PtrState.h:108</a></div></div>
<div class="ttc" id="classllvm_1_1BasicBlock_html_a0b4e7bee9b8575cc7db73329f1a561bd"><div class="ttname"><a href="classllvm_1_1BasicBlock.html#a0b4e7bee9b8575cc7db73329f1a561bd">llvm::BasicBlock::end</a></div><div class="ttdeci">iterator end()</div><div class="ttdef"><b>Definition:</b> <a href="BasicBlock_8h_source.html#l00275">BasicBlock.h:275</a></div></div>
<div class="ttc" id="namespacellvm_1_1EngineKind_html_a9df47239a42cd9621ac26d9ecbd57441"><div class="ttname"><a href="namespacellvm_1_1EngineKind.html#a9df47239a42cd9621ac26d9ecbd57441">llvm::EngineKind::Kind</a></div><div class="ttdeci">Kind</div><div class="ttdef"><b>Definition:</b> <a href="ExecutionEngine_2ExecutionEngine_8h_source.html#l00515">ExecutionEngine.h:515</a></div></div>
<div class="ttc" id="namespacellvm_1_1objcarc_html_a494b44abeacdfac8bb26d3203571d1c2"><div class="ttname"><a href="namespacellvm_1_1objcarc.html#a494b44abeacdfac8bb26d3203571d1c2">llvm::objcarc::ARCInstKind</a></div><div class="ttdeci">ARCInstKind</div><div class="ttdoc">Equivalence classes of instructions in the ARC Model. </div><div class="ttdef"><b>Definition:</b> <a href="ObjCARCInstKind_8h_source.html#l00030">ObjCARCInstKind.h:30</a></div></div>
<div class="ttc" id="structllvm_1_1objcarc_1_1TopDownPtrState_html_a818ef1ac739e03bcbccd0a9fada9c4a6"><div class="ttname"><a href="structllvm_1_1objcarc_1_1TopDownPtrState.html#a818ef1ac739e03bcbccd0a9fada9c4a6">llvm::objcarc::TopDownPtrState::HandlePotentialAlterRefCount</a></div><div class="ttdeci">bool HandlePotentialAlterRefCount(Instruction *Inst, const Value *Ptr, ProvenanceAnalysis &amp;PA, ARCInstKind Class)</div><div class="ttdef"><b>Definition:</b> <a href="PtrState_8cpp_source.html#l00380">PtrState.cpp:380</a></div></div>
<div class="ttc" id="Support_2ErrorHandling_8h_html"><div class="ttname"><a href="Support_2ErrorHandling_8h.html">ErrorHandling.h</a></div></div>
<div class="ttc" id="namespacellvm_1_1objcarc_html_a845b8f76f8bd22e4e2eb851121db306daac10e4a5d85a196bcb2578c2700f3ff3"><div class="ttname"><a href="namespacellvm_1_1objcarc.html#a845b8f76f8bd22e4e2eb851121db306daac10e4a5d85a196bcb2578c2700f3ff3">llvm::objcarc::S_Retain</a></div><div class="ttdoc">objc_retain(x). </div><div class="ttdef"><b>Definition:</b> <a href="PtrState_8h_source.html#l00042">PtrState.h:42</a></div></div>
<div class="ttc" id="namespacellvm_html_a7c46c742c31be54870e2038048e6b391"><div class="ttname"><a href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">llvm::dbgs</a></div><div class="ttdeci">raw_ostream &amp; dbgs()</div><div class="ttdoc">dbgs() - This returns a reference to a raw_ostream for debugging messages. </div><div class="ttdef"><b>Definition:</b> <a href="Debug_8cpp_source.html#l00132">Debug.cpp:132</a></div></div>
<div class="ttc" id="namespacestd_html_ab8424022895aee3e366fb9a32f2883cb"><div class="ttname"><a href="namespacestd.html#ab8424022895aee3e366fb9a32f2883cb">std::swap</a></div><div class="ttdeci">void swap(llvm::BitVector &amp;LHS, llvm::BitVector &amp;RHS)</div><div class="ttdoc">Implement std::swap in terms of BitVector swap. </div><div class="ttdef"><b>Definition:</b> <a href="BitVector_8h_source.html#l00940">BitVector.h:940</a></div></div>
<div class="ttc" id="structllvm_1_1objcarc_1_1RRInfo_html_ab976ce410e551d37ce2f43177bb96995"><div class="ttname"><a href="structllvm_1_1objcarc_1_1RRInfo.html#ab976ce410e551d37ce2f43177bb96995">llvm::objcarc::RRInfo::ReleaseMetadata</a></div><div class="ttdeci">MDNode * ReleaseMetadata</div><div class="ttdoc">If the Calls are objc_release calls and they all have a clang.imprecise_release tag, this is the metadata tag. </div><div class="ttdef"><b>Definition:</b> <a href="PtrState_8h_source.html#l00076">PtrState.h:76</a></div></div>
<div class="ttc" id="Value_8h_html"><div class="ttname"><a href="Value_8h.html">Value.h</a></div></div>
<div class="ttc" id="PtrState_8cpp_html_a01c7014451484f9784e68d42412d1b9c"><div class="ttname"><a href="PtrState_8cpp.html#a01c7014451484f9784e68d42412d1b9c">MergeSeqs</a></div><div class="ttdeci">static Sequence MergeSeqs(Sequence A, Sequence B, bool TopDown)</div><div class="ttdef"><b>Definition:</b> <a href="PtrState_8cpp_source.html#l00060">PtrState.cpp:60</a></div></div>
<div class="ttc" id="MD5_8cpp_html_ac0eafdc9ee161b71e7af98af736952fd"><div class="ttname"><a href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a></div><div class="ttdeci">#define I(x, y, z)</div><div class="ttdef"><b>Definition:</b> <a href="MD5_8cpp_source.html#l00058">MD5.cpp:58</a></div></div>
<div class="ttc" id="namespacellvm_1_1objcarc_html_a845b8f76f8bd22e4e2eb851121db306d"><div class="ttname"><a href="namespacellvm_1_1objcarc.html#a845b8f76f8bd22e4e2eb851121db306d">llvm::objcarc::Sequence</a></div><div class="ttdeci">Sequence</div><div class="ttdoc">A sequence of states that a pointer may go through in which an objc_retain and objc_release are actua...</div><div class="ttdef"><b>Definition:</b> <a href="PtrState_8h_source.html#l00040">PtrState.h:40</a></div></div>
<div class="ttc" id="classllvm_1_1objcarc_1_1PtrState_html_a1f7d5f6394d44b1dca0c23d13625c9c0"><div class="ttname"><a href="classllvm_1_1objcarc_1_1PtrState.html#a1f7d5f6394d44b1dca0c23d13625c9c0">llvm::objcarc::PtrState::SetKnownPositiveRefCount</a></div><div class="ttdeci">void SetKnownPositiveRefCount()</div><div class="ttdef"><b>Definition:</b> <a href="PtrState_8cpp_source.html#l00127">PtrState.cpp:127</a></div></div>
<div class="ttc" id="namespacellvm_1_1objcarc_html_a1b3a1bca1f908fbc09a8c4cb5df7e155"><div class="ttname"><a href="namespacellvm_1_1objcarc.html#a1b3a1bca1f908fbc09a8c4cb5df7e155">llvm::objcarc::CanAlterRefCount</a></div><div class="ttdeci">bool CanAlterRefCount(const Instruction *Inst, const Value *Ptr, ProvenanceAnalysis &amp;PA, ARCInstKind Class)</div><div class="ttdoc">Test whether the given instruction can result in a reference count modification (positive or negative...</div><div class="ttdef"><b>Definition:</b> <a href="DependencyAnalysis_8cpp_source.html#l00034">DependencyAnalysis.cpp:34</a></div></div>
<div class="ttc" id="classllvm_1_1objcarc_1_1PtrState_html_ad14c921bb46309b6b0ef0439c44737b8"><div class="ttname"><a href="classllvm_1_1objcarc_1_1PtrState.html#ad14c921bb46309b6b0ef0439c44737b8">llvm::objcarc::PtrState::SetSeq</a></div><div class="ttdeci">void SetSeq(Sequence NewSeq)</div><div class="ttdef"><b>Definition:</b> <a href="PtrState_8cpp_source.html#l00137">PtrState.cpp:137</a></div></div>
<div class="ttc" id="SILowerControlFlow_8cpp_html_a4868c5d81c5ccc98c47aeab6244346a0"><div class="ttname"><a href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a></div><div class="ttdeci">assert(ImpDefSCC.getReg()==AMDGPU::SCC &amp;&amp;ImpDefSCC.isDef())</div></div>
<div class="ttc" id="classllvm_1_1Value_html"><div class="ttname"><a href="classllvm_1_1Value.html">llvm::Value</a></div><div class="ttdoc">LLVM Value Representation. </div><div class="ttdef"><b>Definition:</b> <a href="Value_8h_source.html#l00074">Value.h:74</a></div></div>
<div class="ttc" id="namespacellvm_1_1objcarc_html_a845b8f76f8bd22e4e2eb851121db306da8902051603b385fb4587620a0650b4f7"><div class="ttname"><a href="namespacellvm_1_1objcarc.html#a845b8f76f8bd22e4e2eb851121db306da8902051603b385fb4587620a0650b4f7">llvm::objcarc::S_CanRelease</a></div><div class="ttdoc">foo(x)  x could possibly see a ref count decrement. </div><div class="ttdef"><b>Definition:</b> <a href="PtrState_8h_source.html#l00043">PtrState.h:43</a></div></div>
<div class="ttc" id="Compiler_8h_html_a9579881de06b1560d242d15171ca1b86"><div class="ttname"><a href="Compiler_8h.html#a9579881de06b1560d242d15171ca1b86">LLVM_FALLTHROUGH</a></div><div class="ttdeci">#define LLVM_FALLTHROUGH</div><div class="ttdoc">LLVM_FALLTHROUGH - Mark fallthrough cases in switch statements. </div><div class="ttdef"><b>Definition:</b> <a href="Compiler_8h_source.html#l00279">Compiler.h:279</a></div></div>
<div class="ttc" id="structllvm_1_1objcarc_1_1RRInfo_html_a5770bc64392d64b9900226f925521b94"><div class="ttname"><a href="structllvm_1_1objcarc_1_1RRInfo.html#a5770bc64392d64b9900226f925521b94">llvm::objcarc::RRInfo::KnownSafe</a></div><div class="ttdeci">bool KnownSafe</div><div class="ttdoc">After an objc_retain, the reference count of the referenced object is known to be positive...</div><div class="ttdef"><b>Definition:</b> <a href="PtrState_8h_source.html#l00069">PtrState.h:69</a></div></div>
<div class="ttc" id="classllvm_1_1raw__ostream_html"><div class="ttname"><a href="classllvm_1_1raw__ostream.html">llvm::raw_ostream</a></div><div class="ttdoc">This class implements an extremely fast bulk output stream that can only output to a stream...</div><div class="ttdef"><b>Definition:</b> <a href="raw__ostream_8h_source.html#l00046">raw_ostream.h:46</a></div></div>
<div class="ttc" id="Casting_8h_html"><div class="ttname"><a href="Casting_8h.html">Casting.h</a></div></div>
<div class="ttc" id="PtrState_8h_html"><div class="ttname"><a href="PtrState_8h.html">PtrState.h</a></div></div>
<div class="ttc" id="classllvm_1_1objcarc_1_1ProvenanceAnalysis_html"><div class="ttname"><a href="classllvm_1_1objcarc_1_1ProvenanceAnalysis.html">llvm::objcarc::ProvenanceAnalysis</a></div><div class="ttdoc">This is similar to BasicAliasAnalysis, and it uses many of the same techniques, except it uses specia...</div><div class="ttdef"><b>Definition:</b> <a href="ProvenanceAnalysis_8h_source.html#l00051">ProvenanceAnalysis.h:51</a></div></div>
<div class="ttc" id="raw__ostream_8h_html"><div class="ttname"><a href="raw__ostream_8h.html">raw_ostream.h</a></div></div>
<div class="ttc" id="structllvm_1_1objcarc_1_1TopDownPtrState_html_a5e7821981d45cb3fada161fbd0b5b3ae"><div class="ttname"><a href="structllvm_1_1objcarc_1_1TopDownPtrState.html#a5e7821981d45cb3fada161fbd0b5b3ae">llvm::objcarc::TopDownPtrState::InitTopDown</a></div><div class="ttdeci">bool InitTopDown(ARCInstKind Kind, Instruction *I)</div><div class="ttdoc">(Re-)Initialize this bottom up pointer returning true if we detected a pointer with nested releases...</div><div class="ttdef"><b>Definition:</b> <a href="PtrState_8cpp_source.html#l00326">PtrState.cpp:326</a></div></div>
<div class="ttc" id="Debug_8h_html_a08efc68d15935eb8889400a46c3749ba"><div class="ttname"><a href="Debug_8h.html#a08efc68d15935eb8889400a46c3749ba">LLVM_DEBUG</a></div><div class="ttdeci">#define LLVM_DEBUG(X)</div><div class="ttdef"><b>Definition:</b> <a href="Debug_8h_source.html#l00122">Debug.h:122</a></div></div>
<div class="ttc" id="namespacellvm_html_a6577ad74b2f1a18729c71543850d8616"><div class="ttname"><a href="namespacellvm.html#a6577ad74b2f1a18729c71543850d8616">llvm::skipDebugIntrinsics</a></div><div class="ttdeci">BasicBlock::iterator skipDebugIntrinsics(BasicBlock::iterator It)</div><div class="ttdoc">Advance It while it points to a debug instruction and return the result. </div><div class="ttdef"><b>Definition:</b> <a href="BasicBlock_8cpp_source.html#l00492">BasicBlock.cpp:492</a></div></div>
</div><!-- fragment --></div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Tue Mar 24 2020 13:13:58 for LLVM by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.13
</small></address>
</body>
</html>
