<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.13"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>LLVM: lib/Target/X86/X86FixupBWInsts.cpp File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<script type="text/x-mathjax-config">
  MathJax.Hub.Config({
    extensions: ["tex2jax.js"],
    jax: ["input/TeX","output/HTML-CSS"],
});
</script><script type="text/javascript" src="http://cdn.mathjax.org/mathjax/latest/MathJax.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">LLVM
   &#160;<span id="projectnumber">10.0.0</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.13 -->
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('',false,false,'search.php','Search');
});
</script>
<div id="main-nav"></div>
<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="dir_97aefd0d527b934f1d99a682da8fe6a9.html">lib</a></li><li class="navelem"><a class="el" href="dir_794e483eb1cc7921d35fd149d9cc325b.html">Target</a></li><li class="navelem"><a class="el" href="dir_558b7c0c66e2ff4834e628dd4b3edd32.html">X86</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#define-members">Macros</a> &#124;
<a href="#var-members">Variables</a>  </div>
  <div class="headertitle">
<div class="title">X86FixupBWInsts.cpp File Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p>This file defines the pass that looks through the machine instructions late in the compilation, and finds byte or word instructions that can be profitably replaced with 32 bit instructions that give equivalent results for the bits of the results that are used.  
<a href="#details">More...</a></p>
<div class="textblock"><code>#include &quot;<a class="el" href="X86_8h_source.html">X86.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="X86InstrInfo_8h_source.html">X86InstrInfo.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="X86Subtarget_8h_source.html">X86Subtarget.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="Statistic_8h_source.html">llvm/ADT/Statistic.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="ProfileSummaryInfo_8h_source.html">llvm/Analysis/ProfileSummaryInfo.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="LazyMachineBlockFrequencyInfo_8h_source.html">llvm/CodeGen/LazyMachineBlockFrequencyInfo.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="LivePhysRegs_8h_source.html">llvm/CodeGen/LivePhysRegs.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="MachineFunctionPass_8h_source.html">llvm/CodeGen/MachineFunctionPass.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="MachineInstrBuilder_8h_source.html">llvm/CodeGen/MachineInstrBuilder.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="MachineLoopInfo_8h_source.html">llvm/CodeGen/MachineLoopInfo.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="MachineRegisterInfo_8h_source.html">llvm/CodeGen/MachineRegisterInfo.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="MachineSizeOpts_8h_source.html">llvm/CodeGen/MachineSizeOpts.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="CodeGen_2Passes_8h_source.html">llvm/CodeGen/Passes.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="TargetInstrInfo_8h_source.html">llvm/CodeGen/TargetInstrInfo.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="Debug_8h_source.html">llvm/Support/Debug.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="raw__ostream_8h_source.html">llvm/Support/raw_ostream.h</a>&quot;</code><br />
</div><div class="textblock"><div class="dynheader">
Include dependency graph for X86FixupBWInsts.cpp:</div>
<div class="dyncontent">
<div class="center"><iframe scrolling="no" frameborder="0" src="X86FixupBWInsts_8cpp__incl.svg" width="4408" height="619"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe>
</div>
</div>
</div>
<p><a href="X86FixupBWInsts_8cpp_source.html">Go to the source code of this file.</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="define-members"></a>
Macros</h2></td></tr>
<tr class="memitem:a6f0c6e2d31735d29f955d4f69c42ec53"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="X86FixupBWInsts_8cpp.html#a6f0c6e2d31735d29f955d4f69c42ec53">FIXUPBW_DESC</a>&#160;&#160;&#160;&quot;X86 Byte/Word <a class="el" href="classllvm_1_1Instruction.html">Instruction</a> <a class="el" href="PPCTLSDynamicCall_8cpp.html#a4a235aedca5bbfc39934045b6cbf9c70">Fixup</a>&quot;</td></tr>
<tr class="separator:a6f0c6e2d31735d29f955d4f69c42ec53"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af369f853fbac2af8201f550858f1aca3"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="X86FixupBWInsts_8cpp.html#af369f853fbac2af8201f550858f1aca3">FIXUPBW_NAME</a>&#160;&#160;&#160;&quot;x86-fixup-bw-insts&quot;</td></tr>
<tr class="separator:af369f853fbac2af8201f550858f1aca3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad78e062f62e0d6e453941fb4ca843e4d"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="X86FixupBWInsts_8cpp.html#ad78e062f62e0d6e453941fb4ca843e4d">DEBUG_TYPE</a>&#160;&#160;&#160;<a class="el" href="X86FixupBWInsts_8cpp.html#af369f853fbac2af8201f550858f1aca3">FIXUPBW_NAME</a></td></tr>
<tr class="separator:ad78e062f62e0d6e453941fb4ca843e4d"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="var-members"></a>
Variables</h2></td></tr>
<tr class="memitem:a2d00ca361b6e2c9f690eb877c8b3b4bb"><td class="memItemLeft" align="right" valign="top">static <a class="el" href="classllvm_1_1cl_1_1opt.html">cl::opt</a>&lt; <a class="el" href="classbool.html">bool</a> &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="X86FixupBWInsts_8cpp.html#a2d00ca361b6e2c9f690eb877c8b3b4bb">FixupBWInsts</a> (&quot;fixup-byte-word-insts&quot;, cl::desc(&quot;Change byte and word <a class="el" href="LoadStoreVectorizer_8cpp.html#acc0655e462f1e67d046cd818e473c46e">instructions</a> to larger sizes&quot;), cl::init(<a class="el" href="WebAssemblyExceptionInfo_8cpp.html#ade2a0fe2d2d0735c83fdc3ad5be1e1f2">true</a>), cl::Hidden)</td></tr>
<tr class="separator:a2d00ca361b6e2c9f690eb877c8b3b4bb"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>This file defines the pass that looks through the machine instructions late in the compilation, and finds byte or word instructions that can be profitably replaced with 32 bit instructions that give equivalent results for the bits of the results that are used. </p>
<p>There are two possible reasons to do this.</p>
<p>One reason is to avoid false-dependences on the upper portions of the registers. Only instructions that have a destination register which is not in any of the source registers can be affected by this. Any instruction where one of the source registers is also the destination register is unaffected, because it has a true dependence on the source register already. So, this consideration primarily affects load instructions and register-to-register moves. It would seem like cmov(s) would also be affected, but because of the way cmov is really implemented by most machines as reading both the destination and and source registers, and then "merging" the two based on a condition, it really already should be considered as having a true dependence on the destination register as well.</p>
<p>The other reason to do this is for potential code size savings. Word operations need an extra override byte compared to their 32 bit versions. So this can convert many word operations to their larger size, saving a byte in encoding. This could introduce partial register dependences where none existed however. As an example take: orw ax, $0x1000 addw ax, $3 now if this were to get transformed into orw ax, $1000 addl eax, $3 because the addl encodes shorter than the addw, this would introduce a use of a register that was only partially written earlier. On older Intel processors this can be quite a performance penalty, so this should probably only be done when it can be proven that a new partial dependence wouldn't be created, or when your know a newer processor is being targeted, or when optimizing for minimum code size. </p>

<p class="definition">Definition in file <a class="el" href="X86FixupBWInsts_8cpp_source.html">X86FixupBWInsts.cpp</a>.</p>
</div><h2 class="groupheader">Macro Definition Documentation</h2>
<a id="ad78e062f62e0d6e453941fb4ca843e4d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad78e062f62e0d6e453941fb4ca843e4d">&#9670;&nbsp;</a></span>DEBUG_TYPE</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define DEBUG_TYPE&#160;&#160;&#160;<a class="el" href="X86FixupBWInsts_8cpp.html#af369f853fbac2af8201f550858f1aca3">FIXUPBW_NAME</a></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="X86FixupBWInsts_8cpp_source.html#l00068">68</a> of file <a class="el" href="X86FixupBWInsts_8cpp_source.html">X86FixupBWInsts.cpp</a>.</p>

</div>
</div>
<a id="a6f0c6e2d31735d29f955d4f69c42ec53"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6f0c6e2d31735d29f955d4f69c42ec53">&#9670;&nbsp;</a></span>FIXUPBW_DESC</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define FIXUPBW_DESC&#160;&#160;&#160;&quot;X86 Byte/Word <a class="el" href="classllvm_1_1Instruction.html">Instruction</a> <a class="el" href="PPCTLSDynamicCall_8cpp.html#a4a235aedca5bbfc39934045b6cbf9c70">Fixup</a>&quot;</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="X86FixupBWInsts_8cpp_source.html#l00065">65</a> of file <a class="el" href="X86FixupBWInsts_8cpp_source.html">X86FixupBWInsts.cpp</a>.</p>

</div>
</div>
<a id="af369f853fbac2af8201f550858f1aca3"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af369f853fbac2af8201f550858f1aca3">&#9670;&nbsp;</a></span>FIXUPBW_NAME</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define FIXUPBW_NAME&#160;&#160;&#160;&quot;x86-fixup-bw-insts&quot;</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="X86FixupBWInsts_8cpp_source.html#l00066">66</a> of file <a class="el" href="X86FixupBWInsts_8cpp_source.html">X86FixupBWInsts.cpp</a>.</p>

</div>
</div>
<h2 class="groupheader">Variable Documentation</h2>
<a id="a2d00ca361b6e2c9f690eb877c8b3b4bb"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2d00ca361b6e2c9f690eb877c8b3b4bb">&#9670;&nbsp;</a></span>FixupBWInsts</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classllvm_1_1cl_1_1opt.html">cl::opt</a>&lt;<a class="el" href="classbool.html">bool</a>&gt; FixupBWInsts(&quot;fixup-byte-word-insts&quot;, cl::desc(&quot;Change byte and word <a class="el" href="LoadStoreVectorizer_8cpp.html#acc0655e462f1e67d046cd818e473c46e">instructions</a> to larger sizes&quot;), cl::init(<a class="el" href="WebAssemblyExceptionInfo_8cpp.html#ade2a0fe2d2d0735c83fdc3ad5be1e1f2">true</a>), cl::Hidden)</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="reference">Referenced by <a class="el" href="X86FixupBWInsts_8cpp_source.html#l00157">llvm::createX86FixupBWInsts()</a>.</p>

</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Tue Mar 24 2020 13:16:02 for LLVM by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.13
</small></address>
</body>
</html>
