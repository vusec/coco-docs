<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.13"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>LLVM: lib/Transforms/Scalar/DivRemPairs.cpp File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<script type="text/x-mathjax-config">
  MathJax.Hub.Config({
    extensions: ["tex2jax.js"],
    jax: ["input/TeX","output/HTML-CSS"],
});
</script><script type="text/javascript" src="http://cdn.mathjax.org/mathjax/latest/MathJax.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">LLVM
   &#160;<span id="projectnumber">10.0.0</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.13 -->
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('',false,false,'search.php','Search');
});
</script>
<div id="main-nav"></div>
<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="dir_97aefd0d527b934f1d99a682da8fe6a9.html">lib</a></li><li class="navelem"><a class="el" href="dir_a72932e0778af28115095468f6286ff8.html">Transforms</a></li><li class="navelem"><a class="el" href="dir_e6e1f1f37d351595fa984b942927b205.html">Scalar</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#nested-classes">Classes</a> &#124;
<a href="#define-members">Macros</a> &#124;
<a href="#typedef-members">Typedefs</a> &#124;
<a href="#func-members">Functions</a> &#124;
<a href="#var-members">Variables</a>  </div>
  <div class="headertitle">
<div class="title">DivRemPairs.cpp File Reference</div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><code>#include &quot;<a class="el" href="DivRemPairs_8h_source.html">llvm/Transforms/Scalar/DivRemPairs.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="DenseMap_8h_source.html">llvm/ADT/DenseMap.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="MapVector_8h_source.html">llvm/ADT/MapVector.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="Statistic_8h_source.html">llvm/ADT/Statistic.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="GlobalsModRef_8h_source.html">llvm/Analysis/GlobalsModRef.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="TargetTransformInfo_8h_source.html">llvm/Analysis/TargetTransformInfo.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="Dominators_8h_source.html">llvm/IR/Dominators.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="Function_8h_source.html">llvm/IR/Function.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="PatternMatch_8h_source.html">llvm/IR/PatternMatch.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="InitializePasses_8h_source.html">llvm/InitializePasses.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="Pass_8h_source.html">llvm/Pass.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="DebugCounter_8h_source.html">llvm/Support/DebugCounter.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="Transforms_2Scalar_8h_source.html">llvm/Transforms/Scalar.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="BypassSlowDivision_8h_source.html">llvm/Transforms/Utils/BypassSlowDivision.h</a>&quot;</code><br />
</div><div class="textblock"><div class="dynheader">
Include dependency graph for DivRemPairs.cpp:</div>
<div class="dyncontent">
<div class="center"><iframe scrolling="no" frameborder="0" src="DivRemPairs_8cpp__incl.svg" width="4938" height="768"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe>
</div>
</div>
</div>
<p><a href="DivRemPairs_8cpp_source.html">Go to the source code of this file.</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="nested-classes"></a>
Classes</h2></td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structDivRemPairWorklistEntry.html">DivRemPairWorklistEntry</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">A thin wrapper to store two values that we matched as div-rem pair.  <a href="structDivRemPairWorklistEntry.html#details">More...</a><br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="define-members"></a>
Macros</h2></td></tr>
<tr class="memitem:ad78e062f62e0d6e453941fb4ca843e4d"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="DivRemPairs_8cpp.html#ad78e062f62e0d6e453941fb4ca843e4d">DEBUG_TYPE</a>&#160;&#160;&#160;&quot;div-rem-<a class="el" href="DivRemPairs_8cpp.html#acc133ed83700bf3b14757629b84df429">pairs</a>&quot;</td></tr>
<tr class="separator:ad78e062f62e0d6e453941fb4ca843e4d"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="typedef-members"></a>
Typedefs</h2></td></tr>
<tr class="memitem:a52666b84652fc277b8a53aea9a4a2be0"><td class="memItemLeft" align="right" valign="top">using&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="DivRemPairs_8cpp.html#a52666b84652fc277b8a53aea9a4a2be0">DivRemWorklistTy</a> = <a class="el" href="classllvm_1_1SmallVector.html">SmallVector</a>&lt; <a class="el" href="structDivRemPairWorklistEntry.html">DivRemPairWorklistEntry</a>, 4 &gt;</td></tr>
<tr class="separator:a52666b84652fc277b8a53aea9a4a2be0"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:a2dce93455da9adba7bf8bcd3f1da1d2c"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="DivRemPairs_8cpp.html#a2dce93455da9adba7bf8bcd3f1da1d2c">STATISTIC</a> (NumPairs, &quot;Number of div/rem <a class="el" href="DivRemPairs_8cpp.html#acc133ed83700bf3b14757629b84df429">pairs</a>&quot;)</td></tr>
<tr class="separator:a2dce93455da9adba7bf8bcd3f1da1d2c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a67cf64501da50834568b8facf2db83d9"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="DivRemPairs_8cpp.html#a67cf64501da50834568b8facf2db83d9">STATISTIC</a> (NumRecomposed, &quot;Number of <a class="el" href="LoadStoreVectorizer_8cpp.html#acc0655e462f1e67d046cd818e473c46e">instructions</a> recomposed&quot;)</td></tr>
<tr class="separator:a67cf64501da50834568b8facf2db83d9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0fcd3873e0c9636a4519024a74e8bf73"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="DivRemPairs_8cpp.html#a0fcd3873e0c9636a4519024a74e8bf73">STATISTIC</a> (NumHoisted, &quot;Number of <a class="el" href="LoadStoreVectorizer_8cpp.html#acc0655e462f1e67d046cd818e473c46e">instructions</a> hoisted&quot;)</td></tr>
<tr class="separator:a0fcd3873e0c9636a4519024a74e8bf73"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8f08e4162fbf26db1595ed5cf7c2a235"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="DivRemPairs_8cpp.html#a8f08e4162fbf26db1595ed5cf7c2a235">STATISTIC</a> (NumDecomposed, &quot;Number of <a class="el" href="LoadStoreVectorizer_8cpp.html#acc0655e462f1e67d046cd818e473c46e">instructions</a> decomposed&quot;)</td></tr>
<tr class="separator:a8f08e4162fbf26db1595ed5cf7c2a235"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa89aea3953264c7ce68749d157ec1dd3"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="DivRemPairs_8cpp.html#aa89aea3953264c7ce68749d157ec1dd3">DEBUG_COUNTER</a> (DRPCounter, &quot;div-rem-<a class="el" href="DivRemPairs_8cpp.html#acc133ed83700bf3b14757629b84df429">pairs</a>-transform&quot;, &quot;Controls <a class="el" href="WarnMissedTransforms_8cpp.html#a118c69dcb143e00e7d63d23ebc83d8d1">transformations</a> in div-rem-<a class="el" href="DivRemPairs_8cpp.html#acc133ed83700bf3b14757629b84df429">pairs</a> <a class="el" href="TwoAddressInstructionPass_8cpp.html#a34b5cf133e2453a532a504197fec9171">pass</a>&quot;)</td></tr>
<tr class="separator:aa89aea3953264c7ce68749d157ec1dd3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a52b5375873abc542fdb985386aaaea95"><td class="memItemLeft" align="right" valign="top">static <a class="el" href="classllvm_1_1Optional.html">llvm::Optional</a>&lt; ExpandedMatch &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="DivRemPairs_8cpp.html#a52b5375873abc542fdb985386aaaea95">matchExpandedRem</a> (<a class="el" href="classllvm_1_1Instruction.html">Instruction</a> &amp;<a class="el" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>)</td></tr>
<tr class="memdesc:a52b5375873abc542fdb985386aaaea95"><td class="mdescLeft">&#160;</td><td class="mdescRight">See if we can match: (which is the form we expand into) X - ((X ?/ Y) * Y) which is equivalent to: X ?% Y.  <a href="#a52b5375873abc542fdb985386aaaea95">More...</a><br /></td></tr>
<tr class="separator:a52b5375873abc542fdb985386aaaea95"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4ea228d1a2a12e3dc0542b388e3e3492"><td class="memItemLeft" align="right" valign="top">static <a class="el" href="DivRemPairs_8cpp.html#a52666b84652fc277b8a53aea9a4a2be0">DivRemWorklistTy</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="DivRemPairs_8cpp.html#a4ea228d1a2a12e3dc0542b388e3e3492">getWorklist</a> (<a class="el" href="classllvm_1_1Function.html">Function</a> &amp;<a class="el" href="LLParser_8cpp.html#a33ece1ef8074506a15d7f86eb76dbae6">F</a>)</td></tr>
<tr class="memdesc:a4ea228d1a2a12e3dc0542b388e3e3492"><td class="mdescLeft">&#160;</td><td class="mdescRight">Find matching pairs of integer div/rem ops (they have the same numerator, denominator, and signedness).  <a href="#a4ea228d1a2a12e3dc0542b388e3e3492">More...</a><br /></td></tr>
<tr class="separator:a4ea228d1a2a12e3dc0542b388e3e3492"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6e3883483a49e3be2520667d933b25f8"><td class="memItemLeft" align="right" valign="top">static <a class="el" href="classbool.html">bool</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="DivRemPairs_8cpp.html#a6e3883483a49e3be2520667d933b25f8">optimizeDivRem</a> (<a class="el" href="classllvm_1_1Function.html">Function</a> &amp;<a class="el" href="LLParser_8cpp.html#a33ece1ef8074506a15d7f86eb76dbae6">F</a>, <a class="el" href="AArch64PromoteConstant_8cpp.html#a90f8350fecae261c25be85d38b451bff">const</a> <a class="el" href="classllvm_1_1TargetTransformInfo.html">TargetTransformInfo</a> &amp;TTI, <a class="el" href="AArch64PromoteConstant_8cpp.html#a90f8350fecae261c25be85d38b451bff">const</a> <a class="el" href="classllvm_1_1DominatorTree.html">DominatorTree</a> &amp;DT)</td></tr>
<tr class="memdesc:a6e3883483a49e3be2520667d933b25f8"><td class="mdescLeft">&#160;</td><td class="mdescRight">Find matching pairs of integer div/rem ops (they have the same numerator, denominator, and signedness).  <a href="#a6e3883483a49e3be2520667d933b25f8">More...</a><br /></td></tr>
<tr class="separator:a6e3883483a49e3be2520667d933b25f8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:adb589ff33ce8f36c48b0ec4308f3bc5e"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="DivRemPairs_8cpp.html#adb589ff33ce8f36c48b0ec4308f3bc5e">INITIALIZE_PASS_BEGIN</a> (DivRemPairsLegacyPass, &quot;div-rem-<a class="el" href="DivRemPairs_8cpp.html#acc133ed83700bf3b14757629b84df429">pairs</a>&quot;, &quot;Hoist/decompose integer division and <a class="el" href="DivRemPairs_8cpp.html#acabf5cd140be0dea1a9b4ccae70ea89a">remainder</a>&quot;, false, <a class="el" href="LoadStoreVectorizer_8cpp.html#a1321ae04c732793cd2d0ee2db36636ca">false</a>) <a class="el" href="RegBankSelect_8cpp.html#a0eee13989797c0d4612066f84ff7a7b8">INITIALIZE_PASS_END</a>(DivRemPairsLegacyPass</td></tr>
<tr class="separator:adb589ff33ce8f36c48b0ec4308f3bc5e"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="var-members"></a>
Variables</h2></td></tr>
<tr class="memitem:acc133ed83700bf3b14757629b84df429"><td class="memItemLeft" align="right" valign="top">div rem&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="DivRemPairs_8cpp.html#acc133ed83700bf3b14757629b84df429">pairs</a></td></tr>
<tr class="separator:acc133ed83700bf3b14757629b84df429"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:acabf5cd140be0dea1a9b4ccae70ea89a"><td class="memItemLeft" align="right" valign="top">div rem Hoist decompose integer division and&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="DivRemPairs_8cpp.html#acabf5cd140be0dea1a9b4ccae70ea89a">remainder</a></td></tr>
<tr class="separator:acabf5cd140be0dea1a9b4ccae70ea89a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa40396c3d77447e480db94a79ef3df0b"><td class="memItemLeft" align="right" valign="top">div rem Hoist decompose integer division and&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="DivRemPairs_8cpp.html#aa40396c3d77447e480db94a79ef3df0b">false</a></td></tr>
<tr class="separator:aa40396c3d77447e480db94a79ef3df0b"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<h2 class="groupheader">Macro Definition Documentation</h2>
<a id="ad78e062f62e0d6e453941fb4ca843e4d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad78e062f62e0d6e453941fb4ca843e4d">&#9670;&nbsp;</a></span>DEBUG_TYPE</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define DEBUG_TYPE&#160;&#160;&#160;&quot;div-rem-<a class="el" href="DivRemPairs_8cpp.html#acc133ed83700bf3b14757629b84df429">pairs</a>&quot;</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="DivRemPairs_8cpp_source.html#l00032">32</a> of file <a class="el" href="DivRemPairs_8cpp_source.html">DivRemPairs.cpp</a>.</p>

</div>
</div>
<h2 class="groupheader">Typedef Documentation</h2>
<a id="a52666b84652fc277b8a53aea9a4a2be0"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a52666b84652fc277b8a53aea9a4a2be0">&#9670;&nbsp;</a></span>DivRemWorklistTy</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">using <a class="el" href="DivRemPairs_8cpp.html#a52666b84652fc277b8a53aea9a4a2be0">DivRemWorklistTy</a> =  <a class="el" href="classllvm_1_1SmallVector.html">SmallVector</a>&lt;<a class="el" href="structDivRemPairWorklistEntry.html">DivRemPairWorklistEntry</a>, 4&gt;</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="DivRemPairs_8cpp_source.html#l00114">114</a> of file <a class="el" href="DivRemPairs_8cpp_source.html">DivRemPairs.cpp</a>.</p>

</div>
</div>
<h2 class="groupheader">Function Documentation</h2>
<a id="aa89aea3953264c7ce68749d157ec1dd3"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa89aea3953264c7ce68749d157ec1dd3">&#9670;&nbsp;</a></span>DEBUG_COUNTER()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">DEBUG_COUNTER </td>
          <td>(</td>
          <td class="paramtype">DRPCounter&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&quot;div-rem-<a class="el" href="DivRemPairs_8cpp.html#acc133ed83700bf3b14757629b84df429">pairs</a>-transform&quot;&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&quot;Controls <a class="el" href="WarnMissedTransforms_8cpp.html#a118c69dcb143e00e7d63d23ebc83d8d1">transformations</a> in div-rem-<a class="el" href="DivRemPairs_8cpp.html#acc133ed83700bf3b14757629b84df429">pairs</a> <a class="el" href="TwoAddressInstructionPass_8cpp.html#a34b5cf133e2453a532a504197fec9171">pass</a>&quot;&#160;</td>
          <td class="paramname">&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="a4ea228d1a2a12e3dc0542b388e3e3492"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4ea228d1a2a12e3dc0542b388e3e3492">&#9670;&nbsp;</a></span>getWorklist()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static <a class="el" href="DivRemPairs_8cpp.html#a52666b84652fc277b8a53aea9a4a2be0">DivRemWorklistTy</a> getWorklist </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classllvm_1_1Function.html">Function</a> &amp;&#160;</td>
          <td class="paramname"><em>F</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Find matching pairs of integer div/rem ops (they have the same numerator, denominator, and signedness). </p>
<p>Place those pairs into a worklist for further processing. This indirection is needed because we have to use TrackingVH&lt;&gt; because we will be doing RAUW, and if one of the rem instructions we change happens to be an input to another div/rem in the maps, we'd have problems. </p>

<p class="definition">Definition at line <a class="el" href="DivRemPairs_8cpp_source.html#l00121">121</a> of file <a class="el" href="DivRemPairs_8cpp_source.html">DivRemPairs.cpp</a>.</p>

<p class="reference">References <a class="el" href="SmallVector_8h_source.html#l00641">llvm::SmallVectorImpl&lt; T &gt;::emplace_back()</a>, <a class="el" href="MD5_8cpp_source.html#l00058">I</a>, <a class="el" href="namespacellvm.html#a313a633eb3049b90e931206183e1251ea6da89265a9a8b0b28eb4946bb2ec0c6d">llvm::Match</a>, and <a class="el" href="DivRemPairs_8cpp_source.html#l00051">matchExpandedRem()</a>.</p>

<p class="reference">Referenced by <a class="el" href="DivRemPairs_8cpp_source.html#l00180">optimizeDivRem()</a>.</p>

</div>
</div>
<a id="adb589ff33ce8f36c48b0ec4308f3bc5e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#adb589ff33ce8f36c48b0ec4308f3bc5e">&#9670;&nbsp;</a></span>INITIALIZE_PASS_BEGIN()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">INITIALIZE_PASS_BEGIN </td>
          <td>(</td>
          <td class="paramtype">DivRemPairsLegacyPass&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&quot;div-rem-<a class="el" href="DivRemPairs_8cpp.html#acc133ed83700bf3b14757629b84df429">pairs</a>&quot;&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&quot;Hoist/decompose integer division and <a class="el" href="DivRemPairs_8cpp.html#acabf5cd140be0dea1a9b4ccae70ea89a">remainder</a>&quot;&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="LoadStoreVectorizer_8cpp.html#a1321ae04c732793cd2d0ee2db36636ca">false</a>&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="LoadStoreVectorizer_8cpp.html#a1321ae04c732793cd2d0ee2db36636ca">false</a>&#160;</td>
          <td class="paramname">&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="reference">Referenced by <a class="el" href="DivRemPairs_8cpp_source.html#l00180">optimizeDivRem()</a>.</p>

</div>
</div>
<a id="a52b5375873abc542fdb985386aaaea95"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a52b5375873abc542fdb985386aaaea95">&#9670;&nbsp;</a></span>matchExpandedRem()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static <a class="el" href="classllvm_1_1Optional.html">llvm::Optional</a>&lt;ExpandedMatch&gt; matchExpandedRem </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classllvm_1_1Instruction.html">Instruction</a> &amp;&#160;</td>
          <td class="paramname"><em>I</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>See if we can match: (which is the form we expand into) X - ((X ?/ Y) * Y) which is equivalent to: X ?% Y. </p>

<p class="definition">Definition at line <a class="el" href="DivRemPairs_8cpp_source.html#l00051">51</a> of file <a class="el" href="DivRemPairs_8cpp_source.html">DivRemPairs.cpp</a>.</p>

<p class="reference">References <a class="el" href="IR_2Instruction_8h_source.html#l00125">llvm::Instruction::getOpcode()</a>, <a class="el" href="MD5_8cpp_source.html#l00058">I</a>, <a class="el" href="PatternMatch_8h_source.html#l01867">llvm::PatternMatch::m_c_Mul()</a>, <a class="el" href="PatternMatch_8h_source.html#l00149">llvm::PatternMatch::m_CombineAnd()</a>, <a class="el" href="PatternMatch_8h_source.html#l00625">llvm::PatternMatch::m_Deferred()</a>, <a class="el" href="PatternMatch_8h_source.html#l01110">llvm::PatternMatch::m_IDiv()</a>, <a class="el" href="PatternMatch_8h_source.html#l00581">llvm::PatternMatch::m_Instruction()</a>, <a class="el" href="PatternMatch_8h_source.html#l00612">llvm::PatternMatch::m_Specific()</a>, <a class="el" href="PatternMatch_8h_source.html#l00796">llvm::PatternMatch::m_Sub()</a>, <a class="el" href="PatternMatch_8h_source.html#l00071">llvm::PatternMatch::m_Value()</a>, <a class="el" href="PatternMatch_8h_source.html#l00048">llvm::PatternMatch::match()</a>, and <a class="el" href="namespacellvm.html#a1d0ac37acc2482f8794195f5042b61b5a6adf97f83acf6453d4a6a4b1070f3754">llvm::None</a>.</p>

<p class="reference">Referenced by <a class="el" href="DivRemPairs_8cpp_source.html#l00121">getWorklist()</a>.</p>

</div>
</div>
<a id="a6e3883483a49e3be2520667d933b25f8"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6e3883483a49e3be2520667d933b25f8">&#9670;&nbsp;</a></span>optimizeDivRem()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static <a class="el" href="classbool.html">bool</a> optimizeDivRem </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classllvm_1_1Function.html">Function</a> &amp;&#160;</td>
          <td class="paramname"><em>F</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="AArch64PromoteConstant_8cpp.html#a90f8350fecae261c25be85d38b451bff">const</a> <a class="el" href="classllvm_1_1TargetTransformInfo.html">TargetTransformInfo</a> &amp;&#160;</td>
          <td class="paramname"><em>TTI</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="AArch64PromoteConstant_8cpp.html#a90f8350fecae261c25be85d38b451bff">const</a> <a class="el" href="classllvm_1_1DominatorTree.html">DominatorTree</a> &amp;&#160;</td>
          <td class="paramname"><em>DT</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Find matching pairs of integer div/rem ops (they have the same numerator, denominator, and signedness). </p>
<p>If they exist in different basic blocks, bring them together by hoisting or replace the common division operation that is implicit in the remainder: X % Y &lt;&ndash;&gt; X - ((X / Y) * Y).</p>
<p>We can largely ignore the normal safety and cost constraints on speculation of these ops when we find a matching pair. This is because we are already guaranteed that any exceptions and most cost are already incurred by the first member of the pair.</p>
<p>Note: This transform could be an oddball enhancement to EarlyCSE, GVN, or SimplifyCFG, but it's split off on its own because it's different enough that it doesn't quite match the stated objectives of those passes. </p>

<p class="definition">Definition at line <a class="el" href="DivRemPairs_8cpp_source.html#l00180">180</a> of file <a class="el" href="DivRemPairs_8cpp_source.html">DivRemPairs.cpp</a>.</p>

<p class="reference">References <a class="el" href="PassAnalysisSupport_8h_source.html#l00088">llvm::AnalysisUsage::addPreserved()</a>, <a class="el" href="PassAnalysisSupport_8h_source.html#l00065">llvm::AnalysisUsage::addRequired()</a>, <a class="el" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert()</a>, <a class="el" href="Reassociate_8cpp_source.html#l00245">CreateMul()</a>, <a class="el" href="Dominators_8cpp_source.html#l00249">llvm::DominatorTree::dominates()</a>, <a class="el" href="BuiltinGCs_8cpp.html#a6742d2e0a668baf1196ec69e158d5f15">E</a>, <a class="el" href="IR_2Instruction_8cpp_source.html#l00067">llvm::Instruction::eraseFromParent()</a>, <a class="el" href="LLParser_8cpp.html#a33ece1ef8074506a15d7f86eb76dbae6">F()</a>, <a class="el" href="Pass_8cpp_source.html#l00096">llvm::Pass::getAnalysisUsage()</a>, <a class="el" href="PassRegistry_8cpp_source.html#l00031">llvm::PassRegistry::getPassRegistry()</a>, <a class="el" href="DivRemPairs_8cpp_source.html#l00121">getWorklist()</a>, <a class="el" href="TargetTransformInfo_8cpp_source.html#l00336">llvm::TargetTransformInfo::hasDivRemOp()</a>, <a class="el" href="DivRemPairs_8cpp.html#adb589ff33ce8f36c48b0ec4308f3bc5e">INITIALIZE_PASS_BEGIN()</a>, <a class="el" href="PassSupport_8h_source.html#l00050">INITIALIZE_PASS_DEPENDENCY</a>, <a class="el" href="namespacellvm.html#a683105db4ec2c3176843fd07d167abf7">llvm::initializeDivRemPairsLegacyPassPass()</a>, <a class="el" href="IR_2Instruction_8cpp_source.html#l00079">llvm::Instruction::insertAfter()</a>, <a class="el" href="Value_8cpp_source.html#l00430">llvm::Value::replaceAllUsesWith()</a>, <a class="el" href="EntryExitInstrumenter_8cpp_source.html#l00066">runOnFunction()</a>, <a class="el" href="Value_8cpp_source.html#l00286">llvm::Value::setName()</a>, <a class="el" href="Pass_8cpp_source.html#l00256">llvm::AnalysisUsage::setPreservesCFG()</a>, <a class="el" href="DebugCounter_8h_source.html#l00073">llvm::DebugCounter::shouldExecute()</a>, <a class="el" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>, and <a class="el" href="OcamlGCPrinter_8cpp.html#afcf2f797ed287a723263583c9b1c1bce">Y</a>.</p>

<p class="reference">Referenced by <a class="el" href="DivRemPairs_8cpp_source.html#l00361">llvm::DivRemPairsPass::run()</a>.</p>

</div>
</div>
<a id="a2dce93455da9adba7bf8bcd3f1da1d2c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2dce93455da9adba7bf8bcd3f1da1d2c">&#9670;&nbsp;</a></span>STATISTIC() <span class="overload">[1/4]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">STATISTIC </td>
          <td>(</td>
          <td class="paramtype">NumPairs&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&quot;Number of div/rem <a class="el" href="DivRemPairs_8cpp.html#acc133ed83700bf3b14757629b84df429">pairs</a>&quot;&#160;</td>
          <td class="paramname">&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="a67cf64501da50834568b8facf2db83d9"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a67cf64501da50834568b8facf2db83d9">&#9670;&nbsp;</a></span>STATISTIC() <span class="overload">[2/4]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">STATISTIC </td>
          <td>(</td>
          <td class="paramtype">NumRecomposed&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&quot;Number of <a class="el" href="LoadStoreVectorizer_8cpp.html#acc0655e462f1e67d046cd818e473c46e">instructions</a> recomposed&quot;&#160;</td>
          <td class="paramname">&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="a0fcd3873e0c9636a4519024a74e8bf73"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0fcd3873e0c9636a4519024a74e8bf73">&#9670;&nbsp;</a></span>STATISTIC() <span class="overload">[3/4]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">STATISTIC </td>
          <td>(</td>
          <td class="paramtype">NumHoisted&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&quot;Number of <a class="el" href="LoadStoreVectorizer_8cpp.html#acc0655e462f1e67d046cd818e473c46e">instructions</a> hoisted&quot;&#160;</td>
          <td class="paramname">&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="a8f08e4162fbf26db1595ed5cf7c2a235"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8f08e4162fbf26db1595ed5cf7c2a235">&#9670;&nbsp;</a></span>STATISTIC() <span class="overload">[4/4]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">STATISTIC </td>
          <td>(</td>
          <td class="paramtype">NumDecomposed&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&quot;Number of <a class="el" href="LoadStoreVectorizer_8cpp.html#acc0655e462f1e67d046cd818e473c46e">instructions</a> decomposed&quot;&#160;</td>
          <td class="paramname">&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<h2 class="groupheader">Variable Documentation</h2>
<a id="aa40396c3d77447e480db94a79ef3df0b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa40396c3d77447e480db94a79ef3df0b">&#9670;&nbsp;</a></span>false</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">div rem Hoist decompose integer division and false</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="DivRemPairs_8cpp_source.html#l00354">354</a> of file <a class="el" href="DivRemPairs_8cpp_source.html">DivRemPairs.cpp</a>.</p>

</div>
</div>
<a id="acc133ed83700bf3b14757629b84df429"></a>
<h2 class="memtitle"><span class="permalink"><a href="#acc133ed83700bf3b14757629b84df429">&#9670;&nbsp;</a></span>pairs</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">div rem pairs</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="DivRemPairs_8cpp_source.html#l00354">354</a> of file <a class="el" href="DivRemPairs_8cpp_source.html">DivRemPairs.cpp</a>.</p>

</div>
</div>
<a id="acabf5cd140be0dea1a9b4ccae70ea89a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#acabf5cd140be0dea1a9b4ccae70ea89a">&#9670;&nbsp;</a></span>remainder</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">div rem Hoist decompose integer division and remainder</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="DivRemPairs_8cpp_source.html#l00354">354</a> of file <a class="el" href="DivRemPairs_8cpp_source.html">DivRemPairs.cpp</a>.</p>

<p class="reference">Referenced by <a class="el" href="APInt_8h_source.html#l01857">llvm::APInt::abs()</a>, <a class="el" href="APFloat_8h_source.html#l00626">llvm::detail::DoubleAPFloat::getSecond()</a>, <a class="el" href="APInt_8cpp_source.html#l01318">KnuthDiv()</a>, and <a class="el" href="APFloat_8h_source.html#l00260">llvm::detail::IEEEFloat::needsCleanup()</a>.</p>

</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Tue Mar 24 2020 13:16:03 for LLVM by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.13
</small></address>
</body>
</html>
