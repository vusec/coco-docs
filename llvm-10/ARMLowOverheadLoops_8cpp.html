<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.13"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>LLVM: lib/Target/ARM/ARMLowOverheadLoops.cpp File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<script type="text/x-mathjax-config">
  MathJax.Hub.Config({
    extensions: ["tex2jax.js"],
    jax: ["input/TeX","output/HTML-CSS"],
});
</script><script type="text/javascript" src="http://cdn.mathjax.org/mathjax/latest/MathJax.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">LLVM
   &#160;<span id="projectnumber">10.0.0</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.13 -->
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('',false,false,'search.php','Search');
});
</script>
<div id="main-nav"></div>
<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="dir_97aefd0d527b934f1d99a682da8fe6a9.html">lib</a></li><li class="navelem"><a class="el" href="dir_794e483eb1cc7921d35fd149d9cc325b.html">Target</a></li><li class="navelem"><a class="el" href="dir_4394675d1fa84070817ace1e93b57e8a.html">ARM</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#define-members">Macros</a> &#124;
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<div class="title">ARMLowOverheadLoops.cpp File Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p>Finalize v8.1-m low-overhead loops by converting the associated pseudo instructions into machine operations.  
<a href="#details">More...</a></p>
<div class="textblock"><code>#include &quot;<a class="el" href="ARM_8h_source.html">ARM.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="ARMBaseInstrInfo_8h_source.html">ARMBaseInstrInfo.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="ARMBaseRegisterInfo_8h_source.html">ARMBaseRegisterInfo.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="ARMBasicBlockInfo_8h_source.html">ARMBasicBlockInfo.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="ARMSubtarget_8h_source.html">ARMSubtarget.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="Thumb2InstrInfo_8h_source.html">Thumb2InstrInfo.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="SetOperations_8h_source.html">llvm/ADT/SetOperations.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="SmallSet_8h_source.html">llvm/ADT/SmallSet.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="MachineFunctionPass_8h_source.html">llvm/CodeGen/MachineFunctionPass.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="MachineLoopInfo_8h_source.html">llvm/CodeGen/MachineLoopInfo.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="MachineLoopUtils_8h_source.html">llvm/CodeGen/MachineLoopUtils.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="MachineRegisterInfo_8h_source.html">llvm/CodeGen/MachineRegisterInfo.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="CodeGen_2Passes_8h_source.html">llvm/CodeGen/Passes.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="ReachingDefAnalysis_8h_source.html">llvm/CodeGen/ReachingDefAnalysis.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="MCInstrDesc_8h_source.html">llvm/MC/MCInstrDesc.h</a>&quot;</code><br />
</div><div class="textblock"><div class="dynheader">
Include dependency graph for ARMLowOverheadLoops.cpp:</div>
<div class="dyncontent">
<div class="center"><iframe scrolling="no" frameborder="0" src="ARMLowOverheadLoops_8cpp__incl.svg" width="3784" height="1051"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe>
</div>
</div>
</div>
<p><a href="ARMLowOverheadLoops_8cpp_source.html">Go to the source code of this file.</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="define-members"></a>
Macros</h2></td></tr>
<tr class="memitem:ad78e062f62e0d6e453941fb4ca843e4d"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ARMLowOverheadLoops_8cpp.html#ad78e062f62e0d6e453941fb4ca843e4d">DEBUG_TYPE</a>&#160;&#160;&#160;&quot;arm-low-overhead-<a class="el" href="LoopSimplify_8cpp.html#ac68567aa12ef395f71061eff8f6dd7df">loops</a>&quot;</td></tr>
<tr class="separator:ad78e062f62e0d6e453941fb4ca843e4d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aeddbd656a8e178ba416c845cd0171060"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ARMLowOverheadLoops_8cpp.html#aeddbd656a8e178ba416c845cd0171060">ARM_LOW_OVERHEAD_LOOPS_NAME</a>&#160;&#160;&#160;&quot;ARM Low Overhead <a class="el" href="LoopRotation_8cpp.html#a54b902588fe483b06e0bcbd08bed6bba">Loops</a> <a class="el" href="TwoAddressInstructionPass_8cpp.html#a34b5cf133e2453a532a504197fec9171">pass</a>&quot;</td></tr>
<tr class="separator:aeddbd656a8e178ba416c845cd0171060"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:ab40bfade5fae34a2817fca943f1507ac"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ARMLowOverheadLoops_8cpp.html#ab40bfade5fae34a2817fca943f1507ac">INITIALIZE_PASS</a> (ARMLowOverheadLoops, <a class="el" href="LoadStoreVectorizer_8cpp.html#a030569d5a541b6110f2ae1b6a3413a58">DEBUG_TYPE</a>, <a class="el" href="ARMLowOverheadLoops_8cpp.html#aeddbd656a8e178ba416c845cd0171060">ARM_LOW_OVERHEAD_LOOPS_NAME</a>, <a class="el" href="LoadStoreVectorizer_8cpp.html#a1321ae04c732793cd2d0ee2db36636ca">false</a>, <a class="el" href="LoadStoreVectorizer_8cpp.html#a1321ae04c732793cd2d0ee2db36636ca">false</a>) <a class="el" href="classllvm_1_1MachineInstr.html">MachineInstr</a> *LowOverheadLoop</td></tr>
<tr class="separator:ab40bfade5fae34a2817fca943f1507ac"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac77da0c5ce0570ec0fe1d5d1c20fe164"><td class="memTemplParams" colspan="2">template&lt;typename Iterator &gt; </td></tr>
<tr class="memitem:ac77da0c5ce0570ec0fe1d5d1c20fe164"><td class="memTemplItemLeft" align="right" valign="top">static <a class="el" href="classbool.html">bool</a>&#160;</td><td class="memTemplItemRight" valign="bottom"><a class="el" href="ARMLowOverheadLoops_8cpp.html#ac77da0c5ce0570ec0fe1d5d1c20fe164">IsSafeToMove</a> (<a class="el" href="classllvm_1_1MachineInstr.html">MachineInstr</a> *<a class="el" href="BlockVerifier_8cpp.html#ae45c7d73c0ff5d177b59153ffae77f84">From</a>, <a class="el" href="classllvm_1_1MachineInstr.html">MachineInstr</a> *To, <a class="el" href="classllvm_1_1ReachingDefAnalysis.html">ReachingDefAnalysis</a> *RDA)</td></tr>
<tr class="separator:ac77da0c5ce0570ec0fe1d5d1c20fe164"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>Finalize v8.1-m low-overhead loops by converting the associated pseudo instructions into machine operations. </p>
<p>The expectation is that the loop contains three pseudo instructions:</p><ul>
<li>t2*LoopStart - placed in the preheader or pre-preheader. The do-loop form should be in the preheader, whereas the while form should be in the preheaders only predecessor.</li>
<li>t2LoopDec - placed within in the loop body.</li>
<li>t2LoopEnd - the loop latch terminator.</li>
</ul>
<p>In addition to this, we also look for the presence of the VCTP instruction, which determines whether we can generated the tail-predicated low-overhead loop form.</p>
<p>Assumptions and Dependencies: Low-overhead loops are constructed and executed using a setup instruction: DLS, WLS, DLSTP or WLSTP and an instruction that loops back: LE or LETP. WLS(TP) and LE(TP) are branching instructions with a (large) limited range but fixed polarity: WLS can only branch forwards and LE can only branch backwards. These restrictions mean that this pass is dependent upon block layout and block sizes, which is why it's the last pass to run. The same is true for ConstantIslands, but this pass does not increase the size of the basic blocks, nor does it change the CFG. Instructions are mainly removed during the transform and pseudo instructions are replaced by real ones. In some cases, when we have to revert to a 'normal' loop, we have to introduce multiple instructions for a single pseudo (see RevertWhile and RevertLoopEnd). To handle this situation, t2WhileLoopStart and t2LoopEnd are defined to be as large as this maximum sequence of replacement instructions. </p>

<p class="definition">Definition in file <a class="el" href="ARMLowOverheadLoops_8cpp_source.html">ARMLowOverheadLoops.cpp</a>.</p>
</div><h2 class="groupheader">Macro Definition Documentation</h2>
<a id="aeddbd656a8e178ba416c845cd0171060"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aeddbd656a8e178ba416c845cd0171060">&#9670;&nbsp;</a></span>ARM_LOW_OVERHEAD_LOOPS_NAME</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define ARM_LOW_OVERHEAD_LOOPS_NAME&#160;&#160;&#160;&quot;ARM Low Overhead <a class="el" href="LoopRotation_8cpp.html#a54b902588fe483b06e0bcbd08bed6bba">Loops</a> <a class="el" href="TwoAddressInstructionPass_8cpp.html#a34b5cf133e2453a532a504197fec9171">pass</a>&quot;</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="ARMLowOverheadLoops_8cpp_source.html#l00059">59</a> of file <a class="el" href="ARMLowOverheadLoops_8cpp_source.html">ARMLowOverheadLoops.cpp</a>.</p>

</div>
</div>
<a id="ad78e062f62e0d6e453941fb4ca843e4d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad78e062f62e0d6e453941fb4ca843e4d">&#9670;&nbsp;</a></span>DEBUG_TYPE</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define DEBUG_TYPE&#160;&#160;&#160;&quot;arm-low-overhead-<a class="el" href="LoopSimplify_8cpp.html#ac68567aa12ef395f71061eff8f6dd7df">loops</a>&quot;</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="ARMLowOverheadLoops_8cpp_source.html#l00058">58</a> of file <a class="el" href="ARMLowOverheadLoops_8cpp_source.html">ARMLowOverheadLoops.cpp</a>.</p>

</div>
</div>
<h2 class="groupheader">Function Documentation</h2>
<a id="ab40bfade5fae34a2817fca943f1507ac"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab40bfade5fae34a2817fca943f1507ac">&#9670;&nbsp;</a></span>INITIALIZE_PASS()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">INITIALIZE_PASS </td>
          <td>(</td>
          <td class="paramtype">ARMLowOverheadLoops&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="LoadStoreVectorizer_8cpp.html#a030569d5a541b6110f2ae1b6a3413a58">DEBUG_TYPE</a>&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="ARMLowOverheadLoops_8cpp.html#aeddbd656a8e178ba416c845cd0171060">ARM_LOW_OVERHEAD_LOOPS_NAME</a>&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="LoadStoreVectorizer_8cpp.html#a1321ae04c732793cd2d0ee2db36636ca">false</a>&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="LoadStoreVectorizer_8cpp.html#a1321ae04c732793cd2d0ee2db36636ca">false</a>&#160;</td>
          <td class="paramname">&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="ARMLowOverheadLoops_8cpp_source.html#l00261">261</a> of file <a class="el" href="ARMLowOverheadLoops_8cpp_source.html">ARMLowOverheadLoops.cpp</a>.</p>

</div>
</div>
<a id="ac77da0c5ce0570ec0fe1d5d1c20fe164"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac77da0c5ce0570ec0fe1d5d1c20fe164">&#9670;&nbsp;</a></span>IsSafeToMove()</h2>

<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;typename Iterator &gt; </div>
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static <a class="el" href="classbool.html">bool</a> IsSafeToMove </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classllvm_1_1MachineInstr.html">MachineInstr</a> *&#160;</td>
          <td class="paramname"><em>From</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classllvm_1_1MachineInstr.html">MachineInstr</a> *&#160;</td>
          <td class="paramname"><em>To</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classllvm_1_1ReachingDefAnalysis.html">ReachingDefAnalysis</a> *&#160;</td>
          <td class="paramname"><em>RDA</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="ARMLowOverheadLoops_8cpp_source.html#l00304">304</a> of file <a class="el" href="ARMLowOverheadLoops_8cpp_source.html">ARMLowOverheadLoops.cpp</a>.</p>

<p class="reference">References <a class="el" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert()</a>, <a class="el" href="MachineBasicBlock_8h_source.html#l00196">llvm::MachineBasicBlock::back()</a>, <a class="el" href="SmallSet_8h_source.html#l00164">llvm::SmallSet&lt; T, N, C &gt;::count()</a>, <a class="el" href="Debug_8cpp_source.html#l00132">llvm::dbgs()</a>, <a class="el" href="BuiltinGCs_8cpp.html#a6742d2e0a668baf1196ec69e158d5f15">E</a>, <a class="el" href="MachineLoopInfo_8cpp_source.html#l00115">llvm::MachineLoopInfo::findLoopPreheader()</a>, <a class="el" href="AArch64ExpandPseudoInsts_8cpp_source.html#l00095">for()</a>, <a class="el" href="ReachingDefAnalysis_8cpp_source.html#l00293">llvm::ReachingDefAnalysis::getLocalLiveOutMIDef()</a>, <a class="el" href="MachineBasicBlock_8h_source.html#l00173">llvm::MachineBasicBlock::getParent()</a>, <a class="el" href="ReachingDefAnalysis_8cpp_source.html#l00172">llvm::ReachingDefAnalysis::getReachingDef()</a>, <a class="el" href="ReachingDefAnalysis_8cpp_source.html#l00195">llvm::ReachingDefAnalysis::hasSameReachingDef()</a>, <a class="el" href="MD5_8cpp_source.html#l00058">I</a>, <a class="el" href="SmallSet_8h_source.html#l00180">llvm::SmallSet&lt; T, N, C &gt;::insert()</a>, <a class="el" href="MachineBasicBlock_8cpp_source.html#l01168">llvm::MachineBasicBlock::insert()</a>, <a class="el" href="MachineBasicBlock_8h_source.html#l00629">llvm::MachineBasicBlock::insertAfter()</a>, <a class="el" href="ReachingDefAnalysis_8cpp_source.html#l00273">llvm::ReachingDefAnalysis::isReachingDefLiveOut()</a>, <a class="el" href="ARMBaseInstrInfo_8h_source.html#l00599">llvm::isVCTP()</a>, <a class="el" href="Debug_8h_source.html#l00122">LLVM_DEBUG</a>, <a class="el" href="IRTranslator_8cpp_source.html#l00093">MI</a>, <a class="el" href="MachineInstr_8h_source.html#l00492">llvm::MachineInstr::operands()</a>, <a class="el" href="MachineBasicBlock_8h_source.html#l00264">llvm::MachineBasicBlock::pred_begin()</a>, and <a class="el" href="MachineBasicBlock_8h_source.html#l00276">llvm::MachineBasicBlock::pred_size()</a>.</p>

</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Tue Mar 24 2020 13:15:59 for LLVM by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.13
</small></address>
</body>
</html>
