<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.13"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>LLVM: llvm::lowertypetests::ByteArrayBuilder Struct Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<script type="text/x-mathjax-config">
  MathJax.Hub.Config({
    extensions: ["tex2jax.js"],
    jax: ["input/TeX","output/HTML-CSS"],
});
</script><script type="text/javascript" src="http://cdn.mathjax.org/mathjax/latest/MathJax.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">LLVM
   &#160;<span id="projectnumber">10.0.0</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.13 -->
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('',false,false,'search.php','Search');
});
</script>
<div id="main-nav"></div>
<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="namespacellvm.html">llvm</a></li><li class="navelem"><a class="el" href="namespacellvm_1_1lowertypetests.html">lowertypetests</a></li><li class="navelem"><a class="el" href="structllvm_1_1lowertypetests_1_1ByteArrayBuilder.html">ByteArrayBuilder</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#pub-types">Public Types</a> &#124;
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="#pub-attribs">Public Attributes</a> &#124;
<a href="structllvm_1_1lowertypetests_1_1ByteArrayBuilder-members.html">List of all members</a>  </div>
  <div class="headertitle">
<div class="title">llvm::lowertypetests::ByteArrayBuilder Struct Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p>This class is used to build a byte array containing overlapping bit sets.  
 <a href="structllvm_1_1lowertypetests_1_1ByteArrayBuilder.html#details">More...</a></p>

<p><code>#include &quot;<a class="el" href="LowerTypeTests_8h_source.html">llvm/Transforms/IPO/LowerTypeTests.h</a>&quot;</code></p>
<div class="dynheader">
Collaboration diagram for llvm::lowertypetests::ByteArrayBuilder:</div>
<div class="dyncontent">
<div class="center"><iframe scrolling="no" frameborder="0" src="structllvm_1_1lowertypetests_1_1ByteArrayBuilder__coll__graph.svg" width="224" height="142"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe>
</div>
<center><span class="legend">[<a href="graph_legend.html">legend</a>]</span></center></div>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-types"></a>
Public Types</h2></td></tr>
<tr class="memitem:a64090b4598e542bbf348430847985059"><td class="memItemLeft" align="right" valign="top">enum &#160;</td><td class="memItemRight" valign="bottom">{ <a class="el" href="structllvm_1_1lowertypetests_1_1ByteArrayBuilder.html#a64090b4598e542bbf348430847985059a961b1f972e23c16ecc4ddffe1ddfbdca">BitsPerByte</a> = 8
 }</td></tr>
<tr class="separator:a64090b4598e542bbf348430847985059"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:a7e7d04e07fc7f640097f08663ec3ccee"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structllvm_1_1lowertypetests_1_1ByteArrayBuilder.html#a7e7d04e07fc7f640097f08663ec3ccee">ByteArrayBuilder</a> ()</td></tr>
<tr class="separator:a7e7d04e07fc7f640097f08663ec3ccee"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aefcc42b423b9473d155867e579682a9e"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structllvm_1_1lowertypetests_1_1ByteArrayBuilder.html#aefcc42b423b9473d155867e579682a9e">allocate</a> (<a class="el" href="AArch64PromoteConstant_8cpp.html#a90f8350fecae261c25be85d38b451bff">const</a> std::set&lt; uint64_t &gt; &amp;Bits, uint64_t BitSize, uint64_t &amp;AllocByteOffset, uint8_t &amp;AllocMask)</td></tr>
<tr class="memdesc:aefcc42b423b9473d155867e579682a9e"><td class="mdescLeft">&#160;</td><td class="mdescRight">Allocate BitSize bits in the byte array where Bits contains the bits to set.  <a href="#aefcc42b423b9473d155867e579682a9e">More...</a><br /></td></tr>
<tr class="separator:aefcc42b423b9473d155867e579682a9e"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-attribs"></a>
Public Attributes</h2></td></tr>
<tr class="memitem:ab9bf25f047271def1203635a5725eeff"><td class="memItemLeft" align="right" valign="top">std::vector&lt; uint8_t &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structllvm_1_1lowertypetests_1_1ByteArrayBuilder.html#ab9bf25f047271def1203635a5725eeff">Bytes</a></td></tr>
<tr class="memdesc:ab9bf25f047271def1203635a5725eeff"><td class="mdescLeft">&#160;</td><td class="mdescRight">The byte array built so far.  <a href="#ab9bf25f047271def1203635a5725eeff">More...</a><br /></td></tr>
<tr class="separator:ab9bf25f047271def1203635a5725eeff"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a49082c502ad79672b9f721424779a643"><td class="memItemLeft" align="right" valign="top">uint64_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structllvm_1_1lowertypetests_1_1ByteArrayBuilder.html#a49082c502ad79672b9f721424779a643">BitAllocs</a> [<a class="el" href="structllvm_1_1lowertypetests_1_1ByteArrayBuilder.html#a64090b4598e542bbf348430847985059a961b1f972e23c16ecc4ddffe1ddfbdca">BitsPerByte</a>]</td></tr>
<tr class="memdesc:a49082c502ad79672b9f721424779a643"><td class="mdescLeft">&#160;</td><td class="mdescRight">The number of bytes allocated so far for each of the bits.  <a href="#a49082c502ad79672b9f721424779a643">More...</a><br /></td></tr>
<tr class="separator:a49082c502ad79672b9f721424779a643"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>This class is used to build a byte array containing overlapping bit sets. </p>
<p>By loading from indexed offsets into the byte array and applying a mask, a program can test bits from the bit set with a relatively short instruction sequence. For example, suppose we have 15 bit sets to lay out:</p>
<p>A (16 bits), B (15 bits), C (14 bits), D (13 bits), E (12 bits), F (11 bits), G (10 bits), H (9 bits), I (7 bits), J (6 bits), K (5 bits), L (4 bits), M (3 bits), N (2 bits), O (1 bit)</p>
<p>These bits can be laid out in a 16-byte array like this: </p><pre class="fragment">  Byte Offset
0123456789ABCDEF
</pre><p> Bit 7 HHHHHHHHHIIIIIII 6 GGGGGGGGGGJJJJJJ 5 FFFFFFFFFFFKKKKK 4 EEEEEEEEEEEELLLL 3 DDDDDDDDDDDDDMMM 2 CCCCCCCCCCCCCCNN 1 BBBBBBBBBBBBBBBO 0 AAAAAAAAAAAAAAAA</p>
<p>For example, to test bit X of A, we evaluate ((bits[X] &amp; 1) != 0), or to test bit X of I, we evaluate ((bits[9 + X] &amp; 0x80) != 0). This can be done in 1-2 machine instructions on x86, or 4-6 instructions on <a class="el" href="namespacellvm_1_1ARM.html" title="Define some predicates that are used for node matching. ">ARM</a>.</p>
<p>This is a byte array, rather than (say) a 2-byte array or a 4-byte array, because for one thing it gives us better packing (the more bins there are, the less evenly they will be filled), and for another, the instruction sequences can be slightly shorter, both on x86 and <a class="el" href="namespacellvm_1_1ARM.html" title="Define some predicates that are used for node matching. ">ARM</a>. </p>

<p class="definition">Definition at line <a class="el" href="LowerTypeTests_8h_source.html#l00174">174</a> of file <a class="el" href="LowerTypeTests_8h_source.html">LowerTypeTests.h</a>.</p>
</div><h2 class="groupheader">Member Enumeration Documentation</h2>
<a id="a64090b4598e542bbf348430847985059"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a64090b4598e542bbf348430847985059">&#9670;&nbsp;</a></span>anonymous enum</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">anonymous enum</td>
        </tr>
      </table>
</div><div class="memdoc">
<table class="fieldtable">
<tr><th colspan="2">Enumerator</th></tr><tr><td class="fieldname"><a id="a64090b4598e542bbf348430847985059a961b1f972e23c16ecc4ddffe1ddfbdca"></a>BitsPerByte&#160;</td><td class="fielddoc"></td></tr>
</table>

<p class="definition">Definition at line <a class="el" href="LowerTypeTests_8h_source.html#l00178">178</a> of file <a class="el" href="LowerTypeTests_8h_source.html">LowerTypeTests.h</a>.</p>

</div>
</div>
<h2 class="groupheader">Constructor &amp; Destructor Documentation</h2>
<a id="a7e7d04e07fc7f640097f08663ec3ccee"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7e7d04e07fc7f640097f08663ec3ccee">&#9670;&nbsp;</a></span>ByteArrayBuilder()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">llvm::lowertypetests::ByteArrayBuilder::ByteArrayBuilder </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="LowerTypeTests_8h_source.html#l00183">183</a> of file <a class="el" href="LowerTypeTests_8h_source.html">LowerTypeTests.h</a>.</p>

<p class="reference">References <a class="el" href="LowerTypeTests_8h_source.html#l00035">llvm::lowertypetests::BitSetInfo::Bits</a>, <a class="el" href="LowerTypeTests_8h_source.html#l00041">llvm::lowertypetests::BitSetInfo::BitSize</a>, <a class="el" href="LLParser_8cpp.html#a33ece1ef8074506a15d7f86eb76dbae6">F()</a>, and <a class="el" href="LowerTypeTests_8cpp_source.html#l00234">llvm::lowertypetests::isJumpTableCanonical()</a>.</p>

</div>
</div>
<h2 class="groupheader">Member Function Documentation</h2>
<a id="aefcc42b423b9473d155867e579682a9e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aefcc42b423b9473d155867e579682a9e">&#9670;&nbsp;</a></span>allocate()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void ByteArrayBuilder::allocate </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="AArch64PromoteConstant_8cpp.html#a90f8350fecae261c25be85d38b451bff">const</a> std::set&lt; uint64_t &gt; &amp;&#160;</td>
          <td class="paramname"><em>Bits</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint64_t&#160;</td>
          <td class="paramname"><em>BitSize</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint64_t &amp;&#160;</td>
          <td class="paramname"><em>AllocByteOffset</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t &amp;&#160;</td>
          <td class="paramname"><em>AllocMask</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Allocate BitSize bits in the byte array where Bits contains the bits to set. </p>
<p>AllocByteOffset is set to the offset within the byte array and AllocMask is set to the bitmask for those bits. This uses the LPT (Longest Processing Time) multiprocessor scheduling algorithm to lay out the bits efficiently; the pass allocates bit sets in decreasing size order. </p>

<p class="definition">Definition at line <a class="el" href="LowerTypeTests_8cpp_source.html#l00211">211</a> of file <a class="el" href="LowerTypeTests_8cpp_source.html">LowerTypeTests.cpp</a>.</p>

<p class="reference">References <a class="el" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>, <a class="el" href="TGLexer_8h_source.html#l00049">llvm::tgtok::Bit</a>, <a class="el" href="LowerTypeTests_8h_source.html#l00041">llvm::lowertypetests::BitSetInfo::BitSize</a>, and <a class="el" href="MD5_8cpp_source.html#l00058">I</a>.</p>

</div>
</div>
<h2 class="groupheader">Member Data Documentation</h2>
<a id="a49082c502ad79672b9f721424779a643"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a49082c502ad79672b9f721424779a643">&#9670;&nbsp;</a></span>BitAllocs</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint64_t llvm::lowertypetests::ByteArrayBuilder::BitAllocs[<a class="el" href="structllvm_1_1lowertypetests_1_1ByteArrayBuilder.html#a64090b4598e542bbf348430847985059a961b1f972e23c16ecc4ddffe1ddfbdca">BitsPerByte</a>]</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>The number of bytes allocated so far for each of the bits. </p>

<p class="definition">Definition at line <a class="el" href="LowerTypeTests_8h_source.html#l00181">181</a> of file <a class="el" href="LowerTypeTests_8h_source.html">LowerTypeTests.h</a>.</p>

</div>
</div>
<a id="ab9bf25f047271def1203635a5725eeff"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab9bf25f047271def1203635a5725eeff">&#9670;&nbsp;</a></span>Bytes</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">std::vector&lt;uint8_t&gt; llvm::lowertypetests::ByteArrayBuilder::Bytes</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>The byte array built so far. </p>

<p class="definition">Definition at line <a class="el" href="LowerTypeTests_8h_source.html#l00176">176</a> of file <a class="el" href="LowerTypeTests_8h_source.html">LowerTypeTests.h</a>.</p>

</div>
</div>
<hr/>The documentation for this struct was generated from the following files:<ul>
<li>include/llvm/Transforms/IPO/<a class="el" href="LowerTypeTests_8h_source.html">LowerTypeTests.h</a></li>
<li>lib/Transforms/IPO/<a class="el" href="LowerTypeTests_8cpp_source.html">LowerTypeTests.cpp</a></li>
</ul>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Tue Mar 24 2020 13:23:51 for LLVM by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.13
</small></address>
</body>
</html>
