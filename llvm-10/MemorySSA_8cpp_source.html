<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.13"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>LLVM: lib/Analysis/MemorySSA.cpp Source File</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<script type="text/x-mathjax-config">
  MathJax.Hub.Config({
    extensions: ["tex2jax.js"],
    jax: ["input/TeX","output/HTML-CSS"],
});
</script><script type="text/javascript" src="http://cdn.mathjax.org/mathjax/latest/MathJax.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">LLVM
   &#160;<span id="projectnumber">10.0.0</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.13 -->
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('',false,false,'search.php','Search');
});
</script>
<div id="main-nav"></div>
<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="dir_97aefd0d527b934f1d99a682da8fe6a9.html">lib</a></li><li class="navelem"><a class="el" href="dir_a25db018342d3ae6c7e6779086c18378.html">Analysis</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="headertitle">
<div class="title">MemorySSA.cpp</div>  </div>
</div><!--header-->
<div class="contents">
<a href="MemorySSA_8cpp.html">Go to the documentation of this file.</a><div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;<span class="comment">//===- MemorySSA.cpp - Memory SSA Builder ---------------------------------===//</span></div><div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;<span class="comment">//</span></div><div class="line"><a name="l00003"></a><span class="lineno">    3</span>&#160;<span class="comment">// Part of the LLVM Project, under the Apache License v2.0 with LLVM Exceptions.</span></div><div class="line"><a name="l00004"></a><span class="lineno">    4</span>&#160;<span class="comment">// See https://llvm.org/LICENSE.txt for license information.</span></div><div class="line"><a name="l00005"></a><span class="lineno">    5</span>&#160;<span class="comment">// SPDX-License-Identifier: Apache-2.0 WITH LLVM-exception</span></div><div class="line"><a name="l00006"></a><span class="lineno">    6</span>&#160;<span class="comment">//</span></div><div class="line"><a name="l00007"></a><span class="lineno">    7</span>&#160;<span class="comment">//===----------------------------------------------------------------------===//</span></div><div class="line"><a name="l00008"></a><span class="lineno">    8</span>&#160;<span class="comment">//</span></div><div class="line"><a name="l00009"></a><span class="lineno">    9</span>&#160;<span class="comment">// This file implements the MemorySSA class.</span></div><div class="line"><a name="l00010"></a><span class="lineno">   10</span>&#160;<span class="comment">//</span></div><div class="line"><a name="l00011"></a><span class="lineno">   11</span>&#160;<span class="comment">//===----------------------------------------------------------------------===//</span></div><div class="line"><a name="l00012"></a><span class="lineno">   12</span>&#160;</div><div class="line"><a name="l00013"></a><span class="lineno">   13</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="MemorySSA_8h.html">llvm/Analysis/MemorySSA.h</a>&quot;</span></div><div class="line"><a name="l00014"></a><span class="lineno">   14</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="DenseMap_8h.html">llvm/ADT/DenseMap.h</a>&quot;</span></div><div class="line"><a name="l00015"></a><span class="lineno">   15</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="DenseMapInfo_8h.html">llvm/ADT/DenseMapInfo.h</a>&quot;</span></div><div class="line"><a name="l00016"></a><span class="lineno">   16</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="DenseSet_8h.html">llvm/ADT/DenseSet.h</a>&quot;</span></div><div class="line"><a name="l00017"></a><span class="lineno">   17</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="DepthFirstIterator_8h.html">llvm/ADT/DepthFirstIterator.h</a>&quot;</span></div><div class="line"><a name="l00018"></a><span class="lineno">   18</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="Hashing_8h.html">llvm/ADT/Hashing.h</a>&quot;</span></div><div class="line"><a name="l00019"></a><span class="lineno">   19</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="None_8h.html">llvm/ADT/None.h</a>&quot;</span></div><div class="line"><a name="l00020"></a><span class="lineno">   20</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="Optional_8h.html">llvm/ADT/Optional.h</a>&quot;</span></div><div class="line"><a name="l00021"></a><span class="lineno">   21</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="STLExtras_8h.html">llvm/ADT/STLExtras.h</a>&quot;</span></div><div class="line"><a name="l00022"></a><span class="lineno">   22</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="SmallPtrSet_8h.html">llvm/ADT/SmallPtrSet.h</a>&quot;</span></div><div class="line"><a name="l00023"></a><span class="lineno">   23</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="SmallVector_8h.html">llvm/ADT/SmallVector.h</a>&quot;</span></div><div class="line"><a name="l00024"></a><span class="lineno">   24</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="iterator_8h.html">llvm/ADT/iterator.h</a>&quot;</span></div><div class="line"><a name="l00025"></a><span class="lineno">   25</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="iterator__range_8h.html">llvm/ADT/iterator_range.h</a>&quot;</span></div><div class="line"><a name="l00026"></a><span class="lineno">   26</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="AliasAnalysis_8h.html">llvm/Analysis/AliasAnalysis.h</a>&quot;</span></div><div class="line"><a name="l00027"></a><span class="lineno">   27</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="IteratedDominanceFrontier_8h.html">llvm/Analysis/IteratedDominanceFrontier.h</a>&quot;</span></div><div class="line"><a name="l00028"></a><span class="lineno">   28</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="MemoryLocation_8h.html">llvm/Analysis/MemoryLocation.h</a>&quot;</span></div><div class="line"><a name="l00029"></a><span class="lineno">   29</span>&#160;<span class="preprocessor">#include &quot;llvm/Config/llvm-config.h&quot;</span></div><div class="line"><a name="l00030"></a><span class="lineno">   30</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="AssemblyAnnotationWriter_8h.html">llvm/IR/AssemblyAnnotationWriter.h</a>&quot;</span></div><div class="line"><a name="l00031"></a><span class="lineno">   31</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="BasicBlock_8h.html">llvm/IR/BasicBlock.h</a>&quot;</span></div><div class="line"><a name="l00032"></a><span class="lineno">   32</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="Dominators_8h.html">llvm/IR/Dominators.h</a>&quot;</span></div><div class="line"><a name="l00033"></a><span class="lineno">   33</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="Function_8h.html">llvm/IR/Function.h</a>&quot;</span></div><div class="line"><a name="l00034"></a><span class="lineno">   34</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="IR_2Instruction_8h.html">llvm/IR/Instruction.h</a>&quot;</span></div><div class="line"><a name="l00035"></a><span class="lineno">   35</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="Instructions_8h.html">llvm/IR/Instructions.h</a>&quot;</span></div><div class="line"><a name="l00036"></a><span class="lineno">   36</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="IntrinsicInst_8h.html">llvm/IR/IntrinsicInst.h</a>&quot;</span></div><div class="line"><a name="l00037"></a><span class="lineno">   37</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="Intrinsics_8h.html">llvm/IR/Intrinsics.h</a>&quot;</span></div><div class="line"><a name="l00038"></a><span class="lineno">   38</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="LLVMContext_8h.html">llvm/IR/LLVMContext.h</a>&quot;</span></div><div class="line"><a name="l00039"></a><span class="lineno">   39</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="PassManager_8h.html">llvm/IR/PassManager.h</a>&quot;</span></div><div class="line"><a name="l00040"></a><span class="lineno">   40</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="Use_8h.html">llvm/IR/Use.h</a>&quot;</span></div><div class="line"><a name="l00041"></a><span class="lineno">   41</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="InitializePasses_8h.html">llvm/InitializePasses.h</a>&quot;</span></div><div class="line"><a name="l00042"></a><span class="lineno">   42</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="Pass_8h.html">llvm/Pass.h</a>&quot;</span></div><div class="line"><a name="l00043"></a><span class="lineno">   43</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="AtomicOrdering_8h.html">llvm/Support/AtomicOrdering.h</a>&quot;</span></div><div class="line"><a name="l00044"></a><span class="lineno">   44</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="Casting_8h.html">llvm/Support/Casting.h</a>&quot;</span></div><div class="line"><a name="l00045"></a><span class="lineno">   45</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="CommandLine_8h.html">llvm/Support/CommandLine.h</a>&quot;</span></div><div class="line"><a name="l00046"></a><span class="lineno">   46</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="Compiler_8h.html">llvm/Support/Compiler.h</a>&quot;</span></div><div class="line"><a name="l00047"></a><span class="lineno">   47</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="Debug_8h.html">llvm/Support/Debug.h</a>&quot;</span></div><div class="line"><a name="l00048"></a><span class="lineno">   48</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="Support_2ErrorHandling_8h.html">llvm/Support/ErrorHandling.h</a>&quot;</span></div><div class="line"><a name="l00049"></a><span class="lineno">   49</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="FormattedStream_8h.html">llvm/Support/FormattedStream.h</a>&quot;</span></div><div class="line"><a name="l00050"></a><span class="lineno">   50</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="raw__ostream_8h.html">llvm/Support/raw_ostream.h</a>&quot;</span></div><div class="line"><a name="l00051"></a><span class="lineno">   51</span>&#160;<span class="preprocessor">#include &lt;algorithm&gt;</span></div><div class="line"><a name="l00052"></a><span class="lineno">   52</span>&#160;<span class="preprocessor">#include &lt;cassert&gt;</span></div><div class="line"><a name="l00053"></a><span class="lineno">   53</span>&#160;<span class="preprocessor">#include &lt;cstdlib&gt;</span></div><div class="line"><a name="l00054"></a><span class="lineno">   54</span>&#160;<span class="preprocessor">#include &lt;iterator&gt;</span></div><div class="line"><a name="l00055"></a><span class="lineno">   55</span>&#160;<span class="preprocessor">#include &lt;memory&gt;</span></div><div class="line"><a name="l00056"></a><span class="lineno">   56</span>&#160;<span class="preprocessor">#include &lt;utility&gt;</span></div><div class="line"><a name="l00057"></a><span class="lineno">   57</span>&#160;</div><div class="line"><a name="l00058"></a><span class="lineno">   58</span>&#160;<span class="keyword">using namespace </span><a class="code" href="namespacellvm.html">llvm</a>;</div><div class="line"><a name="l00059"></a><span class="lineno">   59</span>&#160;</div><div class="line"><a name="l00060"></a><span class="lineno"><a class="line" href="MemorySSA_8cpp.html#ad78e062f62e0d6e453941fb4ca843e4d">   60</a></span>&#160;<span class="preprocessor">#define DEBUG_TYPE &quot;memoryssa&quot;</span></div><div class="line"><a name="l00061"></a><span class="lineno">   61</span>&#160;</div><div class="line"><a name="l00062"></a><span class="lineno">   62</span>&#160;<a class="code" href="MemorySSA_8cpp.html#a72507946850fcd3cdea22735440c5a83">INITIALIZE_PASS_BEGIN</a>(<a class="code" href="classllvm_1_1MemorySSAWrapperPass.html">MemorySSAWrapperPass</a>, <span class="stringliteral">&quot;memoryssa&quot;</span>, <span class="stringliteral">&quot;Memory SSA&quot;</span>, <span class="keyword">false</span>,</div><div class="line"><a name="l00063"></a><span class="lineno">   63</span>&#160;                      <span class="keyword">true</span>)</div><div class="line"><a name="l00064"></a><span class="lineno">   64</span>&#160;<a class="code" href="PassSupport_8h.html#a14724f1ccf528e73bb29bc9230737967">INITIALIZE_PASS_DEPENDENCY</a>(<a class="code" href="classllvm_1_1DominatorTreeWrapperPass.html">DominatorTreeWrapperPass</a>)</div><div class="line"><a name="l00065"></a><span class="lineno">   65</span>&#160;<a class="code" href="PassSupport_8h.html#a14724f1ccf528e73bb29bc9230737967">INITIALIZE_PASS_DEPENDENCY</a>(<a class="code" href="classllvm_1_1AAResultsWrapperPass.html">AAResultsWrapperPass</a>)</div><div class="line"><a name="l00066"></a><span class="lineno"><a class="line" href="MemorySSA_8cpp.html#a20a60bdac22b099d87d8cb0c1d554120">   66</a></span>&#160;<a class="code" href="RegBankSelect_8cpp.html#a0eee13989797c0d4612066f84ff7a7b8">INITIALIZE_PASS_END</a>(<a class="code" href="classllvm_1_1MemorySSAWrapperPass.html">MemorySSAWrapperPass</a>, &quot;<a class="code" href="MemorySSA_8cpp.html#a06e2f0489fb9bed0b271e8fe6c2b7545">memoryssa</a>&quot;, &quot;<a class="code" href="classllvm_1_1sys_1_1Memory.html">Memory</a> <a class="code" href="MemorySSA_8cpp.html#a20a60bdac22b099d87d8cb0c1d554120">SSA</a>&quot;, <a class="code" href="namespacefalse.html">false</a>,</div><div class="line"><a name="l00067"></a><span class="lineno">   67</span>&#160;                    <a class="code" href="BlockFrequencyInfo_8cpp.html#af1bff759151fc332f9c9021578b15be6">true</a>)</div><div class="line"><a name="l00068"></a><span class="lineno">   68</span>&#160;</div><div class="line"><a name="l00069"></a><span class="lineno">   69</span>&#160;<a class="code" href="MemorySSA_8cpp.html#a72507946850fcd3cdea22735440c5a83">INITIALIZE_PASS_BEGIN</a>(<a class="code" href="classllvm_1_1MemorySSAPrinterLegacyPass.html">MemorySSAPrinterLegacyPass</a>, &quot;<a class="code" href="ArchiveWriter_8cpp.html#aa9f638c7ae7fdd206a6c60e26bef9751">print</a>-memoryssa&quot;,</div><div class="line"><a name="l00070"></a><span class="lineno">   70</span>&#160;                      &quot;<a class="code" href="classllvm_1_1sys_1_1Memory.html">Memory</a> SSA <a class="code" href="MemorySSA_8cpp.html#aced78c3344e93eaed9a44b319bf14c29">Printer</a>&quot;, false, false)</div><div class="line"><a name="l00071"></a><span class="lineno">   71</span>&#160;<a class="code" href="PassSupport_8h.html#a14724f1ccf528e73bb29bc9230737967">INITIALIZE_PASS_DEPENDENCY</a>(MemorySSAWrapperPass)</div><div class="line"><a name="l00072"></a><span class="lineno"><a class="line" href="MemorySSA_8cpp.html#aced78c3344e93eaed9a44b319bf14c29">   72</a></span>&#160;<a class="code" href="RegBankSelect_8cpp.html#a0eee13989797c0d4612066f84ff7a7b8">INITIALIZE_PASS_END</a>(MemorySSAPrinterLegacyPass, &quot;<a class="code" href="ArchiveWriter_8cpp.html#aa9f638c7ae7fdd206a6c60e26bef9751">print</a>-memoryssa&quot;,</div><div class="line"><a name="l00073"></a><span class="lineno">   73</span>&#160;                    &quot;<a class="code" href="classllvm_1_1sys_1_1Memory.html">Memory</a> SSA Printer&quot;, false, false)</div><div class="line"><a name="l00074"></a><span class="lineno">   74</span>&#160;</div><div class="line"><a name="l00075"></a><span class="lineno">   75</span>&#160;static cl::<a class="code" href="HexagonConstExtenders_8cpp.html#a2d1bc450117084e6b9aad77f103b9257">opt</a>&lt;<span class="keywordtype">unsigned</span>&gt; <a class="code" href="MemorySSA_8cpp.html#a5926ddc0f7c4225c6ced440baa2fb7a3">MaxCheckLimit</a>(</div><div class="line"><a name="l00076"></a><span class="lineno">   76</span>&#160;    &quot;<a class="code" href="EarlyCSE_8cpp.html#a310e3a79b8a474993ca1d62a3de9338c">memssa</a>-check-limit&quot;, cl::Hidden, cl::<a class="code" href="namespacellvm_1_1cl.html#a10a041239ae1870cfcc064bfaa79fb65">init</a>(100),</div><div class="line"><a name="l00077"></a><span class="lineno">   77</span>&#160;    cl::desc(&quot;The <a class="code" href="namespacellvm.html#a38dcdde63d81fbda1d22dffd1a27b343">maximum</a> number of <a class="code" href="HexagonStoreWidening_8cpp.html#a7d2c711a42f51c1f7b3ce3f8f560fa74">stores</a>/phis <a class="code" href="classllvm_1_1MemorySSA.html">MemorySSA</a>&quot;</div><div class="line"><a name="l00078"></a><span class="lineno">   78</span>&#160;             &quot;will consider trying to walk past (default = 100)&quot;));</div><div class="line"><a name="l00079"></a><span class="lineno">   79</span>&#160;</div><div class="line"><a name="l00080"></a><span class="lineno">   80</span>&#160;<span class="comment">// Always verify MemorySSA if expensive checking is enabled.</span></div><div class="line"><a name="l00081"></a><span class="lineno">   81</span>&#160;<span class="preprocessor">#ifdef EXPENSIVE_CHECKS</span></div><div class="line"><a name="l00082"></a><span class="lineno">   82</span>&#160;<span class="keywordtype">bool</span> <a class="code" href="namespacellvm.html#aa29fe161c408879ada30c90ebbf55dcf">llvm::VerifyMemorySSA</a> = <span class="keyword">true</span>;</div><div class="line"><a name="l00083"></a><span class="lineno">   83</span>&#160;<span class="preprocessor">#else</span></div><div class="line"><a name="l00084"></a><span class="lineno"><a class="line" href="namespacellvm.html#aa29fe161c408879ada30c90ebbf55dcf">   84</a></span>&#160;<span class="keywordtype">bool</span> llvm::VerifyMemorySSA = <span class="keyword">false</span>;</div><div class="line"><a name="l00085"></a><span class="lineno">   85</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l00086"></a><span class="lineno">   86</span>&#160;<span class="comment">/// Enables memory ssa as a dependency for loop passes in legacy pass manager.</span></div><div class="line"><a name="l00087"></a><span class="lineno">   87</span>&#160;<span class="comment"></span><a class="code" href="classllvm_1_1cl_1_1opt.html">cl::opt&lt;bool&gt;</a> <a class="code" href="namespacellvm.html#a1b08b801426881b2a106ccb2e1c79cf3">llvm::EnableMSSALoopDependency</a>(</div><div class="line"><a name="l00088"></a><span class="lineno">   88</span>&#160;    <span class="stringliteral">&quot;enable-mssa-loop-dependency&quot;</span>, <a class="code" href="namespacellvm_1_1cl.html#a68075925a54790e71ca790e1d4f21a40a263ac008d8d31f13ce460395fc4cf7e6">cl::Hidden</a>, <a class="code" href="namespacellvm_1_1cl.html#a10a041239ae1870cfcc064bfaa79fb65">cl::init</a>(<span class="keyword">true</span>),</div><div class="line"><a name="l00089"></a><span class="lineno">   89</span>&#160;    <a class="code" href="structllvm_1_1cl_1_1desc.html">cl::desc</a>(<span class="stringliteral">&quot;Enable MemorySSA dependency for loop pass manager&quot;</span>));</div><div class="line"><a name="l00090"></a><span class="lineno">   90</span>&#160;</div><div class="line"><a name="l00091"></a><span class="lineno">   91</span>&#160;<span class="keyword">static</span> <a class="code" href="classllvm_1_1cl_1_1opt.html">cl::opt&lt;bool, true&gt;</a></div><div class="line"><a name="l00092"></a><span class="lineno">   92</span>&#160;    <a class="code" href="MemorySSA_8cpp.html#aba328dc3197724a10ffa60efc7e308be">VerifyMemorySSAX</a>(<span class="stringliteral">&quot;verify-memoryssa&quot;</span>, <a class="code" href="namespacellvm_1_1cl.html#aed47e4757f3240146f8ad40c2cdbf2d1">cl::location</a>(<a class="code" href="namespacellvm.html#aa29fe161c408879ada30c90ebbf55dcf">VerifyMemorySSA</a>),</div><div class="line"><a name="l00093"></a><span class="lineno">   93</span>&#160;                     <a class="code" href="namespacellvm_1_1cl.html#a68075925a54790e71ca790e1d4f21a40a263ac008d8d31f13ce460395fc4cf7e6">cl::Hidden</a>, <a class="code" href="structllvm_1_1cl_1_1desc.html">cl::desc</a>(<span class="stringliteral">&quot;Enable verification of MemorySSA.&quot;</span>));</div><div class="line"><a name="l00094"></a><span class="lineno">   94</span>&#160;</div><div class="line"><a name="l00095"></a><span class="lineno">   95</span>&#160;<span class="keyword">namespace </span><a class="code" href="namespacellvm.html">llvm</a> {</div><div class="line"><a name="l00096"></a><span class="lineno">   96</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00097"></a><span class="lineno">   97</span>&#160;<span class="comment">/// An assembly annotator class to print Memory SSA information in</span></div><div class="line"><a name="l00098"></a><span class="lineno">   98</span>&#160;<span class="comment">/// comments.</span></div><div class="line"><a name="l00099"></a><span class="lineno"><a class="line" href="classllvm_1_1MemorySSAAnnotatedWriter.html">   99</a></span>&#160;<span class="comment"></span><span class="keyword">class </span><a class="code" href="classllvm_1_1MemorySSAAnnotatedWriter.html">MemorySSAAnnotatedWriter</a> : <span class="keyword">public</span> <a class="code" href="classllvm_1_1AssemblyAnnotationWriter.html">AssemblyAnnotationWriter</a> {</div><div class="line"><a name="l00100"></a><span class="lineno"><a class="line" href="classllvm_1_1MemorySSAAnnotatedWriter.html#a049277aa22bd6d1efded38d340c37960">  100</a></span>&#160;  <span class="keyword">friend</span> <span class="keyword">class </span><a class="code" href="classllvm_1_1MemorySSA.html">MemorySSA</a>;</div><div class="line"><a name="l00101"></a><span class="lineno">  101</span>&#160;</div><div class="line"><a name="l00102"></a><span class="lineno">  102</span>&#160;  <span class="keyword">const</span> <a class="code" href="classllvm_1_1MemorySSA.html">MemorySSA</a> *MSSA;</div><div class="line"><a name="l00103"></a><span class="lineno">  103</span>&#160;</div><div class="line"><a name="l00104"></a><span class="lineno">  104</span>&#160;<span class="keyword">public</span>:</div><div class="line"><a name="l00105"></a><span class="lineno"><a class="line" href="classllvm_1_1MemorySSAAnnotatedWriter.html#a8019bff4ef14d1aa2e1709a104443d83">  105</a></span>&#160;  <a class="code" href="classllvm_1_1MemorySSAAnnotatedWriter.html#a8019bff4ef14d1aa2e1709a104443d83">MemorySSAAnnotatedWriter</a>(<span class="keyword">const</span> <a class="code" href="classllvm_1_1MemorySSA.html">MemorySSA</a> *M) : MSSA(M) {}</div><div class="line"><a name="l00106"></a><span class="lineno">  106</span>&#160;</div><div class="line"><a name="l00107"></a><span class="lineno"><a class="line" href="classllvm_1_1MemorySSAAnnotatedWriter.html#a8210b54309657bacb22a234653915034">  107</a></span>&#160;  <span class="keywordtype">void</span> <a class="code" href="classllvm_1_1MemorySSAAnnotatedWriter.html#a8210b54309657bacb22a234653915034">emitBasicBlockStartAnnot</a>(<span class="keyword">const</span> <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *BB,</div><div class="line"><a name="l00108"></a><span class="lineno">  108</span>&#160;                                <a class="code" href="classllvm_1_1formatted__raw__ostream.html">formatted_raw_ostream</a> &amp;OS)<span class="keyword"> override </span>{</div><div class="line"><a name="l00109"></a><span class="lineno">  109</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1MemoryAccess.html">MemoryAccess</a> *MA = MSSA-&gt;<a class="code" href="classllvm_1_1MemorySSA.html#a4ece07ee1030856099726901d0eef81b">getMemoryAccess</a>(BB))</div><div class="line"><a name="l00110"></a><span class="lineno">  110</span>&#160;      OS &lt;&lt; <span class="stringliteral">&quot;; &quot;</span> &lt;&lt; *MA &lt;&lt; <span class="stringliteral">&quot;\n&quot;</span>;</div><div class="line"><a name="l00111"></a><span class="lineno">  111</span>&#160;  }</div><div class="line"><a name="l00112"></a><span class="lineno">  112</span>&#160;</div><div class="line"><a name="l00113"></a><span class="lineno"><a class="line" href="classllvm_1_1MemorySSAAnnotatedWriter.html#aea8032b507b431428616174afe3588ae">  113</a></span>&#160;  <span class="keywordtype">void</span> <a class="code" href="classllvm_1_1MemorySSAAnnotatedWriter.html#aea8032b507b431428616174afe3588ae">emitInstructionAnnot</a>(<span class="keyword">const</span> <a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>,</div><div class="line"><a name="l00114"></a><span class="lineno">  114</span>&#160;                            <a class="code" href="classllvm_1_1formatted__raw__ostream.html">formatted_raw_ostream</a> &amp;OS)<span class="keyword"> override </span>{</div><div class="line"><a name="l00115"></a><span class="lineno">  115</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1MemoryAccess.html">MemoryAccess</a> *MA = MSSA-&gt;<a class="code" href="classllvm_1_1MemorySSA.html#a4ece07ee1030856099726901d0eef81b">getMemoryAccess</a>(I))</div><div class="line"><a name="l00116"></a><span class="lineno">  116</span>&#160;      OS &lt;&lt; <span class="stringliteral">&quot;; &quot;</span> &lt;&lt; *MA &lt;&lt; <span class="stringliteral">&quot;\n&quot;</span>;</div><div class="line"><a name="l00117"></a><span class="lineno">  117</span>&#160;  }</div><div class="line"><a name="l00118"></a><span class="lineno">  118</span>&#160;};</div><div class="line"><a name="l00119"></a><span class="lineno">  119</span>&#160;</div><div class="line"><a name="l00120"></a><span class="lineno">  120</span>&#160;} <span class="comment">// end namespace llvm</span></div><div class="line"><a name="l00121"></a><span class="lineno">  121</span>&#160;</div><div class="line"><a name="l00122"></a><span class="lineno">  122</span>&#160;<span class="keyword">namespace </span>{</div><div class="line"><a name="l00123"></a><span class="lineno">  123</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00124"></a><span class="lineno">  124</span>&#160;<span class="comment">/// Our current alias analysis API differentiates heavily between calls and</span></div><div class="line"><a name="l00125"></a><span class="lineno">  125</span>&#160;<span class="comment">/// non-calls, and functions called on one usually assert on the other.</span></div><div class="line"><a name="l00126"></a><span class="lineno">  126</span>&#160;<span class="comment">/// This class encapsulates the distinction to simplify other code that wants</span></div><div class="line"><a name="l00127"></a><span class="lineno">  127</span>&#160;<span class="comment">/// &quot;Memory affecting instructions and related data&quot; to use as a key.</span></div><div class="line"><a name="l00128"></a><span class="lineno">  128</span>&#160;<span class="comment">/// For example, this class is used as a densemap key in the use optimizer.</span></div><div class="line"><a name="l00129"></a><span class="lineno">  129</span>&#160;<span class="comment"></span><span class="keyword">class </span>MemoryLocOrCall {</div><div class="line"><a name="l00130"></a><span class="lineno">  130</span>&#160;<span class="keyword">public</span>:</div><div class="line"><a name="l00131"></a><span class="lineno">  131</span>&#160;  <span class="keywordtype">bool</span> IsCall = <span class="keyword">false</span>;</div><div class="line"><a name="l00132"></a><span class="lineno">  132</span>&#160;</div><div class="line"><a name="l00133"></a><span class="lineno">  133</span>&#160;  MemoryLocOrCall(<a class="code" href="classllvm_1_1MemoryUseOrDef.html">MemoryUseOrDef</a> *MUD)</div><div class="line"><a name="l00134"></a><span class="lineno">  134</span>&#160;      : MemoryLocOrCall(MUD-&gt;<a class="code" href="classllvm_1_1MemoryUseOrDef.html#a1111232011a32357ce2f84d3a633597c">getMemoryInst</a>()) {}</div><div class="line"><a name="l00135"></a><span class="lineno">  135</span>&#160;  MemoryLocOrCall(<span class="keyword">const</span> <a class="code" href="classllvm_1_1MemoryUseOrDef.html">MemoryUseOrDef</a> *MUD)</div><div class="line"><a name="l00136"></a><span class="lineno">  136</span>&#160;      : MemoryLocOrCall(MUD-&gt;<a class="code" href="classllvm_1_1MemoryUseOrDef.html#a1111232011a32357ce2f84d3a633597c">getMemoryInst</a>()) {}</div><div class="line"><a name="l00137"></a><span class="lineno">  137</span>&#160;</div><div class="line"><a name="l00138"></a><span class="lineno">  138</span>&#160;  MemoryLocOrCall(<a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *Inst) {</div><div class="line"><a name="l00139"></a><span class="lineno">  139</span>&#160;    <span class="keywordflow">if</span> (<span class="keyword">auto</span> *<a class="code" href="NVVMIntrRange_8cpp.html#a2ae53ee71b2ccbb52b883c0b4f59f8c2">C</a> = dyn_cast&lt;CallBase&gt;(Inst)) {</div><div class="line"><a name="l00140"></a><span class="lineno">  140</span>&#160;      IsCall = <span class="keyword">true</span>;</div><div class="line"><a name="l00141"></a><span class="lineno">  141</span>&#160;      Call = <a class="code" href="NVVMIntrRange_8cpp.html#a2ae53ee71b2ccbb52b883c0b4f59f8c2">C</a>;</div><div class="line"><a name="l00142"></a><span class="lineno">  142</span>&#160;    } <span class="keywordflow">else</span> {</div><div class="line"><a name="l00143"></a><span class="lineno">  143</span>&#160;      IsCall = <span class="keyword">false</span>;</div><div class="line"><a name="l00144"></a><span class="lineno">  144</span>&#160;      <span class="comment">// There is no such thing as a memorylocation for a fence inst, and it is</span></div><div class="line"><a name="l00145"></a><span class="lineno">  145</span>&#160;      <span class="comment">// unique in that regard.</span></div><div class="line"><a name="l00146"></a><span class="lineno">  146</span>&#160;      <span class="keywordflow">if</span> (!isa&lt;FenceInst&gt;(Inst))</div><div class="line"><a name="l00147"></a><span class="lineno">  147</span>&#160;        Loc = <a class="code" href="classllvm_1_1MemoryLocation.html#a18e5a3f1d71ba10a624f2a8e5121cf1f">MemoryLocation::get</a>(Inst);</div><div class="line"><a name="l00148"></a><span class="lineno">  148</span>&#160;    }</div><div class="line"><a name="l00149"></a><span class="lineno">  149</span>&#160;  }</div><div class="line"><a name="l00150"></a><span class="lineno">  150</span>&#160;</div><div class="line"><a name="l00151"></a><span class="lineno">  151</span>&#160;  <span class="keyword">explicit</span> MemoryLocOrCall(<span class="keyword">const</span> <a class="code" href="classllvm_1_1MemoryLocation.html">MemoryLocation</a> &amp;Loc) : Loc(Loc) {}</div><div class="line"><a name="l00152"></a><span class="lineno">  152</span>&#160;</div><div class="line"><a name="l00153"></a><span class="lineno">  153</span>&#160;  <span class="keyword">const</span> <a class="code" href="classllvm_1_1CallBase.html">CallBase</a> *getCall()<span class="keyword"> const </span>{</div><div class="line"><a name="l00154"></a><span class="lineno">  154</span>&#160;    <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(IsCall);</div><div class="line"><a name="l00155"></a><span class="lineno">  155</span>&#160;    <span class="keywordflow">return</span> Call;</div><div class="line"><a name="l00156"></a><span class="lineno">  156</span>&#160;  }</div><div class="line"><a name="l00157"></a><span class="lineno">  157</span>&#160;</div><div class="line"><a name="l00158"></a><span class="lineno">  158</span>&#160;  <a class="code" href="classllvm_1_1MemoryLocation.html">MemoryLocation</a> getLoc()<span class="keyword"> const </span>{</div><div class="line"><a name="l00159"></a><span class="lineno">  159</span>&#160;    <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(!IsCall);</div><div class="line"><a name="l00160"></a><span class="lineno">  160</span>&#160;    <span class="keywordflow">return</span> Loc;</div><div class="line"><a name="l00161"></a><span class="lineno">  161</span>&#160;  }</div><div class="line"><a name="l00162"></a><span class="lineno">  162</span>&#160;</div><div class="line"><a name="l00163"></a><span class="lineno">  163</span>&#160;  <span class="keywordtype">bool</span> <a class="code" href="namespacellvm.html#a162c90bc179a6359438d060722bee35f">operator==</a>(<span class="keyword">const</span> MemoryLocOrCall &amp;<a class="code" href="namespacellvm.html#aec7c967a5416fa6e154433965357a50ea6311ae17c1ee52b36e68aaf4ad066387">Other</a>)<span class="keyword"> const </span>{</div><div class="line"><a name="l00164"></a><span class="lineno">  164</span>&#160;    <span class="keywordflow">if</span> (IsCall != Other.IsCall)</div><div class="line"><a name="l00165"></a><span class="lineno">  165</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">false</span>;</div><div class="line"><a name="l00166"></a><span class="lineno">  166</span>&#160;</div><div class="line"><a name="l00167"></a><span class="lineno">  167</span>&#160;    <span class="keywordflow">if</span> (!IsCall)</div><div class="line"><a name="l00168"></a><span class="lineno">  168</span>&#160;      <span class="keywordflow">return</span> Loc == Other.Loc;</div><div class="line"><a name="l00169"></a><span class="lineno">  169</span>&#160;</div><div class="line"><a name="l00170"></a><span class="lineno">  170</span>&#160;    <span class="keywordflow">if</span> (Call-&gt;getCalledValue() != Other.Call-&gt;getCalledValue())</div><div class="line"><a name="l00171"></a><span class="lineno">  171</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">false</span>;</div><div class="line"><a name="l00172"></a><span class="lineno">  172</span>&#160;</div><div class="line"><a name="l00173"></a><span class="lineno">  173</span>&#160;    <span class="keywordflow">return</span> Call-&gt;arg_size() == Other.Call-&gt;arg_size() &amp;&amp;</div><div class="line"><a name="l00174"></a><span class="lineno">  174</span>&#160;           <a class="code" href="namespacellvm_1_1lltok.html#af353621f14cb4b4b3af5ffaff84076b1abf5ba3ee47e95dae362eb24b6d4f48e5">std::equal</a>(Call-&gt;arg_begin(), Call-&gt;arg_end(),</div><div class="line"><a name="l00175"></a><span class="lineno">  175</span>&#160;                      Other.Call-&gt;arg_begin());</div><div class="line"><a name="l00176"></a><span class="lineno">  176</span>&#160;  }</div><div class="line"><a name="l00177"></a><span class="lineno">  177</span>&#160;</div><div class="line"><a name="l00178"></a><span class="lineno">  178</span>&#160;<span class="keyword">private</span>:</div><div class="line"><a name="l00179"></a><span class="lineno">  179</span>&#160;  <span class="keyword">union </span>{</div><div class="line"><a name="l00180"></a><span class="lineno">  180</span>&#160;    <span class="keyword">const</span> <a class="code" href="classllvm_1_1CallBase.html">CallBase</a> *Call;</div><div class="line"><a name="l00181"></a><span class="lineno">  181</span>&#160;    <a class="code" href="classllvm_1_1MemoryLocation.html">MemoryLocation</a> Loc;</div><div class="line"><a name="l00182"></a><span class="lineno">  182</span>&#160;  };</div><div class="line"><a name="l00183"></a><span class="lineno">  183</span>&#160;};</div><div class="line"><a name="l00184"></a><span class="lineno">  184</span>&#160;</div><div class="line"><a name="l00185"></a><span class="lineno">  185</span>&#160;} <span class="comment">// end anonymous namespace</span></div><div class="line"><a name="l00186"></a><span class="lineno">  186</span>&#160;</div><div class="line"><a name="l00187"></a><span class="lineno">  187</span>&#160;<span class="keyword">namespace </span><a class="code" href="namespacellvm.html">llvm</a> {</div><div class="line"><a name="l00188"></a><span class="lineno">  188</span>&#160;</div><div class="line"><a name="l00189"></a><span class="lineno"><a class="line" href="structllvm_1_1DenseMapInfo_3_01MemoryLocOrCall_01_4.html">  189</a></span>&#160;<span class="keyword">template</span> &lt;&gt; <span class="keyword">struct </span><a class="code" href="structllvm_1_1DenseMapInfo.html">DenseMapInfo</a>&lt;MemoryLocOrCall&gt; {</div><div class="line"><a name="l00190"></a><span class="lineno"><a class="line" href="structllvm_1_1DenseMapInfo_3_01MemoryLocOrCall_01_4.html#ac9f27c5f4b485fa4c3101856d82d40bc">  190</a></span>&#160;  <span class="keyword">static</span> <span class="keyword">inline</span> MemoryLocOrCall <a class="code" href="structllvm_1_1DenseMapInfo_3_01MemoryLocOrCall_01_4.html#ac9f27c5f4b485fa4c3101856d82d40bc">getEmptyKey</a>() {</div><div class="line"><a name="l00191"></a><span class="lineno">  191</span>&#160;    <span class="keywordflow">return</span> MemoryLocOrCall(<a class="code" href="structllvm_1_1DenseMapInfo.html">DenseMapInfo&lt;MemoryLocation&gt;::getEmptyKey</a>());</div><div class="line"><a name="l00192"></a><span class="lineno">  192</span>&#160;  }</div><div class="line"><a name="l00193"></a><span class="lineno">  193</span>&#160;</div><div class="line"><a name="l00194"></a><span class="lineno"><a class="line" href="structllvm_1_1DenseMapInfo_3_01MemoryLocOrCall_01_4.html#afeeee37d51ca9e41d7ef8d85fc47e807">  194</a></span>&#160;  <span class="keyword">static</span> <span class="keyword">inline</span> MemoryLocOrCall <a class="code" href="structllvm_1_1DenseMapInfo_3_01MemoryLocOrCall_01_4.html#afeeee37d51ca9e41d7ef8d85fc47e807">getTombstoneKey</a>() {</div><div class="line"><a name="l00195"></a><span class="lineno">  195</span>&#160;    <span class="keywordflow">return</span> MemoryLocOrCall(<a class="code" href="structllvm_1_1DenseMapInfo.html">DenseMapInfo&lt;MemoryLocation&gt;::getTombstoneKey</a>());</div><div class="line"><a name="l00196"></a><span class="lineno">  196</span>&#160;  }</div><div class="line"><a name="l00197"></a><span class="lineno">  197</span>&#160;</div><div class="line"><a name="l00198"></a><span class="lineno"><a class="line" href="structllvm_1_1DenseMapInfo_3_01MemoryLocOrCall_01_4.html#a8067c360f88c5012f1ffebb342f72d36">  198</a></span>&#160;  <span class="keyword">static</span> <span class="keywordtype">unsigned</span> <a class="code" href="structllvm_1_1DenseMapInfo_3_01MemoryLocOrCall_01_4.html#a8067c360f88c5012f1ffebb342f72d36">getHashValue</a>(<span class="keyword">const</span> MemoryLocOrCall &amp;MLOC) {</div><div class="line"><a name="l00199"></a><span class="lineno">  199</span>&#160;    <span class="keywordflow">if</span> (!MLOC.IsCall)</div><div class="line"><a name="l00200"></a><span class="lineno">  200</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="namespacellvm.html#add71474638430694c84640146383fc44">hash_combine</a>(</div><div class="line"><a name="l00201"></a><span class="lineno">  201</span>&#160;          MLOC.IsCall,</div><div class="line"><a name="l00202"></a><span class="lineno">  202</span>&#160;          <a class="code" href="structllvm_1_1DenseMapInfo.html">DenseMapInfo&lt;MemoryLocation&gt;::getHashValue</a>(MLOC.getLoc()));</div><div class="line"><a name="l00203"></a><span class="lineno">  203</span>&#160;</div><div class="line"><a name="l00204"></a><span class="lineno">  204</span>&#160;    <a class="code" href="classllvm_1_1hash__code.html">hash_code</a> hash =</div><div class="line"><a name="l00205"></a><span class="lineno">  205</span>&#160;        <a class="code" href="namespacellvm.html#add71474638430694c84640146383fc44">hash_combine</a>(MLOC.IsCall, <a class="code" href="structllvm_1_1DenseMapInfo.html">DenseMapInfo&lt;const Value *&gt;::getHashValue</a>(</div><div class="line"><a name="l00206"></a><span class="lineno">  206</span>&#160;                                      MLOC.getCall()-&gt;getCalledValue()));</div><div class="line"><a name="l00207"></a><span class="lineno">  207</span>&#160;</div><div class="line"><a name="l00208"></a><span class="lineno">  208</span>&#160;    <span class="keywordflow">for</span> (<span class="keyword">const</span> <a class="code" href="classllvm_1_1Value.html">Value</a> *<a class="code" href="AMDGPULibCalls_8cpp.html#afecf1cc1292b07f57d343c0f4d682044">Arg</a> : MLOC.getCall()-&gt;args())</div><div class="line"><a name="l00209"></a><span class="lineno">  209</span>&#160;      hash = <a class="code" href="namespacellvm.html#add71474638430694c84640146383fc44">hash_combine</a>(hash, <a class="code" href="structllvm_1_1DenseMapInfo.html">DenseMapInfo&lt;const Value *&gt;::getHashValue</a>(<a class="code" href="AMDGPULibCalls_8cpp.html#afecf1cc1292b07f57d343c0f4d682044">Arg</a>));</div><div class="line"><a name="l00210"></a><span class="lineno">  210</span>&#160;    <span class="keywordflow">return</span> hash;</div><div class="line"><a name="l00211"></a><span class="lineno">  211</span>&#160;  }</div><div class="line"><a name="l00212"></a><span class="lineno">  212</span>&#160;</div><div class="line"><a name="l00213"></a><span class="lineno"><a class="line" href="structllvm_1_1DenseMapInfo_3_01MemoryLocOrCall_01_4.html#a1aaef96a9b5ebb2c88c4001393744f9e">  213</a></span>&#160;  <span class="keyword">static</span> <span class="keywordtype">bool</span> <a class="code" href="structllvm_1_1DenseMapInfo_3_01MemoryLocOrCall_01_4.html#a1aaef96a9b5ebb2c88c4001393744f9e">isEqual</a>(<span class="keyword">const</span> MemoryLocOrCall &amp;LHS, <span class="keyword">const</span> MemoryLocOrCall &amp;RHS) {</div><div class="line"><a name="l00214"></a><span class="lineno">  214</span>&#160;    <span class="keywordflow">return</span> LHS == RHS;</div><div class="line"><a name="l00215"></a><span class="lineno">  215</span>&#160;  }</div><div class="line"><a name="l00216"></a><span class="lineno">  216</span>&#160;};</div><div class="line"><a name="l00217"></a><span class="lineno">  217</span>&#160;</div><div class="line"><a name="l00218"></a><span class="lineno">  218</span>&#160;} <span class="comment">// end namespace llvm</span></div><div class="line"><a name="l00219"></a><span class="lineno">  219</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00220"></a><span class="lineno">  220</span>&#160;<span class="comment">/// This does one-way checks to see if Use could theoretically be hoisted above</span></div><div class="line"><a name="l00221"></a><span class="lineno">  221</span>&#160;<span class="comment">/// MayClobber. This will not check the other way around.</span></div><div class="line"><a name="l00222"></a><span class="lineno">  222</span>&#160;<span class="comment">///</span></div><div class="line"><a name="l00223"></a><span class="lineno">  223</span>&#160;<span class="comment">/// This assumes that, for the purposes of MemorySSA, Use comes directly after</span></div><div class="line"><a name="l00224"></a><span class="lineno">  224</span>&#160;<span class="comment">/// MayClobber, with no potentially clobbering operations in between them.</span></div><div class="line"><a name="l00225"></a><span class="lineno">  225</span>&#160;<span class="comment">/// (Where potentially clobbering ops are memory barriers, aliased stores, etc.)</span></div><div class="line"><a name="l00226"></a><span class="lineno"><a class="line" href="MemorySSA_8cpp.html#ac01b3bf4dda9266ec05d70b2f55281fa">  226</a></span>&#160;<span class="comment"></span><span class="keyword">static</span> <span class="keywordtype">bool</span> <a class="code" href="MemorySSA_8cpp.html#ac01b3bf4dda9266ec05d70b2f55281fa">areLoadsReorderable</a>(<span class="keyword">const</span> <a class="code" href="classllvm_1_1LoadInst.html">LoadInst</a> *<a class="code" href="classllvm_1_1Use.html">Use</a>,</div><div class="line"><a name="l00227"></a><span class="lineno">  227</span>&#160;                                <span class="keyword">const</span> <a class="code" href="classllvm_1_1LoadInst.html">LoadInst</a> *MayClobber) {</div><div class="line"><a name="l00228"></a><span class="lineno">  228</span>&#160;  <span class="keywordtype">bool</span> VolatileUse = Use-&gt;<a class="code" href="classllvm_1_1LoadInst.html#a2eccc19f9061eeb7ad1e30e21f76034d">isVolatile</a>();</div><div class="line"><a name="l00229"></a><span class="lineno">  229</span>&#160;  <span class="keywordtype">bool</span> VolatileClobber = MayClobber-&gt;<a class="code" href="classllvm_1_1LoadInst.html#a2eccc19f9061eeb7ad1e30e21f76034d">isVolatile</a>();</div><div class="line"><a name="l00230"></a><span class="lineno">  230</span>&#160;  <span class="comment">// Volatile operations may never be reordered with other volatile operations.</span></div><div class="line"><a name="l00231"></a><span class="lineno">  231</span>&#160;  <span class="keywordflow">if</span> (VolatileUse &amp;&amp; VolatileClobber)</div><div class="line"><a name="l00232"></a><span class="lineno">  232</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div><div class="line"><a name="l00233"></a><span class="lineno">  233</span>&#160;  <span class="comment">// Otherwise, volatile doesn&#39;t matter here. From the language reference:</span></div><div class="line"><a name="l00234"></a><span class="lineno">  234</span>&#160;  <span class="comment">// &#39;optimizers may change the order of volatile operations relative to</span></div><div class="line"><a name="l00235"></a><span class="lineno">  235</span>&#160;  <span class="comment">// non-volatile operations.&#39;&quot;</span></div><div class="line"><a name="l00236"></a><span class="lineno">  236</span>&#160;</div><div class="line"><a name="l00237"></a><span class="lineno">  237</span>&#160;  <span class="comment">// If a load is seq_cst, it cannot be moved above other loads. If its ordering</span></div><div class="line"><a name="l00238"></a><span class="lineno">  238</span>&#160;  <span class="comment">// is weaker, it can be moved above other loads. We just need to be sure that</span></div><div class="line"><a name="l00239"></a><span class="lineno">  239</span>&#160;  <span class="comment">// MayClobber isn&#39;t an acquire load, because loads can&#39;t be moved above</span></div><div class="line"><a name="l00240"></a><span class="lineno">  240</span>&#160;  <span class="comment">// acquire loads.</span></div><div class="line"><a name="l00241"></a><span class="lineno">  241</span>&#160;  <span class="comment">//</span></div><div class="line"><a name="l00242"></a><span class="lineno">  242</span>&#160;  <span class="comment">// Note that this explicitly *does* allow the free reordering of monotonic (or</span></div><div class="line"><a name="l00243"></a><span class="lineno">  243</span>&#160;  <span class="comment">// weaker) loads of the same address.</span></div><div class="line"><a name="l00244"></a><span class="lineno">  244</span>&#160;  <span class="keywordtype">bool</span> SeqCstUse = Use-&gt;<a class="code" href="classllvm_1_1LoadInst.html#a93603fe0d4168b92a901f06015ecb2e7">getOrdering</a>() == <a class="code" href="namespacellvm.html#abf74b2f0dbae96f4708d3e407b36df02ae3b0fa849dbd758b450f98fcfde936a2">AtomicOrdering::SequentiallyConsistent</a>;</div><div class="line"><a name="l00245"></a><span class="lineno">  245</span>&#160;  <span class="keywordtype">bool</span> MayClobberIsAcquire = <a class="code" href="namespacellvm.html#a5c6e5b63f852936ab3bc22ccea11a52b">isAtLeastOrStrongerThan</a>(MayClobber-&gt;<a class="code" href="classllvm_1_1LoadInst.html#a93603fe0d4168b92a901f06015ecb2e7">getOrdering</a>(),</div><div class="line"><a name="l00246"></a><span class="lineno">  246</span>&#160;                                                     <a class="code" href="namespacellvm.html#abf74b2f0dbae96f4708d3e407b36df02a993ca650a85e8e69b8f7eaa4809c4862">AtomicOrdering::Acquire</a>);</div><div class="line"><a name="l00247"></a><span class="lineno">  247</span>&#160;  <span class="keywordflow">return</span> !(SeqCstUse || MayClobberIsAcquire);</div><div class="line"><a name="l00248"></a><span class="lineno">  248</span>&#160;}</div><div class="line"><a name="l00249"></a><span class="lineno">  249</span>&#160;</div><div class="line"><a name="l00250"></a><span class="lineno">  250</span>&#160;<span class="keyword">namespace </span>{</div><div class="line"><a name="l00251"></a><span class="lineno">  251</span>&#160;</div><div class="line"><a name="l00252"></a><span class="lineno">  252</span>&#160;<span class="keyword">struct </span>ClobberAlias {</div><div class="line"><a name="l00253"></a><span class="lineno">  253</span>&#160;  <span class="keywordtype">bool</span> IsClobber;</div><div class="line"><a name="l00254"></a><span class="lineno">  254</span>&#160;  <a class="code" href="classllvm_1_1Optional.html">Optional&lt;AliasResult&gt;</a> AR;</div><div class="line"><a name="l00255"></a><span class="lineno">  255</span>&#160;};</div><div class="line"><a name="l00256"></a><span class="lineno">  256</span>&#160;</div><div class="line"><a name="l00257"></a><span class="lineno">  257</span>&#160;} <span class="comment">// end anonymous namespace</span></div><div class="line"><a name="l00258"></a><span class="lineno">  258</span>&#160;</div><div class="line"><a name="l00259"></a><span class="lineno">  259</span>&#160;<span class="comment">// Return a pair of {IsClobber (bool), AR (AliasResult)}. It relies on AR being</span></div><div class="line"><a name="l00260"></a><span class="lineno">  260</span>&#160;<span class="comment">// ignored if IsClobber = false.</span></div><div class="line"><a name="l00261"></a><span class="lineno">  261</span>&#160;<span class="keyword">template</span> &lt;<span class="keyword">typename</span> AliasAnalysisType&gt;</div><div class="line"><a name="l00262"></a><span class="lineno">  262</span>&#160;<span class="keyword">static</span> ClobberAlias</div><div class="line"><a name="l00263"></a><span class="lineno"><a class="line" href="MemorySSA_8cpp.html#a8b72a05b68fd9ce0a18e753d1c99c807">  263</a></span>&#160;<a class="code" href="MemorySSA_8cpp.html#a8b72a05b68fd9ce0a18e753d1c99c807">instructionClobbersQuery</a>(<span class="keyword">const</span> <a class="code" href="classllvm_1_1MemoryDef.html">MemoryDef</a> *MD, <span class="keyword">const</span> <a class="code" href="classllvm_1_1MemoryLocation.html">MemoryLocation</a> &amp;UseLoc,</div><div class="line"><a name="l00264"></a><span class="lineno">  264</span>&#160;                         <span class="keyword">const</span> <a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *UseInst, AliasAnalysisType &amp;AA) {</div><div class="line"><a name="l00265"></a><span class="lineno">  265</span>&#160;  <a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *DefInst = MD-&gt;<a class="code" href="classllvm_1_1MemoryUseOrDef.html#a1111232011a32357ce2f84d3a633597c">getMemoryInst</a>();</div><div class="line"><a name="l00266"></a><span class="lineno">  266</span>&#160;  <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(DefInst &amp;&amp; <span class="stringliteral">&quot;Defining instruction not actually an instruction&quot;</span>);</div><div class="line"><a name="l00267"></a><span class="lineno">  267</span>&#160;  <span class="keyword">const</span> <span class="keyword">auto</span> *UseCall = <a class="code" href="namespacellvm.html#a4db2f71d62968b2be3c4bffc5050d8c7">dyn_cast</a>&lt;<a class="code" href="classllvm_1_1CallBase.html">CallBase</a>&gt;(UseInst);</div><div class="line"><a name="l00268"></a><span class="lineno">  268</span>&#160;  <a class="code" href="classllvm_1_1Optional.html">Optional&lt;AliasResult&gt;</a> AR;</div><div class="line"><a name="l00269"></a><span class="lineno">  269</span>&#160;</div><div class="line"><a name="l00270"></a><span class="lineno">  270</span>&#160;  <span class="keywordflow">if</span> (<span class="keyword">const</span> <a class="code" href="classllvm_1_1IntrinsicInst.html">IntrinsicInst</a> *II = dyn_cast&lt;IntrinsicInst&gt;(DefInst)) {</div><div class="line"><a name="l00271"></a><span class="lineno">  271</span>&#160;    <span class="comment">// These intrinsics will show up as affecting memory, but they are just</span></div><div class="line"><a name="l00272"></a><span class="lineno">  272</span>&#160;    <span class="comment">// markers, mostly.</span></div><div class="line"><a name="l00273"></a><span class="lineno">  273</span>&#160;    <span class="comment">//</span></div><div class="line"><a name="l00274"></a><span class="lineno">  274</span>&#160;    <span class="comment">// FIXME: We probably don&#39;t actually want MemorySSA to model these at all</span></div><div class="line"><a name="l00275"></a><span class="lineno">  275</span>&#160;    <span class="comment">// (including creating MemoryAccesses for them): we just end up inventing</span></div><div class="line"><a name="l00276"></a><span class="lineno">  276</span>&#160;    <span class="comment">// clobbers where they don&#39;t really exist at all. Please see D43269 for</span></div><div class="line"><a name="l00277"></a><span class="lineno">  277</span>&#160;    <span class="comment">// context.</span></div><div class="line"><a name="l00278"></a><span class="lineno">  278</span>&#160;    <span class="keywordflow">switch</span> (II-&gt;getIntrinsicID()) {</div><div class="line"><a name="l00279"></a><span class="lineno">  279</span>&#160;    <span class="keywordflow">case</span> Intrinsic::lifetime_start:</div><div class="line"><a name="l00280"></a><span class="lineno">  280</span>&#160;      <span class="keywordflow">if</span> (UseCall)</div><div class="line"><a name="l00281"></a><span class="lineno">  281</span>&#160;        <span class="keywordflow">return</span> {<span class="keyword">false</span>, <a class="code" href="namespacellvm.html#ae1738272abcf2ac638b97e7dc6360cfda4ba4d961209b5565d6197be0423cbe12">NoAlias</a>};</div><div class="line"><a name="l00282"></a><span class="lineno">  282</span>&#160;      AR = AA.alias(<a class="code" href="classllvm_1_1MemoryLocation.html">MemoryLocation</a>(II-&gt;getArgOperand(1)), UseLoc);</div><div class="line"><a name="l00283"></a><span class="lineno">  283</span>&#160;      <span class="keywordflow">return</span> {AR != <a class="code" href="namespacellvm.html#ae1738272abcf2ac638b97e7dc6360cfda4ba4d961209b5565d6197be0423cbe12">NoAlias</a>, AR};</div><div class="line"><a name="l00284"></a><span class="lineno">  284</span>&#160;    <span class="keywordflow">case</span> Intrinsic::lifetime_end:</div><div class="line"><a name="l00285"></a><span class="lineno">  285</span>&#160;    <span class="keywordflow">case</span> Intrinsic::invariant_start:</div><div class="line"><a name="l00286"></a><span class="lineno">  286</span>&#160;    <span class="keywordflow">case</span> Intrinsic::invariant_end:</div><div class="line"><a name="l00287"></a><span class="lineno">  287</span>&#160;    <span class="keywordflow">case</span> Intrinsic::assume:</div><div class="line"><a name="l00288"></a><span class="lineno">  288</span>&#160;      <span class="keywordflow">return</span> {<span class="keyword">false</span>, <a class="code" href="namespacellvm.html#ae1738272abcf2ac638b97e7dc6360cfda4ba4d961209b5565d6197be0423cbe12">NoAlias</a>};</div><div class="line"><a name="l00289"></a><span class="lineno">  289</span>&#160;    <span class="keywordflow">case</span> Intrinsic::dbg_addr:</div><div class="line"><a name="l00290"></a><span class="lineno">  290</span>&#160;    <span class="keywordflow">case</span> Intrinsic::dbg_declare:</div><div class="line"><a name="l00291"></a><span class="lineno">  291</span>&#160;    <span class="keywordflow">case</span> Intrinsic::dbg_label:</div><div class="line"><a name="l00292"></a><span class="lineno">  292</span>&#160;    <span class="keywordflow">case</span> Intrinsic::dbg_value:</div><div class="line"><a name="l00293"></a><span class="lineno">  293</span>&#160;      <a class="code" href="Support_2ErrorHandling_8h.html#ace243f5c25697a1107cce46626b3dc94">llvm_unreachable</a>(<span class="stringliteral">&quot;debuginfo shouldn&#39;t have associated defs!&quot;</span>);</div><div class="line"><a name="l00294"></a><span class="lineno">  294</span>&#160;    <span class="keywordflow">default</span>:</div><div class="line"><a name="l00295"></a><span class="lineno">  295</span>&#160;      <span class="keywordflow">break</span>;</div><div class="line"><a name="l00296"></a><span class="lineno">  296</span>&#160;    }</div><div class="line"><a name="l00297"></a><span class="lineno">  297</span>&#160;  }</div><div class="line"><a name="l00298"></a><span class="lineno">  298</span>&#160;</div><div class="line"><a name="l00299"></a><span class="lineno">  299</span>&#160;  <span class="keywordflow">if</span> (UseCall) {</div><div class="line"><a name="l00300"></a><span class="lineno">  300</span>&#160;    <a class="code" href="namespacellvm.html#a9db8c44b250b90e3ab7e4d144e7c9c2e">ModRefInfo</a> <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> = AA.getModRefInfo(DefInst, UseCall);</div><div class="line"><a name="l00301"></a><span class="lineno">  301</span>&#160;    AR = <a class="code" href="namespacellvm.html#a1e04c366840be500baf40acb465e591a">isMustSet</a>(I) ? <a class="code" href="namespacellvm.html#ae1738272abcf2ac638b97e7dc6360cfda96e73e8d9d3af47453d4d562f9be0b44">MustAlias</a> : <a class="code" href="namespacellvm.html#ae1738272abcf2ac638b97e7dc6360cfdafb69d5dfee1598378741360198a1ba8e">MayAlias</a>;</div><div class="line"><a name="l00302"></a><span class="lineno">  302</span>&#160;    <span class="keywordflow">return</span> {<a class="code" href="namespacellvm.html#a2f81ab96a7d9ad549a147782acd98cb1">isModOrRefSet</a>(I), AR};</div><div class="line"><a name="l00303"></a><span class="lineno">  303</span>&#160;  }</div><div class="line"><a name="l00304"></a><span class="lineno">  304</span>&#160;</div><div class="line"><a name="l00305"></a><span class="lineno">  305</span>&#160;  <span class="keywordflow">if</span> (<span class="keyword">auto</span> *DefLoad = dyn_cast&lt;LoadInst&gt;(DefInst))</div><div class="line"><a name="l00306"></a><span class="lineno">  306</span>&#160;    <span class="keywordflow">if</span> (<span class="keyword">auto</span> *UseLoad = dyn_cast&lt;LoadInst&gt;(UseInst))</div><div class="line"><a name="l00307"></a><span class="lineno">  307</span>&#160;      <span class="keywordflow">return</span> {!<a class="code" href="MemorySSA_8cpp.html#ac01b3bf4dda9266ec05d70b2f55281fa">areLoadsReorderable</a>(UseLoad, DefLoad), <a class="code" href="namespacellvm.html#ae1738272abcf2ac638b97e7dc6360cfdafb69d5dfee1598378741360198a1ba8e">MayAlias</a>};</div><div class="line"><a name="l00308"></a><span class="lineno">  308</span>&#160;</div><div class="line"><a name="l00309"></a><span class="lineno">  309</span>&#160;  <a class="code" href="namespacellvm.html#a9db8c44b250b90e3ab7e4d144e7c9c2e">ModRefInfo</a> <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> = AA.getModRefInfo(DefInst, UseLoc);</div><div class="line"><a name="l00310"></a><span class="lineno">  310</span>&#160;  AR = <a class="code" href="namespacellvm.html#a1e04c366840be500baf40acb465e591a">isMustSet</a>(I) ? <a class="code" href="namespacellvm.html#ae1738272abcf2ac638b97e7dc6360cfda96e73e8d9d3af47453d4d562f9be0b44">MustAlias</a> : <a class="code" href="namespacellvm.html#ae1738272abcf2ac638b97e7dc6360cfdafb69d5dfee1598378741360198a1ba8e">MayAlias</a>;</div><div class="line"><a name="l00311"></a><span class="lineno">  311</span>&#160;  <span class="keywordflow">return</span> {<a class="code" href="namespacellvm.html#a9c9d20fe1eea1c539518762e7d822d69">isModSet</a>(I), AR};</div><div class="line"><a name="l00312"></a><span class="lineno">  312</span>&#160;}</div><div class="line"><a name="l00313"></a><span class="lineno">  313</span>&#160;</div><div class="line"><a name="l00314"></a><span class="lineno">  314</span>&#160;<span class="keyword">template</span> &lt;<span class="keyword">typename</span> AliasAnalysisType&gt;</div><div class="line"><a name="l00315"></a><span class="lineno"><a class="line" href="MemorySSA_8cpp.html#a71c4b720f6f348c4c94c61e56dadcd4f">  315</a></span>&#160;<span class="keyword">static</span> ClobberAlias <a class="code" href="MemorySSA_8cpp.html#a8b72a05b68fd9ce0a18e753d1c99c807">instructionClobbersQuery</a>(<a class="code" href="classllvm_1_1MemoryDef.html">MemoryDef</a> *MD,</div><div class="line"><a name="l00316"></a><span class="lineno">  316</span>&#160;                                             <span class="keyword">const</span> <a class="code" href="classllvm_1_1MemoryUseOrDef.html">MemoryUseOrDef</a> *MU,</div><div class="line"><a name="l00317"></a><span class="lineno">  317</span>&#160;                                             <span class="keyword">const</span> MemoryLocOrCall &amp;UseMLOC,</div><div class="line"><a name="l00318"></a><span class="lineno">  318</span>&#160;                                             AliasAnalysisType &amp;AA) {</div><div class="line"><a name="l00319"></a><span class="lineno">  319</span>&#160;  <span class="comment">// FIXME: This is a temporary hack to allow a single instructionClobbersQuery</span></div><div class="line"><a name="l00320"></a><span class="lineno">  320</span>&#160;  <span class="comment">// to exist while MemoryLocOrCall is pushed through places.</span></div><div class="line"><a name="l00321"></a><span class="lineno">  321</span>&#160;  <span class="keywordflow">if</span> (UseMLOC.IsCall)</div><div class="line"><a name="l00322"></a><span class="lineno">  322</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="MemorySSA_8cpp.html#a8b72a05b68fd9ce0a18e753d1c99c807">instructionClobbersQuery</a>(MD, <a class="code" href="classllvm_1_1MemoryLocation.html">MemoryLocation</a>(), MU-&gt;<a class="code" href="classllvm_1_1MemoryUseOrDef.html#a1111232011a32357ce2f84d3a633597c">getMemoryInst</a>(),</div><div class="line"><a name="l00323"></a><span class="lineno">  323</span>&#160;                                    AA);</div><div class="line"><a name="l00324"></a><span class="lineno">  324</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="MemorySSA_8cpp.html#a8b72a05b68fd9ce0a18e753d1c99c807">instructionClobbersQuery</a>(MD, UseMLOC.getLoc(), MU-&gt;<a class="code" href="classllvm_1_1MemoryUseOrDef.html#a1111232011a32357ce2f84d3a633597c">getMemoryInst</a>(),</div><div class="line"><a name="l00325"></a><span class="lineno">  325</span>&#160;                                  AA);</div><div class="line"><a name="l00326"></a><span class="lineno">  326</span>&#160;}</div><div class="line"><a name="l00327"></a><span class="lineno">  327</span>&#160;</div><div class="line"><a name="l00328"></a><span class="lineno">  328</span>&#160;<span class="comment">// Return true when MD may alias MU, return false otherwise.</span></div><div class="line"><a name="l00329"></a><span class="lineno"><a class="line" href="classllvm_1_1MemorySSAUtil.html#ac6b2e834ecda34d360b905083ad6b37e">  329</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="classllvm_1_1MemorySSAUtil.html#ac6b2e834ecda34d360b905083ad6b37e">MemorySSAUtil::defClobbersUseOrDef</a>(<a class="code" href="classllvm_1_1MemoryDef.html">MemoryDef</a> *MD, <span class="keyword">const</span> <a class="code" href="classllvm_1_1MemoryUseOrDef.html">MemoryUseOrDef</a> *MU,</div><div class="line"><a name="l00330"></a><span class="lineno">  330</span>&#160;                                        <a class="code" href="classllvm_1_1AAResults.html">AliasAnalysis</a> &amp;AA) {</div><div class="line"><a name="l00331"></a><span class="lineno">  331</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="MemorySSA_8cpp.html#a8b72a05b68fd9ce0a18e753d1c99c807">instructionClobbersQuery</a>(MD, MU, MemoryLocOrCall(MU), AA).IsClobber;</div><div class="line"><a name="l00332"></a><span class="lineno">  332</span>&#160;}</div><div class="line"><a name="l00333"></a><span class="lineno">  333</span>&#160;</div><div class="line"><a name="l00334"></a><span class="lineno">  334</span>&#160;<span class="keyword">namespace </span>{</div><div class="line"><a name="l00335"></a><span class="lineno">  335</span>&#160;</div><div class="line"><a name="l00336"></a><span class="lineno">  336</span>&#160;<span class="keyword">struct </span>UpwardsMemoryQuery {</div><div class="line"><a name="l00337"></a><span class="lineno">  337</span>&#160;  <span class="comment">// True if our original query started off as a call</span></div><div class="line"><a name="l00338"></a><span class="lineno">  338</span>&#160;  <span class="keywordtype">bool</span> IsCall = <span class="keyword">false</span>;</div><div class="line"><a name="l00339"></a><span class="lineno">  339</span>&#160;  <span class="comment">// The pointer location we started the query with. This will be empty if</span></div><div class="line"><a name="l00340"></a><span class="lineno">  340</span>&#160;  <span class="comment">// IsCall is true.</span></div><div class="line"><a name="l00341"></a><span class="lineno">  341</span>&#160;  <a class="code" href="classllvm_1_1MemoryLocation.html">MemoryLocation</a> StartingLoc;</div><div class="line"><a name="l00342"></a><span class="lineno">  342</span>&#160;  <span class="comment">// This is the instruction we were querying about.</span></div><div class="line"><a name="l00343"></a><span class="lineno">  343</span>&#160;  <span class="keyword">const</span> <a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *Inst = <span class="keyword">nullptr</span>;</div><div class="line"><a name="l00344"></a><span class="lineno">  344</span>&#160;  <span class="comment">// The MemoryAccess we actually got called with, used to test local domination</span></div><div class="line"><a name="l00345"></a><span class="lineno">  345</span>&#160;  <span class="keyword">const</span> <a class="code" href="classllvm_1_1MemoryAccess.html">MemoryAccess</a> *OriginalAccess = <span class="keyword">nullptr</span>;</div><div class="line"><a name="l00346"></a><span class="lineno">  346</span>&#160;  <a class="code" href="classllvm_1_1Optional.html">Optional&lt;AliasResult&gt;</a> AR = <a class="code" href="namespacellvm.html#ae1738272abcf2ac638b97e7dc6360cfdafb69d5dfee1598378741360198a1ba8e">MayAlias</a>;</div><div class="line"><a name="l00347"></a><span class="lineno">  347</span>&#160;  <span class="keywordtype">bool</span> SkipSelfAccess = <span class="keyword">false</span>;</div><div class="line"><a name="l00348"></a><span class="lineno">  348</span>&#160;</div><div class="line"><a name="l00349"></a><span class="lineno">  349</span>&#160;  UpwardsMemoryQuery() = <span class="keywordflow">default</span>;</div><div class="line"><a name="l00350"></a><span class="lineno">  350</span>&#160;</div><div class="line"><a name="l00351"></a><span class="lineno">  351</span>&#160;  UpwardsMemoryQuery(<span class="keyword">const</span> <a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *Inst, <span class="keyword">const</span> <a class="code" href="classllvm_1_1MemoryAccess.html">MemoryAccess</a> *Access)</div><div class="line"><a name="l00352"></a><span class="lineno">  352</span>&#160;      : IsCall(isa&lt;CallBase&gt;(Inst)), Inst(Inst), OriginalAccess(Access) {</div><div class="line"><a name="l00353"></a><span class="lineno">  353</span>&#160;    <span class="keywordflow">if</span> (!IsCall)</div><div class="line"><a name="l00354"></a><span class="lineno">  354</span>&#160;      StartingLoc = <a class="code" href="classllvm_1_1MemoryLocation.html#a18e5a3f1d71ba10a624f2a8e5121cf1f">MemoryLocation::get</a>(Inst);</div><div class="line"><a name="l00355"></a><span class="lineno">  355</span>&#160;  }</div><div class="line"><a name="l00356"></a><span class="lineno">  356</span>&#160;};</div><div class="line"><a name="l00357"></a><span class="lineno">  357</span>&#160;</div><div class="line"><a name="l00358"></a><span class="lineno">  358</span>&#160;} <span class="comment">// end anonymous namespace</span></div><div class="line"><a name="l00359"></a><span class="lineno">  359</span>&#160;</div><div class="line"><a name="l00360"></a><span class="lineno"><a class="line" href="MemorySSA_8cpp.html#aa59bf39360130f2ded62dbd9a4e82995">  360</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">bool</span> <a class="code" href="MemorySSA_8cpp.html#aa59bf39360130f2ded62dbd9a4e82995">lifetimeEndsAt</a>(<a class="code" href="classllvm_1_1MemoryDef.html">MemoryDef</a> *MD, <span class="keyword">const</span> <a class="code" href="classllvm_1_1MemoryLocation.html">MemoryLocation</a> &amp;Loc,</div><div class="line"><a name="l00361"></a><span class="lineno">  361</span>&#160;                           <a class="code" href="classllvm_1_1BatchAAResults.html">BatchAAResults</a> &amp;AA) {</div><div class="line"><a name="l00362"></a><span class="lineno">  362</span>&#160;  <a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *Inst = MD-&gt;<a class="code" href="classllvm_1_1MemoryUseOrDef.html#a1111232011a32357ce2f84d3a633597c">getMemoryInst</a>();</div><div class="line"><a name="l00363"></a><span class="lineno">  363</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1IntrinsicInst.html">IntrinsicInst</a> *II = dyn_cast&lt;IntrinsicInst&gt;(Inst)) {</div><div class="line"><a name="l00364"></a><span class="lineno">  364</span>&#160;    <span class="keywordflow">switch</span> (II-&gt;getIntrinsicID()) {</div><div class="line"><a name="l00365"></a><span class="lineno">  365</span>&#160;    <span class="keywordflow">case</span> Intrinsic::lifetime_end:</div><div class="line"><a name="l00366"></a><span class="lineno">  366</span>&#160;      <span class="keywordflow">return</span> AA.<a class="code" href="classllvm_1_1BatchAAResults.html#a2afd85d1ce874e1dd6391c967101d3b8">alias</a>(<a class="code" href="classllvm_1_1MemoryLocation.html">MemoryLocation</a>(II-&gt;getArgOperand(1)), Loc) == <a class="code" href="namespacellvm.html#ae1738272abcf2ac638b97e7dc6360cfda96e73e8d9d3af47453d4d562f9be0b44">MustAlias</a>;</div><div class="line"><a name="l00367"></a><span class="lineno">  367</span>&#160;    <span class="keywordflow">default</span>:</div><div class="line"><a name="l00368"></a><span class="lineno">  368</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">false</span>;</div><div class="line"><a name="l00369"></a><span class="lineno">  369</span>&#160;    }</div><div class="line"><a name="l00370"></a><span class="lineno">  370</span>&#160;  }</div><div class="line"><a name="l00371"></a><span class="lineno">  371</span>&#160;  <span class="keywordflow">return</span> <span class="keyword">false</span>;</div><div class="line"><a name="l00372"></a><span class="lineno">  372</span>&#160;}</div><div class="line"><a name="l00373"></a><span class="lineno">  373</span>&#160;</div><div class="line"><a name="l00374"></a><span class="lineno">  374</span>&#160;<span class="keyword">template</span> &lt;<span class="keyword">typename</span> AliasAnalysisType&gt;</div><div class="line"><a name="l00375"></a><span class="lineno"><a class="line" href="MemorySSA_8cpp.html#aa7bf9007b34e2a7a16275b1a7d7e3d63">  375</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">bool</span> <a class="code" href="MemorySSA_8cpp.html#aa7bf9007b34e2a7a16275b1a7d7e3d63">isUseTriviallyOptimizableToLiveOnEntry</a>(AliasAnalysisType &amp;AA,</div><div class="line"><a name="l00376"></a><span class="lineno">  376</span>&#160;                                                   <span class="keyword">const</span> <a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>) {</div><div class="line"><a name="l00377"></a><span class="lineno">  377</span>&#160;  <span class="comment">// If the memory can&#39;t be changed, then loads of the memory can&#39;t be</span></div><div class="line"><a name="l00378"></a><span class="lineno">  378</span>&#160;  <span class="comment">// clobbered.</span></div><div class="line"><a name="l00379"></a><span class="lineno">  379</span>&#160;  <span class="keywordflow">return</span> isa&lt;LoadInst&gt;(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>) &amp;&amp; (I-&gt;<a class="code" href="classllvm_1_1Instruction.html#a565f546ad95bd3a9bbe9a1e5040803f0">hasMetadata</a>(LLVMContext::MD_invariant_load) ||</div><div class="line"><a name="l00380"></a><span class="lineno">  380</span>&#160;                              AA.pointsToConstantMemory(<a class="code" href="classllvm_1_1MemoryLocation.html">MemoryLocation</a>(</div><div class="line"><a name="l00381"></a><span class="lineno">  381</span>&#160;                                  cast&lt;LoadInst&gt;(I)-&gt;<a class="code" href="namespacellvm.html#ac2db21413768e904d56a02c26184823d">getPointerOperand</a>())));</div><div class="line"><a name="l00382"></a><span class="lineno">  382</span>&#160;}</div><div class="line"><a name="l00383"></a><span class="lineno">  383</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00384"></a><span class="lineno">  384</span>&#160;<span class="comment">/// Verifies that `Start` is clobbered by `ClobberAt`, and that nothing</span></div><div class="line"><a name="l00385"></a><span class="lineno">  385</span>&#160;<span class="comment">/// inbetween `Start` and `ClobberAt` can clobbers `Start`.</span></div><div class="line"><a name="l00386"></a><span class="lineno">  386</span>&#160;<span class="comment">///</span></div><div class="line"><a name="l00387"></a><span class="lineno">  387</span>&#160;<span class="comment">/// This is meant to be as simple and self-contained as possible. Because it</span></div><div class="line"><a name="l00388"></a><span class="lineno">  388</span>&#160;<span class="comment">/// uses no cache, etc., it can be relatively expensive.</span></div><div class="line"><a name="l00389"></a><span class="lineno">  389</span>&#160;<span class="comment">///</span></div><div class="line"><a name="l00390"></a><span class="lineno">  390</span>&#160;<span class="comment">/// \param Start     The MemoryAccess that we want to walk from.</span></div><div class="line"><a name="l00391"></a><span class="lineno">  391</span>&#160;<span class="comment">/// \param ClobberAt A clobber for Start.</span></div><div class="line"><a name="l00392"></a><span class="lineno">  392</span>&#160;<span class="comment">/// \param StartLoc  The MemoryLocation for Start.</span></div><div class="line"><a name="l00393"></a><span class="lineno">  393</span>&#160;<span class="comment">/// \param MSSA      The MemorySSA instance that Start and ClobberAt belong to.</span></div><div class="line"><a name="l00394"></a><span class="lineno">  394</span>&#160;<span class="comment">/// \param Query     The UpwardsMemoryQuery we used for our search.</span></div><div class="line"><a name="l00395"></a><span class="lineno">  395</span>&#160;<span class="comment">/// \param AA        The AliasAnalysis we used for our search.</span></div><div class="line"><a name="l00396"></a><span class="lineno">  396</span>&#160;<span class="comment">/// \param AllowImpreciseClobber Always false, unless we do relaxed verify.</span></div><div class="line"><a name="l00397"></a><span class="lineno">  397</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00398"></a><span class="lineno">  398</span>&#160;<span class="keyword">template</span> &lt;<span class="keyword">typename</span> AliasAnalysisType&gt;</div><div class="line"><a name="l00399"></a><span class="lineno">  399</span>&#160;<a class="code" href="Compiler_8h.html#acc1c483f4b4ee2f17bb6643a3b353609">LLVM_ATTRIBUTE_UNUSED</a> <span class="keyword">static</span> <span class="keywordtype">void</span></div><div class="line"><a name="l00400"></a><span class="lineno"><a class="line" href="MemorySSA_8cpp.html#a8928e8a5cad2fb76511ab41b1b62aacd">  400</a></span>&#160;<a class="code" href="MemorySSA_8cpp.html#a8928e8a5cad2fb76511ab41b1b62aacd">checkClobberSanity</a>(<span class="keyword">const</span> <a class="code" href="classllvm_1_1MemoryAccess.html">MemoryAccess</a> *Start, <a class="code" href="classllvm_1_1MemoryAccess.html">MemoryAccess</a> *ClobberAt,</div><div class="line"><a name="l00401"></a><span class="lineno">  401</span>&#160;                   <span class="keyword">const</span> <a class="code" href="classllvm_1_1MemoryLocation.html">MemoryLocation</a> &amp;StartLoc, <span class="keyword">const</span> <a class="code" href="classllvm_1_1MemorySSA.html">MemorySSA</a> &amp;MSSA,</div><div class="line"><a name="l00402"></a><span class="lineno">  402</span>&#160;                   <span class="keyword">const</span> UpwardsMemoryQuery &amp;Query, AliasAnalysisType &amp;AA,</div><div class="line"><a name="l00403"></a><span class="lineno">  403</span>&#160;                   <span class="keywordtype">bool</span> AllowImpreciseClobber = <span class="keyword">false</span>) {</div><div class="line"><a name="l00404"></a><span class="lineno">  404</span>&#160;  <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(MSSA.<a class="code" href="classllvm_1_1MemorySSA.html#a56004f54560e9950f6eb148cb5dfa0a3">dominates</a>(ClobberAt, Start) &amp;&amp; <span class="stringliteral">&quot;Clobber doesn&#39;t dominate start?&quot;</span>);</div><div class="line"><a name="l00405"></a><span class="lineno">  405</span>&#160;</div><div class="line"><a name="l00406"></a><span class="lineno">  406</span>&#160;  <span class="keywordflow">if</span> (MSSA.<a class="code" href="classllvm_1_1MemorySSA.html#ae3b89ffde42778289bcbd8a187199420">isLiveOnEntryDef</a>(Start)) {</div><div class="line"><a name="l00407"></a><span class="lineno">  407</span>&#160;    <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(MSSA.<a class="code" href="classllvm_1_1MemorySSA.html#ae3b89ffde42778289bcbd8a187199420">isLiveOnEntryDef</a>(ClobberAt) &amp;&amp;</div><div class="line"><a name="l00408"></a><span class="lineno">  408</span>&#160;           <span class="stringliteral">&quot;liveOnEntry must clobber itself&quot;</span>);</div><div class="line"><a name="l00409"></a><span class="lineno">  409</span>&#160;    <span class="keywordflow">return</span>;</div><div class="line"><a name="l00410"></a><span class="lineno">  410</span>&#160;  }</div><div class="line"><a name="l00411"></a><span class="lineno">  411</span>&#160;</div><div class="line"><a name="l00412"></a><span class="lineno">  412</span>&#160;  <span class="keywordtype">bool</span> FoundClobber = <span class="keyword">false</span>;</div><div class="line"><a name="l00413"></a><span class="lineno">  413</span>&#160;  <a class="code" href="classllvm_1_1DenseSet.html">DenseSet&lt;ConstMemoryAccessPair&gt;</a> VisitedPhis;</div><div class="line"><a name="l00414"></a><span class="lineno">  414</span>&#160;  <a class="code" href="classllvm_1_1SmallVector.html">SmallVector&lt;ConstMemoryAccessPair, 8&gt;</a> Worklist;</div><div class="line"><a name="l00415"></a><span class="lineno">  415</span>&#160;  Worklist.<a class="code" href="classllvm_1_1SmallVectorImpl.html#a396fcfee6914c76974b73c3d203da6a5">emplace_back</a>(Start, StartLoc);</div><div class="line"><a name="l00416"></a><span class="lineno">  416</span>&#160;  <span class="comment">// Walk all paths from Start to ClobberAt, while looking for clobbers. If one</span></div><div class="line"><a name="l00417"></a><span class="lineno">  417</span>&#160;  <span class="comment">// is found, complain.</span></div><div class="line"><a name="l00418"></a><span class="lineno">  418</span>&#160;  <span class="keywordflow">while</span> (!Worklist.<a class="code" href="classllvm_1_1SmallVectorBase.html#a495b11cf3890ab746d76ef2881f79041">empty</a>()) {</div><div class="line"><a name="l00419"></a><span class="lineno">  419</span>&#160;    <span class="keyword">auto</span> <a class="code" href="regcomp_8c.html#a01bd739644e8d3cbbb80f37f6ddb8b0e">MAP</a> = Worklist.<a class="code" href="classllvm_1_1SmallVectorImpl.html#a07e23ae504e2b8c72fd055f93ded8899">pop_back_val</a>();</div><div class="line"><a name="l00420"></a><span class="lineno">  420</span>&#160;    <span class="comment">// All we care about is that nothing from Start to ClobberAt clobbers Start.</span></div><div class="line"><a name="l00421"></a><span class="lineno">  421</span>&#160;    <span class="comment">// We learn nothing from revisiting nodes.</span></div><div class="line"><a name="l00422"></a><span class="lineno">  422</span>&#160;    <span class="keywordflow">if</span> (!VisitedPhis.<a class="code" href="classllvm_1_1detail_1_1DenseSetImpl.html#a79eed48913651aeedda2eed25201ea84">insert</a>(<a class="code" href="regcomp_8c.html#a01bd739644e8d3cbbb80f37f6ddb8b0e">MAP</a>).second)</div><div class="line"><a name="l00423"></a><span class="lineno">  423</span>&#160;      <span class="keywordflow">continue</span>;</div><div class="line"><a name="l00424"></a><span class="lineno">  424</span>&#160;</div><div class="line"><a name="l00425"></a><span class="lineno">  425</span>&#160;    <span class="keywordflow">for</span> (<span class="keyword">const</span> <span class="keyword">auto</span> *MA : <a class="code" href="namespacellvm.html#ae833ff4bb3c49473a3eb6aa5db75ff25">def_chain</a>(<a class="code" href="regcomp_8c.html#a01bd739644e8d3cbbb80f37f6ddb8b0e">MAP</a>.first)) {</div><div class="line"><a name="l00426"></a><span class="lineno">  426</span>&#160;      <span class="keywordflow">if</span> (MA == ClobberAt) {</div><div class="line"><a name="l00427"></a><span class="lineno">  427</span>&#160;        <span class="keywordflow">if</span> (<span class="keyword">const</span> <span class="keyword">auto</span> *MD = dyn_cast&lt;MemoryDef&gt;(MA)) {</div><div class="line"><a name="l00428"></a><span class="lineno">  428</span>&#160;          <span class="comment">// instructionClobbersQuery isn&#39;t essentially free, so don&#39;t use `|=`,</span></div><div class="line"><a name="l00429"></a><span class="lineno">  429</span>&#160;          <span class="comment">// since it won&#39;t let us short-circuit.</span></div><div class="line"><a name="l00430"></a><span class="lineno">  430</span>&#160;          <span class="comment">//</span></div><div class="line"><a name="l00431"></a><span class="lineno">  431</span>&#160;          <span class="comment">// Also, note that this can&#39;t be hoisted out of the `Worklist` loop,</span></div><div class="line"><a name="l00432"></a><span class="lineno">  432</span>&#160;          <span class="comment">// since MD may only act as a clobber for 1 of N MemoryLocations.</span></div><div class="line"><a name="l00433"></a><span class="lineno">  433</span>&#160;          FoundClobber = FoundClobber || MSSA.<a class="code" href="classllvm_1_1MemorySSA.html#ae3b89ffde42778289bcbd8a187199420">isLiveOnEntryDef</a>(MD);</div><div class="line"><a name="l00434"></a><span class="lineno">  434</span>&#160;          <span class="keywordflow">if</span> (!FoundClobber) {</div><div class="line"><a name="l00435"></a><span class="lineno">  435</span>&#160;            ClobberAlias CA =</div><div class="line"><a name="l00436"></a><span class="lineno">  436</span>&#160;                <a class="code" href="MemorySSA_8cpp.html#a8b72a05b68fd9ce0a18e753d1c99c807">instructionClobbersQuery</a>(MD, <a class="code" href="regcomp_8c.html#a01bd739644e8d3cbbb80f37f6ddb8b0e">MAP</a>.second, Query.Inst, AA);</div><div class="line"><a name="l00437"></a><span class="lineno">  437</span>&#160;            <span class="keywordflow">if</span> (CA.IsClobber) {</div><div class="line"><a name="l00438"></a><span class="lineno">  438</span>&#160;              FoundClobber = <span class="keyword">true</span>;</div><div class="line"><a name="l00439"></a><span class="lineno">  439</span>&#160;              <span class="comment">// Not used: CA.AR;</span></div><div class="line"><a name="l00440"></a><span class="lineno">  440</span>&#160;            }</div><div class="line"><a name="l00441"></a><span class="lineno">  441</span>&#160;          }</div><div class="line"><a name="l00442"></a><span class="lineno">  442</span>&#160;        }</div><div class="line"><a name="l00443"></a><span class="lineno">  443</span>&#160;        <span class="keywordflow">break</span>;</div><div class="line"><a name="l00444"></a><span class="lineno">  444</span>&#160;      }</div><div class="line"><a name="l00445"></a><span class="lineno">  445</span>&#160;</div><div class="line"><a name="l00446"></a><span class="lineno">  446</span>&#160;      <span class="comment">// We should never hit liveOnEntry, unless it&#39;s the clobber.</span></div><div class="line"><a name="l00447"></a><span class="lineno">  447</span>&#160;      <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(!MSSA.<a class="code" href="classllvm_1_1MemorySSA.html#ae3b89ffde42778289bcbd8a187199420">isLiveOnEntryDef</a>(MA) &amp;&amp; <span class="stringliteral">&quot;Hit liveOnEntry before clobber?&quot;</span>);</div><div class="line"><a name="l00448"></a><span class="lineno">  448</span>&#160;</div><div class="line"><a name="l00449"></a><span class="lineno">  449</span>&#160;      <span class="keywordflow">if</span> (<span class="keyword">const</span> <span class="keyword">auto</span> *MD = dyn_cast&lt;MemoryDef&gt;(MA)) {</div><div class="line"><a name="l00450"></a><span class="lineno">  450</span>&#160;        <span class="comment">// If Start is a Def, skip self.</span></div><div class="line"><a name="l00451"></a><span class="lineno">  451</span>&#160;        <span class="keywordflow">if</span> (MD == Start)</div><div class="line"><a name="l00452"></a><span class="lineno">  452</span>&#160;          <span class="keywordflow">continue</span>;</div><div class="line"><a name="l00453"></a><span class="lineno">  453</span>&#160;</div><div class="line"><a name="l00454"></a><span class="lineno">  454</span>&#160;        <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(!<a class="code" href="MemorySSA_8cpp.html#a8b72a05b68fd9ce0a18e753d1c99c807">instructionClobbersQuery</a>(MD, <a class="code" href="regcomp_8c.html#a01bd739644e8d3cbbb80f37f6ddb8b0e">MAP</a>.second, Query.Inst, AA)</div><div class="line"><a name="l00455"></a><span class="lineno">  455</span>&#160;                    .IsClobber &amp;&amp;</div><div class="line"><a name="l00456"></a><span class="lineno">  456</span>&#160;               <span class="stringliteral">&quot;Found clobber before reaching ClobberAt!&quot;</span>);</div><div class="line"><a name="l00457"></a><span class="lineno">  457</span>&#160;        <span class="keywordflow">continue</span>;</div><div class="line"><a name="l00458"></a><span class="lineno">  458</span>&#160;      }</div><div class="line"><a name="l00459"></a><span class="lineno">  459</span>&#160;</div><div class="line"><a name="l00460"></a><span class="lineno">  460</span>&#160;      <span class="keywordflow">if</span> (<span class="keyword">const</span> <span class="keyword">auto</span> *MU = dyn_cast&lt;MemoryUse&gt;(MA)) {</div><div class="line"><a name="l00461"></a><span class="lineno">  461</span>&#160;        (void)MU;</div><div class="line"><a name="l00462"></a><span class="lineno">  462</span>&#160;        <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a> (MU == Start &amp;&amp;</div><div class="line"><a name="l00463"></a><span class="lineno">  463</span>&#160;                <span class="stringliteral">&quot;Can only find use in def chain if Start is a use&quot;</span>);</div><div class="line"><a name="l00464"></a><span class="lineno">  464</span>&#160;        <span class="keywordflow">continue</span>;</div><div class="line"><a name="l00465"></a><span class="lineno">  465</span>&#160;      }</div><div class="line"><a name="l00466"></a><span class="lineno">  466</span>&#160;</div><div class="line"><a name="l00467"></a><span class="lineno">  467</span>&#160;      <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(isa&lt;MemoryPhi&gt;(MA));</div><div class="line"><a name="l00468"></a><span class="lineno">  468</span>&#160;      Worklist.<a class="code" href="classllvm_1_1SmallVectorImpl.html#ac56f67ff590e79d76f8ebd243e4cf442">append</a>(</div><div class="line"><a name="l00469"></a><span class="lineno">  469</span>&#160;          <a class="code" href="namespacellvm.html#aba42131f88415b191d5477802473b7d4">upward_defs_begin</a>({<span class="keyword">const_cast&lt;</span><a class="code" href="classllvm_1_1MemoryAccess.html">MemoryAccess</a> *<span class="keyword">&gt;</span>(MA), <a class="code" href="regcomp_8c.html#a01bd739644e8d3cbbb80f37f6ddb8b0e">MAP</a>.second}),</div><div class="line"><a name="l00470"></a><span class="lineno">  470</span>&#160;          <a class="code" href="namespacellvm.html#aaa8db63ab2c8843f6e41c7fde63b1d84">upward_defs_end</a>());</div><div class="line"><a name="l00471"></a><span class="lineno">  471</span>&#160;    }</div><div class="line"><a name="l00472"></a><span class="lineno">  472</span>&#160;  }</div><div class="line"><a name="l00473"></a><span class="lineno">  473</span>&#160;</div><div class="line"><a name="l00474"></a><span class="lineno">  474</span>&#160;  <span class="comment">// If the verify is done following an optimization, it&#39;s possible that</span></div><div class="line"><a name="l00475"></a><span class="lineno">  475</span>&#160;  <span class="comment">// ClobberAt was a conservative clobbering, that we can now infer is not a</span></div><div class="line"><a name="l00476"></a><span class="lineno">  476</span>&#160;  <span class="comment">// true clobbering access. Don&#39;t fail the verify if that&#39;s the case.</span></div><div class="line"><a name="l00477"></a><span class="lineno">  477</span>&#160;  <span class="comment">// We do have accesses that claim they&#39;re optimized, but could be optimized</span></div><div class="line"><a name="l00478"></a><span class="lineno">  478</span>&#160;  <span class="comment">// further. Updating all these can be expensive, so allow it for now (FIXME).</span></div><div class="line"><a name="l00479"></a><span class="lineno">  479</span>&#160;  <span class="keywordflow">if</span> (AllowImpreciseClobber)</div><div class="line"><a name="l00480"></a><span class="lineno">  480</span>&#160;    <span class="keywordflow">return</span>;</div><div class="line"><a name="l00481"></a><span class="lineno">  481</span>&#160;</div><div class="line"><a name="l00482"></a><span class="lineno">  482</span>&#160;  <span class="comment">// If ClobberAt is a MemoryPhi, we can assume something above it acted as a</span></div><div class="line"><a name="l00483"></a><span class="lineno">  483</span>&#160;  <span class="comment">// clobber. Otherwise, `ClobberAt` should&#39;ve acted as a clobber at some point.</span></div><div class="line"><a name="l00484"></a><span class="lineno">  484</span>&#160;  <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>((isa&lt;MemoryPhi&gt;(ClobberAt) || FoundClobber) &amp;&amp;</div><div class="line"><a name="l00485"></a><span class="lineno">  485</span>&#160;         <span class="stringliteral">&quot;ClobberAt never acted as a clobber&quot;</span>);</div><div class="line"><a name="l00486"></a><span class="lineno">  486</span>&#160;}</div><div class="line"><a name="l00487"></a><span class="lineno">  487</span>&#160;</div><div class="line"><a name="l00488"></a><span class="lineno">  488</span>&#160;<span class="keyword">namespace </span>{</div><div class="line"><a name="l00489"></a><span class="lineno">  489</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00490"></a><span class="lineno">  490</span>&#160;<span class="comment">/// Our algorithm for walking (and trying to optimize) clobbers, all wrapped up</span></div><div class="line"><a name="l00491"></a><span class="lineno">  491</span>&#160;<span class="comment">/// in one class.</span></div><div class="line"><a name="l00492"></a><span class="lineno">  492</span>&#160;<span class="comment"></span><span class="keyword">template</span> &lt;<span class="keyword">class</span> AliasAnalysisType&gt; <span class="keyword">class </span>ClobberWalker {<span class="comment"></span></div><div class="line"><a name="l00493"></a><span class="lineno">  493</span>&#160;<span class="comment">  /// Save a few bytes by using unsigned instead of size_t.</span></div><div class="line"><a name="l00494"></a><span class="lineno">  494</span>&#160;<span class="comment"></span>  <span class="keyword">using</span> ListIndex = <a class="code" href="classunsigned.html">unsigned</a>;</div><div class="line"><a name="l00495"></a><span class="lineno">  495</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00496"></a><span class="lineno">  496</span>&#160;<span class="comment">  /// Represents a span of contiguous MemoryDefs, potentially ending in a</span></div><div class="line"><a name="l00497"></a><span class="lineno">  497</span>&#160;<span class="comment">  /// MemoryPhi.</span></div><div class="line"><a name="l00498"></a><span class="lineno">  498</span>&#160;<span class="comment"></span>  <span class="keyword">struct </span>DefPath {</div><div class="line"><a name="l00499"></a><span class="lineno">  499</span>&#160;    <a class="code" href="classllvm_1_1MemoryLocation.html">MemoryLocation</a> Loc;</div><div class="line"><a name="l00500"></a><span class="lineno">  500</span>&#160;    <span class="comment">// Note that, because we always walk in reverse, Last will always dominate</span></div><div class="line"><a name="l00501"></a><span class="lineno">  501</span>&#160;    <span class="comment">// First. Also note that First and Last are inclusive.</span></div><div class="line"><a name="l00502"></a><span class="lineno">  502</span>&#160;    <a class="code" href="classllvm_1_1MemoryAccess.html">MemoryAccess</a> *First;</div><div class="line"><a name="l00503"></a><span class="lineno">  503</span>&#160;    <a class="code" href="classllvm_1_1MemoryAccess.html">MemoryAccess</a> *Last;</div><div class="line"><a name="l00504"></a><span class="lineno">  504</span>&#160;    <a class="code" href="classllvm_1_1Optional.html">Optional&lt;ListIndex&gt;</a> Previous;</div><div class="line"><a name="l00505"></a><span class="lineno">  505</span>&#160;</div><div class="line"><a name="l00506"></a><span class="lineno">  506</span>&#160;    DefPath(<span class="keyword">const</span> <a class="code" href="classllvm_1_1MemoryLocation.html">MemoryLocation</a> &amp;Loc, <a class="code" href="classllvm_1_1MemoryAccess.html">MemoryAccess</a> *First, <a class="code" href="classllvm_1_1MemoryAccess.html">MemoryAccess</a> *Last,</div><div class="line"><a name="l00507"></a><span class="lineno">  507</span>&#160;            <a class="code" href="classllvm_1_1Optional.html">Optional&lt;ListIndex&gt;</a> Previous)</div><div class="line"><a name="l00508"></a><span class="lineno">  508</span>&#160;        : Loc(Loc), First(First), Last(Last), Previous(Previous) {}</div><div class="line"><a name="l00509"></a><span class="lineno">  509</span>&#160;</div><div class="line"><a name="l00510"></a><span class="lineno">  510</span>&#160;    DefPath(<span class="keyword">const</span> <a class="code" href="classllvm_1_1MemoryLocation.html">MemoryLocation</a> &amp;Loc, <a class="code" href="classllvm_1_1MemoryAccess.html">MemoryAccess</a> *<a class="code" href="classllvm_1_1Init.html">Init</a>,</div><div class="line"><a name="l00511"></a><span class="lineno">  511</span>&#160;            <a class="code" href="classllvm_1_1Optional.html">Optional&lt;ListIndex&gt;</a> Previous)</div><div class="line"><a name="l00512"></a><span class="lineno">  512</span>&#160;        : DefPath(Loc, Init, Init, Previous) {}</div><div class="line"><a name="l00513"></a><span class="lineno">  513</span>&#160;  };</div><div class="line"><a name="l00514"></a><span class="lineno">  514</span>&#160;</div><div class="line"><a name="l00515"></a><span class="lineno">  515</span>&#160;  <span class="keyword">const</span> <a class="code" href="classllvm_1_1MemorySSA.html">MemorySSA</a> &amp;MSSA;</div><div class="line"><a name="l00516"></a><span class="lineno">  516</span>&#160;  AliasAnalysisType &amp;AA;</div><div class="line"><a name="l00517"></a><span class="lineno">  517</span>&#160;  <a class="code" href="classllvm_1_1DominatorTree.html">DominatorTree</a> &amp;DT;</div><div class="line"><a name="l00518"></a><span class="lineno">  518</span>&#160;  UpwardsMemoryQuery *Query;</div><div class="line"><a name="l00519"></a><span class="lineno">  519</span>&#160;  <span class="keywordtype">unsigned</span> *UpwardWalkLimit;</div><div class="line"><a name="l00520"></a><span class="lineno">  520</span>&#160;</div><div class="line"><a name="l00521"></a><span class="lineno">  521</span>&#160;  <span class="comment">// Phi optimization bookkeeping</span></div><div class="line"><a name="l00522"></a><span class="lineno">  522</span>&#160;  <a class="code" href="classllvm_1_1SmallVector.html">SmallVector&lt;DefPath, 32&gt;</a> Paths;</div><div class="line"><a name="l00523"></a><span class="lineno">  523</span>&#160;  <a class="code" href="classllvm_1_1DenseSet.html">DenseSet&lt;ConstMemoryAccessPair&gt;</a> VisitedPhis;</div><div class="line"><a name="l00524"></a><span class="lineno">  524</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00525"></a><span class="lineno">  525</span>&#160;<span class="comment">  /// Find the nearest def or phi that `From` can legally be optimized to.</span></div><div class="line"><a name="l00526"></a><span class="lineno">  526</span>&#160;<span class="comment"></span>  <span class="keyword">const</span> <a class="code" href="classllvm_1_1MemoryAccess.html">MemoryAccess</a> *getWalkTarget(<span class="keyword">const</span> <a class="code" href="classllvm_1_1MemoryPhi.html">MemoryPhi</a> *<a class="code" href="BlockVerifier_8cpp.html#ae45c7d73c0ff5d177b59153ffae77f84">From</a>)<span class="keyword"> const </span>{</div><div class="line"><a name="l00527"></a><span class="lineno">  527</span>&#160;    <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(From-&gt;<a class="code" href="classllvm_1_1User.html#addec638786f763d967811b45cb662f1f">getNumOperands</a>() &amp;&amp; <span class="stringliteral">&quot;Phi with no operands?&quot;</span>);</div><div class="line"><a name="l00528"></a><span class="lineno">  528</span>&#160;</div><div class="line"><a name="l00529"></a><span class="lineno">  529</span>&#160;    <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *BB = From-&gt;<a class="code" href="classllvm_1_1MemoryAccess.html#aa468ad3fa68bdf6703c391deaec97706">getBlock</a>();</div><div class="line"><a name="l00530"></a><span class="lineno">  530</span>&#160;    <a class="code" href="classllvm_1_1MemoryAccess.html">MemoryAccess</a> *Result = MSSA.<a class="code" href="classllvm_1_1MemorySSA.html#a468b8d23a3bb5b9a484f54193f177713">getLiveOnEntryDef</a>();</div><div class="line"><a name="l00531"></a><span class="lineno">  531</span>&#160;    <a class="code" href="classllvm_1_1DomTreeNodeBase.html">DomTreeNode</a> *Node = DT.<a class="code" href="classllvm_1_1DominatorTreeBase.html#a4344e66fb61ea313a85a9e054124ac55">getNode</a>(BB);</div><div class="line"><a name="l00532"></a><span class="lineno">  532</span>&#160;    <span class="keywordflow">while</span> ((Node = Node-&gt;<a class="code" href="classllvm_1_1DomTreeNodeBase.html#aa22cb3ff8c95bb05185acad8c569d4b6">getIDom</a>())) {</div><div class="line"><a name="l00533"></a><span class="lineno">  533</span>&#160;      <span class="keyword">auto</span> *Defs = MSSA.<a class="code" href="classllvm_1_1MemorySSA.html#a65b7c715bf28eb17cfd012dd9bc3ad4b">getBlockDefs</a>(Node-&gt;<a class="code" href="classllvm_1_1DomTreeNodeBase.html#a6a15a030098342e06ea73e1241d614c9">getBlock</a>());</div><div class="line"><a name="l00534"></a><span class="lineno">  534</span>&#160;      <span class="keywordflow">if</span> (Defs)</div><div class="line"><a name="l00535"></a><span class="lineno">  535</span>&#160;        <span class="keywordflow">return</span> &amp;*Defs-&gt;<a class="code" href="classllvm_1_1simple__ilist.html#aefb5430ea919aa7223dbf8583e947111">rbegin</a>();</div><div class="line"><a name="l00536"></a><span class="lineno">  536</span>&#160;    }</div><div class="line"><a name="l00537"></a><span class="lineno">  537</span>&#160;    <span class="keywordflow">return</span> Result;</div><div class="line"><a name="l00538"></a><span class="lineno">  538</span>&#160;  }</div><div class="line"><a name="l00539"></a><span class="lineno">  539</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00540"></a><span class="lineno">  540</span>&#160;<span class="comment">  /// Result of calling walkToPhiOrClobber.</span></div><div class="line"><a name="l00541"></a><span class="lineno">  541</span>&#160;<span class="comment"></span>  <span class="keyword">struct </span>UpwardsWalkResult {<span class="comment"></span></div><div class="line"><a name="l00542"></a><span class="lineno">  542</span>&#160;<span class="comment">    /// The &quot;Result&quot; of the walk. Either a clobber, the last thing we walked, or</span></div><div class="line"><a name="l00543"></a><span class="lineno">  543</span>&#160;<span class="comment">    /// both. Include alias info when clobber found.</span></div><div class="line"><a name="l00544"></a><span class="lineno">  544</span>&#160;<span class="comment"></span>    <a class="code" href="classllvm_1_1MemoryAccess.html">MemoryAccess</a> *Result;</div><div class="line"><a name="l00545"></a><span class="lineno">  545</span>&#160;    <span class="keywordtype">bool</span> IsKnownClobber;</div><div class="line"><a name="l00546"></a><span class="lineno">  546</span>&#160;    <a class="code" href="classllvm_1_1Optional.html">Optional&lt;AliasResult&gt;</a> AR;</div><div class="line"><a name="l00547"></a><span class="lineno">  547</span>&#160;  };</div><div class="line"><a name="l00548"></a><span class="lineno">  548</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00549"></a><span class="lineno">  549</span>&#160;<span class="comment">  /// Walk to the next Phi or Clobber in the def chain starting at Desc.Last.</span></div><div class="line"><a name="l00550"></a><span class="lineno">  550</span>&#160;<span class="comment">  /// This will update Desc.Last as it walks. It will (optionally) also stop at</span></div><div class="line"><a name="l00551"></a><span class="lineno">  551</span>&#160;<span class="comment">  /// StopAt.</span></div><div class="line"><a name="l00552"></a><span class="lineno">  552</span>&#160;<span class="comment">  ///</span></div><div class="line"><a name="l00553"></a><span class="lineno">  553</span>&#160;<span class="comment">  /// This does not test for whether StopAt is a clobber</span></div><div class="line"><a name="l00554"></a><span class="lineno">  554</span>&#160;<span class="comment"></span>  UpwardsWalkResult</div><div class="line"><a name="l00555"></a><span class="lineno">  555</span>&#160;  walkToPhiOrClobber(DefPath &amp;Desc, <span class="keyword">const</span> <a class="code" href="classllvm_1_1MemoryAccess.html">MemoryAccess</a> *StopAt = <span class="keyword">nullptr</span>,</div><div class="line"><a name="l00556"></a><span class="lineno">  556</span>&#160;                     <span class="keyword">const</span> <a class="code" href="classllvm_1_1MemoryAccess.html">MemoryAccess</a> *SkipStopAt = <span class="keyword">nullptr</span>)<span class="keyword"> const </span>{</div><div class="line"><a name="l00557"></a><span class="lineno">  557</span>&#160;    <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(!isa&lt;MemoryUse&gt;(Desc.Last) &amp;&amp; <span class="stringliteral">&quot;Uses don&#39;t exist in my world&quot;</span>);</div><div class="line"><a name="l00558"></a><span class="lineno">  558</span>&#160;    <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(UpwardWalkLimit &amp;&amp; <span class="stringliteral">&quot;Need a valid walk limit&quot;</span>);</div><div class="line"><a name="l00559"></a><span class="lineno">  559</span>&#160;    <span class="keywordtype">bool</span> LimitAlreadyReached = <span class="keyword">false</span>;</div><div class="line"><a name="l00560"></a><span class="lineno">  560</span>&#160;    <span class="comment">// (*UpwardWalkLimit) may be 0 here, due to the loop in tryOptimizePhi. Set</span></div><div class="line"><a name="l00561"></a><span class="lineno">  561</span>&#160;    <span class="comment">// it to 1. This will not do any alias() calls. It either returns in the</span></div><div class="line"><a name="l00562"></a><span class="lineno">  562</span>&#160;    <span class="comment">// first iteration in the loop below, or is set back to 0 if all def chains</span></div><div class="line"><a name="l00563"></a><span class="lineno">  563</span>&#160;    <span class="comment">// are free of MemoryDefs.</span></div><div class="line"><a name="l00564"></a><span class="lineno">  564</span>&#160;    <span class="keywordflow">if</span> (!*UpwardWalkLimit) {</div><div class="line"><a name="l00565"></a><span class="lineno">  565</span>&#160;      *UpwardWalkLimit = 1;</div><div class="line"><a name="l00566"></a><span class="lineno">  566</span>&#160;      LimitAlreadyReached = <span class="keyword">true</span>;</div><div class="line"><a name="l00567"></a><span class="lineno">  567</span>&#160;    }</div><div class="line"><a name="l00568"></a><span class="lineno">  568</span>&#160;</div><div class="line"><a name="l00569"></a><span class="lineno">  569</span>&#160;    <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1MemoryAccess.html">MemoryAccess</a> *Current : <a class="code" href="namespacellvm.html#ae833ff4bb3c49473a3eb6aa5db75ff25">def_chain</a>(Desc.Last)) {</div><div class="line"><a name="l00570"></a><span class="lineno">  570</span>&#160;      Desc.Last = Current;</div><div class="line"><a name="l00571"></a><span class="lineno">  571</span>&#160;      <span class="keywordflow">if</span> (Current == StopAt || Current == SkipStopAt)</div><div class="line"><a name="l00572"></a><span class="lineno">  572</span>&#160;        <span class="keywordflow">return</span> {Current, <span class="keyword">false</span>, <a class="code" href="namespacellvm.html#ae1738272abcf2ac638b97e7dc6360cfdafb69d5dfee1598378741360198a1ba8e">MayAlias</a>};</div><div class="line"><a name="l00573"></a><span class="lineno">  573</span>&#160;</div><div class="line"><a name="l00574"></a><span class="lineno">  574</span>&#160;      <span class="keywordflow">if</span> (<span class="keyword">auto</span> *MD = dyn_cast&lt;MemoryDef&gt;(Current)) {</div><div class="line"><a name="l00575"></a><span class="lineno">  575</span>&#160;        <span class="keywordflow">if</span> (MSSA.<a class="code" href="classllvm_1_1MemorySSA.html#ae3b89ffde42778289bcbd8a187199420">isLiveOnEntryDef</a>(MD))</div><div class="line"><a name="l00576"></a><span class="lineno">  576</span>&#160;          <span class="keywordflow">return</span> {MD, <span class="keyword">true</span>, <a class="code" href="namespacellvm.html#ae1738272abcf2ac638b97e7dc6360cfda96e73e8d9d3af47453d4d562f9be0b44">MustAlias</a>};</div><div class="line"><a name="l00577"></a><span class="lineno">  577</span>&#160;</div><div class="line"><a name="l00578"></a><span class="lineno">  578</span>&#160;        <span class="keywordflow">if</span> (!--*UpwardWalkLimit)</div><div class="line"><a name="l00579"></a><span class="lineno">  579</span>&#160;          <span class="keywordflow">return</span> {Current, <span class="keyword">true</span>, MayAlias};</div><div class="line"><a name="l00580"></a><span class="lineno">  580</span>&#160;</div><div class="line"><a name="l00581"></a><span class="lineno">  581</span>&#160;        ClobberAlias CA =</div><div class="line"><a name="l00582"></a><span class="lineno">  582</span>&#160;            <a class="code" href="MemorySSA_8cpp.html#a8b72a05b68fd9ce0a18e753d1c99c807">instructionClobbersQuery</a>(MD, Desc.Loc, Query-&gt;Inst, AA);</div><div class="line"><a name="l00583"></a><span class="lineno">  583</span>&#160;        <span class="keywordflow">if</span> (CA.IsClobber)</div><div class="line"><a name="l00584"></a><span class="lineno">  584</span>&#160;          <span class="keywordflow">return</span> {MD, <span class="keyword">true</span>, CA.AR};</div><div class="line"><a name="l00585"></a><span class="lineno">  585</span>&#160;      }</div><div class="line"><a name="l00586"></a><span class="lineno">  586</span>&#160;    }</div><div class="line"><a name="l00587"></a><span class="lineno">  587</span>&#160;</div><div class="line"><a name="l00588"></a><span class="lineno">  588</span>&#160;    <span class="keywordflow">if</span> (LimitAlreadyReached)</div><div class="line"><a name="l00589"></a><span class="lineno">  589</span>&#160;      *UpwardWalkLimit = 0;</div><div class="line"><a name="l00590"></a><span class="lineno">  590</span>&#160;</div><div class="line"><a name="l00591"></a><span class="lineno">  591</span>&#160;    <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(isa&lt;MemoryPhi&gt;(Desc.Last) &amp;&amp;</div><div class="line"><a name="l00592"></a><span class="lineno">  592</span>&#160;           <span class="stringliteral">&quot;Ended at a non-clobber that&#39;s not a phi?&quot;</span>);</div><div class="line"><a name="l00593"></a><span class="lineno">  593</span>&#160;    <span class="keywordflow">return</span> {Desc.Last, <span class="keyword">false</span>, <a class="code" href="namespacellvm.html#ae1738272abcf2ac638b97e7dc6360cfdafb69d5dfee1598378741360198a1ba8e">MayAlias</a>};</div><div class="line"><a name="l00594"></a><span class="lineno">  594</span>&#160;  }</div><div class="line"><a name="l00595"></a><span class="lineno">  595</span>&#160;</div><div class="line"><a name="l00596"></a><span class="lineno">  596</span>&#160;  <span class="keywordtype">void</span> addSearches(<a class="code" href="classllvm_1_1MemoryPhi.html">MemoryPhi</a> *Phi, <a class="code" href="classllvm_1_1SmallVectorImpl.html">SmallVectorImpl&lt;ListIndex&gt;</a> &amp;PausedSearches,</div><div class="line"><a name="l00597"></a><span class="lineno">  597</span>&#160;                   ListIndex PriorNode) {</div><div class="line"><a name="l00598"></a><span class="lineno">  598</span>&#160;    <span class="keyword">auto</span> UpwardDefs = <a class="code" href="namespacellvm.html#ad1a91b49e0c092818a0b82f6cc130a1b">make_range</a>(<a class="code" href="namespacellvm.html#aba42131f88415b191d5477802473b7d4">upward_defs_begin</a>({Phi, Paths[PriorNode].Loc}),</div><div class="line"><a name="l00599"></a><span class="lineno">  599</span>&#160;                                 <a class="code" href="namespacellvm.html#aaa8db63ab2c8843f6e41c7fde63b1d84">upward_defs_end</a>());</div><div class="line"><a name="l00600"></a><span class="lineno">  600</span>&#160;    <span class="keywordflow">for</span> (<span class="keyword">const</span> <a class="code" href="namespacellvm.html#aa9d12274f5a8784ab14b568bfa25ec0f">MemoryAccessPair</a> &amp;<a class="code" href="Option_8cpp.html#a04665169063c8ca1f2ea96c27fc7c2b2">P</a> : UpwardDefs) {</div><div class="line"><a name="l00601"></a><span class="lineno">  601</span>&#160;      PausedSearches.<a class="code" href="classllvm_1_1SmallVectorTemplateBase.html#af42bfbc067df27c19ee2fc859df58799">push_back</a>(Paths.<a class="code" href="classllvm_1_1SmallVectorBase.html#ac8624043115fb3a5076c964820001b61">size</a>());</div><div class="line"><a name="l00602"></a><span class="lineno">  602</span>&#160;      Paths.<a class="code" href="classllvm_1_1SmallVectorImpl.html#a396fcfee6914c76974b73c3d203da6a5">emplace_back</a>(<a class="code" href="Option_8cpp.html#a04665169063c8ca1f2ea96c27fc7c2b2">P</a>.second, <a class="code" href="Option_8cpp.html#a04665169063c8ca1f2ea96c27fc7c2b2">P</a>.first, PriorNode);</div><div class="line"><a name="l00603"></a><span class="lineno">  603</span>&#160;    }</div><div class="line"><a name="l00604"></a><span class="lineno">  604</span>&#160;  }</div><div class="line"><a name="l00605"></a><span class="lineno">  605</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00606"></a><span class="lineno">  606</span>&#160;<span class="comment">  /// Represents a search that terminated after finding a clobber. This clobber</span></div><div class="line"><a name="l00607"></a><span class="lineno">  607</span>&#160;<span class="comment">  /// may or may not be present in the path of defs from LastNode..SearchStart,</span></div><div class="line"><a name="l00608"></a><span class="lineno">  608</span>&#160;<span class="comment">  /// since it may have been retrieved from cache.</span></div><div class="line"><a name="l00609"></a><span class="lineno">  609</span>&#160;<span class="comment"></span>  <span class="keyword">struct </span>TerminatedPath {</div><div class="line"><a name="l00610"></a><span class="lineno">  610</span>&#160;    <a class="code" href="classllvm_1_1MemoryAccess.html">MemoryAccess</a> *Clobber;</div><div class="line"><a name="l00611"></a><span class="lineno">  611</span>&#160;    ListIndex LastNode;</div><div class="line"><a name="l00612"></a><span class="lineno">  612</span>&#160;  };</div><div class="line"><a name="l00613"></a><span class="lineno">  613</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00614"></a><span class="lineno">  614</span>&#160;<span class="comment">  /// Get an access that keeps us from optimizing to the given phi.</span></div><div class="line"><a name="l00615"></a><span class="lineno">  615</span>&#160;<span class="comment">  ///</span></div><div class="line"><a name="l00616"></a><span class="lineno">  616</span>&#160;<span class="comment">  /// PausedSearches is an array of indices into the Paths array. Its incoming</span></div><div class="line"><a name="l00617"></a><span class="lineno">  617</span>&#160;<span class="comment">  /// value is the indices of searches that stopped at the last phi optimization</span></div><div class="line"><a name="l00618"></a><span class="lineno">  618</span>&#160;<span class="comment">  /// target. It&#39;s left in an unspecified state.</span></div><div class="line"><a name="l00619"></a><span class="lineno">  619</span>&#160;<span class="comment">  ///</span></div><div class="line"><a name="l00620"></a><span class="lineno">  620</span>&#160;<span class="comment">  /// If this returns None, NewPaused is a vector of searches that terminated</span></div><div class="line"><a name="l00621"></a><span class="lineno">  621</span>&#160;<span class="comment">  /// at StopWhere. Otherwise, NewPaused is left in an unspecified state.</span></div><div class="line"><a name="l00622"></a><span class="lineno">  622</span>&#160;<span class="comment"></span>  <a class="code" href="classllvm_1_1Optional.html">Optional&lt;TerminatedPath&gt;</a></div><div class="line"><a name="l00623"></a><span class="lineno">  623</span>&#160;  getBlockingAccess(<span class="keyword">const</span> <a class="code" href="classllvm_1_1MemoryAccess.html">MemoryAccess</a> *StopWhere,</div><div class="line"><a name="l00624"></a><span class="lineno">  624</span>&#160;                    <a class="code" href="classllvm_1_1SmallVectorImpl.html">SmallVectorImpl&lt;ListIndex&gt;</a> &amp;PausedSearches,</div><div class="line"><a name="l00625"></a><span class="lineno">  625</span>&#160;                    <a class="code" href="classllvm_1_1SmallVectorImpl.html">SmallVectorImpl&lt;ListIndex&gt;</a> &amp;NewPaused,</div><div class="line"><a name="l00626"></a><span class="lineno">  626</span>&#160;                    <a class="code" href="classllvm_1_1SmallVectorImpl.html">SmallVectorImpl&lt;TerminatedPath&gt;</a> &amp;Terminated) {</div><div class="line"><a name="l00627"></a><span class="lineno">  627</span>&#160;    <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(!PausedSearches.<a class="code" href="classllvm_1_1SmallVectorBase.html#a495b11cf3890ab746d76ef2881f79041">empty</a>() &amp;&amp; <span class="stringliteral">&quot;No searches to continue?&quot;</span>);</div><div class="line"><a name="l00628"></a><span class="lineno">  628</span>&#160;</div><div class="line"><a name="l00629"></a><span class="lineno">  629</span>&#160;    <span class="comment">// BFS vs DFS really doesn&#39;t make a difference here, so just do a DFS with</span></div><div class="line"><a name="l00630"></a><span class="lineno">  630</span>&#160;    <span class="comment">// PausedSearches as our stack.</span></div><div class="line"><a name="l00631"></a><span class="lineno">  631</span>&#160;    <span class="keywordflow">while</span> (!PausedSearches.<a class="code" href="classllvm_1_1SmallVectorBase.html#a495b11cf3890ab746d76ef2881f79041">empty</a>()) {</div><div class="line"><a name="l00632"></a><span class="lineno">  632</span>&#160;      ListIndex PathIndex = PausedSearches.<a class="code" href="classllvm_1_1SmallVectorImpl.html#a07e23ae504e2b8c72fd055f93ded8899">pop_back_val</a>();</div><div class="line"><a name="l00633"></a><span class="lineno">  633</span>&#160;      DefPath &amp;Node = Paths[PathIndex];</div><div class="line"><a name="l00634"></a><span class="lineno">  634</span>&#160;</div><div class="line"><a name="l00635"></a><span class="lineno">  635</span>&#160;      <span class="comment">// If we&#39;ve already visited this path with this MemoryLocation, we don&#39;t</span></div><div class="line"><a name="l00636"></a><span class="lineno">  636</span>&#160;      <span class="comment">// need to do so again.</span></div><div class="line"><a name="l00637"></a><span class="lineno">  637</span>&#160;      <span class="comment">//</span></div><div class="line"><a name="l00638"></a><span class="lineno">  638</span>&#160;      <span class="comment">// NOTE: That we just drop these paths on the ground makes caching</span></div><div class="line"><a name="l00639"></a><span class="lineno">  639</span>&#160;      <span class="comment">// behavior sporadic. e.g. given a diamond:</span></div><div class="line"><a name="l00640"></a><span class="lineno">  640</span>&#160;      <span class="comment">//  A</span></div><div class="line"><a name="l00641"></a><span class="lineno">  641</span>&#160;      <span class="comment">// B C</span></div><div class="line"><a name="l00642"></a><span class="lineno">  642</span>&#160;      <span class="comment">//  D</span></div><div class="line"><a name="l00643"></a><span class="lineno">  643</span>&#160;      <span class="comment">//</span></div><div class="line"><a name="l00644"></a><span class="lineno">  644</span>&#160;      <span class="comment">// ...If we walk D, B, A, C, we&#39;ll only cache the result of phi</span></div><div class="line"><a name="l00645"></a><span class="lineno">  645</span>&#160;      <span class="comment">// optimization for A, B, and D; C will be skipped because it dies here.</span></div><div class="line"><a name="l00646"></a><span class="lineno">  646</span>&#160;      <span class="comment">// This arguably isn&#39;t the worst thing ever, since:</span></div><div class="line"><a name="l00647"></a><span class="lineno">  647</span>&#160;      <span class="comment">//   - We generally query things in a top-down order, so if we got below D</span></div><div class="line"><a name="l00648"></a><span class="lineno">  648</span>&#160;      <span class="comment">//     without needing cache entries for {C, MemLoc}, then chances are</span></div><div class="line"><a name="l00649"></a><span class="lineno">  649</span>&#160;      <span class="comment">//     that those cache entries would end up ultimately unused.</span></div><div class="line"><a name="l00650"></a><span class="lineno">  650</span>&#160;      <span class="comment">//   - We still cache things for A, so C only needs to walk up a bit.</span></div><div class="line"><a name="l00651"></a><span class="lineno">  651</span>&#160;      <span class="comment">// If this behavior becomes problematic, we can fix without a ton of extra</span></div><div class="line"><a name="l00652"></a><span class="lineno">  652</span>&#160;      <span class="comment">// work.</span></div><div class="line"><a name="l00653"></a><span class="lineno">  653</span>&#160;      <span class="keywordflow">if</span> (!VisitedPhis.<a class="code" href="classllvm_1_1detail_1_1DenseSetImpl.html#a79eed48913651aeedda2eed25201ea84">insert</a>({Node.Last, Node.Loc}).second)</div><div class="line"><a name="l00654"></a><span class="lineno">  654</span>&#160;        <span class="keywordflow">continue</span>;</div><div class="line"><a name="l00655"></a><span class="lineno">  655</span>&#160;</div><div class="line"><a name="l00656"></a><span class="lineno">  656</span>&#160;      <span class="keyword">const</span> <a class="code" href="classllvm_1_1MemoryAccess.html">MemoryAccess</a> *SkipStopWhere = <span class="keyword">nullptr</span>;</div><div class="line"><a name="l00657"></a><span class="lineno">  657</span>&#160;      <span class="keywordflow">if</span> (Query-&gt;SkipSelfAccess &amp;&amp; Node.Loc == Query-&gt;StartingLoc) {</div><div class="line"><a name="l00658"></a><span class="lineno">  658</span>&#160;        <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(isa&lt;MemoryDef&gt;(Query-&gt;OriginalAccess));</div><div class="line"><a name="l00659"></a><span class="lineno">  659</span>&#160;        SkipStopWhere = Query-&gt;OriginalAccess;</div><div class="line"><a name="l00660"></a><span class="lineno">  660</span>&#160;      }</div><div class="line"><a name="l00661"></a><span class="lineno">  661</span>&#160;</div><div class="line"><a name="l00662"></a><span class="lineno">  662</span>&#160;      UpwardsWalkResult Res = walkToPhiOrClobber(Node,</div><div class="line"><a name="l00663"></a><span class="lineno">  663</span>&#160;                                                 <span class="comment">/*StopAt=*/</span>StopWhere,</div><div class="line"><a name="l00664"></a><span class="lineno">  664</span>&#160;                                                 <span class="comment">/*SkipStopAt=*/</span>SkipStopWhere);</div><div class="line"><a name="l00665"></a><span class="lineno">  665</span>&#160;      <span class="keywordflow">if</span> (Res.IsKnownClobber) {</div><div class="line"><a name="l00666"></a><span class="lineno">  666</span>&#160;        <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(Res.Result != StopWhere &amp;&amp; Res.Result != SkipStopWhere);</div><div class="line"><a name="l00667"></a><span class="lineno">  667</span>&#160;</div><div class="line"><a name="l00668"></a><span class="lineno">  668</span>&#160;        <span class="comment">// If this wasn&#39;t a cache hit, we hit a clobber when walking. That&#39;s a</span></div><div class="line"><a name="l00669"></a><span class="lineno">  669</span>&#160;        <span class="comment">// failure.</span></div><div class="line"><a name="l00670"></a><span class="lineno">  670</span>&#160;        TerminatedPath Term{Res.Result, PathIndex};</div><div class="line"><a name="l00671"></a><span class="lineno">  671</span>&#160;        <span class="keywordflow">if</span> (!MSSA.<a class="code" href="classllvm_1_1MemorySSA.html#a56004f54560e9950f6eb148cb5dfa0a3">dominates</a>(Res.Result, StopWhere))</div><div class="line"><a name="l00672"></a><span class="lineno">  672</span>&#160;          <span class="keywordflow">return</span> Term;</div><div class="line"><a name="l00673"></a><span class="lineno">  673</span>&#160;</div><div class="line"><a name="l00674"></a><span class="lineno">  674</span>&#160;        <span class="comment">// Otherwise, it&#39;s a valid thing to potentially optimize to.</span></div><div class="line"><a name="l00675"></a><span class="lineno">  675</span>&#160;        Terminated.<a class="code" href="classllvm_1_1SmallVectorTemplateBase.html#af42bfbc067df27c19ee2fc859df58799">push_back</a>(Term);</div><div class="line"><a name="l00676"></a><span class="lineno">  676</span>&#160;        <span class="keywordflow">continue</span>;</div><div class="line"><a name="l00677"></a><span class="lineno">  677</span>&#160;      }</div><div class="line"><a name="l00678"></a><span class="lineno">  678</span>&#160;</div><div class="line"><a name="l00679"></a><span class="lineno">  679</span>&#160;      <span class="keywordflow">if</span> (Res.Result == StopWhere || Res.Result == SkipStopWhere) {</div><div class="line"><a name="l00680"></a><span class="lineno">  680</span>&#160;        <span class="comment">// We&#39;ve hit our target. Save this path off for if we want to continue</span></div><div class="line"><a name="l00681"></a><span class="lineno">  681</span>&#160;        <span class="comment">// walking. If we are in the mode of skipping the OriginalAccess, and</span></div><div class="line"><a name="l00682"></a><span class="lineno">  682</span>&#160;        <span class="comment">// we&#39;ve reached back to the OriginalAccess, do not save path, we&#39;ve</span></div><div class="line"><a name="l00683"></a><span class="lineno">  683</span>&#160;        <span class="comment">// just looped back to self.</span></div><div class="line"><a name="l00684"></a><span class="lineno">  684</span>&#160;        <span class="keywordflow">if</span> (Res.Result != SkipStopWhere)</div><div class="line"><a name="l00685"></a><span class="lineno">  685</span>&#160;          NewPaused.<a class="code" href="classllvm_1_1SmallVectorTemplateBase.html#af42bfbc067df27c19ee2fc859df58799">push_back</a>(PathIndex);</div><div class="line"><a name="l00686"></a><span class="lineno">  686</span>&#160;        <span class="keywordflow">continue</span>;</div><div class="line"><a name="l00687"></a><span class="lineno">  687</span>&#160;      }</div><div class="line"><a name="l00688"></a><span class="lineno">  688</span>&#160;</div><div class="line"><a name="l00689"></a><span class="lineno">  689</span>&#160;      <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(!MSSA.<a class="code" href="classllvm_1_1MemorySSA.html#ae3b89ffde42778289bcbd8a187199420">isLiveOnEntryDef</a>(Res.Result) &amp;&amp; <span class="stringliteral">&quot;liveOnEntry is a clobber&quot;</span>);</div><div class="line"><a name="l00690"></a><span class="lineno">  690</span>&#160;      addSearches(cast&lt;MemoryPhi&gt;(Res.Result), PausedSearches, PathIndex);</div><div class="line"><a name="l00691"></a><span class="lineno">  691</span>&#160;    }</div><div class="line"><a name="l00692"></a><span class="lineno">  692</span>&#160;</div><div class="line"><a name="l00693"></a><span class="lineno">  693</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="namespacellvm.html#a1d0ac37acc2482f8794195f5042b61b5a6adf97f83acf6453d4a6a4b1070f3754">None</a>;</div><div class="line"><a name="l00694"></a><span class="lineno">  694</span>&#160;  }</div><div class="line"><a name="l00695"></a><span class="lineno">  695</span>&#160;</div><div class="line"><a name="l00696"></a><span class="lineno">  696</span>&#160;  <span class="keyword">template</span> &lt;<span class="keyword">typename</span> T, <span class="keyword">typename</span> Walker&gt;</div><div class="line"><a name="l00697"></a><span class="lineno">  697</span>&#160;  <span class="keyword">struct </span>generic_def_path_iterator</div><div class="line"><a name="l00698"></a><span class="lineno">  698</span>&#160;      : <span class="keyword">public</span> <a class="code" href="classllvm_1_1iterator__facade__base.html">iterator_facade_base</a>&lt;generic_def_path_iterator&lt;T, Walker&gt;,</div><div class="line"><a name="l00699"></a><span class="lineno">  699</span>&#160;                                    std::forward_iterator_tag, T *&gt; {</div><div class="line"><a name="l00700"></a><span class="lineno">  700</span>&#160;    generic_def_path_iterator() {}</div><div class="line"><a name="l00701"></a><span class="lineno">  701</span>&#160;    generic_def_path_iterator(Walker *<a class="code" href="namespacellvm_1_1RISCVFenceField.html#a147be9e9780c1e33363ea572d4c7b25fa05c79fbfc58d9dd2851c467a1ef166bf">W</a>, ListIndex <a class="code" href="regcomp_8c.html#a0240ac851181b84ac374872dc5434ee4">N</a>) : <a class="code" href="namespacellvm_1_1RISCVFenceField.html#a147be9e9780c1e33363ea572d4c7b25fa05c79fbfc58d9dd2851c467a1ef166bf">W</a>(W), <a class="code" href="regcomp_8c.html#a0240ac851181b84ac374872dc5434ee4">N</a>(N) {}</div><div class="line"><a name="l00702"></a><span class="lineno">  702</span>&#160;</div><div class="line"><a name="l00703"></a><span class="lineno">  703</span>&#160;    <a class="code" href="classT.html">T</a> &amp;<a class="code" href="namespacellvm.html#a2366b4a30c90d2207626fb717dfb778d">operator*</a>()<span class="keyword"> const </span>{ <span class="keywordflow">return</span> curNode(); }</div><div class="line"><a name="l00704"></a><span class="lineno">  704</span>&#160;</div><div class="line"><a name="l00705"></a><span class="lineno">  705</span>&#160;    generic_def_path_iterator &amp;operator++() {</div><div class="line"><a name="l00706"></a><span class="lineno">  706</span>&#160;      N = curNode().Previous;</div><div class="line"><a name="l00707"></a><span class="lineno">  707</span>&#160;      <span class="keywordflow">return</span> *<span class="keyword">this</span>;</div><div class="line"><a name="l00708"></a><span class="lineno">  708</span>&#160;    }</div><div class="line"><a name="l00709"></a><span class="lineno">  709</span>&#160;</div><div class="line"><a name="l00710"></a><span class="lineno">  710</span>&#160;    <span class="keywordtype">bool</span> <a class="code" href="namespacellvm.html#a162c90bc179a6359438d060722bee35f">operator==</a>(<span class="keyword">const</span> generic_def_path_iterator &amp;<a class="code" href="namespacellvm_1_1RISCVFenceField.html#a147be9e9780c1e33363ea572d4c7b25fa1a33f1d911a725a1f81234a908d03edb">O</a>)<span class="keyword"> const </span>{</div><div class="line"><a name="l00711"></a><span class="lineno">  711</span>&#160;      <span class="keywordflow">if</span> (N.hasValue() != O.N.hasValue())</div><div class="line"><a name="l00712"></a><span class="lineno">  712</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div><div class="line"><a name="l00713"></a><span class="lineno">  713</span>&#160;      <span class="keywordflow">return</span> !N.hasValue() || *N == *O.N;</div><div class="line"><a name="l00714"></a><span class="lineno">  714</span>&#160;    }</div><div class="line"><a name="l00715"></a><span class="lineno">  715</span>&#160;</div><div class="line"><a name="l00716"></a><span class="lineno">  716</span>&#160;  <span class="keyword">private</span>:</div><div class="line"><a name="l00717"></a><span class="lineno">  717</span>&#160;    <a class="code" href="classT.html">T</a> &amp;curNode()<span class="keyword"> const </span>{ <span class="keywordflow">return</span> W-&gt;Paths[*<a class="code" href="regcomp_8c.html#a0240ac851181b84ac374872dc5434ee4">N</a>]; }</div><div class="line"><a name="l00718"></a><span class="lineno">  718</span>&#160;</div><div class="line"><a name="l00719"></a><span class="lineno">  719</span>&#160;    Walker *W = <span class="keyword">nullptr</span>;</div><div class="line"><a name="l00720"></a><span class="lineno">  720</span>&#160;    <a class="code" href="classllvm_1_1Optional.html">Optional&lt;ListIndex&gt;</a> N = <a class="code" href="namespacellvm.html#a1d0ac37acc2482f8794195f5042b61b5a6adf97f83acf6453d4a6a4b1070f3754">None</a>;</div><div class="line"><a name="l00721"></a><span class="lineno">  721</span>&#160;  };</div><div class="line"><a name="l00722"></a><span class="lineno">  722</span>&#160;</div><div class="line"><a name="l00723"></a><span class="lineno">  723</span>&#160;  <span class="keyword">using</span> def_path_iterator = generic_def_path_iterator&lt;DefPath, ClobberWalker&gt;;</div><div class="line"><a name="l00724"></a><span class="lineno">  724</span>&#160;  <span class="keyword">using</span> const_def_path_iterator =</div><div class="line"><a name="l00725"></a><span class="lineno">  725</span>&#160;      generic_def_path_iterator&lt;const DefPath, const ClobberWalker&gt;;</div><div class="line"><a name="l00726"></a><span class="lineno">  726</span>&#160;</div><div class="line"><a name="l00727"></a><span class="lineno">  727</span>&#160;  <a class="code" href="classllvm_1_1iterator__range.html">iterator_range&lt;def_path_iterator&gt;</a> def_path(ListIndex From) {</div><div class="line"><a name="l00728"></a><span class="lineno">  728</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="namespacellvm.html#ad1a91b49e0c092818a0b82f6cc130a1b">make_range</a>(def_path_iterator(<span class="keyword">this</span>, From), def_path_iterator());</div><div class="line"><a name="l00729"></a><span class="lineno">  729</span>&#160;  }</div><div class="line"><a name="l00730"></a><span class="lineno">  730</span>&#160;</div><div class="line"><a name="l00731"></a><span class="lineno">  731</span>&#160;  <a class="code" href="classllvm_1_1iterator__range.html">iterator_range&lt;const_def_path_iterator&gt;</a> const_def_path(ListIndex From)<span class="keyword"> const </span>{</div><div class="line"><a name="l00732"></a><span class="lineno">  732</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="namespacellvm.html#ad1a91b49e0c092818a0b82f6cc130a1b">make_range</a>(const_def_path_iterator(<span class="keyword">this</span>, From),</div><div class="line"><a name="l00733"></a><span class="lineno">  733</span>&#160;                      const_def_path_iterator());</div><div class="line"><a name="l00734"></a><span class="lineno">  734</span>&#160;  }</div><div class="line"><a name="l00735"></a><span class="lineno">  735</span>&#160;</div><div class="line"><a name="l00736"></a><span class="lineno">  736</span>&#160;  <span class="keyword">struct </span>OptznResult {<span class="comment"></span></div><div class="line"><a name="l00737"></a><span class="lineno">  737</span>&#160;<span class="comment">    /// The path that contains our result.</span></div><div class="line"><a name="l00738"></a><span class="lineno">  738</span>&#160;<span class="comment"></span>    TerminatedPath PrimaryClobber;<span class="comment"></span></div><div class="line"><a name="l00739"></a><span class="lineno">  739</span>&#160;<span class="comment">    /// The paths that we can legally cache back from, but that aren&#39;t</span></div><div class="line"><a name="l00740"></a><span class="lineno">  740</span>&#160;<span class="comment">    /// necessarily the result of the Phi optimization.</span></div><div class="line"><a name="l00741"></a><span class="lineno">  741</span>&#160;<span class="comment"></span>    <a class="code" href="classllvm_1_1SmallVector.html">SmallVector&lt;TerminatedPath, 4&gt;</a> OtherClobbers;</div><div class="line"><a name="l00742"></a><span class="lineno">  742</span>&#160;  };</div><div class="line"><a name="l00743"></a><span class="lineno">  743</span>&#160;</div><div class="line"><a name="l00744"></a><span class="lineno">  744</span>&#160;  ListIndex defPathIndex(<span class="keyword">const</span> DefPath &amp;<a class="code" href="regcomp_8c.html#a0240ac851181b84ac374872dc5434ee4">N</a>)<span class="keyword"> const </span>{</div><div class="line"><a name="l00745"></a><span class="lineno">  745</span>&#160;    <span class="comment">// The assert looks nicer if we don&#39;t need to do &amp;N</span></div><div class="line"><a name="l00746"></a><span class="lineno">  746</span>&#160;    <span class="keyword">const</span> DefPath *NP = &amp;<a class="code" href="regcomp_8c.html#a0240ac851181b84ac374872dc5434ee4">N</a>;</div><div class="line"><a name="l00747"></a><span class="lineno">  747</span>&#160;    <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(!Paths.<a class="code" href="classllvm_1_1SmallVectorBase.html#a495b11cf3890ab746d76ef2881f79041">empty</a>() &amp;&amp; NP &gt;= &amp;Paths.<a class="code" href="classllvm_1_1SmallVectorTemplateCommon.html#a58dc840fc84420b7f0b773794b8101c1">front</a>() &amp;&amp; NP &lt;= &amp;Paths.<a class="code" href="classllvm_1_1SmallVectorTemplateCommon.html#acd9e771a3296c6b24146955754620557">back</a>() &amp;&amp;</div><div class="line"><a name="l00748"></a><span class="lineno">  748</span>&#160;           <span class="stringliteral">&quot;Out of bounds DefPath!&quot;</span>);</div><div class="line"><a name="l00749"></a><span class="lineno">  749</span>&#160;    <span class="keywordflow">return</span> NP - &amp;Paths.<a class="code" href="classllvm_1_1SmallVectorTemplateCommon.html#a58dc840fc84420b7f0b773794b8101c1">front</a>();</div><div class="line"><a name="l00750"></a><span class="lineno">  750</span>&#160;  }</div><div class="line"><a name="l00751"></a><span class="lineno">  751</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00752"></a><span class="lineno">  752</span>&#160;<span class="comment">  /// Try to optimize a phi as best as we can. Returns a SmallVector of Paths</span></div><div class="line"><a name="l00753"></a><span class="lineno">  753</span>&#160;<span class="comment">  /// that act as legal clobbers. Note that this won&#39;t return *all* clobbers.</span></div><div class="line"><a name="l00754"></a><span class="lineno">  754</span>&#160;<span class="comment">  ///</span></div><div class="line"><a name="l00755"></a><span class="lineno">  755</span>&#160;<span class="comment">  /// Phi optimization algorithm tl;dr:</span></div><div class="line"><a name="l00756"></a><span class="lineno">  756</span>&#160;<span class="comment">  ///   - Find the earliest def/phi, A, we can optimize to</span></div><div class="line"><a name="l00757"></a><span class="lineno">  757</span>&#160;<span class="comment">  ///   - Find if all paths from the starting memory access ultimately reach A</span></div><div class="line"><a name="l00758"></a><span class="lineno">  758</span>&#160;<span class="comment">  ///     - If not, optimization isn&#39;t possible.</span></div><div class="line"><a name="l00759"></a><span class="lineno">  759</span>&#160;<span class="comment">  ///     - Otherwise, walk from A to another clobber or phi, A&#39;.</span></div><div class="line"><a name="l00760"></a><span class="lineno">  760</span>&#160;<span class="comment">  ///       - If A&#39; is a def, we&#39;re done.</span></div><div class="line"><a name="l00761"></a><span class="lineno">  761</span>&#160;<span class="comment">  ///       - If A&#39; is a phi, try to optimize it.</span></div><div class="line"><a name="l00762"></a><span class="lineno">  762</span>&#160;<span class="comment">  ///</span></div><div class="line"><a name="l00763"></a><span class="lineno">  763</span>&#160;<span class="comment">  /// A path is a series of {MemoryAccess, MemoryLocation} pairs. A path</span></div><div class="line"><a name="l00764"></a><span class="lineno">  764</span>&#160;<span class="comment">  /// terminates when a MemoryAccess that clobbers said MemoryLocation is found.</span></div><div class="line"><a name="l00765"></a><span class="lineno">  765</span>&#160;<span class="comment"></span>  OptznResult tryOptimizePhi(<a class="code" href="classllvm_1_1MemoryPhi.html">MemoryPhi</a> *Phi, <a class="code" href="classllvm_1_1MemoryAccess.html">MemoryAccess</a> *Start,</div><div class="line"><a name="l00766"></a><span class="lineno">  766</span>&#160;                             <span class="keyword">const</span> <a class="code" href="classllvm_1_1MemoryLocation.html">MemoryLocation</a> &amp;Loc) {</div><div class="line"><a name="l00767"></a><span class="lineno">  767</span>&#160;    <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(Paths.<a class="code" href="classllvm_1_1SmallVectorBase.html#a495b11cf3890ab746d76ef2881f79041">empty</a>() &amp;&amp; VisitedPhis.<a class="code" href="classllvm_1_1detail_1_1DenseSetImpl.html#a9a3c9d867ff6bde97841c2b7983f5c70">empty</a>() &amp;&amp;</div><div class="line"><a name="l00768"></a><span class="lineno">  768</span>&#160;           <span class="stringliteral">&quot;Reset the optimization state.&quot;</span>);</div><div class="line"><a name="l00769"></a><span class="lineno">  769</span>&#160;</div><div class="line"><a name="l00770"></a><span class="lineno">  770</span>&#160;    Paths.<a class="code" href="classllvm_1_1SmallVectorImpl.html#a396fcfee6914c76974b73c3d203da6a5">emplace_back</a>(Loc, Start, Phi, <a class="code" href="namespacellvm.html#a1d0ac37acc2482f8794195f5042b61b5a6adf97f83acf6453d4a6a4b1070f3754">None</a>);</div><div class="line"><a name="l00771"></a><span class="lineno">  771</span>&#160;    <span class="comment">// Stores how many &quot;valid&quot; optimization nodes we had prior to calling</span></div><div class="line"><a name="l00772"></a><span class="lineno">  772</span>&#160;    <span class="comment">// addSearches/getBlockingAccess. Necessary for caching if we had a blocker.</span></div><div class="line"><a name="l00773"></a><span class="lineno">  773</span>&#160;    <span class="keyword">auto</span> PriorPathsSize = Paths.<a class="code" href="classllvm_1_1SmallVectorBase.html#ac8624043115fb3a5076c964820001b61">size</a>();</div><div class="line"><a name="l00774"></a><span class="lineno">  774</span>&#160;</div><div class="line"><a name="l00775"></a><span class="lineno">  775</span>&#160;    <a class="code" href="classllvm_1_1SmallVector.html">SmallVector&lt;ListIndex, 16&gt;</a> PausedSearches;</div><div class="line"><a name="l00776"></a><span class="lineno">  776</span>&#160;    <a class="code" href="classllvm_1_1SmallVector.html">SmallVector&lt;ListIndex, 8&gt;</a> NewPaused;</div><div class="line"><a name="l00777"></a><span class="lineno">  777</span>&#160;    <a class="code" href="classllvm_1_1SmallVector.html">SmallVector&lt;TerminatedPath, 4&gt;</a> TerminatedPaths;</div><div class="line"><a name="l00778"></a><span class="lineno">  778</span>&#160;</div><div class="line"><a name="l00779"></a><span class="lineno">  779</span>&#160;    addSearches(Phi, PausedSearches, 0);</div><div class="line"><a name="l00780"></a><span class="lineno">  780</span>&#160;</div><div class="line"><a name="l00781"></a><span class="lineno">  781</span>&#160;    <span class="comment">// Moves the TerminatedPath with the &quot;most dominated&quot; Clobber to the end of</span></div><div class="line"><a name="l00782"></a><span class="lineno">  782</span>&#160;    <span class="comment">// Paths.</span></div><div class="line"><a name="l00783"></a><span class="lineno">  783</span>&#160;    <span class="keyword">auto</span> MoveDominatedPathToEnd = [&amp;](<a class="code" href="classllvm_1_1SmallVectorImpl.html">SmallVectorImpl&lt;TerminatedPath&gt;</a> &amp;Paths) {</div><div class="line"><a name="l00784"></a><span class="lineno">  784</span>&#160;      <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(!Paths.<a class="code" href="classllvm_1_1SmallVectorBase.html#a495b11cf3890ab746d76ef2881f79041">empty</a>() &amp;&amp; <span class="stringliteral">&quot;Need a path to move&quot;</span>);</div><div class="line"><a name="l00785"></a><span class="lineno">  785</span>&#160;      <span class="keyword">auto</span> Dom = Paths.<a class="code" href="classllvm_1_1SmallVectorTemplateCommon.html#a8a045d250952c0867382a9840ee18fdf">begin</a>();</div><div class="line"><a name="l00786"></a><span class="lineno">  786</span>&#160;      <span class="keywordflow">for</span> (<span class="keyword">auto</span> <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> = std::next(Dom), <a class="code" href="BuiltinGCs_8cpp.html#a6742d2e0a668baf1196ec69e158d5f15">E</a> = Paths.<a class="code" href="classllvm_1_1SmallVectorTemplateCommon.html#a075e34e98605d0e7c289763a104869ac">end</a>(); <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> != <a class="code" href="BuiltinGCs_8cpp.html#a6742d2e0a668baf1196ec69e158d5f15">E</a>; ++<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>)</div><div class="line"><a name="l00787"></a><span class="lineno">  787</span>&#160;        <span class="keywordflow">if</span> (!MSSA.<a class="code" href="classllvm_1_1MemorySSA.html#a56004f54560e9950f6eb148cb5dfa0a3">dominates</a>(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>-&gt;Clobber, Dom-&gt;Clobber))</div><div class="line"><a name="l00788"></a><span class="lineno">  788</span>&#160;          Dom = <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>;</div><div class="line"><a name="l00789"></a><span class="lineno">  789</span>&#160;      <span class="keyword">auto</span> Last = Paths.<a class="code" href="classllvm_1_1SmallVectorTemplateCommon.html#a075e34e98605d0e7c289763a104869ac">end</a>() - 1;</div><div class="line"><a name="l00790"></a><span class="lineno">  790</span>&#160;      <span class="keywordflow">if</span> (Last != Dom)</div><div class="line"><a name="l00791"></a><span class="lineno">  791</span>&#160;        std::iter_swap(Last, Dom);</div><div class="line"><a name="l00792"></a><span class="lineno">  792</span>&#160;    };</div><div class="line"><a name="l00793"></a><span class="lineno">  793</span>&#160;</div><div class="line"><a name="l00794"></a><span class="lineno">  794</span>&#160;    <a class="code" href="classllvm_1_1MemoryPhi.html">MemoryPhi</a> *Current = Phi;</div><div class="line"><a name="l00795"></a><span class="lineno">  795</span>&#160;    <span class="keywordflow">while</span> (<span class="keyword">true</span>) {</div><div class="line"><a name="l00796"></a><span class="lineno">  796</span>&#160;      <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(!MSSA.<a class="code" href="classllvm_1_1MemorySSA.html#ae3b89ffde42778289bcbd8a187199420">isLiveOnEntryDef</a>(Current) &amp;&amp;</div><div class="line"><a name="l00797"></a><span class="lineno">  797</span>&#160;             <span class="stringliteral">&quot;liveOnEntry wasn&#39;t treated as a clobber?&quot;</span>);</div><div class="line"><a name="l00798"></a><span class="lineno">  798</span>&#160;</div><div class="line"><a name="l00799"></a><span class="lineno">  799</span>&#160;      <span class="keyword">const</span> <span class="keyword">auto</span> *<a class="code" href="classllvm_1_1Target.html">Target</a> = getWalkTarget(Current);</div><div class="line"><a name="l00800"></a><span class="lineno">  800</span>&#160;      <span class="comment">// If a TerminatedPath doesn&#39;t dominate Target, then it wasn&#39;t a legal</span></div><div class="line"><a name="l00801"></a><span class="lineno">  801</span>&#160;      <span class="comment">// optimization for the prior phi.</span></div><div class="line"><a name="l00802"></a><span class="lineno">  802</span>&#160;      <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(<a class="code" href="namespacellvm.html#a0d10fe510ced2849a8074fe81e5d04ce">all_of</a>(TerminatedPaths, [&amp;](<span class="keyword">const</span> TerminatedPath &amp;<a class="code" href="Option_8cpp.html#a04665169063c8ca1f2ea96c27fc7c2b2">P</a>) {</div><div class="line"><a name="l00803"></a><span class="lineno">  803</span>&#160;        <span class="keywordflow">return</span> MSSA.<a class="code" href="classllvm_1_1MemorySSA.html#a56004f54560e9950f6eb148cb5dfa0a3">dominates</a>(P.Clobber, Target);</div><div class="line"><a name="l00804"></a><span class="lineno">  804</span>&#160;      }));</div><div class="line"><a name="l00805"></a><span class="lineno">  805</span>&#160;</div><div class="line"><a name="l00806"></a><span class="lineno">  806</span>&#160;      <span class="comment">// FIXME: This is broken, because the Blocker may be reported to be</span></div><div class="line"><a name="l00807"></a><span class="lineno">  807</span>&#160;      <span class="comment">// liveOnEntry, and we&#39;ll happily wait for that to disappear (read: never)</span></div><div class="line"><a name="l00808"></a><span class="lineno">  808</span>&#160;      <span class="comment">// For the moment, this is fine, since we do nothing with blocker info.</span></div><div class="line"><a name="l00809"></a><span class="lineno">  809</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1Optional.html">Optional&lt;TerminatedPath&gt;</a> Blocker = getBlockingAccess(</div><div class="line"><a name="l00810"></a><span class="lineno">  810</span>&#160;              Target, PausedSearches, NewPaused, TerminatedPaths)) {</div><div class="line"><a name="l00811"></a><span class="lineno">  811</span>&#160;</div><div class="line"><a name="l00812"></a><span class="lineno">  812</span>&#160;        <span class="comment">// Find the node we started at. We can&#39;t search based on N-&gt;Last, since</span></div><div class="line"><a name="l00813"></a><span class="lineno">  813</span>&#160;        <span class="comment">// we may have gone around a loop with a different MemoryLocation.</span></div><div class="line"><a name="l00814"></a><span class="lineno">  814</span>&#160;        <span class="keyword">auto</span> Iter = <a class="code" href="namespacellvm.html#a6e5bba09e6cf0a670994bdfdfe6ccee6">find_if</a>(def_path(Blocker-&gt;LastNode), [&amp;](<span class="keyword">const</span> DefPath &amp;N) {</div><div class="line"><a name="l00815"></a><span class="lineno">  815</span>&#160;          return defPathIndex(N) &lt; PriorPathsSize;</div><div class="line"><a name="l00816"></a><span class="lineno">  816</span>&#160;        });</div><div class="line"><a name="l00817"></a><span class="lineno">  817</span>&#160;        <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(Iter != def_path_iterator());</div><div class="line"><a name="l00818"></a><span class="lineno">  818</span>&#160;</div><div class="line"><a name="l00819"></a><span class="lineno">  819</span>&#160;        DefPath &amp;CurNode = *Iter;</div><div class="line"><a name="l00820"></a><span class="lineno">  820</span>&#160;        <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(CurNode.Last == Current);</div><div class="line"><a name="l00821"></a><span class="lineno">  821</span>&#160;</div><div class="line"><a name="l00822"></a><span class="lineno">  822</span>&#160;        <span class="comment">// Two things:</span></div><div class="line"><a name="l00823"></a><span class="lineno">  823</span>&#160;        <span class="comment">// A. We can&#39;t reliably cache all of NewPaused back. Consider a case</span></div><div class="line"><a name="l00824"></a><span class="lineno">  824</span>&#160;        <span class="comment">//    where we have two paths in NewPaused; one of which can&#39;t optimize</span></div><div class="line"><a name="l00825"></a><span class="lineno">  825</span>&#160;        <span class="comment">//    above this phi, whereas the other can. If we cache the second path</span></div><div class="line"><a name="l00826"></a><span class="lineno">  826</span>&#160;        <span class="comment">//    back, we&#39;ll end up with suboptimal cache entries. We can handle</span></div><div class="line"><a name="l00827"></a><span class="lineno">  827</span>&#160;        <span class="comment">//    cases like this a bit better when we either try to find all</span></div><div class="line"><a name="l00828"></a><span class="lineno">  828</span>&#160;        <span class="comment">//    clobbers that block phi optimization, or when our cache starts</span></div><div class="line"><a name="l00829"></a><span class="lineno">  829</span>&#160;        <span class="comment">//    supporting unfinished searches.</span></div><div class="line"><a name="l00830"></a><span class="lineno">  830</span>&#160;        <span class="comment">// B. We can&#39;t reliably cache TerminatedPaths back here without doing</span></div><div class="line"><a name="l00831"></a><span class="lineno">  831</span>&#160;        <span class="comment">//    extra checks; consider a case like:</span></div><div class="line"><a name="l00832"></a><span class="lineno">  832</span>&#160;        <span class="comment">//       T</span></div><div class="line"><a name="l00833"></a><span class="lineno">  833</span>&#160;        <span class="comment">//      / \</span></div><div class="line"><a name="l00834"></a><span class="lineno">  834</span>&#160;<span class="comment">        //     D   C</span></div><div class="line"><a name="l00835"></a><span class="lineno">  835</span>&#160;        <span class="comment">//      \ /</span></div><div class="line"><a name="l00836"></a><span class="lineno">  836</span>&#160;        <span class="comment">//       S</span></div><div class="line"><a name="l00837"></a><span class="lineno">  837</span>&#160;        <span class="comment">//    Where T is our target, C is a node with a clobber on it, D is a</span></div><div class="line"><a name="l00838"></a><span class="lineno">  838</span>&#160;        <span class="comment">//    diamond (with a clobber *only* on the left or right node, N), and</span></div><div class="line"><a name="l00839"></a><span class="lineno">  839</span>&#160;        <span class="comment">//    S is our start. Say we walk to D, through the node opposite N</span></div><div class="line"><a name="l00840"></a><span class="lineno">  840</span>&#160;        <span class="comment">//    (read: ignoring the clobber), and see a cache entry in the top</span></div><div class="line"><a name="l00841"></a><span class="lineno">  841</span>&#160;        <span class="comment">//    node of D. That cache entry gets put into TerminatedPaths. We then</span></div><div class="line"><a name="l00842"></a><span class="lineno">  842</span>&#160;        <span class="comment">//    walk up to C (N is later in our worklist), find the clobber, and</span></div><div class="line"><a name="l00843"></a><span class="lineno">  843</span>&#160;        <span class="comment">//    quit. If we append TerminatedPaths to OtherClobbers, we&#39;ll cache</span></div><div class="line"><a name="l00844"></a><span class="lineno">  844</span>&#160;        <span class="comment">//    the bottom part of D to the cached clobber, ignoring the clobber</span></div><div class="line"><a name="l00845"></a><span class="lineno">  845</span>&#160;        <span class="comment">//    in N. Again, this problem goes away if we start tracking all</span></div><div class="line"><a name="l00846"></a><span class="lineno">  846</span>&#160;        <span class="comment">//    blockers for a given phi optimization.</span></div><div class="line"><a name="l00847"></a><span class="lineno">  847</span>&#160;        TerminatedPath Result{CurNode.Last, defPathIndex(CurNode)};</div><div class="line"><a name="l00848"></a><span class="lineno">  848</span>&#160;        <span class="keywordflow">return</span> {Result, {}};</div><div class="line"><a name="l00849"></a><span class="lineno">  849</span>&#160;      }</div><div class="line"><a name="l00850"></a><span class="lineno">  850</span>&#160;</div><div class="line"><a name="l00851"></a><span class="lineno">  851</span>&#160;      <span class="comment">// If there&#39;s nothing left to search, then all paths led to valid clobbers</span></div><div class="line"><a name="l00852"></a><span class="lineno">  852</span>&#160;      <span class="comment">// that we got from our cache; pick the nearest to the start, and allow</span></div><div class="line"><a name="l00853"></a><span class="lineno">  853</span>&#160;      <span class="comment">// the rest to be cached back.</span></div><div class="line"><a name="l00854"></a><span class="lineno">  854</span>&#160;      <span class="keywordflow">if</span> (NewPaused.<a class="code" href="classllvm_1_1SmallVectorBase.html#a495b11cf3890ab746d76ef2881f79041">empty</a>()) {</div><div class="line"><a name="l00855"></a><span class="lineno">  855</span>&#160;        MoveDominatedPathToEnd(TerminatedPaths);</div><div class="line"><a name="l00856"></a><span class="lineno">  856</span>&#160;        TerminatedPath Result = TerminatedPaths.<a class="code" href="classllvm_1_1SmallVectorImpl.html#a07e23ae504e2b8c72fd055f93ded8899">pop_back_val</a>();</div><div class="line"><a name="l00857"></a><span class="lineno">  857</span>&#160;        <span class="keywordflow">return</span> {Result, std::move(TerminatedPaths)};</div><div class="line"><a name="l00858"></a><span class="lineno">  858</span>&#160;      }</div><div class="line"><a name="l00859"></a><span class="lineno">  859</span>&#160;</div><div class="line"><a name="l00860"></a><span class="lineno">  860</span>&#160;      <a class="code" href="classllvm_1_1MemoryAccess.html">MemoryAccess</a> *DefChainEnd = <span class="keyword">nullptr</span>;</div><div class="line"><a name="l00861"></a><span class="lineno">  861</span>&#160;      <a class="code" href="classllvm_1_1SmallVector.html">SmallVector&lt;TerminatedPath, 4&gt;</a> Clobbers;</div><div class="line"><a name="l00862"></a><span class="lineno">  862</span>&#160;      <span class="keywordflow">for</span> (ListIndex Paused : NewPaused) {</div><div class="line"><a name="l00863"></a><span class="lineno">  863</span>&#160;        UpwardsWalkResult WR = walkToPhiOrClobber(Paths[Paused]);</div><div class="line"><a name="l00864"></a><span class="lineno">  864</span>&#160;        <span class="keywordflow">if</span> (WR.IsKnownClobber)</div><div class="line"><a name="l00865"></a><span class="lineno">  865</span>&#160;          Clobbers.<a class="code" href="classllvm_1_1SmallVectorTemplateBase.html#af42bfbc067df27c19ee2fc859df58799">push_back</a>({WR.Result, Paused});</div><div class="line"><a name="l00866"></a><span class="lineno">  866</span>&#160;        <span class="keywordflow">else</span></div><div class="line"><a name="l00867"></a><span class="lineno">  867</span>&#160;          <span class="comment">// Micro-opt: If we hit the end of the chain, save it.</span></div><div class="line"><a name="l00868"></a><span class="lineno">  868</span>&#160;          DefChainEnd = WR.Result;</div><div class="line"><a name="l00869"></a><span class="lineno">  869</span>&#160;      }</div><div class="line"><a name="l00870"></a><span class="lineno">  870</span>&#160;</div><div class="line"><a name="l00871"></a><span class="lineno">  871</span>&#160;      <span class="keywordflow">if</span> (!TerminatedPaths.<a class="code" href="classllvm_1_1SmallVectorBase.html#a495b11cf3890ab746d76ef2881f79041">empty</a>()) {</div><div class="line"><a name="l00872"></a><span class="lineno">  872</span>&#160;        <span class="comment">// If we couldn&#39;t find the dominating phi/liveOnEntry in the above loop,</span></div><div class="line"><a name="l00873"></a><span class="lineno">  873</span>&#160;        <span class="comment">// do it now.</span></div><div class="line"><a name="l00874"></a><span class="lineno">  874</span>&#160;        <span class="keywordflow">if</span> (!DefChainEnd)</div><div class="line"><a name="l00875"></a><span class="lineno">  875</span>&#160;          <span class="keywordflow">for</span> (<span class="keyword">auto</span> *MA : <a class="code" href="namespacellvm.html#ae833ff4bb3c49473a3eb6aa5db75ff25">def_chain</a>(const_cast&lt;MemoryAccess *&gt;(Target)))</div><div class="line"><a name="l00876"></a><span class="lineno">  876</span>&#160;            DefChainEnd = MA;</div><div class="line"><a name="l00877"></a><span class="lineno">  877</span>&#160;        <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(DefChainEnd &amp;&amp; <span class="stringliteral">&quot;Failed to find dominating phi/liveOnEntry&quot;</span>);</div><div class="line"><a name="l00878"></a><span class="lineno">  878</span>&#160;</div><div class="line"><a name="l00879"></a><span class="lineno">  879</span>&#160;        <span class="comment">// If any of the terminated paths don&#39;t dominate the phi we&#39;ll try to</span></div><div class="line"><a name="l00880"></a><span class="lineno">  880</span>&#160;        <span class="comment">// optimize, we need to figure out what they are and quit.</span></div><div class="line"><a name="l00881"></a><span class="lineno">  881</span>&#160;        <span class="keyword">const</span> <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *ChainBB = DefChainEnd-&gt;<a class="code" href="classllvm_1_1MemoryAccess.html#aa468ad3fa68bdf6703c391deaec97706">getBlock</a>();</div><div class="line"><a name="l00882"></a><span class="lineno">  882</span>&#160;        <span class="keywordflow">for</span> (<span class="keyword">const</span> TerminatedPath &amp;TP : TerminatedPaths) {</div><div class="line"><a name="l00883"></a><span class="lineno">  883</span>&#160;          <span class="comment">// Because we know that DefChainEnd is as &quot;high&quot; as we can go, we</span></div><div class="line"><a name="l00884"></a><span class="lineno">  884</span>&#160;          <span class="comment">// don&#39;t need local dominance checks; BB dominance is sufficient.</span></div><div class="line"><a name="l00885"></a><span class="lineno">  885</span>&#160;          <span class="keywordflow">if</span> (DT.<a class="code" href="classllvm_1_1DominatorTree.html#ac3abe77784353227ce14dc7c5815c141">dominates</a>(ChainBB, TP.Clobber-&gt;getBlock()))</div><div class="line"><a name="l00886"></a><span class="lineno">  886</span>&#160;            Clobbers.<a class="code" href="classllvm_1_1SmallVectorTemplateBase.html#af42bfbc067df27c19ee2fc859df58799">push_back</a>(TP);</div><div class="line"><a name="l00887"></a><span class="lineno">  887</span>&#160;        }</div><div class="line"><a name="l00888"></a><span class="lineno">  888</span>&#160;      }</div><div class="line"><a name="l00889"></a><span class="lineno">  889</span>&#160;</div><div class="line"><a name="l00890"></a><span class="lineno">  890</span>&#160;      <span class="comment">// If we have clobbers in the def chain, find the one closest to Current</span></div><div class="line"><a name="l00891"></a><span class="lineno">  891</span>&#160;      <span class="comment">// and quit.</span></div><div class="line"><a name="l00892"></a><span class="lineno">  892</span>&#160;      <span class="keywordflow">if</span> (!Clobbers.<a class="code" href="classllvm_1_1SmallVectorBase.html#a495b11cf3890ab746d76ef2881f79041">empty</a>()) {</div><div class="line"><a name="l00893"></a><span class="lineno">  893</span>&#160;        MoveDominatedPathToEnd(Clobbers);</div><div class="line"><a name="l00894"></a><span class="lineno">  894</span>&#160;        TerminatedPath Result = Clobbers.<a class="code" href="classllvm_1_1SmallVectorImpl.html#a07e23ae504e2b8c72fd055f93ded8899">pop_back_val</a>();</div><div class="line"><a name="l00895"></a><span class="lineno">  895</span>&#160;        <span class="keywordflow">return</span> {Result, std::move(Clobbers)};</div><div class="line"><a name="l00896"></a><span class="lineno">  896</span>&#160;      }</div><div class="line"><a name="l00897"></a><span class="lineno">  897</span>&#160;</div><div class="line"><a name="l00898"></a><span class="lineno">  898</span>&#160;      <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(<a class="code" href="namespacellvm.html#a0d10fe510ced2849a8074fe81e5d04ce">all_of</a>(NewPaused,</div><div class="line"><a name="l00899"></a><span class="lineno">  899</span>&#160;                    [&amp;](ListIndex <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>) { <span class="keywordflow">return</span> Paths[<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>].Last == DefChainEnd; }));</div><div class="line"><a name="l00900"></a><span class="lineno">  900</span>&#160;</div><div class="line"><a name="l00901"></a><span class="lineno">  901</span>&#160;      <span class="comment">// Because liveOnEntry is a clobber, this must be a phi.</span></div><div class="line"><a name="l00902"></a><span class="lineno">  902</span>&#160;      <span class="keyword">auto</span> *DefChainPhi = cast&lt;MemoryPhi&gt;(DefChainEnd);</div><div class="line"><a name="l00903"></a><span class="lineno">  903</span>&#160;</div><div class="line"><a name="l00904"></a><span class="lineno">  904</span>&#160;      PriorPathsSize = Paths.<a class="code" href="classllvm_1_1SmallVectorBase.html#ac8624043115fb3a5076c964820001b61">size</a>();</div><div class="line"><a name="l00905"></a><span class="lineno">  905</span>&#160;      PausedSearches.<a class="code" href="classllvm_1_1SmallVectorImpl.html#aac0ea55010b7b1a301e65a0baea057aa">clear</a>();</div><div class="line"><a name="l00906"></a><span class="lineno">  906</span>&#160;      <span class="keywordflow">for</span> (ListIndex I : NewPaused)</div><div class="line"><a name="l00907"></a><span class="lineno">  907</span>&#160;        addSearches(DefChainPhi, PausedSearches, I);</div><div class="line"><a name="l00908"></a><span class="lineno">  908</span>&#160;      NewPaused.clear();</div><div class="line"><a name="l00909"></a><span class="lineno">  909</span>&#160;</div><div class="line"><a name="l00910"></a><span class="lineno">  910</span>&#160;      Current = DefChainPhi;</div><div class="line"><a name="l00911"></a><span class="lineno">  911</span>&#160;    }</div><div class="line"><a name="l00912"></a><span class="lineno">  912</span>&#160;  }</div><div class="line"><a name="l00913"></a><span class="lineno">  913</span>&#160;</div><div class="line"><a name="l00914"></a><span class="lineno">  914</span>&#160;  <span class="keywordtype">void</span> verifyOptResult(<span class="keyword">const</span> OptznResult &amp;R)<span class="keyword"> const </span>{</div><div class="line"><a name="l00915"></a><span class="lineno">  915</span>&#160;    <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(<a class="code" href="namespacellvm.html#a0d10fe510ced2849a8074fe81e5d04ce">all_of</a>(R.OtherClobbers, [&amp;](<span class="keyword">const</span> TerminatedPath &amp;<a class="code" href="Option_8cpp.html#a04665169063c8ca1f2ea96c27fc7c2b2">P</a>) {</div><div class="line"><a name="l00916"></a><span class="lineno">  916</span>&#160;      return MSSA.dominates(P.Clobber, R.PrimaryClobber.Clobber);</div><div class="line"><a name="l00917"></a><span class="lineno">  917</span>&#160;    }));</div><div class="line"><a name="l00918"></a><span class="lineno">  918</span>&#160;  }</div><div class="line"><a name="l00919"></a><span class="lineno">  919</span>&#160;</div><div class="line"><a name="l00920"></a><span class="lineno">  920</span>&#160;  <span class="keywordtype">void</span> resetPhiOptznState() {</div><div class="line"><a name="l00921"></a><span class="lineno">  921</span>&#160;    Paths.<a class="code" href="classllvm_1_1SmallVectorImpl.html#aac0ea55010b7b1a301e65a0baea057aa">clear</a>();</div><div class="line"><a name="l00922"></a><span class="lineno">  922</span>&#160;    VisitedPhis.<a class="code" href="classllvm_1_1detail_1_1DenseSetImpl.html#a1fbf4d66a9eeaa9ade03e8febee097ee">clear</a>();</div><div class="line"><a name="l00923"></a><span class="lineno">  923</span>&#160;  }</div><div class="line"><a name="l00924"></a><span class="lineno">  924</span>&#160;</div><div class="line"><a name="l00925"></a><span class="lineno">  925</span>&#160;<span class="keyword">public</span>:</div><div class="line"><a name="l00926"></a><span class="lineno">  926</span>&#160;  ClobberWalker(<span class="keyword">const</span> <a class="code" href="classllvm_1_1MemorySSA.html">MemorySSA</a> &amp;MSSA, AliasAnalysisType &amp;AA, <a class="code" href="classllvm_1_1DominatorTree.html">DominatorTree</a> &amp;DT)</div><div class="line"><a name="l00927"></a><span class="lineno">  927</span>&#160;      : MSSA(MSSA), AA(AA), DT(DT) {}</div><div class="line"><a name="l00928"></a><span class="lineno">  928</span>&#160;</div><div class="line"><a name="l00929"></a><span class="lineno">  929</span>&#160;  AliasAnalysisType *getAA() { <span class="keywordflow">return</span> &amp;AA; }<span class="comment"></span></div><div class="line"><a name="l00930"></a><span class="lineno">  930</span>&#160;<span class="comment">  /// Finds the nearest clobber for the given query, optimizing phis if</span></div><div class="line"><a name="l00931"></a><span class="lineno">  931</span>&#160;<span class="comment">  /// possible.</span></div><div class="line"><a name="l00932"></a><span class="lineno">  932</span>&#160;<span class="comment"></span>  <a class="code" href="classllvm_1_1MemoryAccess.html">MemoryAccess</a> *findClobber(<a class="code" href="classllvm_1_1MemoryAccess.html">MemoryAccess</a> *Start, UpwardsMemoryQuery &amp;Q,</div><div class="line"><a name="l00933"></a><span class="lineno">  933</span>&#160;                            <span class="keywordtype">unsigned</span> &amp;UpWalkLimit) {</div><div class="line"><a name="l00934"></a><span class="lineno">  934</span>&#160;    Query = &amp;Q;</div><div class="line"><a name="l00935"></a><span class="lineno">  935</span>&#160;    UpwardWalkLimit = &amp;UpWalkLimit;</div><div class="line"><a name="l00936"></a><span class="lineno">  936</span>&#160;    <span class="comment">// Starting limit must be &gt; 0.</span></div><div class="line"><a name="l00937"></a><span class="lineno">  937</span>&#160;    <span class="keywordflow">if</span> (!UpWalkLimit)</div><div class="line"><a name="l00938"></a><span class="lineno">  938</span>&#160;      UpWalkLimit++;</div><div class="line"><a name="l00939"></a><span class="lineno">  939</span>&#160;</div><div class="line"><a name="l00940"></a><span class="lineno">  940</span>&#160;    <a class="code" href="classllvm_1_1MemoryAccess.html">MemoryAccess</a> *Current = Start;</div><div class="line"><a name="l00941"></a><span class="lineno">  941</span>&#160;    <span class="comment">// This walker pretends uses don&#39;t exist. If we&#39;re handed one, silently grab</span></div><div class="line"><a name="l00942"></a><span class="lineno">  942</span>&#160;    <span class="comment">// its def. (This has the nice side-effect of ensuring we never cache uses)</span></div><div class="line"><a name="l00943"></a><span class="lineno">  943</span>&#160;    <span class="keywordflow">if</span> (<span class="keyword">auto</span> *MU = dyn_cast&lt;MemoryUse&gt;(Start))</div><div class="line"><a name="l00944"></a><span class="lineno">  944</span>&#160;      Current = MU-&gt;getDefiningAccess();</div><div class="line"><a name="l00945"></a><span class="lineno">  945</span>&#160;</div><div class="line"><a name="l00946"></a><span class="lineno">  946</span>&#160;    DefPath FirstDesc(Q.StartingLoc, Current, Current, <a class="code" href="namespacellvm.html#a1d0ac37acc2482f8794195f5042b61b5a6adf97f83acf6453d4a6a4b1070f3754">None</a>);</div><div class="line"><a name="l00947"></a><span class="lineno">  947</span>&#160;    <span class="comment">// Fast path for the overly-common case (no crazy phi optimization</span></div><div class="line"><a name="l00948"></a><span class="lineno">  948</span>&#160;    <span class="comment">// necessary)</span></div><div class="line"><a name="l00949"></a><span class="lineno">  949</span>&#160;    UpwardsWalkResult WalkResult = walkToPhiOrClobber(FirstDesc);</div><div class="line"><a name="l00950"></a><span class="lineno">  950</span>&#160;    <a class="code" href="classllvm_1_1MemoryAccess.html">MemoryAccess</a> *Result;</div><div class="line"><a name="l00951"></a><span class="lineno">  951</span>&#160;    <span class="keywordflow">if</span> (WalkResult.IsKnownClobber) {</div><div class="line"><a name="l00952"></a><span class="lineno">  952</span>&#160;      Result = WalkResult.Result;</div><div class="line"><a name="l00953"></a><span class="lineno">  953</span>&#160;      Q.AR = WalkResult.AR;</div><div class="line"><a name="l00954"></a><span class="lineno">  954</span>&#160;    } <span class="keywordflow">else</span> {</div><div class="line"><a name="l00955"></a><span class="lineno">  955</span>&#160;      OptznResult OptRes = tryOptimizePhi(cast&lt;MemoryPhi&gt;(FirstDesc.Last),</div><div class="line"><a name="l00956"></a><span class="lineno">  956</span>&#160;                                          Current, Q.StartingLoc);</div><div class="line"><a name="l00957"></a><span class="lineno">  957</span>&#160;      verifyOptResult(OptRes);</div><div class="line"><a name="l00958"></a><span class="lineno">  958</span>&#160;      resetPhiOptznState();</div><div class="line"><a name="l00959"></a><span class="lineno">  959</span>&#160;      Result = OptRes.PrimaryClobber.Clobber;</div><div class="line"><a name="l00960"></a><span class="lineno">  960</span>&#160;    }</div><div class="line"><a name="l00961"></a><span class="lineno">  961</span>&#160;</div><div class="line"><a name="l00962"></a><span class="lineno">  962</span>&#160;<span class="preprocessor">#ifdef EXPENSIVE_CHECKS</span></div><div class="line"><a name="l00963"></a><span class="lineno">  963</span>&#160;    <span class="keywordflow">if</span> (!Q.SkipSelfAccess &amp;&amp; *UpwardWalkLimit &gt; 0)</div><div class="line"><a name="l00964"></a><span class="lineno">  964</span>&#160;      <a class="code" href="MemorySSA_8cpp.html#a8928e8a5cad2fb76511ab41b1b62aacd">checkClobberSanity</a>(Current, Result, Q.StartingLoc, MSSA, Q, AA);</div><div class="line"><a name="l00965"></a><span class="lineno">  965</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l00966"></a><span class="lineno">  966</span>&#160;    <span class="keywordflow">return</span> Result;</div><div class="line"><a name="l00967"></a><span class="lineno">  967</span>&#160;  }</div><div class="line"><a name="l00968"></a><span class="lineno">  968</span>&#160;};</div><div class="line"><a name="l00969"></a><span class="lineno">  969</span>&#160;</div><div class="line"><a name="l00970"></a><span class="lineno">  970</span>&#160;<span class="keyword">struct </span>RenamePassData {</div><div class="line"><a name="l00971"></a><span class="lineno">  971</span>&#160;  <a class="code" href="classllvm_1_1DomTreeNodeBase.html">DomTreeNode</a> *DTN;</div><div class="line"><a name="l00972"></a><span class="lineno">  972</span>&#160;  <a class="code" href="classllvm_1_1DomTreeNodeBase.html#a4e13547a7aa8468bc032d925b0ec36c4">DomTreeNode::const_iterator</a> ChildIt;</div><div class="line"><a name="l00973"></a><span class="lineno">  973</span>&#160;  <a class="code" href="classllvm_1_1MemoryAccess.html">MemoryAccess</a> *IncomingVal;</div><div class="line"><a name="l00974"></a><span class="lineno">  974</span>&#160;</div><div class="line"><a name="l00975"></a><span class="lineno">  975</span>&#160;  RenamePassData(<a class="code" href="classllvm_1_1DomTreeNodeBase.html">DomTreeNode</a> *<a class="code" href="BuiltinGCs_8cpp.html#a9bf617fd3367180fb96cebccfaae8dfa">D</a>, <a class="code" href="classllvm_1_1DomTreeNodeBase.html#a4e13547a7aa8468bc032d925b0ec36c4">DomTreeNode::const_iterator</a> It,</div><div class="line"><a name="l00976"></a><span class="lineno">  976</span>&#160;                 <a class="code" href="classllvm_1_1MemoryAccess.html">MemoryAccess</a> *M)</div><div class="line"><a name="l00977"></a><span class="lineno">  977</span>&#160;      : DTN(D), ChildIt(It), IncomingVal(M) {}</div><div class="line"><a name="l00978"></a><span class="lineno">  978</span>&#160;</div><div class="line"><a name="l00979"></a><span class="lineno">  979</span>&#160;  <span class="keywordtype">void</span> <a class="code" href="namespacestd.html#ab8424022895aee3e366fb9a32f2883cb">swap</a>(RenamePassData &amp;RHS) {</div><div class="line"><a name="l00980"></a><span class="lineno">  980</span>&#160;    <a class="code" href="namespacestd.html#ab8424022895aee3e366fb9a32f2883cb">std::swap</a>(DTN, RHS.DTN);</div><div class="line"><a name="l00981"></a><span class="lineno">  981</span>&#160;    <a class="code" href="namespacestd.html#ab8424022895aee3e366fb9a32f2883cb">std::swap</a>(ChildIt, RHS.ChildIt);</div><div class="line"><a name="l00982"></a><span class="lineno">  982</span>&#160;    <a class="code" href="namespacestd.html#ab8424022895aee3e366fb9a32f2883cb">std::swap</a>(IncomingVal, RHS.IncomingVal);</div><div class="line"><a name="l00983"></a><span class="lineno">  983</span>&#160;  }</div><div class="line"><a name="l00984"></a><span class="lineno">  984</span>&#160;};</div><div class="line"><a name="l00985"></a><span class="lineno">  985</span>&#160;</div><div class="line"><a name="l00986"></a><span class="lineno">  986</span>&#160;} <span class="comment">// end anonymous namespace</span></div><div class="line"><a name="l00987"></a><span class="lineno">  987</span>&#160;</div><div class="line"><a name="l00988"></a><span class="lineno">  988</span>&#160;<span class="keyword">namespace </span><a class="code" href="namespacellvm.html">llvm</a> {</div><div class="line"><a name="l00989"></a><span class="lineno">  989</span>&#160;</div><div class="line"><a name="l00990"></a><span class="lineno">  990</span>&#160;<span class="keyword">template</span> &lt;<span class="keyword">class</span> AliasAnalysisType&gt; <span class="keyword">class </span>MemorySSA::ClobberWalkerBase {</div><div class="line"><a name="l00991"></a><span class="lineno">  991</span>&#160;  ClobberWalker&lt;AliasAnalysisType&gt; Walker;</div><div class="line"><a name="l00992"></a><span class="lineno">  992</span>&#160;  <a class="code" href="classllvm_1_1MemorySSA.html">MemorySSA</a> *MSSA;</div><div class="line"><a name="l00993"></a><span class="lineno">  993</span>&#160;</div><div class="line"><a name="l00994"></a><span class="lineno">  994</span>&#160;<span class="keyword">public</span>:</div><div class="line"><a name="l00995"></a><span class="lineno">  995</span>&#160;  ClobberWalkerBase(<a class="code" href="classllvm_1_1MemorySSA.html">MemorySSA</a> *M, AliasAnalysisType *A, <a class="code" href="classllvm_1_1DominatorTree.html">DominatorTree</a> *<a class="code" href="BuiltinGCs_8cpp.html#a9bf617fd3367180fb96cebccfaae8dfa">D</a>)</div><div class="line"><a name="l00996"></a><span class="lineno">  996</span>&#160;      : Walker(*M, *A, *D), MSSA(M) {}</div><div class="line"><a name="l00997"></a><span class="lineno">  997</span>&#160;</div><div class="line"><a name="l00998"></a><span class="lineno">  998</span>&#160;  <a class="code" href="classllvm_1_1MemoryAccess.html">MemoryAccess</a> *getClobberingMemoryAccessBase(<a class="code" href="classllvm_1_1MemoryAccess.html">MemoryAccess</a> *,</div><div class="line"><a name="l00999"></a><span class="lineno">  999</span>&#160;                                              <span class="keyword">const</span> <a class="code" href="classllvm_1_1MemoryLocation.html">MemoryLocation</a> &amp;,</div><div class="line"><a name="l01000"></a><span class="lineno"> 1000</span>&#160;                                              <span class="keywordtype">unsigned</span> &amp;);</div><div class="line"><a name="l01001"></a><span class="lineno"> 1001</span>&#160;  <span class="comment">// Third argument (bool), defines whether the clobber search should skip the</span></div><div class="line"><a name="l01002"></a><span class="lineno"> 1002</span>&#160;  <span class="comment">// original queried access. If true, there will be a follow-up query searching</span></div><div class="line"><a name="l01003"></a><span class="lineno"> 1003</span>&#160;  <span class="comment">// for a clobber access past &quot;self&quot;. Note that the Optimized access is not</span></div><div class="line"><a name="l01004"></a><span class="lineno"> 1004</span>&#160;  <span class="comment">// updated if a new clobber is found by this SkipSelf search. If this</span></div><div class="line"><a name="l01005"></a><span class="lineno"> 1005</span>&#160;  <span class="comment">// additional query becomes heavily used we may decide to cache the result.</span></div><div class="line"><a name="l01006"></a><span class="lineno"> 1006</span>&#160;  <span class="comment">// Walker instantiations will decide how to set the SkipSelf bool.</span></div><div class="line"><a name="l01007"></a><span class="lineno"> 1007</span>&#160;  <a class="code" href="classllvm_1_1MemoryAccess.html">MemoryAccess</a> *getClobberingMemoryAccessBase(<a class="code" href="classllvm_1_1MemoryAccess.html">MemoryAccess</a> *, <span class="keywordtype">unsigned</span> &amp;, <span class="keywordtype">bool</span>);</div><div class="line"><a name="l01008"></a><span class="lineno"> 1008</span>&#160;};</div><div class="line"><a name="l01009"></a><span class="lineno"> 1009</span>&#160;<span class="comment"></span></div><div class="line"><a name="l01010"></a><span class="lineno"> 1010</span>&#160;<span class="comment">/// A MemorySSAWalker that does AA walks to disambiguate accesses. It no</span></div><div class="line"><a name="l01011"></a><span class="lineno"> 1011</span>&#160;<span class="comment">/// longer does caching on its own, but the name has been retained for the</span></div><div class="line"><a name="l01012"></a><span class="lineno"> 1012</span>&#160;<span class="comment">/// moment.</span></div><div class="line"><a name="l01013"></a><span class="lineno"> 1013</span>&#160;<span class="comment"></span><span class="keyword">template</span> &lt;<span class="keyword">class</span> AliasAnalysisType&gt;</div><div class="line"><a name="l01014"></a><span class="lineno"> 1014</span>&#160;<span class="keyword">class </span>MemorySSA::CachingWalker final : <span class="keyword">public</span> <a class="code" href="classllvm_1_1MemorySSAWalker.html">MemorySSAWalker</a> {</div><div class="line"><a name="l01015"></a><span class="lineno"> 1015</span>&#160;  ClobberWalkerBase&lt;AliasAnalysisType&gt; *Walker;</div><div class="line"><a name="l01016"></a><span class="lineno"> 1016</span>&#160;</div><div class="line"><a name="l01017"></a><span class="lineno"> 1017</span>&#160;<span class="keyword">public</span>:</div><div class="line"><a name="l01018"></a><span class="lineno"> 1018</span>&#160;  CachingWalker(<a class="code" href="classllvm_1_1MemorySSA.html">MemorySSA</a> *M, ClobberWalkerBase&lt;AliasAnalysisType&gt; *<a class="code" href="namespacellvm_1_1RISCVFenceField.html#a147be9e9780c1e33363ea572d4c7b25fa05c79fbfc58d9dd2851c467a1ef166bf">W</a>)</div><div class="line"><a name="l01019"></a><span class="lineno"> 1019</span>&#160;      : <a class="code" href="classllvm_1_1MemorySSAWalker.html">MemorySSAWalker</a>(M), Walker(W) {}</div><div class="line"><a name="l01020"></a><span class="lineno"> 1020</span>&#160;  ~CachingWalker() <span class="keyword">override</span> = <span class="keywordflow">default</span>;</div><div class="line"><a name="l01021"></a><span class="lineno"> 1021</span>&#160;</div><div class="line"><a name="l01022"></a><span class="lineno"> 1022</span>&#160;  <span class="keyword">using</span> <a class="code" href="classllvm_1_1MemorySSAWalker.html#aba62d5ce52dae803e4c9fa449b0bd6c7">MemorySSAWalker::getClobberingMemoryAccess</a>;</div><div class="line"><a name="l01023"></a><span class="lineno"> 1023</span>&#160;</div><div class="line"><a name="l01024"></a><span class="lineno"> 1024</span>&#160;  <a class="code" href="classllvm_1_1MemoryAccess.html">MemoryAccess</a> *getClobberingMemoryAccess(<a class="code" href="classllvm_1_1MemoryAccess.html">MemoryAccess</a> *MA, <span class="keywordtype">unsigned</span> &amp;UWL) {</div><div class="line"><a name="l01025"></a><span class="lineno"> 1025</span>&#160;    <span class="keywordflow">return</span> Walker-&gt;getClobberingMemoryAccessBase(MA, UWL, <span class="keyword">false</span>);</div><div class="line"><a name="l01026"></a><span class="lineno"> 1026</span>&#160;  }</div><div class="line"><a name="l01027"></a><span class="lineno"> 1027</span>&#160;  <a class="code" href="classllvm_1_1MemoryAccess.html">MemoryAccess</a> *getClobberingMemoryAccess(<a class="code" href="classllvm_1_1MemoryAccess.html">MemoryAccess</a> *MA,</div><div class="line"><a name="l01028"></a><span class="lineno"> 1028</span>&#160;                                          <span class="keyword">const</span> <a class="code" href="classllvm_1_1MemoryLocation.html">MemoryLocation</a> &amp;Loc,</div><div class="line"><a name="l01029"></a><span class="lineno"> 1029</span>&#160;                                          <span class="keywordtype">unsigned</span> &amp;UWL) {</div><div class="line"><a name="l01030"></a><span class="lineno"> 1030</span>&#160;    <span class="keywordflow">return</span> Walker-&gt;getClobberingMemoryAccessBase(MA, Loc, UWL);</div><div class="line"><a name="l01031"></a><span class="lineno"> 1031</span>&#160;  }</div><div class="line"><a name="l01032"></a><span class="lineno"> 1032</span>&#160;</div><div class="line"><a name="l01033"></a><span class="lineno"> 1033</span>&#160;  <a class="code" href="classllvm_1_1MemoryAccess.html">MemoryAccess</a> *getClobberingMemoryAccess(<a class="code" href="classllvm_1_1MemoryAccess.html">MemoryAccess</a> *MA)<span class="keyword"> override </span>{</div><div class="line"><a name="l01034"></a><span class="lineno"> 1034</span>&#160;    <span class="keywordtype">unsigned</span> UpwardWalkLimit = <a class="code" href="MemorySSA_8cpp.html#a5926ddc0f7c4225c6ced440baa2fb7a3">MaxCheckLimit</a>;</div><div class="line"><a name="l01035"></a><span class="lineno"> 1035</span>&#160;    <span class="keywordflow">return</span> getClobberingMemoryAccess(MA, UpwardWalkLimit);</div><div class="line"><a name="l01036"></a><span class="lineno"> 1036</span>&#160;  }</div><div class="line"><a name="l01037"></a><span class="lineno"> 1037</span>&#160;  <a class="code" href="classllvm_1_1MemoryAccess.html">MemoryAccess</a> *getClobberingMemoryAccess(<a class="code" href="classllvm_1_1MemoryAccess.html">MemoryAccess</a> *MA,</div><div class="line"><a name="l01038"></a><span class="lineno"> 1038</span>&#160;                                          <span class="keyword">const</span> <a class="code" href="classllvm_1_1MemoryLocation.html">MemoryLocation</a> &amp;Loc)<span class="keyword"> override </span>{</div><div class="line"><a name="l01039"></a><span class="lineno"> 1039</span>&#160;    <span class="keywordtype">unsigned</span> UpwardWalkLimit = <a class="code" href="MemorySSA_8cpp.html#a5926ddc0f7c4225c6ced440baa2fb7a3">MaxCheckLimit</a>;</div><div class="line"><a name="l01040"></a><span class="lineno"> 1040</span>&#160;    <span class="keywordflow">return</span> getClobberingMemoryAccess(MA, Loc, UpwardWalkLimit);</div><div class="line"><a name="l01041"></a><span class="lineno"> 1041</span>&#160;  }</div><div class="line"><a name="l01042"></a><span class="lineno"> 1042</span>&#160;</div><div class="line"><a name="l01043"></a><span class="lineno"> 1043</span>&#160;  <span class="keywordtype">void</span> invalidateInfo(<a class="code" href="classllvm_1_1MemoryAccess.html">MemoryAccess</a> *MA)<span class="keyword"> override </span>{</div><div class="line"><a name="l01044"></a><span class="lineno"> 1044</span>&#160;    <span class="keywordflow">if</span> (<span class="keyword">auto</span> *MUD = dyn_cast&lt;MemoryUseOrDef&gt;(MA))</div><div class="line"><a name="l01045"></a><span class="lineno"> 1045</span>&#160;      MUD-&gt;resetOptimized();</div><div class="line"><a name="l01046"></a><span class="lineno"> 1046</span>&#160;  }</div><div class="line"><a name="l01047"></a><span class="lineno"> 1047</span>&#160;};</div><div class="line"><a name="l01048"></a><span class="lineno"> 1048</span>&#160;</div><div class="line"><a name="l01049"></a><span class="lineno"> 1049</span>&#160;<span class="keyword">template</span> &lt;<span class="keyword">class</span> AliasAnalysisType&gt;</div><div class="line"><a name="l01050"></a><span class="lineno"> 1050</span>&#160;<span class="keyword">class </span>MemorySSA::SkipSelfWalker final : <span class="keyword">public</span> <a class="code" href="classllvm_1_1MemorySSAWalker.html">MemorySSAWalker</a> {</div><div class="line"><a name="l01051"></a><span class="lineno"> 1051</span>&#160;  ClobberWalkerBase&lt;AliasAnalysisType&gt; *Walker;</div><div class="line"><a name="l01052"></a><span class="lineno"> 1052</span>&#160;</div><div class="line"><a name="l01053"></a><span class="lineno"> 1053</span>&#160;<span class="keyword">public</span>:</div><div class="line"><a name="l01054"></a><span class="lineno"> 1054</span>&#160;  SkipSelfWalker(<a class="code" href="classllvm_1_1MemorySSA.html">MemorySSA</a> *M, ClobberWalkerBase&lt;AliasAnalysisType&gt; *<a class="code" href="namespacellvm_1_1RISCVFenceField.html#a147be9e9780c1e33363ea572d4c7b25fa05c79fbfc58d9dd2851c467a1ef166bf">W</a>)</div><div class="line"><a name="l01055"></a><span class="lineno"> 1055</span>&#160;      : <a class="code" href="classllvm_1_1MemorySSAWalker.html">MemorySSAWalker</a>(M), Walker(W) {}</div><div class="line"><a name="l01056"></a><span class="lineno"> 1056</span>&#160;  ~SkipSelfWalker() <span class="keyword">override</span> = <span class="keywordflow">default</span>;</div><div class="line"><a name="l01057"></a><span class="lineno"> 1057</span>&#160;</div><div class="line"><a name="l01058"></a><span class="lineno"> 1058</span>&#160;  <span class="keyword">using</span> <a class="code" href="classllvm_1_1MemorySSAWalker.html#aba62d5ce52dae803e4c9fa449b0bd6c7">MemorySSAWalker::getClobberingMemoryAccess</a>;</div><div class="line"><a name="l01059"></a><span class="lineno"> 1059</span>&#160;</div><div class="line"><a name="l01060"></a><span class="lineno"> 1060</span>&#160;  <a class="code" href="classllvm_1_1MemoryAccess.html">MemoryAccess</a> *getClobberingMemoryAccess(<a class="code" href="classllvm_1_1MemoryAccess.html">MemoryAccess</a> *MA, <span class="keywordtype">unsigned</span> &amp;UWL) {</div><div class="line"><a name="l01061"></a><span class="lineno"> 1061</span>&#160;    <span class="keywordflow">return</span> Walker-&gt;getClobberingMemoryAccessBase(MA, UWL, <span class="keyword">true</span>);</div><div class="line"><a name="l01062"></a><span class="lineno"> 1062</span>&#160;  }</div><div class="line"><a name="l01063"></a><span class="lineno"> 1063</span>&#160;  <a class="code" href="classllvm_1_1MemoryAccess.html">MemoryAccess</a> *getClobberingMemoryAccess(<a class="code" href="classllvm_1_1MemoryAccess.html">MemoryAccess</a> *MA,</div><div class="line"><a name="l01064"></a><span class="lineno"> 1064</span>&#160;                                          <span class="keyword">const</span> <a class="code" href="classllvm_1_1MemoryLocation.html">MemoryLocation</a> &amp;Loc,</div><div class="line"><a name="l01065"></a><span class="lineno"> 1065</span>&#160;                                          <span class="keywordtype">unsigned</span> &amp;UWL) {</div><div class="line"><a name="l01066"></a><span class="lineno"> 1066</span>&#160;    <span class="keywordflow">return</span> Walker-&gt;getClobberingMemoryAccessBase(MA, Loc, UWL);</div><div class="line"><a name="l01067"></a><span class="lineno"> 1067</span>&#160;  }</div><div class="line"><a name="l01068"></a><span class="lineno"> 1068</span>&#160;</div><div class="line"><a name="l01069"></a><span class="lineno"> 1069</span>&#160;  <a class="code" href="classllvm_1_1MemoryAccess.html">MemoryAccess</a> *getClobberingMemoryAccess(<a class="code" href="classllvm_1_1MemoryAccess.html">MemoryAccess</a> *MA)<span class="keyword"> override </span>{</div><div class="line"><a name="l01070"></a><span class="lineno"> 1070</span>&#160;    <span class="keywordtype">unsigned</span> UpwardWalkLimit = <a class="code" href="MemorySSA_8cpp.html#a5926ddc0f7c4225c6ced440baa2fb7a3">MaxCheckLimit</a>;</div><div class="line"><a name="l01071"></a><span class="lineno"> 1071</span>&#160;    <span class="keywordflow">return</span> getClobberingMemoryAccess(MA, UpwardWalkLimit);</div><div class="line"><a name="l01072"></a><span class="lineno"> 1072</span>&#160;  }</div><div class="line"><a name="l01073"></a><span class="lineno"> 1073</span>&#160;  <a class="code" href="classllvm_1_1MemoryAccess.html">MemoryAccess</a> *getClobberingMemoryAccess(<a class="code" href="classllvm_1_1MemoryAccess.html">MemoryAccess</a> *MA,</div><div class="line"><a name="l01074"></a><span class="lineno"> 1074</span>&#160;                                          <span class="keyword">const</span> <a class="code" href="classllvm_1_1MemoryLocation.html">MemoryLocation</a> &amp;Loc)<span class="keyword"> override </span>{</div><div class="line"><a name="l01075"></a><span class="lineno"> 1075</span>&#160;    <span class="keywordtype">unsigned</span> UpwardWalkLimit = <a class="code" href="MemorySSA_8cpp.html#a5926ddc0f7c4225c6ced440baa2fb7a3">MaxCheckLimit</a>;</div><div class="line"><a name="l01076"></a><span class="lineno"> 1076</span>&#160;    <span class="keywordflow">return</span> getClobberingMemoryAccess(MA, Loc, UpwardWalkLimit);</div><div class="line"><a name="l01077"></a><span class="lineno"> 1077</span>&#160;  }</div><div class="line"><a name="l01078"></a><span class="lineno"> 1078</span>&#160;</div><div class="line"><a name="l01079"></a><span class="lineno"> 1079</span>&#160;  <span class="keywordtype">void</span> invalidateInfo(<a class="code" href="classllvm_1_1MemoryAccess.html">MemoryAccess</a> *MA)<span class="keyword"> override </span>{</div><div class="line"><a name="l01080"></a><span class="lineno"> 1080</span>&#160;    <span class="keywordflow">if</span> (<span class="keyword">auto</span> *MUD = dyn_cast&lt;MemoryUseOrDef&gt;(MA))</div><div class="line"><a name="l01081"></a><span class="lineno"> 1081</span>&#160;      MUD-&gt;resetOptimized();</div><div class="line"><a name="l01082"></a><span class="lineno"> 1082</span>&#160;  }</div><div class="line"><a name="l01083"></a><span class="lineno"> 1083</span>&#160;};</div><div class="line"><a name="l01084"></a><span class="lineno"> 1084</span>&#160;</div><div class="line"><a name="l01085"></a><span class="lineno"> 1085</span>&#160;} <span class="comment">// end namespace llvm</span></div><div class="line"><a name="l01086"></a><span class="lineno"> 1086</span>&#160;</div><div class="line"><a name="l01087"></a><span class="lineno"> 1087</span>&#160;<span class="keywordtype">void</span> MemorySSA::renameSuccessorPhis(<a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *BB, <a class="code" href="classllvm_1_1MemoryAccess.html">MemoryAccess</a> *IncomingVal,</div><div class="line"><a name="l01088"></a><span class="lineno"> 1088</span>&#160;                                    <span class="keywordtype">bool</span> RenameAllUses) {</div><div class="line"><a name="l01089"></a><span class="lineno"> 1089</span>&#160;  <span class="comment">// Pass through values to our successors</span></div><div class="line"><a name="l01090"></a><span class="lineno"> 1090</span>&#160;  <span class="keywordflow">for</span> (<span class="keyword">const</span> <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *S : <a class="code" href="namespacellvm.html#a3493591c859b8ae672dfa20950608c86">successors</a>(BB)) {</div><div class="line"><a name="l01091"></a><span class="lineno"> 1091</span>&#160;    <span class="keyword">auto</span> It = PerBlockAccesses.find(S);</div><div class="line"><a name="l01092"></a><span class="lineno"> 1092</span>&#160;    <span class="comment">// Rename the phi nodes in our successor block</span></div><div class="line"><a name="l01093"></a><span class="lineno"> 1093</span>&#160;    <span class="keywordflow">if</span> (It == PerBlockAccesses.end() || !isa&lt;MemoryPhi&gt;(It-&gt;second-&gt;front()))</div><div class="line"><a name="l01094"></a><span class="lineno"> 1094</span>&#160;      <span class="keywordflow">continue</span>;</div><div class="line"><a name="l01095"></a><span class="lineno"> 1095</span>&#160;    AccessList *Accesses = It-&gt;second.get();</div><div class="line"><a name="l01096"></a><span class="lineno"> 1096</span>&#160;    <span class="keyword">auto</span> *Phi = cast&lt;MemoryPhi&gt;(&amp;Accesses-&gt;front());</div><div class="line"><a name="l01097"></a><span class="lineno"> 1097</span>&#160;    <span class="keywordflow">if</span> (RenameAllUses) {</div><div class="line"><a name="l01098"></a><span class="lineno"> 1098</span>&#160;      <span class="keywordtype">bool</span> ReplacementDone = <span class="keyword">false</span>;</div><div class="line"><a name="l01099"></a><span class="lineno"> 1099</span>&#160;      <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> = 0, <a class="code" href="BuiltinGCs_8cpp.html#a6742d2e0a668baf1196ec69e158d5f15">E</a> = Phi-&gt;getNumIncomingValues(); <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> != <a class="code" href="BuiltinGCs_8cpp.html#a6742d2e0a668baf1196ec69e158d5f15">E</a>; ++<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>)</div><div class="line"><a name="l01100"></a><span class="lineno"> 1100</span>&#160;        <span class="keywordflow">if</span> (Phi-&gt;getIncomingBlock(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>) == BB) {</div><div class="line"><a name="l01101"></a><span class="lineno"> 1101</span>&#160;          Phi-&gt;setIncomingValue(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>, IncomingVal);</div><div class="line"><a name="l01102"></a><span class="lineno"> 1102</span>&#160;          ReplacementDone = <span class="keyword">true</span>;</div><div class="line"><a name="l01103"></a><span class="lineno"> 1103</span>&#160;        }</div><div class="line"><a name="l01104"></a><span class="lineno"> 1104</span>&#160;      (void) ReplacementDone;</div><div class="line"><a name="l01105"></a><span class="lineno"> 1105</span>&#160;      <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(ReplacementDone &amp;&amp; <span class="stringliteral">&quot;Incomplete phi during partial rename&quot;</span>);</div><div class="line"><a name="l01106"></a><span class="lineno"> 1106</span>&#160;    } <span class="keywordflow">else</span></div><div class="line"><a name="l01107"></a><span class="lineno"> 1107</span>&#160;      Phi-&gt;addIncoming(IncomingVal, BB);</div><div class="line"><a name="l01108"></a><span class="lineno"> 1108</span>&#160;  }</div><div class="line"><a name="l01109"></a><span class="lineno"> 1109</span>&#160;}</div><div class="line"><a name="l01110"></a><span class="lineno"> 1110</span>&#160;<span class="comment"></span></div><div class="line"><a name="l01111"></a><span class="lineno"> 1111</span>&#160;<span class="comment">/// Rename a single basic block into MemorySSA form.</span></div><div class="line"><a name="l01112"></a><span class="lineno"> 1112</span>&#160;<span class="comment">/// Uses the standard SSA renaming algorithm.</span></div><div class="line"><a name="l01113"></a><span class="lineno"> 1113</span>&#160;<span class="comment">/// \returns The new incoming value.</span></div><div class="line"><a name="l01114"></a><span class="lineno"> 1114</span>&#160;<span class="comment"></span><a class="code" href="classllvm_1_1MemoryAccess.html">MemoryAccess</a> *MemorySSA::renameBlock(<a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *BB, <a class="code" href="classllvm_1_1MemoryAccess.html">MemoryAccess</a> *IncomingVal,</div><div class="line"><a name="l01115"></a><span class="lineno"> 1115</span>&#160;                                     <span class="keywordtype">bool</span> RenameAllUses) {</div><div class="line"><a name="l01116"></a><span class="lineno"> 1116</span>&#160;  <span class="keyword">auto</span> It = PerBlockAccesses.find(BB);</div><div class="line"><a name="l01117"></a><span class="lineno"> 1117</span>&#160;  <span class="comment">// Skip most processing if the list is empty.</span></div><div class="line"><a name="l01118"></a><span class="lineno"> 1118</span>&#160;  <span class="keywordflow">if</span> (It != PerBlockAccesses.end()) {</div><div class="line"><a name="l01119"></a><span class="lineno"> 1119</span>&#160;    AccessList *Accesses = It-&gt;second.get();</div><div class="line"><a name="l01120"></a><span class="lineno"> 1120</span>&#160;    <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1MemoryAccess.html">MemoryAccess</a> &amp;L : *Accesses) {</div><div class="line"><a name="l01121"></a><span class="lineno"> 1121</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1MemoryUseOrDef.html">MemoryUseOrDef</a> *MUD = dyn_cast&lt;MemoryUseOrDef&gt;(&amp;L)) {</div><div class="line"><a name="l01122"></a><span class="lineno"> 1122</span>&#160;        <span class="keywordflow">if</span> (MUD-&gt;getDefiningAccess() == <span class="keyword">nullptr</span> || RenameAllUses)</div><div class="line"><a name="l01123"></a><span class="lineno"> 1123</span>&#160;          MUD-&gt;setDefiningAccess(IncomingVal);</div><div class="line"><a name="l01124"></a><span class="lineno"> 1124</span>&#160;        <span class="keywordflow">if</span> (isa&lt;MemoryDef&gt;(&amp;L))</div><div class="line"><a name="l01125"></a><span class="lineno"> 1125</span>&#160;          IncomingVal = &amp;L;</div><div class="line"><a name="l01126"></a><span class="lineno"> 1126</span>&#160;      } <span class="keywordflow">else</span> {</div><div class="line"><a name="l01127"></a><span class="lineno"> 1127</span>&#160;        IncomingVal = &amp;L;</div><div class="line"><a name="l01128"></a><span class="lineno"> 1128</span>&#160;      }</div><div class="line"><a name="l01129"></a><span class="lineno"> 1129</span>&#160;    }</div><div class="line"><a name="l01130"></a><span class="lineno"> 1130</span>&#160;  }</div><div class="line"><a name="l01131"></a><span class="lineno"> 1131</span>&#160;  <span class="keywordflow">return</span> IncomingVal;</div><div class="line"><a name="l01132"></a><span class="lineno"> 1132</span>&#160;}</div><div class="line"><a name="l01133"></a><span class="lineno"> 1133</span>&#160;<span class="comment"></span></div><div class="line"><a name="l01134"></a><span class="lineno"> 1134</span>&#160;<span class="comment">/// This is the standard SSA renaming algorithm.</span></div><div class="line"><a name="l01135"></a><span class="lineno"> 1135</span>&#160;<span class="comment">///</span></div><div class="line"><a name="l01136"></a><span class="lineno"> 1136</span>&#160;<span class="comment">/// We walk the dominator tree in preorder, renaming accesses, and then filling</span></div><div class="line"><a name="l01137"></a><span class="lineno"> 1137</span>&#160;<span class="comment">/// in phi nodes in our successors.</span></div><div class="line"><a name="l01138"></a><span class="lineno"> 1138</span>&#160;<span class="comment"></span><span class="keywordtype">void</span> <a class="code" href="classllvm_1_1MemorySSA.html#a95acd2137d435c5f43e4f781c9f6ad39">MemorySSA::renamePass</a>(<a class="code" href="classllvm_1_1DomTreeNodeBase.html">DomTreeNode</a> *Root, <a class="code" href="classllvm_1_1MemoryAccess.html">MemoryAccess</a> *IncomingVal,</div><div class="line"><a name="l01139"></a><span class="lineno"> 1139</span>&#160;                           <a class="code" href="classllvm_1_1SmallPtrSetImpl.html">SmallPtrSetImpl&lt;BasicBlock *&gt;</a> &amp;Visited,</div><div class="line"><a name="l01140"></a><span class="lineno"> 1140</span>&#160;                           <span class="keywordtype">bool</span> SkipVisited, <span class="keywordtype">bool</span> RenameAllUses) {</div><div class="line"><a name="l01141"></a><span class="lineno"> 1141</span>&#160;  <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(Root &amp;&amp; <span class="stringliteral">&quot;Trying to rename accesses in an unreachable block&quot;</span>);</div><div class="line"><a name="l01142"></a><span class="lineno"> 1142</span>&#160;</div><div class="line"><a name="l01143"></a><span class="lineno"> 1143</span>&#160;  <a class="code" href="classllvm_1_1SmallVector.html">SmallVector&lt;RenamePassData, 32&gt;</a> WorkStack;</div><div class="line"><a name="l01144"></a><span class="lineno"> 1144</span>&#160;  <span class="comment">// Skip everything if we already renamed this block and we are skipping.</span></div><div class="line"><a name="l01145"></a><span class="lineno"> 1145</span>&#160;  <span class="comment">// Note: You can&#39;t sink this into the if, because we need it to occur</span></div><div class="line"><a name="l01146"></a><span class="lineno"> 1146</span>&#160;  <span class="comment">// regardless of whether we skip blocks or not.</span></div><div class="line"><a name="l01147"></a><span class="lineno"> 1147</span>&#160;  <span class="keywordtype">bool</span> AlreadyVisited = !Visited.<a class="code" href="classllvm_1_1SmallPtrSetImpl.html#a6bc6fb89fe2e91c25559a8631f56e27e">insert</a>(Root-&gt;<a class="code" href="classllvm_1_1DomTreeNodeBase.html#a6a15a030098342e06ea73e1241d614c9">getBlock</a>()).<a class="code" href="HexagonShuffler_8cpp.html#af7633c5cbb76481bafd5e3e1ec07ca37">second</a>;</div><div class="line"><a name="l01148"></a><span class="lineno"> 1148</span>&#160;  <span class="keywordflow">if</span> (SkipVisited &amp;&amp; AlreadyVisited)</div><div class="line"><a name="l01149"></a><span class="lineno"> 1149</span>&#160;    <span class="keywordflow">return</span>;</div><div class="line"><a name="l01150"></a><span class="lineno"> 1150</span>&#160;</div><div class="line"><a name="l01151"></a><span class="lineno"> 1151</span>&#160;  IncomingVal = renameBlock(Root-&gt;<a class="code" href="classllvm_1_1DomTreeNodeBase.html#a6a15a030098342e06ea73e1241d614c9">getBlock</a>(), IncomingVal, RenameAllUses);</div><div class="line"><a name="l01152"></a><span class="lineno"> 1152</span>&#160;  renameSuccessorPhis(Root-&gt;<a class="code" href="classllvm_1_1DomTreeNodeBase.html#a6a15a030098342e06ea73e1241d614c9">getBlock</a>(), IncomingVal, RenameAllUses);</div><div class="line"><a name="l01153"></a><span class="lineno"> 1153</span>&#160;  WorkStack.<a class="code" href="classllvm_1_1SmallVectorTemplateBase.html#af42bfbc067df27c19ee2fc859df58799">push_back</a>({Root, Root-&gt;<a class="code" href="classllvm_1_1DomTreeNodeBase.html#a40b8345d54ada5dab71ae11d71e89d2f">begin</a>(), IncomingVal});</div><div class="line"><a name="l01154"></a><span class="lineno"> 1154</span>&#160;</div><div class="line"><a name="l01155"></a><span class="lineno"> 1155</span>&#160;  <span class="keywordflow">while</span> (!WorkStack.<a class="code" href="classllvm_1_1SmallVectorBase.html#a495b11cf3890ab746d76ef2881f79041">empty</a>()) {</div><div class="line"><a name="l01156"></a><span class="lineno"> 1156</span>&#160;    <a class="code" href="classllvm_1_1DomTreeNodeBase.html">DomTreeNode</a> *Node = WorkStack.<a class="code" href="classllvm_1_1SmallVectorTemplateCommon.html#acd9e771a3296c6b24146955754620557">back</a>().DTN;</div><div class="line"><a name="l01157"></a><span class="lineno"> 1157</span>&#160;    <a class="code" href="classllvm_1_1DomTreeNodeBase.html#a4e13547a7aa8468bc032d925b0ec36c4">DomTreeNode::const_iterator</a> ChildIt = WorkStack.<a class="code" href="classllvm_1_1SmallVectorTemplateCommon.html#acd9e771a3296c6b24146955754620557">back</a>().ChildIt;</div><div class="line"><a name="l01158"></a><span class="lineno"> 1158</span>&#160;    IncomingVal = WorkStack.<a class="code" href="classllvm_1_1SmallVectorTemplateCommon.html#acd9e771a3296c6b24146955754620557">back</a>().IncomingVal;</div><div class="line"><a name="l01159"></a><span class="lineno"> 1159</span>&#160;</div><div class="line"><a name="l01160"></a><span class="lineno"> 1160</span>&#160;    <span class="keywordflow">if</span> (ChildIt == Node-&gt;<a class="code" href="classllvm_1_1DomTreeNodeBase.html#a74111c67a831eb30b020ecf063bce406">end</a>()) {</div><div class="line"><a name="l01161"></a><span class="lineno"> 1161</span>&#160;      WorkStack.<a class="code" href="classllvm_1_1SmallVectorTemplateBase.html#ad97688dfe9cd802e2a0691cbe620218a">pop_back</a>();</div><div class="line"><a name="l01162"></a><span class="lineno"> 1162</span>&#160;    } <span class="keywordflow">else</span> {</div><div class="line"><a name="l01163"></a><span class="lineno"> 1163</span>&#160;      <a class="code" href="classllvm_1_1DomTreeNodeBase.html">DomTreeNode</a> *Child = *ChildIt;</div><div class="line"><a name="l01164"></a><span class="lineno"> 1164</span>&#160;      ++WorkStack.<a class="code" href="classllvm_1_1SmallVectorTemplateCommon.html#acd9e771a3296c6b24146955754620557">back</a>().ChildIt;</div><div class="line"><a name="l01165"></a><span class="lineno"> 1165</span>&#160;      <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *BB = Child-&gt;<a class="code" href="classllvm_1_1DomTreeNodeBase.html#a6a15a030098342e06ea73e1241d614c9">getBlock</a>();</div><div class="line"><a name="l01166"></a><span class="lineno"> 1166</span>&#160;      <span class="comment">// Note: You can&#39;t sink this into the if, because we need it to occur</span></div><div class="line"><a name="l01167"></a><span class="lineno"> 1167</span>&#160;      <span class="comment">// regardless of whether we skip blocks or not.</span></div><div class="line"><a name="l01168"></a><span class="lineno"> 1168</span>&#160;      AlreadyVisited = !Visited.<a class="code" href="classllvm_1_1SmallPtrSetImpl.html#a6bc6fb89fe2e91c25559a8631f56e27e">insert</a>(BB).second;</div><div class="line"><a name="l01169"></a><span class="lineno"> 1169</span>&#160;      <span class="keywordflow">if</span> (SkipVisited &amp;&amp; AlreadyVisited) {</div><div class="line"><a name="l01170"></a><span class="lineno"> 1170</span>&#160;        <span class="comment">// We already visited this during our renaming, which can happen when</span></div><div class="line"><a name="l01171"></a><span class="lineno"> 1171</span>&#160;        <span class="comment">// being asked to rename multiple blocks. Figure out the incoming val,</span></div><div class="line"><a name="l01172"></a><span class="lineno"> 1172</span>&#160;        <span class="comment">// which is the last def.</span></div><div class="line"><a name="l01173"></a><span class="lineno"> 1173</span>&#160;        <span class="comment">// Incoming value can only change if there is a block def, and in that</span></div><div class="line"><a name="l01174"></a><span class="lineno"> 1174</span>&#160;        <span class="comment">// case, it&#39;s the last block def in the list.</span></div><div class="line"><a name="l01175"></a><span class="lineno"> 1175</span>&#160;        <span class="keywordflow">if</span> (<span class="keyword">auto</span> *BlockDefs = getWritableBlockDefs(BB))</div><div class="line"><a name="l01176"></a><span class="lineno"> 1176</span>&#160;          IncomingVal = &amp;*BlockDefs-&gt;rbegin();</div><div class="line"><a name="l01177"></a><span class="lineno"> 1177</span>&#160;      } <span class="keywordflow">else</span></div><div class="line"><a name="l01178"></a><span class="lineno"> 1178</span>&#160;        IncomingVal = renameBlock(BB, IncomingVal, RenameAllUses);</div><div class="line"><a name="l01179"></a><span class="lineno"> 1179</span>&#160;      renameSuccessorPhis(BB, IncomingVal, RenameAllUses);</div><div class="line"><a name="l01180"></a><span class="lineno"> 1180</span>&#160;      WorkStack.<a class="code" href="classllvm_1_1SmallVectorTemplateBase.html#af42bfbc067df27c19ee2fc859df58799">push_back</a>({Child, Child-&gt;<a class="code" href="classllvm_1_1DomTreeNodeBase.html#a40b8345d54ada5dab71ae11d71e89d2f">begin</a>(), IncomingVal});</div><div class="line"><a name="l01181"></a><span class="lineno"> 1181</span>&#160;    }</div><div class="line"><a name="l01182"></a><span class="lineno"> 1182</span>&#160;  }</div><div class="line"><a name="l01183"></a><span class="lineno"> 1183</span>&#160;}</div><div class="line"><a name="l01184"></a><span class="lineno"> 1184</span>&#160;<span class="comment"></span></div><div class="line"><a name="l01185"></a><span class="lineno"> 1185</span>&#160;<span class="comment">/// This handles unreachable block accesses by deleting phi nodes in</span></div><div class="line"><a name="l01186"></a><span class="lineno"> 1186</span>&#160;<span class="comment">/// unreachable blocks, and marking all other unreachable MemoryAccess&#39;s as</span></div><div class="line"><a name="l01187"></a><span class="lineno"> 1187</span>&#160;<span class="comment">/// being uses of the live on entry definition.</span></div><div class="line"><a name="l01188"></a><span class="lineno"> 1188</span>&#160;<span class="comment"></span><span class="keywordtype">void</span> MemorySSA::markUnreachableAsLiveOnEntry(<a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *BB) {</div><div class="line"><a name="l01189"></a><span class="lineno"> 1189</span>&#160;  <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(!DT-&gt;isReachableFromEntry(BB) &amp;&amp;</div><div class="line"><a name="l01190"></a><span class="lineno"> 1190</span>&#160;         <span class="stringliteral">&quot;Reachable block found while handling unreachable blocks&quot;</span>);</div><div class="line"><a name="l01191"></a><span class="lineno"> 1191</span>&#160;</div><div class="line"><a name="l01192"></a><span class="lineno"> 1192</span>&#160;  <span class="comment">// Make sure phi nodes in our reachable successors end up with a</span></div><div class="line"><a name="l01193"></a><span class="lineno"> 1193</span>&#160;  <span class="comment">// LiveOnEntryDef for our incoming edge, even though our block is forward</span></div><div class="line"><a name="l01194"></a><span class="lineno"> 1194</span>&#160;  <span class="comment">// unreachable.  We could just disconnect these blocks from the CFG fully,</span></div><div class="line"><a name="l01195"></a><span class="lineno"> 1195</span>&#160;  <span class="comment">// but we do not right now.</span></div><div class="line"><a name="l01196"></a><span class="lineno"> 1196</span>&#160;  <span class="keywordflow">for</span> (<span class="keyword">const</span> <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *S : <a class="code" href="namespacellvm.html#a3493591c859b8ae672dfa20950608c86">successors</a>(BB)) {</div><div class="line"><a name="l01197"></a><span class="lineno"> 1197</span>&#160;    <span class="keywordflow">if</span> (!DT-&gt;isReachableFromEntry(S))</div><div class="line"><a name="l01198"></a><span class="lineno"> 1198</span>&#160;      <span class="keywordflow">continue</span>;</div><div class="line"><a name="l01199"></a><span class="lineno"> 1199</span>&#160;    <span class="keyword">auto</span> It = PerBlockAccesses.find(S);</div><div class="line"><a name="l01200"></a><span class="lineno"> 1200</span>&#160;    <span class="comment">// Rename the phi nodes in our successor block</span></div><div class="line"><a name="l01201"></a><span class="lineno"> 1201</span>&#160;    <span class="keywordflow">if</span> (It == PerBlockAccesses.end() || !isa&lt;MemoryPhi&gt;(It-&gt;second-&gt;front()))</div><div class="line"><a name="l01202"></a><span class="lineno"> 1202</span>&#160;      <span class="keywordflow">continue</span>;</div><div class="line"><a name="l01203"></a><span class="lineno"> 1203</span>&#160;    AccessList *Accesses = It-&gt;second.get();</div><div class="line"><a name="l01204"></a><span class="lineno"> 1204</span>&#160;    <span class="keyword">auto</span> *Phi = cast&lt;MemoryPhi&gt;(&amp;Accesses-&gt;front());</div><div class="line"><a name="l01205"></a><span class="lineno"> 1205</span>&#160;    Phi-&gt;addIncoming(LiveOnEntryDef.get(), BB);</div><div class="line"><a name="l01206"></a><span class="lineno"> 1206</span>&#160;  }</div><div class="line"><a name="l01207"></a><span class="lineno"> 1207</span>&#160;</div><div class="line"><a name="l01208"></a><span class="lineno"> 1208</span>&#160;  <span class="keyword">auto</span> It = PerBlockAccesses.find(BB);</div><div class="line"><a name="l01209"></a><span class="lineno"> 1209</span>&#160;  <span class="keywordflow">if</span> (It == PerBlockAccesses.end())</div><div class="line"><a name="l01210"></a><span class="lineno"> 1210</span>&#160;    <span class="keywordflow">return</span>;</div><div class="line"><a name="l01211"></a><span class="lineno"> 1211</span>&#160;</div><div class="line"><a name="l01212"></a><span class="lineno"> 1212</span>&#160;  <span class="keyword">auto</span> &amp;Accesses = It-&gt;second;</div><div class="line"><a name="l01213"></a><span class="lineno"> 1213</span>&#160;  <span class="keywordflow">for</span> (<span class="keyword">auto</span> AI = Accesses-&gt;begin(), AE = Accesses-&gt;end(); AI != AE;) {</div><div class="line"><a name="l01214"></a><span class="lineno"> 1214</span>&#160;    <span class="keyword">auto</span> Next = std::next(AI);</div><div class="line"><a name="l01215"></a><span class="lineno"> 1215</span>&#160;    <span class="comment">// If we have a phi, just remove it. We are going to replace all</span></div><div class="line"><a name="l01216"></a><span class="lineno"> 1216</span>&#160;    <span class="comment">// users with live on entry.</span></div><div class="line"><a name="l01217"></a><span class="lineno"> 1217</span>&#160;    <span class="keywordflow">if</span> (<span class="keyword">auto</span> *UseOrDef = dyn_cast&lt;MemoryUseOrDef&gt;(AI))</div><div class="line"><a name="l01218"></a><span class="lineno"> 1218</span>&#160;      UseOrDef-&gt;setDefiningAccess(LiveOnEntryDef.get());</div><div class="line"><a name="l01219"></a><span class="lineno"> 1219</span>&#160;    <span class="keywordflow">else</span></div><div class="line"><a name="l01220"></a><span class="lineno"> 1220</span>&#160;      Accesses-&gt;erase(AI);</div><div class="line"><a name="l01221"></a><span class="lineno"> 1221</span>&#160;    AI = Next;</div><div class="line"><a name="l01222"></a><span class="lineno"> 1222</span>&#160;  }</div><div class="line"><a name="l01223"></a><span class="lineno"> 1223</span>&#160;}</div><div class="line"><a name="l01224"></a><span class="lineno"> 1224</span>&#160;</div><div class="line"><a name="l01225"></a><span class="lineno"><a class="line" href="classllvm_1_1MemorySSA.html#a49f6b5c5e36a86395a7f91838768798d"> 1225</a></span>&#160;<a class="code" href="classllvm_1_1MemorySSA.html#a49f6b5c5e36a86395a7f91838768798d">MemorySSA::MemorySSA</a>(<a class="code" href="classllvm_1_1Function.html">Function</a> &amp;Func, <a class="code" href="classllvm_1_1AAResults.html">AliasAnalysis</a> *AA, <a class="code" href="classllvm_1_1DominatorTree.html">DominatorTree</a> *DT)</div><div class="line"><a name="l01226"></a><span class="lineno"> 1226</span>&#160;    : AA(nullptr), DT(DT), <a class="code" href="LLParser_8cpp.html#a33ece1ef8074506a15d7f86eb76dbae6">F</a>(Func), LiveOnEntryDef(nullptr), Walker(nullptr),</div><div class="line"><a name="l01227"></a><span class="lineno"> 1227</span>&#160;      SkipWalker(nullptr), NextID(0) {</div><div class="line"><a name="l01228"></a><span class="lineno"> 1228</span>&#160;  <span class="comment">// Build MemorySSA using a batch alias analysis. This reuses the internal</span></div><div class="line"><a name="l01229"></a><span class="lineno"> 1229</span>&#160;  <span class="comment">// state that AA collects during an alias()/getModRefInfo() call. This is</span></div><div class="line"><a name="l01230"></a><span class="lineno"> 1230</span>&#160;  <span class="comment">// safe because there are no CFG changes while building MemorySSA and can</span></div><div class="line"><a name="l01231"></a><span class="lineno"> 1231</span>&#160;  <span class="comment">// significantly reduce the time spent by the compiler in AA, because we will</span></div><div class="line"><a name="l01232"></a><span class="lineno"> 1232</span>&#160;  <span class="comment">// make queries about all the instructions in the Function.</span></div><div class="line"><a name="l01233"></a><span class="lineno"> 1233</span>&#160;  <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(AA &amp;&amp; <span class="stringliteral">&quot;No alias analysis?&quot;</span>);</div><div class="line"><a name="l01234"></a><span class="lineno"> 1234</span>&#160;  <a class="code" href="classllvm_1_1BatchAAResults.html">BatchAAResults</a> BatchAA(*AA);</div><div class="line"><a name="l01235"></a><span class="lineno"> 1235</span>&#160;  buildMemorySSA(BatchAA);</div><div class="line"><a name="l01236"></a><span class="lineno"> 1236</span>&#160;  <span class="comment">// Intentionally leave AA to nullptr while building so we don&#39;t accidently</span></div><div class="line"><a name="l01237"></a><span class="lineno"> 1237</span>&#160;  <span class="comment">// use non-batch AliasAnalysis.</span></div><div class="line"><a name="l01238"></a><span class="lineno"> 1238</span>&#160;  this-&gt;AA = AA;</div><div class="line"><a name="l01239"></a><span class="lineno"> 1239</span>&#160;  <span class="comment">// Also create the walker here.</span></div><div class="line"><a name="l01240"></a><span class="lineno"> 1240</span>&#160;  <a class="code" href="classllvm_1_1MemorySSA.html#a949151a1ebd664cb397323294cec0e53">getWalker</a>();</div><div class="line"><a name="l01241"></a><span class="lineno"> 1241</span>&#160;}</div><div class="line"><a name="l01242"></a><span class="lineno"> 1242</span>&#160;</div><div class="line"><a name="l01243"></a><span class="lineno"><a class="line" href="classllvm_1_1MemorySSA.html#ae7375c161ecaf6b6f4ebd6abfcb5ce71"> 1243</a></span>&#160;<a class="code" href="classllvm_1_1MemorySSA.html#ae7375c161ecaf6b6f4ebd6abfcb5ce71">MemorySSA::~MemorySSA</a>() {</div><div class="line"><a name="l01244"></a><span class="lineno"> 1244</span>&#160;  <span class="comment">// Drop all our references</span></div><div class="line"><a name="l01245"></a><span class="lineno"> 1245</span>&#160;  <span class="keywordflow">for</span> (<span class="keyword">const</span> <span class="keyword">auto</span> &amp;Pair : PerBlockAccesses)</div><div class="line"><a name="l01246"></a><span class="lineno"> 1246</span>&#160;    <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1MemoryAccess.html">MemoryAccess</a> &amp;MA : *Pair.second)</div><div class="line"><a name="l01247"></a><span class="lineno"> 1247</span>&#160;      MA.<a class="code" href="classllvm_1_1User.html#a48ec5fcee6d2c17c723e8e67f169f948">dropAllReferences</a>();</div><div class="line"><a name="l01248"></a><span class="lineno"> 1248</span>&#160;}</div><div class="line"><a name="l01249"></a><span class="lineno"> 1249</span>&#160;</div><div class="line"><a name="l01250"></a><span class="lineno"> 1250</span>&#160;<a class="code" href="classllvm_1_1iplist.html">MemorySSA::AccessList</a> *MemorySSA::getOrCreateAccessList(<span class="keyword">const</span> <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *BB) {</div><div class="line"><a name="l01251"></a><span class="lineno"> 1251</span>&#160;  <span class="keyword">auto</span> Res = PerBlockAccesses.<a class="code" href="classllvm_1_1DenseMapBase.html#a99f811d53704275b4158c62a2dd138d9">insert</a>(std::make_pair(BB, <span class="keyword">nullptr</span>));</div><div class="line"><a name="l01252"></a><span class="lineno"> 1252</span>&#160;</div><div class="line"><a name="l01253"></a><span class="lineno"> 1253</span>&#160;  <span class="keywordflow">if</span> (Res.second)</div><div class="line"><a name="l01254"></a><span class="lineno"> 1254</span>&#160;    Res.first-&gt;second = std::make_unique&lt;AccessList&gt;();</div><div class="line"><a name="l01255"></a><span class="lineno"> 1255</span>&#160;  <span class="keywordflow">return</span> Res.first-&gt;second.get();</div><div class="line"><a name="l01256"></a><span class="lineno"> 1256</span>&#160;}</div><div class="line"><a name="l01257"></a><span class="lineno"> 1257</span>&#160;</div><div class="line"><a name="l01258"></a><span class="lineno"> 1258</span>&#160;<a class="code" href="classllvm_1_1simple__ilist.html">MemorySSA::DefsList</a> *MemorySSA::getOrCreateDefsList(<span class="keyword">const</span> <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *BB) {</div><div class="line"><a name="l01259"></a><span class="lineno"> 1259</span>&#160;  <span class="keyword">auto</span> Res = PerBlockDefs.<a class="code" href="classllvm_1_1DenseMapBase.html#a99f811d53704275b4158c62a2dd138d9">insert</a>(std::make_pair(BB, <span class="keyword">nullptr</span>));</div><div class="line"><a name="l01260"></a><span class="lineno"> 1260</span>&#160;</div><div class="line"><a name="l01261"></a><span class="lineno"> 1261</span>&#160;  <span class="keywordflow">if</span> (Res.second)</div><div class="line"><a name="l01262"></a><span class="lineno"> 1262</span>&#160;    Res.first-&gt;second = std::make_unique&lt;DefsList&gt;();</div><div class="line"><a name="l01263"></a><span class="lineno"> 1263</span>&#160;  <span class="keywordflow">return</span> Res.first-&gt;second.get();</div><div class="line"><a name="l01264"></a><span class="lineno"> 1264</span>&#160;}</div><div class="line"><a name="l01265"></a><span class="lineno"> 1265</span>&#160;</div><div class="line"><a name="l01266"></a><span class="lineno"> 1266</span>&#160;<span class="keyword">namespace </span><a class="code" href="namespacellvm.html">llvm</a> {</div><div class="line"><a name="l01267"></a><span class="lineno"> 1267</span>&#160;<span class="comment"></span></div><div class="line"><a name="l01268"></a><span class="lineno"> 1268</span>&#160;<span class="comment">/// This class is a batch walker of all MemoryUse&#39;s in the program, and points</span></div><div class="line"><a name="l01269"></a><span class="lineno"> 1269</span>&#160;<span class="comment">/// their defining access at the thing that actually clobbers them.  Because it</span></div><div class="line"><a name="l01270"></a><span class="lineno"> 1270</span>&#160;<span class="comment">/// is a batch walker that touches everything, it does not operate like the</span></div><div class="line"><a name="l01271"></a><span class="lineno"> 1271</span>&#160;<span class="comment">/// other walkers.  This walker is basically performing a top-down SSA renaming</span></div><div class="line"><a name="l01272"></a><span class="lineno"> 1272</span>&#160;<span class="comment">/// pass, where the version stack is used as the cache.  This enables it to be</span></div><div class="line"><a name="l01273"></a><span class="lineno"> 1273</span>&#160;<span class="comment">/// significantly more time and memory efficient than using the regular walker,</span></div><div class="line"><a name="l01274"></a><span class="lineno"> 1274</span>&#160;<span class="comment">/// which is walking bottom-up.</span></div><div class="line"><a name="l01275"></a><span class="lineno"><a class="line" href="classllvm_1_1MemorySSA_1_1OptimizeUses.html"> 1275</a></span>&#160;<span class="comment"></span><span class="keyword">class </span><a class="code" href="classllvm_1_1MemorySSA_1_1OptimizeUses.html">MemorySSA::OptimizeUses</a> {</div><div class="line"><a name="l01276"></a><span class="lineno"> 1276</span>&#160;<span class="keyword">public</span>:</div><div class="line"><a name="l01277"></a><span class="lineno"><a class="line" href="classllvm_1_1MemorySSA_1_1OptimizeUses.html#a66b15abc71367165fd6b570d91a9cbf9"> 1277</a></span>&#160;  <a class="code" href="classllvm_1_1MemorySSA_1_1OptimizeUses.html#a66b15abc71367165fd6b570d91a9cbf9">OptimizeUses</a>(<a class="code" href="classllvm_1_1MemorySSA.html">MemorySSA</a> *MSSA, CachingWalker&lt;BatchAAResults&gt; *Walker,</div><div class="line"><a name="l01278"></a><span class="lineno"> 1278</span>&#160;               <a class="code" href="classllvm_1_1BatchAAResults.html">BatchAAResults</a> *BAA, <a class="code" href="classllvm_1_1DominatorTree.html">DominatorTree</a> *DT)</div><div class="line"><a name="l01279"></a><span class="lineno"> 1279</span>&#160;      : MSSA(MSSA), Walker(Walker), AA(BAA), DT(DT) {}</div><div class="line"><a name="l01280"></a><span class="lineno"> 1280</span>&#160;</div><div class="line"><a name="l01281"></a><span class="lineno"> 1281</span>&#160;  <span class="keywordtype">void</span> optimizeUses();</div><div class="line"><a name="l01282"></a><span class="lineno"> 1282</span>&#160;</div><div class="line"><a name="l01283"></a><span class="lineno"> 1283</span>&#160;<span class="keyword">private</span>:<span class="comment"></span></div><div class="line"><a name="l01284"></a><span class="lineno"> 1284</span>&#160;<span class="comment">  /// This represents where a given memorylocation is in the stack.</span></div><div class="line"><a name="l01285"></a><span class="lineno"> 1285</span>&#160;<span class="comment"></span>  <span class="keyword">struct </span>MemlocStackInfo {</div><div class="line"><a name="l01286"></a><span class="lineno"> 1286</span>&#160;    <span class="comment">// This essentially is keeping track of versions of the stack. Whenever</span></div><div class="line"><a name="l01287"></a><span class="lineno"> 1287</span>&#160;    <span class="comment">// the stack changes due to pushes or pops, these versions increase.</span></div><div class="line"><a name="l01288"></a><span class="lineno"> 1288</span>&#160;    <span class="keywordtype">unsigned</span> <span class="keywordtype">long</span> StackEpoch;</div><div class="line"><a name="l01289"></a><span class="lineno"> 1289</span>&#160;    <span class="keywordtype">unsigned</span> <span class="keywordtype">long</span> PopEpoch;</div><div class="line"><a name="l01290"></a><span class="lineno"> 1290</span>&#160;    <span class="comment">// This is the lower bound of places on the stack to check. It is equal to</span></div><div class="line"><a name="l01291"></a><span class="lineno"> 1291</span>&#160;    <span class="comment">// the place the last stack walk ended.</span></div><div class="line"><a name="l01292"></a><span class="lineno"> 1292</span>&#160;    <span class="comment">// Note: Correctness depends on this being initialized to 0, which densemap</span></div><div class="line"><a name="l01293"></a><span class="lineno"> 1293</span>&#160;    <span class="comment">// does</span></div><div class="line"><a name="l01294"></a><span class="lineno"> 1294</span>&#160;    <span class="keywordtype">unsigned</span> <span class="keywordtype">long</span> LowerBound;</div><div class="line"><a name="l01295"></a><span class="lineno"> 1295</span>&#160;    <span class="keyword">const</span> <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *LowerBoundBlock;</div><div class="line"><a name="l01296"></a><span class="lineno"> 1296</span>&#160;    <span class="comment">// This is where the last walk for this memory location ended.</span></div><div class="line"><a name="l01297"></a><span class="lineno"> 1297</span>&#160;    <span class="keywordtype">unsigned</span> <span class="keywordtype">long</span> LastKill;</div><div class="line"><a name="l01298"></a><span class="lineno"> 1298</span>&#160;    <span class="keywordtype">bool</span> LastKillValid;</div><div class="line"><a name="l01299"></a><span class="lineno"> 1299</span>&#160;    <a class="code" href="classllvm_1_1Optional.html">Optional&lt;AliasResult&gt;</a> AR;</div><div class="line"><a name="l01300"></a><span class="lineno"> 1300</span>&#160;  };</div><div class="line"><a name="l01301"></a><span class="lineno"> 1301</span>&#160;</div><div class="line"><a name="l01302"></a><span class="lineno"> 1302</span>&#160;  <span class="keywordtype">void</span> optimizeUsesInBlock(<span class="keyword">const</span> <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *, <span class="keywordtype">unsigned</span> <span class="keywordtype">long</span> &amp;, <span class="keywordtype">unsigned</span> <span class="keywordtype">long</span> &amp;,</div><div class="line"><a name="l01303"></a><span class="lineno"> 1303</span>&#160;                           <a class="code" href="classllvm_1_1SmallVectorImpl.html">SmallVectorImpl&lt;MemoryAccess *&gt;</a> &amp;,</div><div class="line"><a name="l01304"></a><span class="lineno"> 1304</span>&#160;                           <a class="code" href="classllvm_1_1DenseMap.html">DenseMap&lt;MemoryLocOrCall, MemlocStackInfo&gt;</a> &amp;);</div><div class="line"><a name="l01305"></a><span class="lineno"> 1305</span>&#160;</div><div class="line"><a name="l01306"></a><span class="lineno"> 1306</span>&#160;  <a class="code" href="classllvm_1_1MemorySSA.html">MemorySSA</a> *MSSA;</div><div class="line"><a name="l01307"></a><span class="lineno"> 1307</span>&#160;  CachingWalker&lt;BatchAAResults&gt; *Walker;</div><div class="line"><a name="l01308"></a><span class="lineno"> 1308</span>&#160;  <a class="code" href="classllvm_1_1BatchAAResults.html">BatchAAResults</a> *AA;</div><div class="line"><a name="l01309"></a><span class="lineno"> 1309</span>&#160;  <a class="code" href="classllvm_1_1DominatorTree.html">DominatorTree</a> *DT;</div><div class="line"><a name="l01310"></a><span class="lineno"> 1310</span>&#160;};</div><div class="line"><a name="l01311"></a><span class="lineno"> 1311</span>&#160;</div><div class="line"><a name="l01312"></a><span class="lineno"> 1312</span>&#160;} <span class="comment">// end namespace llvm</span></div><div class="line"><a name="l01313"></a><span class="lineno"> 1313</span>&#160;<span class="comment"></span></div><div class="line"><a name="l01314"></a><span class="lineno"> 1314</span>&#160;<span class="comment">/// Optimize the uses in a given block This is basically the SSA renaming</span></div><div class="line"><a name="l01315"></a><span class="lineno"> 1315</span>&#160;<span class="comment">/// algorithm, with one caveat: We are able to use a single stack for all</span></div><div class="line"><a name="l01316"></a><span class="lineno"> 1316</span>&#160;<span class="comment">/// MemoryUses.  This is because the set of *possible* reaching MemoryDefs is</span></div><div class="line"><a name="l01317"></a><span class="lineno"> 1317</span>&#160;<span class="comment">/// the same for every MemoryUse.  The *actual* clobbering MemoryDef is just</span></div><div class="line"><a name="l01318"></a><span class="lineno"> 1318</span>&#160;<span class="comment">/// going to be some position in that stack of possible ones.</span></div><div class="line"><a name="l01319"></a><span class="lineno"> 1319</span>&#160;<span class="comment">///</span></div><div class="line"><a name="l01320"></a><span class="lineno"> 1320</span>&#160;<span class="comment">/// We track the stack positions that each MemoryLocation needs</span></div><div class="line"><a name="l01321"></a><span class="lineno"> 1321</span>&#160;<span class="comment">/// to check, and last ended at.  This is because we only want to check the</span></div><div class="line"><a name="l01322"></a><span class="lineno"> 1322</span>&#160;<span class="comment">/// things that changed since last time.  The same MemoryLocation should</span></div><div class="line"><a name="l01323"></a><span class="lineno"> 1323</span>&#160;<span class="comment">/// get clobbered by the same store (getModRefInfo does not use invariantness or</span></div><div class="line"><a name="l01324"></a><span class="lineno"> 1324</span>&#160;<span class="comment">/// things like this, and if they start, we can modify MemoryLocOrCall to</span></div><div class="line"><a name="l01325"></a><span class="lineno"> 1325</span>&#160;<span class="comment">/// include relevant data)</span></div><div class="line"><a name="l01326"></a><span class="lineno"> 1326</span>&#160;<span class="comment"></span><span class="keywordtype">void</span> MemorySSA::OptimizeUses::optimizeUsesInBlock(</div><div class="line"><a name="l01327"></a><span class="lineno"> 1327</span>&#160;    <span class="keyword">const</span> <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *BB, <span class="keywordtype">unsigned</span> <span class="keywordtype">long</span> &amp;StackEpoch, <span class="keywordtype">unsigned</span> <span class="keywordtype">long</span> &amp;PopEpoch,</div><div class="line"><a name="l01328"></a><span class="lineno"> 1328</span>&#160;    <a class="code" href="classllvm_1_1SmallVectorImpl.html">SmallVectorImpl&lt;MemoryAccess *&gt;</a> &amp;VersionStack,</div><div class="line"><a name="l01329"></a><span class="lineno"> 1329</span>&#160;    <a class="code" href="classllvm_1_1DenseMap.html">DenseMap&lt;MemoryLocOrCall, MemlocStackInfo&gt;</a> &amp;LocStackInfo) {</div><div class="line"><a name="l01330"></a><span class="lineno"> 1330</span>&#160;<span class="comment"></span></div><div class="line"><a name="l01331"></a><span class="lineno"> 1331</span>&#160;<span class="comment">  /// If no accesses, nothing to do.</span></div><div class="line"><a name="l01332"></a><span class="lineno"> 1332</span>&#160;<span class="comment"></span>  <a class="code" href="classllvm_1_1iplist.html">MemorySSA::AccessList</a> *Accesses = MSSA-&gt;getWritableBlockAccesses(BB);</div><div class="line"><a name="l01333"></a><span class="lineno"> 1333</span>&#160;  <span class="keywordflow">if</span> (Accesses == <span class="keyword">nullptr</span>)</div><div class="line"><a name="l01334"></a><span class="lineno"> 1334</span>&#160;    <span class="keywordflow">return</span>;</div><div class="line"><a name="l01335"></a><span class="lineno"> 1335</span>&#160;</div><div class="line"><a name="l01336"></a><span class="lineno"> 1336</span>&#160;  <span class="comment">// Pop everything that doesn&#39;t dominate the current block off the stack,</span></div><div class="line"><a name="l01337"></a><span class="lineno"> 1337</span>&#160;  <span class="comment">// increment the PopEpoch to account for this.</span></div><div class="line"><a name="l01338"></a><span class="lineno"> 1338</span>&#160;  <span class="keywordflow">while</span> (<span class="keyword">true</span>) {</div><div class="line"><a name="l01339"></a><span class="lineno"> 1339</span>&#160;    <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(</div><div class="line"><a name="l01340"></a><span class="lineno"> 1340</span>&#160;        !VersionStack.<a class="code" href="classllvm_1_1SmallVectorBase.html#a495b11cf3890ab746d76ef2881f79041">empty</a>() &amp;&amp;</div><div class="line"><a name="l01341"></a><span class="lineno"> 1341</span>&#160;        <span class="stringliteral">&quot;Version stack should have liveOnEntry sentinel dominating everything&quot;</span>);</div><div class="line"><a name="l01342"></a><span class="lineno"> 1342</span>&#160;    <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *BackBlock = VersionStack.<a class="code" href="classllvm_1_1SmallVectorTemplateCommon.html#acd9e771a3296c6b24146955754620557">back</a>()-&gt;getBlock();</div><div class="line"><a name="l01343"></a><span class="lineno"> 1343</span>&#160;    <span class="keywordflow">if</span> (DT-&gt;dominates(BackBlock, BB))</div><div class="line"><a name="l01344"></a><span class="lineno"> 1344</span>&#160;      <span class="keywordflow">break</span>;</div><div class="line"><a name="l01345"></a><span class="lineno"> 1345</span>&#160;    <span class="keywordflow">while</span> (VersionStack.<a class="code" href="classllvm_1_1SmallVectorTemplateCommon.html#acd9e771a3296c6b24146955754620557">back</a>()-&gt;getBlock() == BackBlock)</div><div class="line"><a name="l01346"></a><span class="lineno"> 1346</span>&#160;      VersionStack.<a class="code" href="classllvm_1_1SmallVectorTemplateBase.html#ad97688dfe9cd802e2a0691cbe620218a">pop_back</a>();</div><div class="line"><a name="l01347"></a><span class="lineno"> 1347</span>&#160;    ++PopEpoch;</div><div class="line"><a name="l01348"></a><span class="lineno"> 1348</span>&#160;  }</div><div class="line"><a name="l01349"></a><span class="lineno"> 1349</span>&#160;</div><div class="line"><a name="l01350"></a><span class="lineno"> 1350</span>&#160;  <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1MemoryAccess.html">MemoryAccess</a> &amp;MA : *Accesses) {</div><div class="line"><a name="l01351"></a><span class="lineno"> 1351</span>&#160;    <span class="keyword">auto</span> *MU = <a class="code" href="namespacellvm.html#a4db2f71d62968b2be3c4bffc5050d8c7">dyn_cast</a>&lt;<a class="code" href="classllvm_1_1MemoryUse.html">MemoryUse</a>&gt;(&amp;MA);</div><div class="line"><a name="l01352"></a><span class="lineno"> 1352</span>&#160;    <span class="keywordflow">if</span> (!MU) {</div><div class="line"><a name="l01353"></a><span class="lineno"> 1353</span>&#160;      VersionStack.<a class="code" href="classllvm_1_1SmallVectorTemplateBase.html#af42bfbc067df27c19ee2fc859df58799">push_back</a>(&amp;MA);</div><div class="line"><a name="l01354"></a><span class="lineno"> 1354</span>&#160;      ++StackEpoch;</div><div class="line"><a name="l01355"></a><span class="lineno"> 1355</span>&#160;      <span class="keywordflow">continue</span>;</div><div class="line"><a name="l01356"></a><span class="lineno"> 1356</span>&#160;    }</div><div class="line"><a name="l01357"></a><span class="lineno"> 1357</span>&#160;</div><div class="line"><a name="l01358"></a><span class="lineno"> 1358</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="MemorySSA_8cpp.html#aa7bf9007b34e2a7a16275b1a7d7e3d63">isUseTriviallyOptimizableToLiveOnEntry</a>(*AA, MU-&gt;getMemoryInst())) {</div><div class="line"><a name="l01359"></a><span class="lineno"> 1359</span>&#160;      MU-&gt;setDefiningAccess(MSSA-&gt;getLiveOnEntryDef(), <span class="keyword">true</span>, <a class="code" href="namespacellvm.html#a1d0ac37acc2482f8794195f5042b61b5a6adf97f83acf6453d4a6a4b1070f3754">None</a>);</div><div class="line"><a name="l01360"></a><span class="lineno"> 1360</span>&#160;      <span class="keywordflow">continue</span>;</div><div class="line"><a name="l01361"></a><span class="lineno"> 1361</span>&#160;    }</div><div class="line"><a name="l01362"></a><span class="lineno"> 1362</span>&#160;</div><div class="line"><a name="l01363"></a><span class="lineno"> 1363</span>&#160;    MemoryLocOrCall UseMLOC(MU);</div><div class="line"><a name="l01364"></a><span class="lineno"> 1364</span>&#160;    <span class="keyword">auto</span> &amp;LocInfo = LocStackInfo[UseMLOC];</div><div class="line"><a name="l01365"></a><span class="lineno"> 1365</span>&#160;    <span class="comment">// If the pop epoch changed, it means we&#39;ve removed stuff from top of</span></div><div class="line"><a name="l01366"></a><span class="lineno"> 1366</span>&#160;    <span class="comment">// stack due to changing blocks. We may have to reset the lower bound or</span></div><div class="line"><a name="l01367"></a><span class="lineno"> 1367</span>&#160;    <span class="comment">// last kill info.</span></div><div class="line"><a name="l01368"></a><span class="lineno"> 1368</span>&#160;    <span class="keywordflow">if</span> (LocInfo.PopEpoch != PopEpoch) {</div><div class="line"><a name="l01369"></a><span class="lineno"> 1369</span>&#160;      LocInfo.PopEpoch = PopEpoch;</div><div class="line"><a name="l01370"></a><span class="lineno"> 1370</span>&#160;      LocInfo.StackEpoch = StackEpoch;</div><div class="line"><a name="l01371"></a><span class="lineno"> 1371</span>&#160;      <span class="comment">// If the lower bound was in something that no longer dominates us, we</span></div><div class="line"><a name="l01372"></a><span class="lineno"> 1372</span>&#160;      <span class="comment">// have to reset it.</span></div><div class="line"><a name="l01373"></a><span class="lineno"> 1373</span>&#160;      <span class="comment">// We can&#39;t simply track stack size, because the stack may have had</span></div><div class="line"><a name="l01374"></a><span class="lineno"> 1374</span>&#160;      <span class="comment">// pushes/pops in the meantime.</span></div><div class="line"><a name="l01375"></a><span class="lineno"> 1375</span>&#160;      <span class="comment">// XXX: This is non-optimal, but only is slower cases with heavily</span></div><div class="line"><a name="l01376"></a><span class="lineno"> 1376</span>&#160;      <span class="comment">// branching dominator trees.  To get the optimal number of queries would</span></div><div class="line"><a name="l01377"></a><span class="lineno"> 1377</span>&#160;      <span class="comment">// be to make lowerbound and lastkill a per-loc stack, and pop it until</span></div><div class="line"><a name="l01378"></a><span class="lineno"> 1378</span>&#160;      <span class="comment">// the top of that stack dominates us.  This does not seem worth it ATM.</span></div><div class="line"><a name="l01379"></a><span class="lineno"> 1379</span>&#160;      <span class="comment">// A much cheaper optimization would be to always explore the deepest</span></div><div class="line"><a name="l01380"></a><span class="lineno"> 1380</span>&#160;      <span class="comment">// branch of the dominator tree first. This will guarantee this resets on</span></div><div class="line"><a name="l01381"></a><span class="lineno"> 1381</span>&#160;      <span class="comment">// the smallest set of blocks.</span></div><div class="line"><a name="l01382"></a><span class="lineno"> 1382</span>&#160;      <span class="keywordflow">if</span> (LocInfo.LowerBoundBlock &amp;&amp; LocInfo.LowerBoundBlock != BB &amp;&amp;</div><div class="line"><a name="l01383"></a><span class="lineno"> 1383</span>&#160;          !DT-&gt;dominates(LocInfo.LowerBoundBlock, BB)) {</div><div class="line"><a name="l01384"></a><span class="lineno"> 1384</span>&#160;        <span class="comment">// Reset the lower bound of things to check.</span></div><div class="line"><a name="l01385"></a><span class="lineno"> 1385</span>&#160;        <span class="comment">// TODO: Some day we should be able to reset to last kill, rather than</span></div><div class="line"><a name="l01386"></a><span class="lineno"> 1386</span>&#160;        <span class="comment">// 0.</span></div><div class="line"><a name="l01387"></a><span class="lineno"> 1387</span>&#160;        LocInfo.LowerBound = 0;</div><div class="line"><a name="l01388"></a><span class="lineno"> 1388</span>&#160;        LocInfo.LowerBoundBlock = VersionStack[0]-&gt;getBlock();</div><div class="line"><a name="l01389"></a><span class="lineno"> 1389</span>&#160;        LocInfo.LastKillValid = <span class="keyword">false</span>;</div><div class="line"><a name="l01390"></a><span class="lineno"> 1390</span>&#160;      }</div><div class="line"><a name="l01391"></a><span class="lineno"> 1391</span>&#160;    } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (LocInfo.StackEpoch != StackEpoch) {</div><div class="line"><a name="l01392"></a><span class="lineno"> 1392</span>&#160;      <span class="comment">// If all that has changed is the StackEpoch, we only have to check the</span></div><div class="line"><a name="l01393"></a><span class="lineno"> 1393</span>&#160;      <span class="comment">// new things on the stack, because we&#39;ve checked everything before.  In</span></div><div class="line"><a name="l01394"></a><span class="lineno"> 1394</span>&#160;      <span class="comment">// this case, the lower bound of things to check remains the same.</span></div><div class="line"><a name="l01395"></a><span class="lineno"> 1395</span>&#160;      LocInfo.PopEpoch = PopEpoch;</div><div class="line"><a name="l01396"></a><span class="lineno"> 1396</span>&#160;      LocInfo.StackEpoch = StackEpoch;</div><div class="line"><a name="l01397"></a><span class="lineno"> 1397</span>&#160;    }</div><div class="line"><a name="l01398"></a><span class="lineno"> 1398</span>&#160;    <span class="keywordflow">if</span> (!LocInfo.LastKillValid) {</div><div class="line"><a name="l01399"></a><span class="lineno"> 1399</span>&#160;      LocInfo.LastKill = VersionStack.<a class="code" href="classllvm_1_1SmallVectorBase.html#ac8624043115fb3a5076c964820001b61">size</a>() - 1;</div><div class="line"><a name="l01400"></a><span class="lineno"> 1400</span>&#160;      LocInfo.LastKillValid = <span class="keyword">true</span>;</div><div class="line"><a name="l01401"></a><span class="lineno"> 1401</span>&#160;      LocInfo.AR = <a class="code" href="namespacellvm.html#ae1738272abcf2ac638b97e7dc6360cfdafb69d5dfee1598378741360198a1ba8e">MayAlias</a>;</div><div class="line"><a name="l01402"></a><span class="lineno"> 1402</span>&#160;    }</div><div class="line"><a name="l01403"></a><span class="lineno"> 1403</span>&#160;</div><div class="line"><a name="l01404"></a><span class="lineno"> 1404</span>&#160;    <span class="comment">// At this point, we should have corrected last kill and LowerBound to be</span></div><div class="line"><a name="l01405"></a><span class="lineno"> 1405</span>&#160;    <span class="comment">// in bounds.</span></div><div class="line"><a name="l01406"></a><span class="lineno"> 1406</span>&#160;    <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(LocInfo.LowerBound &lt; VersionStack.<a class="code" href="classllvm_1_1SmallVectorBase.html#ac8624043115fb3a5076c964820001b61">size</a>() &amp;&amp;</div><div class="line"><a name="l01407"></a><span class="lineno"> 1407</span>&#160;           <span class="stringliteral">&quot;Lower bound out of range&quot;</span>);</div><div class="line"><a name="l01408"></a><span class="lineno"> 1408</span>&#160;    <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(LocInfo.LastKill &lt; VersionStack.<a class="code" href="classllvm_1_1SmallVectorBase.html#ac8624043115fb3a5076c964820001b61">size</a>() &amp;&amp;</div><div class="line"><a name="l01409"></a><span class="lineno"> 1409</span>&#160;           <span class="stringliteral">&quot;Last kill info out of range&quot;</span>);</div><div class="line"><a name="l01410"></a><span class="lineno"> 1410</span>&#160;    <span class="comment">// In any case, the new upper bound is the top of the stack.</span></div><div class="line"><a name="l01411"></a><span class="lineno"> 1411</span>&#160;    <span class="keywordtype">unsigned</span> <span class="keywordtype">long</span> UpperBound = VersionStack.<a class="code" href="classllvm_1_1SmallVectorBase.html#ac8624043115fb3a5076c964820001b61">size</a>() - 1;</div><div class="line"><a name="l01412"></a><span class="lineno"> 1412</span>&#160;</div><div class="line"><a name="l01413"></a><span class="lineno"> 1413</span>&#160;    <span class="keywordflow">if</span> (UpperBound - LocInfo.LowerBound &gt; <a class="code" href="MemorySSA_8cpp.html#a5926ddc0f7c4225c6ced440baa2fb7a3">MaxCheckLimit</a>) {</div><div class="line"><a name="l01414"></a><span class="lineno"> 1414</span>&#160;      <a class="code" href="Debug_8h.html#a08efc68d15935eb8889400a46c3749ba">LLVM_DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;MemorySSA skipping optimization of &quot;</span> &lt;&lt; *MU &lt;&lt; <span class="stringliteral">&quot; (&quot;</span></div><div class="line"><a name="l01415"></a><span class="lineno"> 1415</span>&#160;                        &lt;&lt; *(MU-&gt;getMemoryInst()) &lt;&lt; <span class="stringliteral">&quot;)&quot;</span></div><div class="line"><a name="l01416"></a><span class="lineno"> 1416</span>&#160;                        &lt;&lt; <span class="stringliteral">&quot; because there are &quot;</span></div><div class="line"><a name="l01417"></a><span class="lineno"> 1417</span>&#160;                        &lt;&lt; UpperBound - LocInfo.LowerBound</div><div class="line"><a name="l01418"></a><span class="lineno"> 1418</span>&#160;                        &lt;&lt; <span class="stringliteral">&quot; stores to disambiguate\n&quot;</span>);</div><div class="line"><a name="l01419"></a><span class="lineno"> 1419</span>&#160;      <span class="comment">// Because we did not walk, LastKill is no longer valid, as this may</span></div><div class="line"><a name="l01420"></a><span class="lineno"> 1420</span>&#160;      <span class="comment">// have been a kill.</span></div><div class="line"><a name="l01421"></a><span class="lineno"> 1421</span>&#160;      LocInfo.LastKillValid = <span class="keyword">false</span>;</div><div class="line"><a name="l01422"></a><span class="lineno"> 1422</span>&#160;      <span class="keywordflow">continue</span>;</div><div class="line"><a name="l01423"></a><span class="lineno"> 1423</span>&#160;    }</div><div class="line"><a name="l01424"></a><span class="lineno"> 1424</span>&#160;    <span class="keywordtype">bool</span> FoundClobberResult = <span class="keyword">false</span>;</div><div class="line"><a name="l01425"></a><span class="lineno"> 1425</span>&#160;    <span class="keywordtype">unsigned</span> UpwardWalkLimit = <a class="code" href="MemorySSA_8cpp.html#a5926ddc0f7c4225c6ced440baa2fb7a3">MaxCheckLimit</a>;</div><div class="line"><a name="l01426"></a><span class="lineno"> 1426</span>&#160;    <span class="keywordflow">while</span> (UpperBound &gt; LocInfo.LowerBound) {</div><div class="line"><a name="l01427"></a><span class="lineno"> 1427</span>&#160;      <span class="keywordflow">if</span> (isa&lt;MemoryPhi&gt;(VersionStack[UpperBound])) {</div><div class="line"><a name="l01428"></a><span class="lineno"> 1428</span>&#160;        <span class="comment">// For phis, use the walker, see where we ended up, go there</span></div><div class="line"><a name="l01429"></a><span class="lineno"> 1429</span>&#160;        <a class="code" href="classllvm_1_1MemoryAccess.html">MemoryAccess</a> *Result =</div><div class="line"><a name="l01430"></a><span class="lineno"> 1430</span>&#160;            Walker-&gt;getClobberingMemoryAccess(MU, UpwardWalkLimit);</div><div class="line"><a name="l01431"></a><span class="lineno"> 1431</span>&#160;        <span class="comment">// We are guaranteed to find it or something is wrong</span></div><div class="line"><a name="l01432"></a><span class="lineno"> 1432</span>&#160;        <span class="keywordflow">while</span> (VersionStack[UpperBound] != Result) {</div><div class="line"><a name="l01433"></a><span class="lineno"> 1433</span>&#160;          <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(UpperBound != 0);</div><div class="line"><a name="l01434"></a><span class="lineno"> 1434</span>&#160;          --UpperBound;</div><div class="line"><a name="l01435"></a><span class="lineno"> 1435</span>&#160;        }</div><div class="line"><a name="l01436"></a><span class="lineno"> 1436</span>&#160;        FoundClobberResult = <span class="keyword">true</span>;</div><div class="line"><a name="l01437"></a><span class="lineno"> 1437</span>&#160;        <span class="keywordflow">break</span>;</div><div class="line"><a name="l01438"></a><span class="lineno"> 1438</span>&#160;      }</div><div class="line"><a name="l01439"></a><span class="lineno"> 1439</span>&#160;</div><div class="line"><a name="l01440"></a><span class="lineno"> 1440</span>&#160;      <a class="code" href="classllvm_1_1MemoryDef.html">MemoryDef</a> *MD = cast&lt;MemoryDef&gt;(VersionStack[UpperBound]);</div><div class="line"><a name="l01441"></a><span class="lineno"> 1441</span>&#160;      <span class="comment">// If the lifetime of the pointer ends at this instruction, it&#39;s live on</span></div><div class="line"><a name="l01442"></a><span class="lineno"> 1442</span>&#160;      <span class="comment">// entry.</span></div><div class="line"><a name="l01443"></a><span class="lineno"> 1443</span>&#160;      <span class="keywordflow">if</span> (!UseMLOC.IsCall &amp;&amp; <a class="code" href="MemorySSA_8cpp.html#aa59bf39360130f2ded62dbd9a4e82995">lifetimeEndsAt</a>(MD, UseMLOC.getLoc(), *AA)) {</div><div class="line"><a name="l01444"></a><span class="lineno"> 1444</span>&#160;        <span class="comment">// Reset UpperBound to liveOnEntryDef&#39;s place in the stack</span></div><div class="line"><a name="l01445"></a><span class="lineno"> 1445</span>&#160;        UpperBound = 0;</div><div class="line"><a name="l01446"></a><span class="lineno"> 1446</span>&#160;        FoundClobberResult = <span class="keyword">true</span>;</div><div class="line"><a name="l01447"></a><span class="lineno"> 1447</span>&#160;        LocInfo.AR = <a class="code" href="namespacellvm.html#ae1738272abcf2ac638b97e7dc6360cfda96e73e8d9d3af47453d4d562f9be0b44">MustAlias</a>;</div><div class="line"><a name="l01448"></a><span class="lineno"> 1448</span>&#160;        <span class="keywordflow">break</span>;</div><div class="line"><a name="l01449"></a><span class="lineno"> 1449</span>&#160;      }</div><div class="line"><a name="l01450"></a><span class="lineno"> 1450</span>&#160;      ClobberAlias CA = <a class="code" href="MemorySSA_8cpp.html#a8b72a05b68fd9ce0a18e753d1c99c807">instructionClobbersQuery</a>(MD, MU, UseMLOC, *AA);</div><div class="line"><a name="l01451"></a><span class="lineno"> 1451</span>&#160;      <span class="keywordflow">if</span> (CA.IsClobber) {</div><div class="line"><a name="l01452"></a><span class="lineno"> 1452</span>&#160;        FoundClobberResult = <span class="keyword">true</span>;</div><div class="line"><a name="l01453"></a><span class="lineno"> 1453</span>&#160;        LocInfo.AR = CA.AR;</div><div class="line"><a name="l01454"></a><span class="lineno"> 1454</span>&#160;        <span class="keywordflow">break</span>;</div><div class="line"><a name="l01455"></a><span class="lineno"> 1455</span>&#160;      }</div><div class="line"><a name="l01456"></a><span class="lineno"> 1456</span>&#160;      --UpperBound;</div><div class="line"><a name="l01457"></a><span class="lineno"> 1457</span>&#160;    }</div><div class="line"><a name="l01458"></a><span class="lineno"> 1458</span>&#160;</div><div class="line"><a name="l01459"></a><span class="lineno"> 1459</span>&#160;    <span class="comment">// Note: Phis always have AliasResult AR set to MayAlias ATM.</span></div><div class="line"><a name="l01460"></a><span class="lineno"> 1460</span>&#160;</div><div class="line"><a name="l01461"></a><span class="lineno"> 1461</span>&#160;    <span class="comment">// At the end of this loop, UpperBound is either a clobber, or lower bound</span></div><div class="line"><a name="l01462"></a><span class="lineno"> 1462</span>&#160;    <span class="comment">// PHI walking may cause it to be &lt; LowerBound, and in fact, &lt; LastKill.</span></div><div class="line"><a name="l01463"></a><span class="lineno"> 1463</span>&#160;    <span class="keywordflow">if</span> (FoundClobberResult || UpperBound &lt; LocInfo.LastKill) {</div><div class="line"><a name="l01464"></a><span class="lineno"> 1464</span>&#160;      <span class="comment">// We were last killed now by where we got to</span></div><div class="line"><a name="l01465"></a><span class="lineno"> 1465</span>&#160;      <span class="keywordflow">if</span> (MSSA-&gt;isLiveOnEntryDef(VersionStack[UpperBound]))</div><div class="line"><a name="l01466"></a><span class="lineno"> 1466</span>&#160;        LocInfo.AR = <a class="code" href="namespacellvm.html#a1d0ac37acc2482f8794195f5042b61b5a6adf97f83acf6453d4a6a4b1070f3754">None</a>;</div><div class="line"><a name="l01467"></a><span class="lineno"> 1467</span>&#160;      MU-&gt;setDefiningAccess(VersionStack[UpperBound], <span class="keyword">true</span>, LocInfo.AR);</div><div class="line"><a name="l01468"></a><span class="lineno"> 1468</span>&#160;      LocInfo.LastKill = UpperBound;</div><div class="line"><a name="l01469"></a><span class="lineno"> 1469</span>&#160;    } <span class="keywordflow">else</span> {</div><div class="line"><a name="l01470"></a><span class="lineno"> 1470</span>&#160;      <span class="comment">// Otherwise, we checked all the new ones, and now we know we can get to</span></div><div class="line"><a name="l01471"></a><span class="lineno"> 1471</span>&#160;      <span class="comment">// LastKill.</span></div><div class="line"><a name="l01472"></a><span class="lineno"> 1472</span>&#160;      MU-&gt;setDefiningAccess(VersionStack[LocInfo.LastKill], <span class="keyword">true</span>, LocInfo.AR);</div><div class="line"><a name="l01473"></a><span class="lineno"> 1473</span>&#160;    }</div><div class="line"><a name="l01474"></a><span class="lineno"> 1474</span>&#160;    LocInfo.LowerBound = VersionStack.<a class="code" href="classllvm_1_1SmallVectorBase.html#ac8624043115fb3a5076c964820001b61">size</a>() - 1;</div><div class="line"><a name="l01475"></a><span class="lineno"> 1475</span>&#160;    LocInfo.LowerBoundBlock = BB;</div><div class="line"><a name="l01476"></a><span class="lineno"> 1476</span>&#160;  }</div><div class="line"><a name="l01477"></a><span class="lineno"> 1477</span>&#160;}</div><div class="line"><a name="l01478"></a><span class="lineno"> 1478</span>&#160;<span class="comment"></span></div><div class="line"><a name="l01479"></a><span class="lineno"> 1479</span>&#160;<span class="comment">/// Optimize uses to point to their actual clobbering definitions.</span></div><div class="line"><a name="l01480"></a><span class="lineno"><a class="line" href="classllvm_1_1MemorySSA_1_1OptimizeUses.html#a195658a43b30378309ff4e62455dc137"> 1480</a></span>&#160;<span class="comment"></span><span class="keywordtype">void</span> <a class="code" href="classllvm_1_1MemorySSA_1_1OptimizeUses.html#a195658a43b30378309ff4e62455dc137">MemorySSA::OptimizeUses::optimizeUses</a>() {</div><div class="line"><a name="l01481"></a><span class="lineno"> 1481</span>&#160;  <a class="code" href="classllvm_1_1SmallVector.html">SmallVector&lt;MemoryAccess *, 16&gt;</a> VersionStack;</div><div class="line"><a name="l01482"></a><span class="lineno"> 1482</span>&#160;  <a class="code" href="classllvm_1_1DenseMap.html">DenseMap&lt;MemoryLocOrCall, MemlocStackInfo&gt;</a> LocStackInfo;</div><div class="line"><a name="l01483"></a><span class="lineno"> 1483</span>&#160;  VersionStack.<a class="code" href="classllvm_1_1SmallVectorTemplateBase.html#af42bfbc067df27c19ee2fc859df58799">push_back</a>(MSSA-&gt;getLiveOnEntryDef());</div><div class="line"><a name="l01484"></a><span class="lineno"> 1484</span>&#160;</div><div class="line"><a name="l01485"></a><span class="lineno"> 1485</span>&#160;  <span class="keywordtype">unsigned</span> <span class="keywordtype">long</span> StackEpoch = 1;</div><div class="line"><a name="l01486"></a><span class="lineno"> 1486</span>&#160;  <span class="keywordtype">unsigned</span> <span class="keywordtype">long</span> PopEpoch = 1;</div><div class="line"><a name="l01487"></a><span class="lineno"> 1487</span>&#160;  <span class="comment">// We perform a non-recursive top-down dominator tree walk.</span></div><div class="line"><a name="l01488"></a><span class="lineno"> 1488</span>&#160;  <span class="keywordflow">for</span> (<span class="keyword">const</span> <span class="keyword">auto</span> *DomNode : <a class="code" href="namespacellvm.html#add49d9f7abebe402adf1a57c762abeef">depth_first</a>(DT-&gt;getRootNode()))</div><div class="line"><a name="l01489"></a><span class="lineno"> 1489</span>&#160;    optimizeUsesInBlock(DomNode-&gt;getBlock(), StackEpoch, PopEpoch, VersionStack,</div><div class="line"><a name="l01490"></a><span class="lineno"> 1490</span>&#160;                        LocStackInfo);</div><div class="line"><a name="l01491"></a><span class="lineno"> 1491</span>&#160;}</div><div class="line"><a name="l01492"></a><span class="lineno"> 1492</span>&#160;</div><div class="line"><a name="l01493"></a><span class="lineno"> 1493</span>&#160;<span class="keywordtype">void</span> MemorySSA::placePHINodes(</div><div class="line"><a name="l01494"></a><span class="lineno"> 1494</span>&#160;    <span class="keyword">const</span> <a class="code" href="classllvm_1_1SmallPtrSetImpl.html">SmallPtrSetImpl&lt;BasicBlock *&gt;</a> &amp;DefiningBlocks) {</div><div class="line"><a name="l01495"></a><span class="lineno"> 1495</span>&#160;  <span class="comment">// Determine where our MemoryPhi&#39;s should go</span></div><div class="line"><a name="l01496"></a><span class="lineno"> 1496</span>&#160;  <a class="code" href="classllvm_1_1IDFCalculator.html">ForwardIDFCalculator</a> IDFs(*DT);</div><div class="line"><a name="l01497"></a><span class="lineno"> 1497</span>&#160;  IDFs.<a class="code" href="classllvm_1_1IDFCalculatorBase.html#a5961687b5506862585629d7f4a0d6d56">setDefiningBlocks</a>(DefiningBlocks);</div><div class="line"><a name="l01498"></a><span class="lineno"> 1498</span>&#160;  <a class="code" href="classllvm_1_1SmallVector.html">SmallVector&lt;BasicBlock *, 32&gt;</a> IDFBlocks;</div><div class="line"><a name="l01499"></a><span class="lineno"> 1499</span>&#160;  IDFs.<a class="code" href="classllvm_1_1IDFCalculatorBase.html#a12e611cdfa9c2bcf1e6d3b2c802e6536">calculate</a>(IDFBlocks);</div><div class="line"><a name="l01500"></a><span class="lineno"> 1500</span>&#160;</div><div class="line"><a name="l01501"></a><span class="lineno"> 1501</span>&#160;  <span class="comment">// Now place MemoryPhi nodes.</span></div><div class="line"><a name="l01502"></a><span class="lineno"> 1502</span>&#160;  <span class="keywordflow">for</span> (<span class="keyword">auto</span> &amp;BB : IDFBlocks)</div><div class="line"><a name="l01503"></a><span class="lineno"> 1503</span>&#160;    createMemoryPhi(BB);</div><div class="line"><a name="l01504"></a><span class="lineno"> 1504</span>&#160;}</div><div class="line"><a name="l01505"></a><span class="lineno"> 1505</span>&#160;</div><div class="line"><a name="l01506"></a><span class="lineno"> 1506</span>&#160;<span class="keywordtype">void</span> MemorySSA::buildMemorySSA(<a class="code" href="classllvm_1_1BatchAAResults.html">BatchAAResults</a> &amp;BAA) {</div><div class="line"><a name="l01507"></a><span class="lineno"> 1507</span>&#160;  <span class="comment">// We create an access to represent &quot;live on entry&quot;, for things like</span></div><div class="line"><a name="l01508"></a><span class="lineno"> 1508</span>&#160;  <span class="comment">// arguments or users of globals, where the memory they use is defined before</span></div><div class="line"><a name="l01509"></a><span class="lineno"> 1509</span>&#160;  <span class="comment">// the beginning of the function. We do not actually insert it into the IR.</span></div><div class="line"><a name="l01510"></a><span class="lineno"> 1510</span>&#160;  <span class="comment">// We do not define a live on exit for the immediate uses, and thus our</span></div><div class="line"><a name="l01511"></a><span class="lineno"> 1511</span>&#160;  <span class="comment">// semantics do *not* imply that something with no immediate uses can simply</span></div><div class="line"><a name="l01512"></a><span class="lineno"> 1512</span>&#160;  <span class="comment">// be removed.</span></div><div class="line"><a name="l01513"></a><span class="lineno"> 1513</span>&#160;  <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> &amp;StartingPoint = <a class="code" href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a>.getEntryBlock();</div><div class="line"><a name="l01514"></a><span class="lineno"> 1514</span>&#160;  LiveOnEntryDef.reset(<span class="keyword">new</span> <a class="code" href="classllvm_1_1MemoryDef.html">MemoryDef</a>(<a class="code" href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a>.getContext(), <span class="keyword">nullptr</span>, <span class="keyword">nullptr</span>,</div><div class="line"><a name="l01515"></a><span class="lineno"> 1515</span>&#160;                                     &amp;StartingPoint, NextID++));</div><div class="line"><a name="l01516"></a><span class="lineno"> 1516</span>&#160;</div><div class="line"><a name="l01517"></a><span class="lineno"> 1517</span>&#160;  <span class="comment">// We maintain lists of memory accesses per-block, trading memory for time. We</span></div><div class="line"><a name="l01518"></a><span class="lineno"> 1518</span>&#160;  <span class="comment">// could just look up the memory access for every possible instruction in the</span></div><div class="line"><a name="l01519"></a><span class="lineno"> 1519</span>&#160;  <span class="comment">// stream.</span></div><div class="line"><a name="l01520"></a><span class="lineno"> 1520</span>&#160;  <a class="code" href="classllvm_1_1SmallPtrSet.html">SmallPtrSet&lt;BasicBlock *, 32&gt;</a> DefiningBlocks;</div><div class="line"><a name="l01521"></a><span class="lineno"> 1521</span>&#160;  <span class="comment">// Go through each block, figure out where defs occur, and chain together all</span></div><div class="line"><a name="l01522"></a><span class="lineno"> 1522</span>&#160;  <span class="comment">// the accesses.</span></div><div class="line"><a name="l01523"></a><span class="lineno"> 1523</span>&#160;  <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> &amp;<a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a> : <a class="code" href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a>) {</div><div class="line"><a name="l01524"></a><span class="lineno"> 1524</span>&#160;    <span class="keywordtype">bool</span> InsertIntoDef = <span class="keyword">false</span>;</div><div class="line"><a name="l01525"></a><span class="lineno"> 1525</span>&#160;    <a class="code" href="classllvm_1_1iplist.html">AccessList</a> *Accesses = <span class="keyword">nullptr</span>;</div><div class="line"><a name="l01526"></a><span class="lineno"> 1526</span>&#160;    <a class="code" href="classllvm_1_1simple__ilist.html">DefsList</a> *Defs = <span class="keyword">nullptr</span>;</div><div class="line"><a name="l01527"></a><span class="lineno"> 1527</span>&#160;    <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1Instruction.html">Instruction</a> &amp;<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> : <a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>) {</div><div class="line"><a name="l01528"></a><span class="lineno"> 1528</span>&#160;      <a class="code" href="classllvm_1_1MemoryUseOrDef.html">MemoryUseOrDef</a> *MUD = createNewAccess(&amp;<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>, &amp;BAA);</div><div class="line"><a name="l01529"></a><span class="lineno"> 1529</span>&#160;      <span class="keywordflow">if</span> (!MUD)</div><div class="line"><a name="l01530"></a><span class="lineno"> 1530</span>&#160;        <span class="keywordflow">continue</span>;</div><div class="line"><a name="l01531"></a><span class="lineno"> 1531</span>&#160;</div><div class="line"><a name="l01532"></a><span class="lineno"> 1532</span>&#160;      <span class="keywordflow">if</span> (!Accesses)</div><div class="line"><a name="l01533"></a><span class="lineno"> 1533</span>&#160;        Accesses = getOrCreateAccessList(&amp;B);</div><div class="line"><a name="l01534"></a><span class="lineno"> 1534</span>&#160;      Accesses-&gt;<a class="code" href="classllvm_1_1iplist__impl.html#a319c1a7cbadd9e30ae93fe737aafcdad">push_back</a>(MUD);</div><div class="line"><a name="l01535"></a><span class="lineno"> 1535</span>&#160;      <span class="keywordflow">if</span> (isa&lt;MemoryDef&gt;(MUD)) {</div><div class="line"><a name="l01536"></a><span class="lineno"> 1536</span>&#160;        InsertIntoDef = <span class="keyword">true</span>;</div><div class="line"><a name="l01537"></a><span class="lineno"> 1537</span>&#160;        <span class="keywordflow">if</span> (!Defs)</div><div class="line"><a name="l01538"></a><span class="lineno"> 1538</span>&#160;          Defs = getOrCreateDefsList(&amp;B);</div><div class="line"><a name="l01539"></a><span class="lineno"> 1539</span>&#160;        Defs-&gt;<a class="code" href="classllvm_1_1simple__ilist.html#acd9e9e84ef0b4b94fdda7d6ceff1e01d">push_back</a>(*MUD);</div><div class="line"><a name="l01540"></a><span class="lineno"> 1540</span>&#160;      }</div><div class="line"><a name="l01541"></a><span class="lineno"> 1541</span>&#160;    }</div><div class="line"><a name="l01542"></a><span class="lineno"> 1542</span>&#160;    <span class="keywordflow">if</span> (InsertIntoDef)</div><div class="line"><a name="l01543"></a><span class="lineno"> 1543</span>&#160;      DefiningBlocks.<a class="code" href="classllvm_1_1SmallPtrSetImpl.html#a6bc6fb89fe2e91c25559a8631f56e27e">insert</a>(&amp;B);</div><div class="line"><a name="l01544"></a><span class="lineno"> 1544</span>&#160;  }</div><div class="line"><a name="l01545"></a><span class="lineno"> 1545</span>&#160;  placePHINodes(DefiningBlocks);</div><div class="line"><a name="l01546"></a><span class="lineno"> 1546</span>&#160;</div><div class="line"><a name="l01547"></a><span class="lineno"> 1547</span>&#160;  <span class="comment">// Now do regular SSA renaming on the MemoryDef/MemoryUse. Visited will get</span></div><div class="line"><a name="l01548"></a><span class="lineno"> 1548</span>&#160;  <span class="comment">// filled in with all blocks.</span></div><div class="line"><a name="l01549"></a><span class="lineno"> 1549</span>&#160;  <a class="code" href="classllvm_1_1SmallPtrSet.html">SmallPtrSet&lt;BasicBlock *, 16&gt;</a> Visited;</div><div class="line"><a name="l01550"></a><span class="lineno"> 1550</span>&#160;  <a class="code" href="classllvm_1_1MemorySSA.html#a95acd2137d435c5f43e4f781c9f6ad39">renamePass</a>(DT-&gt;getRootNode(), LiveOnEntryDef.get(), Visited);</div><div class="line"><a name="l01551"></a><span class="lineno"> 1551</span>&#160;</div><div class="line"><a name="l01552"></a><span class="lineno"> 1552</span>&#160;  ClobberWalkerBase&lt;BatchAAResults&gt; WalkerBase(<span class="keyword">this</span>, &amp;BAA, DT);</div><div class="line"><a name="l01553"></a><span class="lineno"> 1553</span>&#160;  CachingWalker&lt;BatchAAResults&gt; WalkerLocal(<span class="keyword">this</span>, &amp;WalkerBase);</div><div class="line"><a name="l01554"></a><span class="lineno"> 1554</span>&#160;  <a class="code" href="classllvm_1_1MemorySSA_1_1OptimizeUses.html">OptimizeUses</a>(<span class="keyword">this</span>, &amp;WalkerLocal, &amp;BAA, DT).<a class="code" href="classllvm_1_1MemorySSA_1_1OptimizeUses.html#a195658a43b30378309ff4e62455dc137">optimizeUses</a>();</div><div class="line"><a name="l01555"></a><span class="lineno"> 1555</span>&#160;</div><div class="line"><a name="l01556"></a><span class="lineno"> 1556</span>&#160;  <span class="comment">// Mark the uses in unreachable blocks as live on entry, so that they go</span></div><div class="line"><a name="l01557"></a><span class="lineno"> 1557</span>&#160;  <span class="comment">// somewhere.</span></div><div class="line"><a name="l01558"></a><span class="lineno"> 1558</span>&#160;  <span class="keywordflow">for</span> (<span class="keyword">auto</span> &amp;BB : F)</div><div class="line"><a name="l01559"></a><span class="lineno"> 1559</span>&#160;    <span class="keywordflow">if</span> (!Visited.<a class="code" href="classllvm_1_1SmallPtrSetImpl.html#a1f475b0df44ebd7169e720fa1bf9169e">count</a>(&amp;BB))</div><div class="line"><a name="l01560"></a><span class="lineno"> 1560</span>&#160;      markUnreachableAsLiveOnEntry(&amp;BB);</div><div class="line"><a name="l01561"></a><span class="lineno"> 1561</span>&#160;}</div><div class="line"><a name="l01562"></a><span class="lineno"> 1562</span>&#160;</div><div class="line"><a name="l01563"></a><span class="lineno"><a class="line" href="classllvm_1_1MemorySSA.html#a949151a1ebd664cb397323294cec0e53"> 1563</a></span>&#160;<a class="code" href="classllvm_1_1MemorySSAWalker.html">MemorySSAWalker</a> *<a class="code" href="classllvm_1_1MemorySSA.html#a949151a1ebd664cb397323294cec0e53">MemorySSA::getWalker</a>() { <span class="keywordflow">return</span> getWalkerImpl(); }</div><div class="line"><a name="l01564"></a><span class="lineno"> 1564</span>&#160;</div><div class="line"><a name="l01565"></a><span class="lineno"> 1565</span>&#160;MemorySSA::CachingWalker&lt;AliasAnalysis&gt; *MemorySSA::getWalkerImpl() {</div><div class="line"><a name="l01566"></a><span class="lineno"> 1566</span>&#160;  <span class="keywordflow">if</span> (Walker)</div><div class="line"><a name="l01567"></a><span class="lineno"> 1567</span>&#160;    <span class="keywordflow">return</span> Walker.get();</div><div class="line"><a name="l01568"></a><span class="lineno"> 1568</span>&#160;</div><div class="line"><a name="l01569"></a><span class="lineno"> 1569</span>&#160;  <span class="keywordflow">if</span> (!WalkerBase)</div><div class="line"><a name="l01570"></a><span class="lineno"> 1570</span>&#160;    WalkerBase =</div><div class="line"><a name="l01571"></a><span class="lineno"> 1571</span>&#160;        std::make_unique&lt;ClobberWalkerBase&lt;AliasAnalysis&gt;&gt;(<span class="keyword">this</span>, AA, DT);</div><div class="line"><a name="l01572"></a><span class="lineno"> 1572</span>&#160;</div><div class="line"><a name="l01573"></a><span class="lineno"> 1573</span>&#160;  Walker =</div><div class="line"><a name="l01574"></a><span class="lineno"> 1574</span>&#160;      std::make_unique&lt;CachingWalker&lt;AliasAnalysis&gt;&gt;(<span class="keyword">this</span>, WalkerBase.get());</div><div class="line"><a name="l01575"></a><span class="lineno"> 1575</span>&#160;  <span class="keywordflow">return</span> Walker.get();</div><div class="line"><a name="l01576"></a><span class="lineno"> 1576</span>&#160;}</div><div class="line"><a name="l01577"></a><span class="lineno"> 1577</span>&#160;</div><div class="line"><a name="l01578"></a><span class="lineno"><a class="line" href="classllvm_1_1MemorySSA.html#a2ef6f9107316d963f20b9003b7668c4e"> 1578</a></span>&#160;<a class="code" href="classllvm_1_1MemorySSAWalker.html">MemorySSAWalker</a> *<a class="code" href="classllvm_1_1MemorySSA.html#a2ef6f9107316d963f20b9003b7668c4e">MemorySSA::getSkipSelfWalker</a>() {</div><div class="line"><a name="l01579"></a><span class="lineno"> 1579</span>&#160;  <span class="keywordflow">if</span> (SkipWalker)</div><div class="line"><a name="l01580"></a><span class="lineno"> 1580</span>&#160;    <span class="keywordflow">return</span> SkipWalker.get();</div><div class="line"><a name="l01581"></a><span class="lineno"> 1581</span>&#160;</div><div class="line"><a name="l01582"></a><span class="lineno"> 1582</span>&#160;  <span class="keywordflow">if</span> (!WalkerBase)</div><div class="line"><a name="l01583"></a><span class="lineno"> 1583</span>&#160;    WalkerBase =</div><div class="line"><a name="l01584"></a><span class="lineno"> 1584</span>&#160;        std::make_unique&lt;ClobberWalkerBase&lt;AliasAnalysis&gt;&gt;(<span class="keyword">this</span>, AA, DT);</div><div class="line"><a name="l01585"></a><span class="lineno"> 1585</span>&#160;</div><div class="line"><a name="l01586"></a><span class="lineno"> 1586</span>&#160;  SkipWalker =</div><div class="line"><a name="l01587"></a><span class="lineno"> 1587</span>&#160;      std::make_unique&lt;SkipSelfWalker&lt;AliasAnalysis&gt;&gt;(<span class="keyword">this</span>, WalkerBase.get());</div><div class="line"><a name="l01588"></a><span class="lineno"> 1588</span>&#160;  <span class="keywordflow">return</span> SkipWalker.get();</div><div class="line"><a name="l01589"></a><span class="lineno"> 1589</span>&#160; }</div><div class="line"><a name="l01590"></a><span class="lineno"> 1590</span>&#160;</div><div class="line"><a name="l01591"></a><span class="lineno"> 1591</span>&#160;</div><div class="line"><a name="l01592"></a><span class="lineno"> 1592</span>&#160;<span class="comment">// This is a helper function used by the creation routines. It places NewAccess</span></div><div class="line"><a name="l01593"></a><span class="lineno"> 1593</span>&#160;<span class="comment">// into the access and defs lists for a given basic block, at the given</span></div><div class="line"><a name="l01594"></a><span class="lineno"> 1594</span>&#160;<span class="comment">// insertion point.</span></div><div class="line"><a name="l01595"></a><span class="lineno"><a class="line" href="classllvm_1_1MemorySSA.html#a8bc47ee66a3ac3b5f1a57c497048b090"> 1595</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classllvm_1_1MemorySSA.html#a8bc47ee66a3ac3b5f1a57c497048b090">MemorySSA::insertIntoListsForBlock</a>(<a class="code" href="classllvm_1_1MemoryAccess.html">MemoryAccess</a> *NewAccess,</div><div class="line"><a name="l01596"></a><span class="lineno"> 1596</span>&#160;                                        <span class="keyword">const</span> <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *BB,</div><div class="line"><a name="l01597"></a><span class="lineno"> 1597</span>&#160;                                        <a class="code" href="classllvm_1_1MemorySSA.html#a9773fde54683945b9e34a0f2e5c1a5a5">InsertionPlace</a> Point) {</div><div class="line"><a name="l01598"></a><span class="lineno"> 1598</span>&#160;  <span class="keyword">auto</span> *Accesses = getOrCreateAccessList(BB);</div><div class="line"><a name="l01599"></a><span class="lineno"> 1599</span>&#160;  <span class="keywordflow">if</span> (Point == <a class="code" href="classllvm_1_1MemorySSA.html#a9773fde54683945b9e34a0f2e5c1a5a5ad02ebd2ab52855a8e9fb8082c9530085">Beginning</a>) {</div><div class="line"><a name="l01600"></a><span class="lineno"> 1600</span>&#160;    <span class="comment">// If it&#39;s a phi node, it goes first, otherwise, it goes after any phi</span></div><div class="line"><a name="l01601"></a><span class="lineno"> 1601</span>&#160;    <span class="comment">// nodes.</span></div><div class="line"><a name="l01602"></a><span class="lineno"> 1602</span>&#160;    <span class="keywordflow">if</span> (isa&lt;MemoryPhi&gt;(NewAccess)) {</div><div class="line"><a name="l01603"></a><span class="lineno"> 1603</span>&#160;      Accesses-&gt;push_front(NewAccess);</div><div class="line"><a name="l01604"></a><span class="lineno"> 1604</span>&#160;      <span class="keyword">auto</span> *Defs = getOrCreateDefsList(BB);</div><div class="line"><a name="l01605"></a><span class="lineno"> 1605</span>&#160;      Defs-&gt;push_front(*NewAccess);</div><div class="line"><a name="l01606"></a><span class="lineno"> 1606</span>&#160;    } <span class="keywordflow">else</span> {</div><div class="line"><a name="l01607"></a><span class="lineno"> 1607</span>&#160;      <span class="keyword">auto</span> AI = <a class="code" href="namespacellvm.html#afb3536a97f2cec3662eee8aeaec8992d">find_if_not</a>(</div><div class="line"><a name="l01608"></a><span class="lineno"> 1608</span>&#160;          *Accesses, [](<span class="keyword">const</span> <a class="code" href="classllvm_1_1MemoryAccess.html">MemoryAccess</a> &amp;MA) { <span class="keywordflow">return</span> isa&lt;MemoryPhi&gt;(MA); });</div><div class="line"><a name="l01609"></a><span class="lineno"> 1609</span>&#160;      Accesses-&gt;insert(AI, NewAccess);</div><div class="line"><a name="l01610"></a><span class="lineno"> 1610</span>&#160;      <span class="keywordflow">if</span> (!isa&lt;MemoryUse&gt;(NewAccess)) {</div><div class="line"><a name="l01611"></a><span class="lineno"> 1611</span>&#160;        <span class="keyword">auto</span> *Defs = getOrCreateDefsList(BB);</div><div class="line"><a name="l01612"></a><span class="lineno"> 1612</span>&#160;        <span class="keyword">auto</span> DI = <a class="code" href="namespacellvm.html#afb3536a97f2cec3662eee8aeaec8992d">find_if_not</a>(</div><div class="line"><a name="l01613"></a><span class="lineno"> 1613</span>&#160;            *Defs, [](<span class="keyword">const</span> <a class="code" href="classllvm_1_1MemoryAccess.html">MemoryAccess</a> &amp;MA) { <span class="keywordflow">return</span> isa&lt;MemoryPhi&gt;(MA); });</div><div class="line"><a name="l01614"></a><span class="lineno"> 1614</span>&#160;        Defs-&gt;insert(DI, *NewAccess);</div><div class="line"><a name="l01615"></a><span class="lineno"> 1615</span>&#160;      }</div><div class="line"><a name="l01616"></a><span class="lineno"> 1616</span>&#160;    }</div><div class="line"><a name="l01617"></a><span class="lineno"> 1617</span>&#160;  } <span class="keywordflow">else</span> {</div><div class="line"><a name="l01618"></a><span class="lineno"> 1618</span>&#160;    Accesses-&gt;push_back(NewAccess);</div><div class="line"><a name="l01619"></a><span class="lineno"> 1619</span>&#160;    <span class="keywordflow">if</span> (!isa&lt;MemoryUse&gt;(NewAccess)) {</div><div class="line"><a name="l01620"></a><span class="lineno"> 1620</span>&#160;      <span class="keyword">auto</span> *Defs = getOrCreateDefsList(BB);</div><div class="line"><a name="l01621"></a><span class="lineno"> 1621</span>&#160;      Defs-&gt;push_back(*NewAccess);</div><div class="line"><a name="l01622"></a><span class="lineno"> 1622</span>&#160;    }</div><div class="line"><a name="l01623"></a><span class="lineno"> 1623</span>&#160;  }</div><div class="line"><a name="l01624"></a><span class="lineno"> 1624</span>&#160;  BlockNumberingValid.erase(BB);</div><div class="line"><a name="l01625"></a><span class="lineno"> 1625</span>&#160;}</div><div class="line"><a name="l01626"></a><span class="lineno"> 1626</span>&#160;</div><div class="line"><a name="l01627"></a><span class="lineno"><a class="line" href="classllvm_1_1MemorySSA.html#a97891043f9eacb9b0e18e22767cc7802"> 1627</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classllvm_1_1MemorySSA.html#a97891043f9eacb9b0e18e22767cc7802">MemorySSA::insertIntoListsBefore</a>(<a class="code" href="classllvm_1_1MemoryAccess.html">MemoryAccess</a> *What, <span class="keyword">const</span> <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *BB,</div><div class="line"><a name="l01628"></a><span class="lineno"> 1628</span>&#160;                                      <a class="code" href="classllvm_1_1iplist__impl.html#a4563732eae31ee14694e7ce17a5a6749">AccessList::iterator</a> InsertPt) {</div><div class="line"><a name="l01629"></a><span class="lineno"> 1629</span>&#160;  <span class="keyword">auto</span> *Accesses = <a class="code" href="classllvm_1_1MemorySSA.html#a2bfd991f2f853a9a689ac782f7030406">getWritableBlockAccesses</a>(BB);</div><div class="line"><a name="l01630"></a><span class="lineno"> 1630</span>&#160;  <span class="keywordtype">bool</span> WasEnd = InsertPt == Accesses-&gt;end();</div><div class="line"><a name="l01631"></a><span class="lineno"> 1631</span>&#160;  Accesses-&gt;insert(<a class="code" href="classllvm_1_1iplist__impl.html#a4563732eae31ee14694e7ce17a5a6749">AccessList::iterator</a>(InsertPt), What);</div><div class="line"><a name="l01632"></a><span class="lineno"> 1632</span>&#160;  <span class="keywordflow">if</span> (!isa&lt;MemoryUse&gt;(What)) {</div><div class="line"><a name="l01633"></a><span class="lineno"> 1633</span>&#160;    <span class="keyword">auto</span> *Defs = getOrCreateDefsList(BB);</div><div class="line"><a name="l01634"></a><span class="lineno"> 1634</span>&#160;    <span class="comment">// If we got asked to insert at the end, we have an easy job, just shove it</span></div><div class="line"><a name="l01635"></a><span class="lineno"> 1635</span>&#160;    <span class="comment">// at the end. If we got asked to insert before an existing def, we also get</span></div><div class="line"><a name="l01636"></a><span class="lineno"> 1636</span>&#160;    <span class="comment">// an iterator. If we got asked to insert before a use, we have to hunt for</span></div><div class="line"><a name="l01637"></a><span class="lineno"> 1637</span>&#160;    <span class="comment">// the next def.</span></div><div class="line"><a name="l01638"></a><span class="lineno"> 1638</span>&#160;    <span class="keywordflow">if</span> (WasEnd) {</div><div class="line"><a name="l01639"></a><span class="lineno"> 1639</span>&#160;      Defs-&gt;push_back(*What);</div><div class="line"><a name="l01640"></a><span class="lineno"> 1640</span>&#160;    } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (isa&lt;MemoryDef&gt;(InsertPt)) {</div><div class="line"><a name="l01641"></a><span class="lineno"> 1641</span>&#160;      Defs-&gt;insert(InsertPt-&gt;getDefsIterator(), *What);</div><div class="line"><a name="l01642"></a><span class="lineno"> 1642</span>&#160;    } <span class="keywordflow">else</span> {</div><div class="line"><a name="l01643"></a><span class="lineno"> 1643</span>&#160;      <span class="keywordflow">while</span> (InsertPt != Accesses-&gt;end() &amp;&amp; !isa&lt;MemoryDef&gt;(InsertPt))</div><div class="line"><a name="l01644"></a><span class="lineno"> 1644</span>&#160;        ++InsertPt;</div><div class="line"><a name="l01645"></a><span class="lineno"> 1645</span>&#160;      <span class="comment">// Either we found a def, or we are inserting at the end</span></div><div class="line"><a name="l01646"></a><span class="lineno"> 1646</span>&#160;      <span class="keywordflow">if</span> (InsertPt == Accesses-&gt;end())</div><div class="line"><a name="l01647"></a><span class="lineno"> 1647</span>&#160;        Defs-&gt;push_back(*What);</div><div class="line"><a name="l01648"></a><span class="lineno"> 1648</span>&#160;      <span class="keywordflow">else</span></div><div class="line"><a name="l01649"></a><span class="lineno"> 1649</span>&#160;        Defs-&gt;insert(InsertPt-&gt;getDefsIterator(), *What);</div><div class="line"><a name="l01650"></a><span class="lineno"> 1650</span>&#160;    }</div><div class="line"><a name="l01651"></a><span class="lineno"> 1651</span>&#160;  }</div><div class="line"><a name="l01652"></a><span class="lineno"> 1652</span>&#160;  BlockNumberingValid.erase(BB);</div><div class="line"><a name="l01653"></a><span class="lineno"> 1653</span>&#160;}</div><div class="line"><a name="l01654"></a><span class="lineno"> 1654</span>&#160;</div><div class="line"><a name="l01655"></a><span class="lineno"> 1655</span>&#160;<span class="keywordtype">void</span> MemorySSA::prepareForMoveTo(<a class="code" href="classllvm_1_1MemoryAccess.html">MemoryAccess</a> *What, <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *BB) {</div><div class="line"><a name="l01656"></a><span class="lineno"> 1656</span>&#160;  <span class="comment">// Keep it in the lookup tables, remove from the lists</span></div><div class="line"><a name="l01657"></a><span class="lineno"> 1657</span>&#160;  <a class="code" href="classllvm_1_1MemorySSA.html#ae20e35b50e6cf67987421c996cf14a8c">removeFromLists</a>(What, <span class="keyword">false</span>);</div><div class="line"><a name="l01658"></a><span class="lineno"> 1658</span>&#160;</div><div class="line"><a name="l01659"></a><span class="lineno"> 1659</span>&#160;  <span class="comment">// Note that moving should implicitly invalidate the optimized state of a</span></div><div class="line"><a name="l01660"></a><span class="lineno"> 1660</span>&#160;  <span class="comment">// MemoryUse (and Phis can&#39;t be optimized). However, it doesn&#39;t do so for a</span></div><div class="line"><a name="l01661"></a><span class="lineno"> 1661</span>&#160;  <span class="comment">// MemoryDef.</span></div><div class="line"><a name="l01662"></a><span class="lineno"> 1662</span>&#160;  <span class="keywordflow">if</span> (<span class="keyword">auto</span> *MD = dyn_cast&lt;MemoryDef&gt;(What))</div><div class="line"><a name="l01663"></a><span class="lineno"> 1663</span>&#160;    MD-&gt;resetOptimized();</div><div class="line"><a name="l01664"></a><span class="lineno"> 1664</span>&#160;  What-&gt;<a class="code" href="classllvm_1_1MemoryAccess.html#adaa94f3c67c7301f0172b1aa9dad07fe">setBlock</a>(BB);</div><div class="line"><a name="l01665"></a><span class="lineno"> 1665</span>&#160;}</div><div class="line"><a name="l01666"></a><span class="lineno"> 1666</span>&#160;</div><div class="line"><a name="l01667"></a><span class="lineno"> 1667</span>&#160;<span class="comment">// Move What before Where in the IR.  The end result is that What will belong to</span></div><div class="line"><a name="l01668"></a><span class="lineno"> 1668</span>&#160;<span class="comment">// the right lists and have the right Block set, but will not otherwise be</span></div><div class="line"><a name="l01669"></a><span class="lineno"> 1669</span>&#160;<span class="comment">// correct. It will not have the right defining access, and if it is a def,</span></div><div class="line"><a name="l01670"></a><span class="lineno"> 1670</span>&#160;<span class="comment">// things below it will not properly be updated.</span></div><div class="line"><a name="l01671"></a><span class="lineno"><a class="line" href="classllvm_1_1MemorySSA.html#a131110a75135a123427d3280dff1fef4"> 1671</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classllvm_1_1MemorySSA.html#a131110a75135a123427d3280dff1fef4">MemorySSA::moveTo</a>(<a class="code" href="classllvm_1_1MemoryUseOrDef.html">MemoryUseOrDef</a> *What, <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *BB,</div><div class="line"><a name="l01672"></a><span class="lineno"> 1672</span>&#160;                       <a class="code" href="classllvm_1_1iplist__impl.html#a4563732eae31ee14694e7ce17a5a6749">AccessList::iterator</a> Where) {</div><div class="line"><a name="l01673"></a><span class="lineno"> 1673</span>&#160;  prepareForMoveTo(What, BB);</div><div class="line"><a name="l01674"></a><span class="lineno"> 1674</span>&#160;  <a class="code" href="classllvm_1_1MemorySSA.html#a97891043f9eacb9b0e18e22767cc7802">insertIntoListsBefore</a>(What, BB, Where);</div><div class="line"><a name="l01675"></a><span class="lineno"> 1675</span>&#160;}</div><div class="line"><a name="l01676"></a><span class="lineno"> 1676</span>&#160;</div><div class="line"><a name="l01677"></a><span class="lineno"><a class="line" href="classllvm_1_1MemorySSA.html#a13073dfc4fd40b8388fb60885e493f8d"> 1677</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classllvm_1_1MemorySSA.html#a131110a75135a123427d3280dff1fef4">MemorySSA::moveTo</a>(<a class="code" href="classllvm_1_1MemoryAccess.html">MemoryAccess</a> *What, <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *BB,</div><div class="line"><a name="l01678"></a><span class="lineno"> 1678</span>&#160;                       <a class="code" href="classllvm_1_1MemorySSA.html#a9773fde54683945b9e34a0f2e5c1a5a5">InsertionPlace</a> Point) {</div><div class="line"><a name="l01679"></a><span class="lineno"> 1679</span>&#160;  <span class="keywordflow">if</span> (isa&lt;MemoryPhi&gt;(What)) {</div><div class="line"><a name="l01680"></a><span class="lineno"> 1680</span>&#160;    <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(Point == <a class="code" href="classllvm_1_1MemorySSA.html#a9773fde54683945b9e34a0f2e5c1a5a5ad02ebd2ab52855a8e9fb8082c9530085">Beginning</a> &amp;&amp;</div><div class="line"><a name="l01681"></a><span class="lineno"> 1681</span>&#160;           <span class="stringliteral">&quot;Can only move a Phi at the beginning of the block&quot;</span>);</div><div class="line"><a name="l01682"></a><span class="lineno"> 1682</span>&#160;    <span class="comment">// Update lookup table entry</span></div><div class="line"><a name="l01683"></a><span class="lineno"> 1683</span>&#160;    ValueToMemoryAccess.erase(What-&gt;<a class="code" href="classllvm_1_1MemoryAccess.html#aa468ad3fa68bdf6703c391deaec97706">getBlock</a>());</div><div class="line"><a name="l01684"></a><span class="lineno"> 1684</span>&#160;    <span class="keywordtype">bool</span> Inserted = ValueToMemoryAccess.insert({BB, What}).<a class="code" href="HexagonShuffler_8cpp.html#af7633c5cbb76481bafd5e3e1ec07ca37">second</a>;</div><div class="line"><a name="l01685"></a><span class="lineno"> 1685</span>&#160;    (void)Inserted;</div><div class="line"><a name="l01686"></a><span class="lineno"> 1686</span>&#160;    <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(Inserted &amp;&amp; <span class="stringliteral">&quot;Cannot move a Phi to a block that already has one&quot;</span>);</div><div class="line"><a name="l01687"></a><span class="lineno"> 1687</span>&#160;  }</div><div class="line"><a name="l01688"></a><span class="lineno"> 1688</span>&#160;</div><div class="line"><a name="l01689"></a><span class="lineno"> 1689</span>&#160;  prepareForMoveTo(What, BB);</div><div class="line"><a name="l01690"></a><span class="lineno"> 1690</span>&#160;  <a class="code" href="classllvm_1_1MemorySSA.html#a8bc47ee66a3ac3b5f1a57c497048b090">insertIntoListsForBlock</a>(What, BB, Point);</div><div class="line"><a name="l01691"></a><span class="lineno"> 1691</span>&#160;}</div><div class="line"><a name="l01692"></a><span class="lineno"> 1692</span>&#160;</div><div class="line"><a name="l01693"></a><span class="lineno"> 1693</span>&#160;<a class="code" href="classllvm_1_1MemoryPhi.html">MemoryPhi</a> *MemorySSA::createMemoryPhi(<a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *BB) {</div><div class="line"><a name="l01694"></a><span class="lineno"> 1694</span>&#160;  <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(!<a class="code" href="classllvm_1_1MemorySSA.html#a4ece07ee1030856099726901d0eef81b">getMemoryAccess</a>(BB) &amp;&amp; <span class="stringliteral">&quot;MemoryPhi already exists for this BB&quot;</span>);</div><div class="line"><a name="l01695"></a><span class="lineno"> 1695</span>&#160;  <a class="code" href="classllvm_1_1MemoryPhi.html">MemoryPhi</a> *Phi = <span class="keyword">new</span> <a class="code" href="classllvm_1_1MemoryPhi.html">MemoryPhi</a>(BB-&gt;<a class="code" href="classllvm_1_1BasicBlock.html#aa286a0f7f5d38488d593bb7ef0ba183e">getContext</a>(), BB, NextID++);</div><div class="line"><a name="l01696"></a><span class="lineno"> 1696</span>&#160;  <span class="comment">// Phi&#39;s always are placed at the front of the block.</span></div><div class="line"><a name="l01697"></a><span class="lineno"> 1697</span>&#160;  <a class="code" href="classllvm_1_1MemorySSA.html#a8bc47ee66a3ac3b5f1a57c497048b090">insertIntoListsForBlock</a>(Phi, BB, <a class="code" href="classllvm_1_1MemorySSA.html#a9773fde54683945b9e34a0f2e5c1a5a5ad02ebd2ab52855a8e9fb8082c9530085">Beginning</a>);</div><div class="line"><a name="l01698"></a><span class="lineno"> 1698</span>&#160;  ValueToMemoryAccess[BB] = Phi;</div><div class="line"><a name="l01699"></a><span class="lineno"> 1699</span>&#160;  <span class="keywordflow">return</span> Phi;</div><div class="line"><a name="l01700"></a><span class="lineno"> 1700</span>&#160;}</div><div class="line"><a name="l01701"></a><span class="lineno"> 1701</span>&#160;</div><div class="line"><a name="l01702"></a><span class="lineno"><a class="line" href="classllvm_1_1MemorySSA.html#a9939794555fe9e24e885d55e301de803"> 1702</a></span>&#160;<a class="code" href="classllvm_1_1MemoryUseOrDef.html">MemoryUseOrDef</a> *<a class="code" href="classllvm_1_1MemorySSA.html#a9939794555fe9e24e885d55e301de803">MemorySSA::createDefinedAccess</a>(<a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>,</div><div class="line"><a name="l01703"></a><span class="lineno"> 1703</span>&#160;                                               <a class="code" href="classllvm_1_1MemoryAccess.html">MemoryAccess</a> *Definition,</div><div class="line"><a name="l01704"></a><span class="lineno"> 1704</span>&#160;                                               <span class="keyword">const</span> <a class="code" href="classllvm_1_1MemoryUseOrDef.html">MemoryUseOrDef</a> *Template,</div><div class="line"><a name="l01705"></a><span class="lineno"> 1705</span>&#160;                                               <span class="keywordtype">bool</span> CreationMustSucceed) {</div><div class="line"><a name="l01706"></a><span class="lineno"> 1706</span>&#160;  <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(!isa&lt;PHINode&gt;(I) &amp;&amp; <span class="stringliteral">&quot;Cannot create a defined access for a PHI&quot;</span>);</div><div class="line"><a name="l01707"></a><span class="lineno"> 1707</span>&#160;  <a class="code" href="classllvm_1_1MemoryUseOrDef.html">MemoryUseOrDef</a> *NewAccess = createNewAccess(I, AA, Template);</div><div class="line"><a name="l01708"></a><span class="lineno"> 1708</span>&#160;  <span class="keywordflow">if</span> (CreationMustSucceed)</div><div class="line"><a name="l01709"></a><span class="lineno"> 1709</span>&#160;    <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(NewAccess != <span class="keyword">nullptr</span> &amp;&amp; <span class="stringliteral">&quot;Tried to create a memory access for a &quot;</span></div><div class="line"><a name="l01710"></a><span class="lineno"> 1710</span>&#160;                                   <span class="stringliteral">&quot;non-memory touching instruction&quot;</span>);</div><div class="line"><a name="l01711"></a><span class="lineno"> 1711</span>&#160;  <span class="keywordflow">if</span> (NewAccess)</div><div class="line"><a name="l01712"></a><span class="lineno"> 1712</span>&#160;    NewAccess-&gt;<a class="code" href="classllvm_1_1MemoryUseOrDef.html#a3a9bfe34e7eedc0dea42a04cc95efc6a">setDefiningAccess</a>(Definition);</div><div class="line"><a name="l01713"></a><span class="lineno"> 1713</span>&#160;  <span class="keywordflow">return</span> NewAccess;</div><div class="line"><a name="l01714"></a><span class="lineno"> 1714</span>&#160;}</div><div class="line"><a name="l01715"></a><span class="lineno"> 1715</span>&#160;</div><div class="line"><a name="l01716"></a><span class="lineno"> 1716</span>&#160;<span class="comment">// Return true if the instruction has ordering constraints.</span></div><div class="line"><a name="l01717"></a><span class="lineno"> 1717</span>&#160;<span class="comment">// Note specifically that this only considers stores and loads</span></div><div class="line"><a name="l01718"></a><span class="lineno"> 1718</span>&#160;<span class="comment">// because others are still considered ModRef by getModRefInfo.</span></div><div class="line"><a name="l01719"></a><span class="lineno"><a class="line" href="MemorySSA_8cpp.html#af21791a898355d83b502fd655b90e061"> 1719</a></span>&#160;<span class="keyword">static</span> <span class="keyword">inline</span> <span class="keywordtype">bool</span> <a class="code" href="MemorySSA_8cpp.html#af21791a898355d83b502fd655b90e061">isOrdered</a>(<span class="keyword">const</span> <a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>) {</div><div class="line"><a name="l01720"></a><span class="lineno"> 1720</span>&#160;  <span class="keywordflow">if</span> (<span class="keyword">auto</span> *<a class="code" href="SIInstrInfo_8cpp.html#a0dfd55eaf0bcb495f09ecf8c55b256b2a6cbe5ff42f143903e1c67abf94613791">SI</a> = dyn_cast&lt;StoreInst&gt;(I)) {</div><div class="line"><a name="l01721"></a><span class="lineno"> 1721</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="SIInstrInfo_8cpp.html#a0dfd55eaf0bcb495f09ecf8c55b256b2a6cbe5ff42f143903e1c67abf94613791">SI</a>-&gt;isUnordered())</div><div class="line"><a name="l01722"></a><span class="lineno"> 1722</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">true</span>;</div><div class="line"><a name="l01723"></a><span class="lineno"> 1723</span>&#160;  } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<span class="keyword">auto</span> *LI = dyn_cast&lt;LoadInst&gt;(I)) {</div><div class="line"><a name="l01724"></a><span class="lineno"> 1724</span>&#160;    <span class="keywordflow">if</span> (!LI-&gt;isUnordered())</div><div class="line"><a name="l01725"></a><span class="lineno"> 1725</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">true</span>;</div><div class="line"><a name="l01726"></a><span class="lineno"> 1726</span>&#160;  }</div><div class="line"><a name="l01727"></a><span class="lineno"> 1727</span>&#160;  <span class="keywordflow">return</span> <span class="keyword">false</span>;</div><div class="line"><a name="l01728"></a><span class="lineno"> 1728</span>&#160;}</div><div class="line"><a name="l01729"></a><span class="lineno"> 1729</span>&#160;<span class="comment"></span></div><div class="line"><a name="l01730"></a><span class="lineno"> 1730</span>&#160;<span class="comment">/// Helper function to create new memory accesses</span></div><div class="line"><a name="l01731"></a><span class="lineno"> 1731</span>&#160;<span class="comment"></span><span class="keyword">template</span> &lt;<span class="keyword">typename</span> AliasAnalysisType&gt;</div><div class="line"><a name="l01732"></a><span class="lineno"> 1732</span>&#160;<a class="code" href="classllvm_1_1MemoryUseOrDef.html">MemoryUseOrDef</a> *MemorySSA::createNewAccess(<a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>,</div><div class="line"><a name="l01733"></a><span class="lineno"> 1733</span>&#160;                                           AliasAnalysisType *AAP,</div><div class="line"><a name="l01734"></a><span class="lineno"> 1734</span>&#160;                                           <span class="keyword">const</span> <a class="code" href="classllvm_1_1MemoryUseOrDef.html">MemoryUseOrDef</a> *<a class="code" href="ItaniumDemangle_8h.html#a88ee8e4eea43084bd8964682683da88ca278c491bdd8a53618c149c4ac790da34">Template</a>) {</div><div class="line"><a name="l01735"></a><span class="lineno"> 1735</span>&#160;  <span class="comment">// The assume intrinsic has a control dependency which we model by claiming</span></div><div class="line"><a name="l01736"></a><span class="lineno"> 1736</span>&#160;  <span class="comment">// that it writes arbitrarily. Debuginfo intrinsics may be considered</span></div><div class="line"><a name="l01737"></a><span class="lineno"> 1737</span>&#160;  <span class="comment">// clobbers when we have a nonstandard AA pipeline. Ignore these fake memory</span></div><div class="line"><a name="l01738"></a><span class="lineno"> 1738</span>&#160;  <span class="comment">// dependencies here.</span></div><div class="line"><a name="l01739"></a><span class="lineno"> 1739</span>&#160;  <span class="comment">// FIXME: Replace this special casing with a more accurate modelling of</span></div><div class="line"><a name="l01740"></a><span class="lineno"> 1740</span>&#160;  <span class="comment">// assume&#39;s control dependency.</span></div><div class="line"><a name="l01741"></a><span class="lineno"> 1741</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1IntrinsicInst.html">IntrinsicInst</a> *II = dyn_cast&lt;IntrinsicInst&gt;(I))</div><div class="line"><a name="l01742"></a><span class="lineno"> 1742</span>&#160;    <span class="keywordflow">if</span> (II-&gt;getIntrinsicID() == Intrinsic::assume)</div><div class="line"><a name="l01743"></a><span class="lineno"> 1743</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div><div class="line"><a name="l01744"></a><span class="lineno"> 1744</span>&#160;</div><div class="line"><a name="l01745"></a><span class="lineno"> 1745</span>&#160;  <span class="comment">// Using a nonstandard AA pipelines might leave us with unexpected modref</span></div><div class="line"><a name="l01746"></a><span class="lineno"> 1746</span>&#160;  <span class="comment">// results for I, so add a check to not model instructions that may not read</span></div><div class="line"><a name="l01747"></a><span class="lineno"> 1747</span>&#160;  <span class="comment">// from or write to memory. This is necessary for correctness.</span></div><div class="line"><a name="l01748"></a><span class="lineno"> 1748</span>&#160;  <span class="keywordflow">if</span> (!I-&gt;<a class="code" href="classllvm_1_1Instruction.html#a5a96d11334569f70a5fc03ac2a46774c">mayReadFromMemory</a>() &amp;&amp; !I-&gt;<a class="code" href="classllvm_1_1Instruction.html#ad3dee2b6da939fe6674f20c2916c7a07">mayWriteToMemory</a>())</div><div class="line"><a name="l01749"></a><span class="lineno"> 1749</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div><div class="line"><a name="l01750"></a><span class="lineno"> 1750</span>&#160;</div><div class="line"><a name="l01751"></a><span class="lineno"> 1751</span>&#160;  <span class="keywordtype">bool</span> <a class="code" href="namespacellvm_1_1tgtok.html#abbc5259d649363016626e2529fabe0c5aceb138f68fe183995736614928e3394a">Def</a>, <a class="code" href="classllvm_1_1Use.html">Use</a>;</div><div class="line"><a name="l01752"></a><span class="lineno"> 1752</span>&#160;  <span class="keywordflow">if</span> (Template) {</div><div class="line"><a name="l01753"></a><span class="lineno"> 1753</span>&#160;    Def = dyn_cast_or_null&lt;MemoryDef&gt;(Template) != <span class="keyword">nullptr</span>;</div><div class="line"><a name="l01754"></a><span class="lineno"> 1754</span>&#160;    Use = dyn_cast_or_null&lt;MemoryUse&gt;(Template) != <span class="keyword">nullptr</span>;</div><div class="line"><a name="l01755"></a><span class="lineno"> 1755</span>&#160;<span class="preprocessor">#if !defined(NDEBUG)</span></div><div class="line"><a name="l01756"></a><span class="lineno"> 1756</span>&#160;    <a class="code" href="namespacellvm.html#a9db8c44b250b90e3ab7e4d144e7c9c2e">ModRefInfo</a> <a class="code" href="namespacellvm.html#a9db8c44b250b90e3ab7e4d144e7c9c2ea6524b183b5cd0850f2cff6d30d581af9">ModRef</a> = AAP-&gt;getModRefInfo(I, <a class="code" href="namespacellvm.html#a1d0ac37acc2482f8794195f5042b61b5a6adf97f83acf6453d4a6a4b1070f3754">None</a>);</div><div class="line"><a name="l01757"></a><span class="lineno"> 1757</span>&#160;    <span class="keywordtype">bool</span> DefCheck, UseCheck;</div><div class="line"><a name="l01758"></a><span class="lineno"> 1758</span>&#160;    DefCheck = <a class="code" href="namespacellvm.html#a9c9d20fe1eea1c539518762e7d822d69">isModSet</a>(ModRef) || <a class="code" href="MemorySSA_8cpp.html#af21791a898355d83b502fd655b90e061">isOrdered</a>(I);</div><div class="line"><a name="l01759"></a><span class="lineno"> 1759</span>&#160;    UseCheck = <a class="code" href="namespacellvm.html#aa41b81e81de309f982f2d6ddec3eb244">isRefSet</a>(ModRef);</div><div class="line"><a name="l01760"></a><span class="lineno"> 1760</span>&#160;    <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(Def == DefCheck &amp;&amp; (Def || Use == UseCheck) &amp;&amp; <span class="stringliteral">&quot;Invalid template&quot;</span>);</div><div class="line"><a name="l01761"></a><span class="lineno"> 1761</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l01762"></a><span class="lineno"> 1762</span>&#160;  } <span class="keywordflow">else</span> {</div><div class="line"><a name="l01763"></a><span class="lineno"> 1763</span>&#160;    <span class="comment">// Find out what affect this instruction has on memory.</span></div><div class="line"><a name="l01764"></a><span class="lineno"> 1764</span>&#160;    <a class="code" href="namespacellvm.html#a9db8c44b250b90e3ab7e4d144e7c9c2e">ModRefInfo</a> <a class="code" href="namespacellvm.html#a9db8c44b250b90e3ab7e4d144e7c9c2ea6524b183b5cd0850f2cff6d30d581af9">ModRef</a> = AAP-&gt;getModRefInfo(I, <a class="code" href="namespacellvm.html#a1d0ac37acc2482f8794195f5042b61b5a6adf97f83acf6453d4a6a4b1070f3754">None</a>);</div><div class="line"><a name="l01765"></a><span class="lineno"> 1765</span>&#160;    <span class="comment">// The isOrdered check is used to ensure that volatiles end up as defs</span></div><div class="line"><a name="l01766"></a><span class="lineno"> 1766</span>&#160;    <span class="comment">// (atomics end up as ModRef right now anyway).  Until we separate the</span></div><div class="line"><a name="l01767"></a><span class="lineno"> 1767</span>&#160;    <span class="comment">// ordering chain from the memory chain, this enables people to see at least</span></div><div class="line"><a name="l01768"></a><span class="lineno"> 1768</span>&#160;    <span class="comment">// some relative ordering to volatiles.  Note that getClobberingMemoryAccess</span></div><div class="line"><a name="l01769"></a><span class="lineno"> 1769</span>&#160;    <span class="comment">// will still give an answer that bypasses other volatile loads.  TODO:</span></div><div class="line"><a name="l01770"></a><span class="lineno"> 1770</span>&#160;    <span class="comment">// Separate memory aliasing and ordering into two different chains so that</span></div><div class="line"><a name="l01771"></a><span class="lineno"> 1771</span>&#160;    <span class="comment">// we can precisely represent both &quot;what memory will this read/write/is</span></div><div class="line"><a name="l01772"></a><span class="lineno"> 1772</span>&#160;    <span class="comment">// clobbered by&quot; and &quot;what instructions can I move this past&quot;.</span></div><div class="line"><a name="l01773"></a><span class="lineno"> 1773</span>&#160;    Def = <a class="code" href="namespacellvm.html#a9c9d20fe1eea1c539518762e7d822d69">isModSet</a>(ModRef) || <a class="code" href="MemorySSA_8cpp.html#af21791a898355d83b502fd655b90e061">isOrdered</a>(I);</div><div class="line"><a name="l01774"></a><span class="lineno"> 1774</span>&#160;    Use = <a class="code" href="namespacellvm.html#aa41b81e81de309f982f2d6ddec3eb244">isRefSet</a>(ModRef);</div><div class="line"><a name="l01775"></a><span class="lineno"> 1775</span>&#160;  }</div><div class="line"><a name="l01776"></a><span class="lineno"> 1776</span>&#160;</div><div class="line"><a name="l01777"></a><span class="lineno"> 1777</span>&#160;  <span class="comment">// It&#39;s possible for an instruction to not modify memory at all. During</span></div><div class="line"><a name="l01778"></a><span class="lineno"> 1778</span>&#160;  <span class="comment">// construction, we ignore them.</span></div><div class="line"><a name="l01779"></a><span class="lineno"> 1779</span>&#160;  <span class="keywordflow">if</span> (!Def &amp;&amp; !Use)</div><div class="line"><a name="l01780"></a><span class="lineno"> 1780</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div><div class="line"><a name="l01781"></a><span class="lineno"> 1781</span>&#160;</div><div class="line"><a name="l01782"></a><span class="lineno"> 1782</span>&#160;  <a class="code" href="classllvm_1_1MemoryUseOrDef.html">MemoryUseOrDef</a> *MUD;</div><div class="line"><a name="l01783"></a><span class="lineno"> 1783</span>&#160;  <span class="keywordflow">if</span> (Def)</div><div class="line"><a name="l01784"></a><span class="lineno"> 1784</span>&#160;    MUD = <span class="keyword">new</span> <a class="code" href="classllvm_1_1MemoryDef.html">MemoryDef</a>(I-&gt;<a class="code" href="classllvm_1_1Value.html#ab3fc0225d8aaf8434026c3573f961f2c">getContext</a>(), <span class="keyword">nullptr</span>, <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>, I-&gt;<a class="code" href="classllvm_1_1Instruction.html#a1a7f07aaef6a3bee130bf0e0f0536802">getParent</a>(), NextID++);</div><div class="line"><a name="l01785"></a><span class="lineno"> 1785</span>&#160;  <span class="keywordflow">else</span></div><div class="line"><a name="l01786"></a><span class="lineno"> 1786</span>&#160;    MUD = <span class="keyword">new</span> <a class="code" href="classllvm_1_1MemoryUse.html">MemoryUse</a>(I-&gt;<a class="code" href="classllvm_1_1Value.html#ab3fc0225d8aaf8434026c3573f961f2c">getContext</a>(), <span class="keyword">nullptr</span>, <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>, I-&gt;<a class="code" href="classllvm_1_1Instruction.html#a1a7f07aaef6a3bee130bf0e0f0536802">getParent</a>());</div><div class="line"><a name="l01787"></a><span class="lineno"> 1787</span>&#160;  ValueToMemoryAccess[<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>] = MUD;</div><div class="line"><a name="l01788"></a><span class="lineno"> 1788</span>&#160;  <span class="keywordflow">return</span> MUD;</div><div class="line"><a name="l01789"></a><span class="lineno"> 1789</span>&#160;}</div><div class="line"><a name="l01790"></a><span class="lineno"> 1790</span>&#160;<span class="comment"></span></div><div class="line"><a name="l01791"></a><span class="lineno"> 1791</span>&#160;<span class="comment">/// Returns true if \p Replacer dominates \p Replacee .</span></div><div class="line"><a name="l01792"></a><span class="lineno"> 1792</span>&#160;<span class="comment"></span><span class="keywordtype">bool</span> MemorySSA::dominatesUse(<span class="keyword">const</span> <a class="code" href="classllvm_1_1MemoryAccess.html">MemoryAccess</a> *Replacer,</div><div class="line"><a name="l01793"></a><span class="lineno"> 1793</span>&#160;                             <span class="keyword">const</span> <a class="code" href="classllvm_1_1MemoryAccess.html">MemoryAccess</a> *Replacee)<span class="keyword"> const </span>{</div><div class="line"><a name="l01794"></a><span class="lineno"> 1794</span>&#160;  <span class="keywordflow">if</span> (isa&lt;MemoryUseOrDef&gt;(Replacee))</div><div class="line"><a name="l01795"></a><span class="lineno"> 1795</span>&#160;    <span class="keywordflow">return</span> DT-&gt;dominates(Replacer-&gt;<a class="code" href="classllvm_1_1MemoryAccess.html#aa468ad3fa68bdf6703c391deaec97706">getBlock</a>(), Replacee-&gt;<a class="code" href="classllvm_1_1MemoryAccess.html#aa468ad3fa68bdf6703c391deaec97706">getBlock</a>());</div><div class="line"><a name="l01796"></a><span class="lineno"> 1796</span>&#160;  <span class="keyword">const</span> <span class="keyword">auto</span> *MP = cast&lt;MemoryPhi&gt;(Replacee);</div><div class="line"><a name="l01797"></a><span class="lineno"> 1797</span>&#160;  <span class="comment">// For a phi node, the use occurs in the predecessor block of the phi node.</span></div><div class="line"><a name="l01798"></a><span class="lineno"> 1798</span>&#160;  <span class="comment">// Since we may occur multiple times in the phi node, we have to check each</span></div><div class="line"><a name="l01799"></a><span class="lineno"> 1799</span>&#160;  <span class="comment">// operand to ensure Replacer dominates each operand where Replacee occurs.</span></div><div class="line"><a name="l01800"></a><span class="lineno"> 1800</span>&#160;  <span class="keywordflow">for</span> (<span class="keyword">const</span> <a class="code" href="classllvm_1_1Use.html">Use</a> &amp;<a class="code" href="AMDGPULibCalls_8cpp.html#afecf1cc1292b07f57d343c0f4d682044">Arg</a> : MP-&gt;operands()) {</div><div class="line"><a name="l01801"></a><span class="lineno"> 1801</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="AMDGPULibCalls_8cpp.html#afecf1cc1292b07f57d343c0f4d682044">Arg</a>.get() != Replacee &amp;&amp;</div><div class="line"><a name="l01802"></a><span class="lineno"> 1802</span>&#160;        !DT-&gt;dominates(Replacer-&gt;<a class="code" href="classllvm_1_1MemoryAccess.html#aa468ad3fa68bdf6703c391deaec97706">getBlock</a>(), MP-&gt;getIncomingBlock(<a class="code" href="AMDGPULibCalls_8cpp.html#afecf1cc1292b07f57d343c0f4d682044">Arg</a>)))</div><div class="line"><a name="l01803"></a><span class="lineno"> 1803</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">false</span>;</div><div class="line"><a name="l01804"></a><span class="lineno"> 1804</span>&#160;  }</div><div class="line"><a name="l01805"></a><span class="lineno"> 1805</span>&#160;  <span class="keywordflow">return</span> <span class="keyword">true</span>;</div><div class="line"><a name="l01806"></a><span class="lineno"> 1806</span>&#160;}</div><div class="line"><a name="l01807"></a><span class="lineno"> 1807</span>&#160;<span class="comment"></span></div><div class="line"><a name="l01808"></a><span class="lineno"> 1808</span>&#160;<span class="comment">/// Properly remove \p MA from all of MemorySSA&#39;s lookup tables.</span></div><div class="line"><a name="l01809"></a><span class="lineno"><a class="line" href="classllvm_1_1MemorySSA.html#acd0427b84adce00e5b26f993c7aa48c8"> 1809</a></span>&#160;<span class="comment"></span><span class="keywordtype">void</span> <a class="code" href="classllvm_1_1MemorySSA.html#acd0427b84adce00e5b26f993c7aa48c8">MemorySSA::removeFromLookups</a>(<a class="code" href="classllvm_1_1MemoryAccess.html">MemoryAccess</a> *MA) {</div><div class="line"><a name="l01810"></a><span class="lineno"> 1810</span>&#160;  <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(MA-&gt;<a class="code" href="classllvm_1_1Value.html#a9d7de807ebdfe1819df3ff6cb0f16158">use_empty</a>() &amp;&amp;</div><div class="line"><a name="l01811"></a><span class="lineno"> 1811</span>&#160;         <span class="stringliteral">&quot;Trying to remove memory access that still has uses&quot;</span>);</div><div class="line"><a name="l01812"></a><span class="lineno"> 1812</span>&#160;  BlockNumbering.erase(MA);</div><div class="line"><a name="l01813"></a><span class="lineno"> 1813</span>&#160;  <span class="keywordflow">if</span> (<span class="keyword">auto</span> *MUD = dyn_cast&lt;MemoryUseOrDef&gt;(MA))</div><div class="line"><a name="l01814"></a><span class="lineno"> 1814</span>&#160;    MUD-&gt;setDefiningAccess(<span class="keyword">nullptr</span>);</div><div class="line"><a name="l01815"></a><span class="lineno"> 1815</span>&#160;  <span class="comment">// Invalidate our walker&#39;s cache if necessary</span></div><div class="line"><a name="l01816"></a><span class="lineno"> 1816</span>&#160;  <span class="keywordflow">if</span> (!isa&lt;MemoryUse&gt;(MA))</div><div class="line"><a name="l01817"></a><span class="lineno"> 1817</span>&#160;    <a class="code" href="classllvm_1_1MemorySSA.html#a949151a1ebd664cb397323294cec0e53">getWalker</a>()-&gt;<a class="code" href="classllvm_1_1MemorySSAWalker.html#a8bb8d1cc3b3a95d81ee75395cadf83c3">invalidateInfo</a>(MA);</div><div class="line"><a name="l01818"></a><span class="lineno"> 1818</span>&#160;</div><div class="line"><a name="l01819"></a><span class="lineno"> 1819</span>&#160;  <a class="code" href="classllvm_1_1Value.html">Value</a> *MemoryInst;</div><div class="line"><a name="l01820"></a><span class="lineno"> 1820</span>&#160;  <span class="keywordflow">if</span> (<span class="keyword">const</span> <span class="keyword">auto</span> *MUD = dyn_cast&lt;MemoryUseOrDef&gt;(MA))</div><div class="line"><a name="l01821"></a><span class="lineno"> 1821</span>&#160;    MemoryInst = MUD-&gt;getMemoryInst();</div><div class="line"><a name="l01822"></a><span class="lineno"> 1822</span>&#160;  <span class="keywordflow">else</span></div><div class="line"><a name="l01823"></a><span class="lineno"> 1823</span>&#160;    MemoryInst = MA-&gt;<a class="code" href="classllvm_1_1MemoryAccess.html#aa468ad3fa68bdf6703c391deaec97706">getBlock</a>();</div><div class="line"><a name="l01824"></a><span class="lineno"> 1824</span>&#160;</div><div class="line"><a name="l01825"></a><span class="lineno"> 1825</span>&#160;  <span class="keyword">auto</span> VMA = ValueToMemoryAccess.find(MemoryInst);</div><div class="line"><a name="l01826"></a><span class="lineno"> 1826</span>&#160;  <span class="keywordflow">if</span> (VMA-&gt;second == MA)</div><div class="line"><a name="l01827"></a><span class="lineno"> 1827</span>&#160;    ValueToMemoryAccess.erase(VMA);</div><div class="line"><a name="l01828"></a><span class="lineno"> 1828</span>&#160;}</div><div class="line"><a name="l01829"></a><span class="lineno"> 1829</span>&#160;<span class="comment"></span></div><div class="line"><a name="l01830"></a><span class="lineno"> 1830</span>&#160;<span class="comment">/// Properly remove \p MA from all of MemorySSA&#39;s lists.</span></div><div class="line"><a name="l01831"></a><span class="lineno"> 1831</span>&#160;<span class="comment">///</span></div><div class="line"><a name="l01832"></a><span class="lineno"> 1832</span>&#160;<span class="comment">/// Because of the way the intrusive list and use lists work, it is important to</span></div><div class="line"><a name="l01833"></a><span class="lineno"> 1833</span>&#160;<span class="comment">/// do removal in the right order.</span></div><div class="line"><a name="l01834"></a><span class="lineno"> 1834</span>&#160;<span class="comment">/// ShouldDelete defaults to true, and will cause the memory access to also be</span></div><div class="line"><a name="l01835"></a><span class="lineno"> 1835</span>&#160;<span class="comment">/// deleted, not just removed.</span></div><div class="line"><a name="l01836"></a><span class="lineno"><a class="line" href="classllvm_1_1MemorySSA.html#ae20e35b50e6cf67987421c996cf14a8c"> 1836</a></span>&#160;<span class="comment"></span><span class="keywordtype">void</span> <a class="code" href="classllvm_1_1MemorySSA.html#ae20e35b50e6cf67987421c996cf14a8c">MemorySSA::removeFromLists</a>(<a class="code" href="classllvm_1_1MemoryAccess.html">MemoryAccess</a> *MA, <span class="keywordtype">bool</span> ShouldDelete) {</div><div class="line"><a name="l01837"></a><span class="lineno"> 1837</span>&#160;  <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *BB = MA-&gt;<a class="code" href="classllvm_1_1MemoryAccess.html#aa468ad3fa68bdf6703c391deaec97706">getBlock</a>();</div><div class="line"><a name="l01838"></a><span class="lineno"> 1838</span>&#160;  <span class="comment">// The access list owns the reference, so we erase it from the non-owning list</span></div><div class="line"><a name="l01839"></a><span class="lineno"> 1839</span>&#160;  <span class="comment">// first.</span></div><div class="line"><a name="l01840"></a><span class="lineno"> 1840</span>&#160;  <span class="keywordflow">if</span> (!isa&lt;MemoryUse&gt;(MA)) {</div><div class="line"><a name="l01841"></a><span class="lineno"> 1841</span>&#160;    <span class="keyword">auto</span> DefsIt = PerBlockDefs.find(BB);</div><div class="line"><a name="l01842"></a><span class="lineno"> 1842</span>&#160;    std::unique_ptr&lt;DefsList&gt; &amp;Defs = DefsIt-&gt;second;</div><div class="line"><a name="l01843"></a><span class="lineno"> 1843</span>&#160;    Defs-&gt;remove(*MA);</div><div class="line"><a name="l01844"></a><span class="lineno"> 1844</span>&#160;    <span class="keywordflow">if</span> (Defs-&gt;empty())</div><div class="line"><a name="l01845"></a><span class="lineno"> 1845</span>&#160;      PerBlockDefs.erase(DefsIt);</div><div class="line"><a name="l01846"></a><span class="lineno"> 1846</span>&#160;  }</div><div class="line"><a name="l01847"></a><span class="lineno"> 1847</span>&#160;</div><div class="line"><a name="l01848"></a><span class="lineno"> 1848</span>&#160;  <span class="comment">// The erase call here will delete it. If we don&#39;t want it deleted, we call</span></div><div class="line"><a name="l01849"></a><span class="lineno"> 1849</span>&#160;  <span class="comment">// remove instead.</span></div><div class="line"><a name="l01850"></a><span class="lineno"> 1850</span>&#160;  <span class="keyword">auto</span> AccessIt = PerBlockAccesses.find(BB);</div><div class="line"><a name="l01851"></a><span class="lineno"> 1851</span>&#160;  std::unique_ptr&lt;AccessList&gt; &amp;Accesses = AccessIt-&gt;second;</div><div class="line"><a name="l01852"></a><span class="lineno"> 1852</span>&#160;  <span class="keywordflow">if</span> (ShouldDelete)</div><div class="line"><a name="l01853"></a><span class="lineno"> 1853</span>&#160;    Accesses-&gt;erase(MA);</div><div class="line"><a name="l01854"></a><span class="lineno"> 1854</span>&#160;  <span class="keywordflow">else</span></div><div class="line"><a name="l01855"></a><span class="lineno"> 1855</span>&#160;    Accesses-&gt;remove(MA);</div><div class="line"><a name="l01856"></a><span class="lineno"> 1856</span>&#160;</div><div class="line"><a name="l01857"></a><span class="lineno"> 1857</span>&#160;  <span class="keywordflow">if</span> (Accesses-&gt;empty()) {</div><div class="line"><a name="l01858"></a><span class="lineno"> 1858</span>&#160;    PerBlockAccesses.erase(AccessIt);</div><div class="line"><a name="l01859"></a><span class="lineno"> 1859</span>&#160;    BlockNumberingValid.erase(BB);</div><div class="line"><a name="l01860"></a><span class="lineno"> 1860</span>&#160;  }</div><div class="line"><a name="l01861"></a><span class="lineno"> 1861</span>&#160;}</div><div class="line"><a name="l01862"></a><span class="lineno"> 1862</span>&#160;</div><div class="line"><a name="l01863"></a><span class="lineno"><a class="line" href="classllvm_1_1MemorySSA.html#afa9b4a650e1a6de2061538a19be3a234"> 1863</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classllvm_1_1MemorySSA.html#afa9b4a650e1a6de2061538a19be3a234">MemorySSA::print</a>(<a class="code" href="classllvm_1_1raw__ostream.html">raw_ostream</a> &amp;OS)<span class="keyword"> const </span>{</div><div class="line"><a name="l01864"></a><span class="lineno"> 1864</span>&#160;  <a class="code" href="classllvm_1_1MemorySSAAnnotatedWriter.html">MemorySSAAnnotatedWriter</a> Writer(<span class="keyword">this</span>);</div><div class="line"><a name="l01865"></a><span class="lineno"> 1865</span>&#160;  <a class="code" href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a>.print(OS, &amp;Writer);</div><div class="line"><a name="l01866"></a><span class="lineno"> 1866</span>&#160;}</div><div class="line"><a name="l01867"></a><span class="lineno"> 1867</span>&#160;</div><div class="line"><a name="l01868"></a><span class="lineno"> 1868</span>&#160;<span class="preprocessor">#if !defined(NDEBUG) || defined(LLVM_ENABLE_DUMP)</span></div><div class="line"><a name="l01869"></a><span class="lineno"><a class="line" href="classllvm_1_1MemorySSA.html#a0211e050a705084ef5e653127a7fb3df"> 1869</a></span>&#160;<a class="code" href="Compiler_8h.html#aa863693eef567397d9c292da5bf22d34">LLVM_DUMP_METHOD</a> <span class="keywordtype">void</span> <a class="code" href="classllvm_1_1MemorySSA.html#a0211e050a705084ef5e653127a7fb3df">MemorySSA::dump</a>()<span class="keyword"> const </span>{ <a class="code" href="classllvm_1_1MemorySSA.html#afa9b4a650e1a6de2061538a19be3a234">print</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>()); }</div><div class="line"><a name="l01870"></a><span class="lineno"> 1870</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l01871"></a><span class="lineno"> 1871</span>&#160;</div><div class="line"><a name="l01872"></a><span class="lineno"><a class="line" href="classllvm_1_1MemorySSA.html#a1b675075f5fd5a025edeca069612042e"> 1872</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classllvm_1_1MemorySSA.html#a1b675075f5fd5a025edeca069612042e">MemorySSA::verifyMemorySSA</a>()<span class="keyword"> const </span>{</div><div class="line"><a name="l01873"></a><span class="lineno"> 1873</span>&#160;  <a class="code" href="classllvm_1_1MemorySSA.html#af7bc855f1dbf176426fc9d54b815e7b2">verifyOrderingDominationAndDefUses</a>(<a class="code" href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a>);</div><div class="line"><a name="l01874"></a><span class="lineno"> 1874</span>&#160;  <a class="code" href="classllvm_1_1MemorySSA.html#a3e9609868c465ed02093014a27d5a479">verifyDominationNumbers</a>(<a class="code" href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a>);</div><div class="line"><a name="l01875"></a><span class="lineno"> 1875</span>&#160;  <a class="code" href="classllvm_1_1MemorySSA.html#a25dee04a50bd25afa513d772adba5737">verifyPrevDefInPhis</a>(<a class="code" href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a>);</div><div class="line"><a name="l01876"></a><span class="lineno"> 1876</span>&#160;  <span class="comment">// Previously, the verification used to also verify that the clobberingAccess</span></div><div class="line"><a name="l01877"></a><span class="lineno"> 1877</span>&#160;  <span class="comment">// cached by MemorySSA is the same as the clobberingAccess found at a later</span></div><div class="line"><a name="l01878"></a><span class="lineno"> 1878</span>&#160;  <span class="comment">// query to AA. This does not hold true in general due to the current fragility</span></div><div class="line"><a name="l01879"></a><span class="lineno"> 1879</span>&#160;  <span class="comment">// of BasicAA which has arbitrary caps on the things it analyzes before giving</span></div><div class="line"><a name="l01880"></a><span class="lineno"> 1880</span>&#160;  <span class="comment">// up. As a result, transformations that are correct, will lead to BasicAA</span></div><div class="line"><a name="l01881"></a><span class="lineno"> 1881</span>&#160;  <span class="comment">// returning different Alias answers before and after that transformation.</span></div><div class="line"><a name="l01882"></a><span class="lineno"> 1882</span>&#160;  <span class="comment">// Invalidating MemorySSA is not an option, as the results in BasicAA can be so</span></div><div class="line"><a name="l01883"></a><span class="lineno"> 1883</span>&#160;  <span class="comment">// random, in the worst case we&#39;d need to rebuild MemorySSA from scratch after</span></div><div class="line"><a name="l01884"></a><span class="lineno"> 1884</span>&#160;  <span class="comment">// every transformation, which defeats the purpose of using it. For such an</span></div><div class="line"><a name="l01885"></a><span class="lineno"> 1885</span>&#160;  <span class="comment">// example, see test4 added in D51960.</span></div><div class="line"><a name="l01886"></a><span class="lineno"> 1886</span>&#160;}</div><div class="line"><a name="l01887"></a><span class="lineno"> 1887</span>&#160;</div><div class="line"><a name="l01888"></a><span class="lineno"><a class="line" href="classllvm_1_1MemorySSA.html#a25dee04a50bd25afa513d772adba5737"> 1888</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classllvm_1_1MemorySSA.html#a25dee04a50bd25afa513d772adba5737">MemorySSA::verifyPrevDefInPhis</a>(<a class="code" href="classllvm_1_1Function.html">Function</a> &amp;F)<span class="keyword"> const </span>{</div><div class="line"><a name="l01889"></a><span class="lineno"> 1889</span>&#160;<span class="preprocessor">#if !defined(NDEBUG) &amp;&amp; defined(EXPENSIVE_CHECKS)</span></div><div class="line"><a name="l01890"></a><span class="lineno"> 1890</span>&#160;  <span class="keywordflow">for</span> (<span class="keyword">const</span> <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> &amp;BB : F) {</div><div class="line"><a name="l01891"></a><span class="lineno"> 1891</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1MemoryPhi.html">MemoryPhi</a> *Phi = <a class="code" href="classllvm_1_1MemorySSA.html#a4ece07ee1030856099726901d0eef81b">getMemoryAccess</a>(&amp;BB)) {</div><div class="line"><a name="l01892"></a><span class="lineno"> 1892</span>&#160;      <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> I = 0, <a class="code" href="BuiltinGCs_8cpp.html#a6742d2e0a668baf1196ec69e158d5f15">E</a> = Phi-&gt;getNumIncomingValues(); I != <a class="code" href="BuiltinGCs_8cpp.html#a6742d2e0a668baf1196ec69e158d5f15">E</a>; ++<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>) {</div><div class="line"><a name="l01893"></a><span class="lineno"> 1893</span>&#160;        <span class="keyword">auto</span> *Pred = Phi-&gt;getIncomingBlock(I);</div><div class="line"><a name="l01894"></a><span class="lineno"> 1894</span>&#160;        <span class="keyword">auto</span> *IncAcc = Phi-&gt;getIncomingValue(I);</div><div class="line"><a name="l01895"></a><span class="lineno"> 1895</span>&#160;        <span class="comment">// If Pred has no unreachable predecessors, get last def looking at</span></div><div class="line"><a name="l01896"></a><span class="lineno"> 1896</span>&#160;        <span class="comment">// IDoms. If, while walkings IDoms, any of these has an unreachable</span></div><div class="line"><a name="l01897"></a><span class="lineno"> 1897</span>&#160;        <span class="comment">// predecessor, then the incoming def can be any access.</span></div><div class="line"><a name="l01898"></a><span class="lineno"> 1898</span>&#160;        <span class="keywordflow">if</span> (<span class="keyword">auto</span> *DTNode = DT-&gt;getNode(Pred)) {</div><div class="line"><a name="l01899"></a><span class="lineno"> 1899</span>&#160;          <span class="keywordflow">while</span> (DTNode) {</div><div class="line"><a name="l01900"></a><span class="lineno"> 1900</span>&#160;            <span class="keywordflow">if</span> (<span class="keyword">auto</span> *DefList = <a class="code" href="classllvm_1_1MemorySSA.html#a65b7c715bf28eb17cfd012dd9bc3ad4b">getBlockDefs</a>(DTNode-&gt;getBlock())) {</div><div class="line"><a name="l01901"></a><span class="lineno"> 1901</span>&#160;              <span class="keyword">auto</span> *LastAcc = &amp;*(--DefList-&gt;end());</div><div class="line"><a name="l01902"></a><span class="lineno"> 1902</span>&#160;              <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(LastAcc == IncAcc &amp;&amp;</div><div class="line"><a name="l01903"></a><span class="lineno"> 1903</span>&#160;                     <span class="stringliteral">&quot;Incorrect incoming access into phi.&quot;</span>);</div><div class="line"><a name="l01904"></a><span class="lineno"> 1904</span>&#160;              <span class="keywordflow">break</span>;</div><div class="line"><a name="l01905"></a><span class="lineno"> 1905</span>&#160;            }</div><div class="line"><a name="l01906"></a><span class="lineno"> 1906</span>&#160;            DTNode = DTNode-&gt;getIDom();</div><div class="line"><a name="l01907"></a><span class="lineno"> 1907</span>&#160;          }</div><div class="line"><a name="l01908"></a><span class="lineno"> 1908</span>&#160;        } <span class="keywordflow">else</span> {</div><div class="line"><a name="l01909"></a><span class="lineno"> 1909</span>&#160;          <span class="comment">// If Pred has unreachable predecessors, but has at least a Def, the</span></div><div class="line"><a name="l01910"></a><span class="lineno"> 1910</span>&#160;          <span class="comment">// incoming access can be the last Def in Pred, or it could have been</span></div><div class="line"><a name="l01911"></a><span class="lineno"> 1911</span>&#160;          <span class="comment">// optimized to LoE. After an update, though, the LoE may have been</span></div><div class="line"><a name="l01912"></a><span class="lineno"> 1912</span>&#160;          <span class="comment">// replaced by another access, so IncAcc may be any access.</span></div><div class="line"><a name="l01913"></a><span class="lineno"> 1913</span>&#160;          <span class="comment">// If Pred has unreachable predecessors and no Defs, incoming access</span></div><div class="line"><a name="l01914"></a><span class="lineno"> 1914</span>&#160;          <span class="comment">// should be LoE; However, after an update, it may be any access.</span></div><div class="line"><a name="l01915"></a><span class="lineno"> 1915</span>&#160;        }</div><div class="line"><a name="l01916"></a><span class="lineno"> 1916</span>&#160;      }</div><div class="line"><a name="l01917"></a><span class="lineno"> 1917</span>&#160;    }</div><div class="line"><a name="l01918"></a><span class="lineno"> 1918</span>&#160;  }</div><div class="line"><a name="l01919"></a><span class="lineno"> 1919</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l01920"></a><span class="lineno"> 1920</span>&#160;}</div><div class="line"><a name="l01921"></a><span class="lineno"> 1921</span>&#160;<span class="comment"></span></div><div class="line"><a name="l01922"></a><span class="lineno"> 1922</span>&#160;<span class="comment">/// Verify that all of the blocks we believe to have valid domination numbers</span></div><div class="line"><a name="l01923"></a><span class="lineno"> 1923</span>&#160;<span class="comment">/// actually have valid domination numbers.</span></div><div class="line"><a name="l01924"></a><span class="lineno"><a class="line" href="classllvm_1_1MemorySSA.html#a3e9609868c465ed02093014a27d5a479"> 1924</a></span>&#160;<span class="comment"></span><span class="keywordtype">void</span> <a class="code" href="classllvm_1_1MemorySSA.html#a3e9609868c465ed02093014a27d5a479">MemorySSA::verifyDominationNumbers</a>(<span class="keyword">const</span> <a class="code" href="classllvm_1_1Function.html">Function</a> &amp;F)<span class="keyword"> const </span>{</div><div class="line"><a name="l01925"></a><span class="lineno"> 1925</span>&#160;<span class="preprocessor">#ifndef NDEBUG</span></div><div class="line"><a name="l01926"></a><span class="lineno"> 1926</span>&#160;  <span class="keywordflow">if</span> (BlockNumberingValid.empty())</div><div class="line"><a name="l01927"></a><span class="lineno"> 1927</span>&#160;    <span class="keywordflow">return</span>;</div><div class="line"><a name="l01928"></a><span class="lineno"> 1928</span>&#160;</div><div class="line"><a name="l01929"></a><span class="lineno"> 1929</span>&#160;  <a class="code" href="classllvm_1_1SmallPtrSet.html">SmallPtrSet&lt;const BasicBlock *, 16&gt;</a> ValidBlocks = BlockNumberingValid;</div><div class="line"><a name="l01930"></a><span class="lineno"> 1930</span>&#160;  <span class="keywordflow">for</span> (<span class="keyword">const</span> <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> &amp;BB : F) {</div><div class="line"><a name="l01931"></a><span class="lineno"> 1931</span>&#160;    <span class="keywordflow">if</span> (!ValidBlocks.<a class="code" href="classllvm_1_1SmallPtrSetImpl.html#a1f475b0df44ebd7169e720fa1bf9169e">count</a>(&amp;BB))</div><div class="line"><a name="l01932"></a><span class="lineno"> 1932</span>&#160;      <span class="keywordflow">continue</span>;</div><div class="line"><a name="l01933"></a><span class="lineno"> 1933</span>&#160;</div><div class="line"><a name="l01934"></a><span class="lineno"> 1934</span>&#160;    ValidBlocks.<a class="code" href="classllvm_1_1SmallPtrSetImpl.html#a11045c7973ab24a8d6315b61fa337d4e">erase</a>(&amp;BB);</div><div class="line"><a name="l01935"></a><span class="lineno"> 1935</span>&#160;</div><div class="line"><a name="l01936"></a><span class="lineno"> 1936</span>&#160;    <span class="keyword">const</span> <a class="code" href="classllvm_1_1iplist.html">AccessList</a> *Accesses = <a class="code" href="classllvm_1_1MemorySSA.html#aaff19b909f903fe2a431e97424ffced5">getBlockAccesses</a>(&amp;BB);</div><div class="line"><a name="l01937"></a><span class="lineno"> 1937</span>&#160;    <span class="comment">// It&#39;s correct to say an empty block has valid numbering.</span></div><div class="line"><a name="l01938"></a><span class="lineno"> 1938</span>&#160;    <span class="keywordflow">if</span> (!Accesses)</div><div class="line"><a name="l01939"></a><span class="lineno"> 1939</span>&#160;      <span class="keywordflow">continue</span>;</div><div class="line"><a name="l01940"></a><span class="lineno"> 1940</span>&#160;</div><div class="line"><a name="l01941"></a><span class="lineno"> 1941</span>&#160;    <span class="comment">// Block numbering starts at 1.</span></div><div class="line"><a name="l01942"></a><span class="lineno"> 1942</span>&#160;    <span class="keywordtype">unsigned</span> <span class="keywordtype">long</span> LastNumber = 0;</div><div class="line"><a name="l01943"></a><span class="lineno"> 1943</span>&#160;    <span class="keywordflow">for</span> (<span class="keyword">const</span> <a class="code" href="classllvm_1_1MemoryAccess.html">MemoryAccess</a> &amp;MA : *Accesses) {</div><div class="line"><a name="l01944"></a><span class="lineno"> 1944</span>&#160;      <span class="keyword">auto</span> ThisNumberIter = BlockNumbering.find(&amp;MA);</div><div class="line"><a name="l01945"></a><span class="lineno"> 1945</span>&#160;      <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(ThisNumberIter != BlockNumbering.end() &amp;&amp;</div><div class="line"><a name="l01946"></a><span class="lineno"> 1946</span>&#160;             <span class="stringliteral">&quot;MemoryAccess has no domination number in a valid block!&quot;</span>);</div><div class="line"><a name="l01947"></a><span class="lineno"> 1947</span>&#160;</div><div class="line"><a name="l01948"></a><span class="lineno"> 1948</span>&#160;      <span class="keywordtype">unsigned</span> <span class="keywordtype">long</span> ThisNumber = ThisNumberIter-&gt;second;</div><div class="line"><a name="l01949"></a><span class="lineno"> 1949</span>&#160;      <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(ThisNumber &gt; LastNumber &amp;&amp;</div><div class="line"><a name="l01950"></a><span class="lineno"> 1950</span>&#160;             <span class="stringliteral">&quot;Domination numbers should be strictly increasing!&quot;</span>);</div><div class="line"><a name="l01951"></a><span class="lineno"> 1951</span>&#160;      LastNumber = ThisNumber;</div><div class="line"><a name="l01952"></a><span class="lineno"> 1952</span>&#160;    }</div><div class="line"><a name="l01953"></a><span class="lineno"> 1953</span>&#160;  }</div><div class="line"><a name="l01954"></a><span class="lineno"> 1954</span>&#160;</div><div class="line"><a name="l01955"></a><span class="lineno"> 1955</span>&#160;  <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(ValidBlocks.<a class="code" href="classllvm_1_1SmallPtrSetImplBase.html#a117612cef19ebb89bd37949ea165642a">empty</a>() &amp;&amp;</div><div class="line"><a name="l01956"></a><span class="lineno"> 1956</span>&#160;         <span class="stringliteral">&quot;All valid BasicBlocks should exist in F -- dangling pointers?&quot;</span>);</div><div class="line"><a name="l01957"></a><span class="lineno"> 1957</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l01958"></a><span class="lineno"> 1958</span>&#160;}</div><div class="line"><a name="l01959"></a><span class="lineno"> 1959</span>&#160;<span class="comment"></span></div><div class="line"><a name="l01960"></a><span class="lineno"> 1960</span>&#160;<span class="comment">/// Verify ordering: the order and existence of MemoryAccesses matches the</span></div><div class="line"><a name="l01961"></a><span class="lineno"> 1961</span>&#160;<span class="comment">/// order and existence of memory affecting instructions.</span></div><div class="line"><a name="l01962"></a><span class="lineno"> 1962</span>&#160;<span class="comment">/// Verify domination: each definition dominates all of its uses.</span></div><div class="line"><a name="l01963"></a><span class="lineno"> 1963</span>&#160;<span class="comment">/// Verify def-uses: the immediate use information - walk all the memory</span></div><div class="line"><a name="l01964"></a><span class="lineno"> 1964</span>&#160;<span class="comment">/// accesses and verifying that, for each use, it appears in the appropriate</span></div><div class="line"><a name="l01965"></a><span class="lineno"> 1965</span>&#160;<span class="comment">/// def&#39;s use list</span></div><div class="line"><a name="l01966"></a><span class="lineno"><a class="line" href="classllvm_1_1MemorySSA.html#af7bc855f1dbf176426fc9d54b815e7b2"> 1966</a></span>&#160;<span class="comment"></span><span class="keywordtype">void</span> <a class="code" href="classllvm_1_1MemorySSA.html#af7bc855f1dbf176426fc9d54b815e7b2">MemorySSA::verifyOrderingDominationAndDefUses</a>(<a class="code" href="classllvm_1_1Function.html">Function</a> &amp;F)<span class="keyword"> const </span>{</div><div class="line"><a name="l01967"></a><span class="lineno"> 1967</span>&#160;<span class="preprocessor">#if !defined(NDEBUG)</span></div><div class="line"><a name="l01968"></a><span class="lineno"> 1968</span>&#160;  <span class="comment">// Walk all the blocks, comparing what the lookups think and what the access</span></div><div class="line"><a name="l01969"></a><span class="lineno"> 1969</span>&#160;  <span class="comment">// lists think, as well as the order in the blocks vs the order in the access</span></div><div class="line"><a name="l01970"></a><span class="lineno"> 1970</span>&#160;  <span class="comment">// lists.</span></div><div class="line"><a name="l01971"></a><span class="lineno"> 1971</span>&#160;  <a class="code" href="classllvm_1_1SmallVector.html">SmallVector&lt;MemoryAccess *, 32&gt;</a> ActualAccesses;</div><div class="line"><a name="l01972"></a><span class="lineno"> 1972</span>&#160;  <a class="code" href="classllvm_1_1SmallVector.html">SmallVector&lt;MemoryAccess *, 32&gt;</a> ActualDefs;</div><div class="line"><a name="l01973"></a><span class="lineno"> 1973</span>&#160;  <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> &amp;<a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a> : F) {</div><div class="line"><a name="l01974"></a><span class="lineno"> 1974</span>&#160;    <span class="keyword">const</span> <a class="code" href="classllvm_1_1iplist.html">AccessList</a> *<a class="code" href="namespacellvm_1_1AArch64CC.html#abfa1f7dce576430da99eed57807c7f28ab89adee997fb2a645a2d26e1f1bdaadf">AL</a> = <a class="code" href="classllvm_1_1MemorySSA.html#aaff19b909f903fe2a431e97424ffced5">getBlockAccesses</a>(&amp;<a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>);</div><div class="line"><a name="l01975"></a><span class="lineno"> 1975</span>&#160;    <span class="keyword">const</span> <span class="keyword">auto</span> *DL = <a class="code" href="classllvm_1_1MemorySSA.html#a65b7c715bf28eb17cfd012dd9bc3ad4b">getBlockDefs</a>(&amp;<a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>);</div><div class="line"><a name="l01976"></a><span class="lineno"> 1976</span>&#160;    <a class="code" href="classllvm_1_1MemoryPhi.html">MemoryPhi</a> *Phi = <a class="code" href="classllvm_1_1MemorySSA.html#a4ece07ee1030856099726901d0eef81b">getMemoryAccess</a>(&amp;<a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>);</div><div class="line"><a name="l01977"></a><span class="lineno"> 1977</span>&#160;    <span class="keywordflow">if</span> (Phi) {</div><div class="line"><a name="l01978"></a><span class="lineno"> 1978</span>&#160;      <span class="comment">// Verify ordering.</span></div><div class="line"><a name="l01979"></a><span class="lineno"> 1979</span>&#160;      ActualAccesses.<a class="code" href="classllvm_1_1SmallVectorTemplateBase.html#af42bfbc067df27c19ee2fc859df58799">push_back</a>(Phi);</div><div class="line"><a name="l01980"></a><span class="lineno"> 1980</span>&#160;      ActualDefs.<a class="code" href="classllvm_1_1SmallVectorTemplateBase.html#af42bfbc067df27c19ee2fc859df58799">push_back</a>(Phi);</div><div class="line"><a name="l01981"></a><span class="lineno"> 1981</span>&#160;      <span class="comment">// Verify domination</span></div><div class="line"><a name="l01982"></a><span class="lineno"> 1982</span>&#160;      <span class="keywordflow">for</span> (<span class="keyword">const</span> <a class="code" href="classllvm_1_1Use.html">Use</a> &amp;U : Phi-&gt;<a class="code" href="classllvm_1_1Value.html#aecb93439702247fe5353a9966f7cefcd">uses</a>())</div><div class="line"><a name="l01983"></a><span class="lineno"> 1983</span>&#160;        <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(<a class="code" href="classllvm_1_1MemorySSA.html#a56004f54560e9950f6eb148cb5dfa0a3">dominates</a>(Phi, U) &amp;&amp; <span class="stringliteral">&quot;Memory PHI does not dominate it&#39;s uses&quot;</span>);</div><div class="line"><a name="l01984"></a><span class="lineno"> 1984</span>&#160;<span class="preprocessor">#if defined(EXPENSIVE_CHECKS)</span></div><div class="line"><a name="l01985"></a><span class="lineno"> 1985</span>&#160;      <span class="comment">// Verify def-uses.</span></div><div class="line"><a name="l01986"></a><span class="lineno"> 1986</span>&#160;      <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(Phi-&gt;<a class="code" href="classllvm_1_1User.html#addec638786f763d967811b45cb662f1f">getNumOperands</a>() == <span class="keyword">static_cast&lt;</span><span class="keywordtype">unsigned</span><span class="keyword">&gt;</span>(std::distance(</div><div class="line"><a name="l01987"></a><span class="lineno"> 1987</span>&#160;                                          <a class="code" href="namespacellvm.html#a7e108932dc3da5294aed99a353aac9c4">pred_begin</a>(&amp;<a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>), <a class="code" href="namespacellvm.html#a5eeaf08e96168c2cac8960f87f0ef360">pred_end</a>(&amp;<a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>))) &amp;&amp;</div><div class="line"><a name="l01988"></a><span class="lineno"> 1988</span>&#160;             <span class="stringliteral">&quot;Incomplete MemoryPhi Node&quot;</span>);</div><div class="line"><a name="l01989"></a><span class="lineno"> 1989</span>&#160;      <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> I = 0, <a class="code" href="BuiltinGCs_8cpp.html#a6742d2e0a668baf1196ec69e158d5f15">E</a> = Phi-&gt;<a class="code" href="classllvm_1_1MemoryPhi.html#a1c403c86f16af563cec6961666e8cc2e">getNumIncomingValues</a>(); I != <a class="code" href="BuiltinGCs_8cpp.html#a6742d2e0a668baf1196ec69e158d5f15">E</a>; ++<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>) {</div><div class="line"><a name="l01990"></a><span class="lineno"> 1990</span>&#160;        verifyUseInDefs(Phi-&gt;<a class="code" href="classllvm_1_1MemoryPhi.html#ad9d171a8662f441f5c7c50061e628565">getIncomingValue</a>(I), Phi);</div><div class="line"><a name="l01991"></a><span class="lineno"> 1991</span>&#160;        <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(<a class="code" href="namespacellvm.html#a4a55633d4f1b169d533a3a67122d96ff">find</a>(<a class="code" href="namespacellvm.html#a91d9d210ba428cc67e3c2e892f24529e">predecessors</a>(&amp;<a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>), Phi-&gt;<a class="code" href="classllvm_1_1MemoryPhi.html#a6ecf3b528e1fab88068bd3baefb8b0ed">getIncomingBlock</a>(I)) !=</div><div class="line"><a name="l01992"></a><span class="lineno"> 1992</span>&#160;                   <a class="code" href="namespacellvm.html#a5eeaf08e96168c2cac8960f87f0ef360">pred_end</a>(&amp;<a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>) &amp;&amp;</div><div class="line"><a name="l01993"></a><span class="lineno"> 1993</span>&#160;               <span class="stringliteral">&quot;Incoming phi block not a block predecessor&quot;</span>);</div><div class="line"><a name="l01994"></a><span class="lineno"> 1994</span>&#160;      }</div><div class="line"><a name="l01995"></a><span class="lineno"> 1995</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l01996"></a><span class="lineno"> 1996</span>&#160;    }</div><div class="line"><a name="l01997"></a><span class="lineno"> 1997</span>&#160;</div><div class="line"><a name="l01998"></a><span class="lineno"> 1998</span>&#160;    <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1Instruction.html">Instruction</a> &amp;I : <a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>) {</div><div class="line"><a name="l01999"></a><span class="lineno"> 1999</span>&#160;      <a class="code" href="classllvm_1_1MemoryUseOrDef.html">MemoryUseOrDef</a> *MA = <a class="code" href="classllvm_1_1MemorySSA.html#a4ece07ee1030856099726901d0eef81b">getMemoryAccess</a>(&amp;I);</div><div class="line"><a name="l02000"></a><span class="lineno"> 2000</span>&#160;      <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>((!MA || (AL &amp;&amp; (isa&lt;MemoryUse&gt;(MA) || DL))) &amp;&amp;</div><div class="line"><a name="l02001"></a><span class="lineno"> 2001</span>&#160;             <span class="stringliteral">&quot;We have memory affecting instructions &quot;</span></div><div class="line"><a name="l02002"></a><span class="lineno"> 2002</span>&#160;             <span class="stringliteral">&quot;in this block but they are not in the &quot;</span></div><div class="line"><a name="l02003"></a><span class="lineno"> 2003</span>&#160;             <span class="stringliteral">&quot;access list or defs list&quot;</span>);</div><div class="line"><a name="l02004"></a><span class="lineno"> 2004</span>&#160;      <span class="keywordflow">if</span> (MA) {</div><div class="line"><a name="l02005"></a><span class="lineno"> 2005</span>&#160;        <span class="comment">// Verify ordering.</span></div><div class="line"><a name="l02006"></a><span class="lineno"> 2006</span>&#160;        ActualAccesses.<a class="code" href="classllvm_1_1SmallVectorTemplateBase.html#af42bfbc067df27c19ee2fc859df58799">push_back</a>(MA);</div><div class="line"><a name="l02007"></a><span class="lineno"> 2007</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1MemoryAccess.html">MemoryAccess</a> *MD = dyn_cast&lt;MemoryDef&gt;(MA)) {</div><div class="line"><a name="l02008"></a><span class="lineno"> 2008</span>&#160;          <span class="comment">// Verify ordering.</span></div><div class="line"><a name="l02009"></a><span class="lineno"> 2009</span>&#160;          ActualDefs.<a class="code" href="classllvm_1_1SmallVectorTemplateBase.html#af42bfbc067df27c19ee2fc859df58799">push_back</a>(MA);</div><div class="line"><a name="l02010"></a><span class="lineno"> 2010</span>&#160;          <span class="comment">// Verify domination.</span></div><div class="line"><a name="l02011"></a><span class="lineno"> 2011</span>&#160;          <span class="keywordflow">for</span> (<span class="keyword">const</span> <a class="code" href="classllvm_1_1Use.html">Use</a> &amp;U : MD-&gt;<a class="code" href="classllvm_1_1Value.html#aecb93439702247fe5353a9966f7cefcd">uses</a>())</div><div class="line"><a name="l02012"></a><span class="lineno"> 2012</span>&#160;            <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(<a class="code" href="classllvm_1_1MemorySSA.html#a56004f54560e9950f6eb148cb5dfa0a3">dominates</a>(MD, U) &amp;&amp;</div><div class="line"><a name="l02013"></a><span class="lineno"> 2013</span>&#160;                   <span class="stringliteral">&quot;Memory Def does not dominate it&#39;s uses&quot;</span>);</div><div class="line"><a name="l02014"></a><span class="lineno"> 2014</span>&#160;        }</div><div class="line"><a name="l02015"></a><span class="lineno"> 2015</span>&#160;<span class="preprocessor">#if defined(EXPENSIVE_CHECKS)</span></div><div class="line"><a name="l02016"></a><span class="lineno"> 2016</span>&#160;        <span class="comment">// Verify def-uses.</span></div><div class="line"><a name="l02017"></a><span class="lineno"> 2017</span>&#160;        verifyUseInDefs(MA-&gt;<a class="code" href="classllvm_1_1MemoryUseOrDef.html#abc4e1b6cc483cfd57ca75c4ab92bd360">getDefiningAccess</a>(), MA);</div><div class="line"><a name="l02018"></a><span class="lineno"> 2018</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l02019"></a><span class="lineno"> 2019</span>&#160;      }</div><div class="line"><a name="l02020"></a><span class="lineno"> 2020</span>&#160;    }</div><div class="line"><a name="l02021"></a><span class="lineno"> 2021</span>&#160;    <span class="comment">// Either we hit the assert, really have no accesses, or we have both</span></div><div class="line"><a name="l02022"></a><span class="lineno"> 2022</span>&#160;    <span class="comment">// accesses and an access list. Same with defs.</span></div><div class="line"><a name="l02023"></a><span class="lineno"> 2023</span>&#160;    <span class="keywordflow">if</span> (!AL &amp;&amp; !DL)</div><div class="line"><a name="l02024"></a><span class="lineno"> 2024</span>&#160;      <span class="keywordflow">continue</span>;</div><div class="line"><a name="l02025"></a><span class="lineno"> 2025</span>&#160;    <span class="comment">// Verify ordering.</span></div><div class="line"><a name="l02026"></a><span class="lineno"> 2026</span>&#160;    <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(AL-&gt;size() == ActualAccesses.<a class="code" href="classllvm_1_1SmallVectorBase.html#ac8624043115fb3a5076c964820001b61">size</a>() &amp;&amp;</div><div class="line"><a name="l02027"></a><span class="lineno"> 2027</span>&#160;           <span class="stringliteral">&quot;We don&#39;t have the same number of accesses in the block as on the &quot;</span></div><div class="line"><a name="l02028"></a><span class="lineno"> 2028</span>&#160;           <span class="stringliteral">&quot;access list&quot;</span>);</div><div class="line"><a name="l02029"></a><span class="lineno"> 2029</span>&#160;    <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>((DL || ActualDefs.<a class="code" href="classllvm_1_1SmallVectorBase.html#ac8624043115fb3a5076c964820001b61">size</a>() == 0) &amp;&amp;</div><div class="line"><a name="l02030"></a><span class="lineno"> 2030</span>&#160;           <span class="stringliteral">&quot;Either we should have a defs list, or we should have no defs&quot;</span>);</div><div class="line"><a name="l02031"></a><span class="lineno"> 2031</span>&#160;    <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>((!DL || DL-&gt;size() == ActualDefs.<a class="code" href="classllvm_1_1SmallVectorBase.html#ac8624043115fb3a5076c964820001b61">size</a>()) &amp;&amp;</div><div class="line"><a name="l02032"></a><span class="lineno"> 2032</span>&#160;           <span class="stringliteral">&quot;We don&#39;t have the same number of defs in the block as on the &quot;</span></div><div class="line"><a name="l02033"></a><span class="lineno"> 2033</span>&#160;           <span class="stringliteral">&quot;def list&quot;</span>);</div><div class="line"><a name="l02034"></a><span class="lineno"> 2034</span>&#160;    <span class="keyword">auto</span> ALI = AL-&gt;begin();</div><div class="line"><a name="l02035"></a><span class="lineno"> 2035</span>&#160;    <span class="keyword">auto</span> AAI = ActualAccesses.<a class="code" href="classllvm_1_1SmallVectorTemplateCommon.html#a8a045d250952c0867382a9840ee18fdf">begin</a>();</div><div class="line"><a name="l02036"></a><span class="lineno"> 2036</span>&#160;    <span class="keywordflow">while</span> (ALI != AL-&gt;end() &amp;&amp; AAI != ActualAccesses.<a class="code" href="classllvm_1_1SmallVectorTemplateCommon.html#a075e34e98605d0e7c289763a104869ac">end</a>()) {</div><div class="line"><a name="l02037"></a><span class="lineno"> 2037</span>&#160;      <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(&amp;*ALI == *AAI &amp;&amp; <span class="stringliteral">&quot;Not the same accesses in the same order&quot;</span>);</div><div class="line"><a name="l02038"></a><span class="lineno"> 2038</span>&#160;      ++ALI;</div><div class="line"><a name="l02039"></a><span class="lineno"> 2039</span>&#160;      ++AAI;</div><div class="line"><a name="l02040"></a><span class="lineno"> 2040</span>&#160;    }</div><div class="line"><a name="l02041"></a><span class="lineno"> 2041</span>&#160;    ActualAccesses.<a class="code" href="classllvm_1_1SmallVectorImpl.html#aac0ea55010b7b1a301e65a0baea057aa">clear</a>();</div><div class="line"><a name="l02042"></a><span class="lineno"> 2042</span>&#160;    <span class="keywordflow">if</span> (DL) {</div><div class="line"><a name="l02043"></a><span class="lineno"> 2043</span>&#160;      <span class="keyword">auto</span> DLI = DL-&gt;begin();</div><div class="line"><a name="l02044"></a><span class="lineno"> 2044</span>&#160;      <span class="keyword">auto</span> ADI = ActualDefs.<a class="code" href="classllvm_1_1SmallVectorTemplateCommon.html#a8a045d250952c0867382a9840ee18fdf">begin</a>();</div><div class="line"><a name="l02045"></a><span class="lineno"> 2045</span>&#160;      <span class="keywordflow">while</span> (DLI != DL-&gt;end() &amp;&amp; ADI != ActualDefs.<a class="code" href="classllvm_1_1SmallVectorTemplateCommon.html#a075e34e98605d0e7c289763a104869ac">end</a>()) {</div><div class="line"><a name="l02046"></a><span class="lineno"> 2046</span>&#160;        <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(&amp;*DLI == *ADI &amp;&amp; <span class="stringliteral">&quot;Not the same defs in the same order&quot;</span>);</div><div class="line"><a name="l02047"></a><span class="lineno"> 2047</span>&#160;        ++DLI;</div><div class="line"><a name="l02048"></a><span class="lineno"> 2048</span>&#160;        ++ADI;</div><div class="line"><a name="l02049"></a><span class="lineno"> 2049</span>&#160;      }</div><div class="line"><a name="l02050"></a><span class="lineno"> 2050</span>&#160;    }</div><div class="line"><a name="l02051"></a><span class="lineno"> 2051</span>&#160;    ActualDefs.<a class="code" href="classllvm_1_1SmallVectorImpl.html#aac0ea55010b7b1a301e65a0baea057aa">clear</a>();</div><div class="line"><a name="l02052"></a><span class="lineno"> 2052</span>&#160;  }</div><div class="line"><a name="l02053"></a><span class="lineno"> 2053</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l02054"></a><span class="lineno"> 2054</span>&#160;}</div><div class="line"><a name="l02055"></a><span class="lineno"> 2055</span>&#160;<span class="comment"></span></div><div class="line"><a name="l02056"></a><span class="lineno"> 2056</span>&#160;<span class="comment">/// Verify the def-use lists in MemorySSA, by verifying that \p Use</span></div><div class="line"><a name="l02057"></a><span class="lineno"> 2057</span>&#160;<span class="comment">/// appears in the use list of \p Def.</span></div><div class="line"><a name="l02058"></a><span class="lineno"> 2058</span>&#160;<span class="comment"></span><span class="keywordtype">void</span> MemorySSA::verifyUseInDefs(<a class="code" href="classllvm_1_1MemoryAccess.html">MemoryAccess</a> *<a class="code" href="namespacellvm_1_1tgtok.html#abbc5259d649363016626e2529fabe0c5aceb138f68fe183995736614928e3394a">Def</a>, <a class="code" href="classllvm_1_1MemoryAccess.html">MemoryAccess</a> *<a class="code" href="classllvm_1_1Use.html">Use</a>)<span class="keyword"> const </span>{</div><div class="line"><a name="l02059"></a><span class="lineno"> 2059</span>&#160;<span class="preprocessor">#ifndef NDEBUG</span></div><div class="line"><a name="l02060"></a><span class="lineno"> 2060</span>&#160;  <span class="comment">// The live on entry use may cause us to get a NULL def here</span></div><div class="line"><a name="l02061"></a><span class="lineno"> 2061</span>&#160;  <span class="keywordflow">if</span> (!Def)</div><div class="line"><a name="l02062"></a><span class="lineno"> 2062</span>&#160;    <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(<a class="code" href="classllvm_1_1MemorySSA.html#ae3b89ffde42778289bcbd8a187199420">isLiveOnEntryDef</a>(Use) &amp;&amp;</div><div class="line"><a name="l02063"></a><span class="lineno"> 2063</span>&#160;           <span class="stringliteral">&quot;Null def but use not point to live on entry def&quot;</span>);</div><div class="line"><a name="l02064"></a><span class="lineno"> 2064</span>&#160;  <span class="keywordflow">else</span></div><div class="line"><a name="l02065"></a><span class="lineno"> 2065</span>&#160;    <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(<a class="code" href="namespacellvm.html#acd1cd968cb420c82d70926920fcdc7d7">is_contained</a>(Def-&gt;<a class="code" href="classllvm_1_1Value.html#ab4e0512c7e1c7adaa56677e3155685f1">users</a>(), Use) &amp;&amp;</div><div class="line"><a name="l02066"></a><span class="lineno"> 2066</span>&#160;           <span class="stringliteral">&quot;Did not find use in def&#39;s use list&quot;</span>);</div><div class="line"><a name="l02067"></a><span class="lineno"> 2067</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l02068"></a><span class="lineno"> 2068</span>&#160;}</div><div class="line"><a name="l02069"></a><span class="lineno"> 2069</span>&#160;<span class="comment"></span></div><div class="line"><a name="l02070"></a><span class="lineno"> 2070</span>&#160;<span class="comment">/// Perform a local numbering on blocks so that instruction ordering can be</span></div><div class="line"><a name="l02071"></a><span class="lineno"> 2071</span>&#160;<span class="comment">/// determined in constant time.</span></div><div class="line"><a name="l02072"></a><span class="lineno"> 2072</span>&#160;<span class="comment">/// TODO: We currently just number in order.  If we numbered by N, we could</span></div><div class="line"><a name="l02073"></a><span class="lineno"> 2073</span>&#160;<span class="comment">/// allow at least N-1 sequences of insertBefore or insertAfter (and at least</span></div><div class="line"><a name="l02074"></a><span class="lineno"> 2074</span>&#160;<span class="comment">/// log2(N) sequences of mixed before and after) without needing to invalidate</span></div><div class="line"><a name="l02075"></a><span class="lineno"> 2075</span>&#160;<span class="comment">/// the numbering.</span></div><div class="line"><a name="l02076"></a><span class="lineno"> 2076</span>&#160;<span class="comment"></span><span class="keywordtype">void</span> MemorySSA::renumberBlock(<span class="keyword">const</span> <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *<a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>)<span class="keyword"> const </span>{</div><div class="line"><a name="l02077"></a><span class="lineno"> 2077</span>&#160;  <span class="comment">// The pre-increment ensures the numbers really start at 1.</span></div><div class="line"><a name="l02078"></a><span class="lineno"> 2078</span>&#160;  <span class="keywordtype">unsigned</span> <span class="keywordtype">long</span> CurrentNumber = 0;</div><div class="line"><a name="l02079"></a><span class="lineno"> 2079</span>&#160;  <span class="keyword">const</span> <a class="code" href="classllvm_1_1iplist.html">AccessList</a> *<a class="code" href="namespacellvm_1_1AArch64CC.html#abfa1f7dce576430da99eed57807c7f28ab89adee997fb2a645a2d26e1f1bdaadf">AL</a> = <a class="code" href="classllvm_1_1MemorySSA.html#aaff19b909f903fe2a431e97424ffced5">getBlockAccesses</a>(B);</div><div class="line"><a name="l02080"></a><span class="lineno"> 2080</span>&#160;  <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(AL != <span class="keyword">nullptr</span> &amp;&amp; <span class="stringliteral">&quot;Asking to renumber an empty block&quot;</span>);</div><div class="line"><a name="l02081"></a><span class="lineno"> 2081</span>&#160;  <span class="keywordflow">for</span> (<span class="keyword">const</span> <span class="keyword">auto</span> &amp;I : *AL)</div><div class="line"><a name="l02082"></a><span class="lineno"> 2082</span>&#160;    BlockNumbering[&amp;<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>] = ++CurrentNumber;</div><div class="line"><a name="l02083"></a><span class="lineno"> 2083</span>&#160;  BlockNumberingValid.insert(B);</div><div class="line"><a name="l02084"></a><span class="lineno"> 2084</span>&#160;}</div><div class="line"><a name="l02085"></a><span class="lineno"> 2085</span>&#160;<span class="comment"></span></div><div class="line"><a name="l02086"></a><span class="lineno"> 2086</span>&#160;<span class="comment">/// Determine, for two memory accesses in the same block,</span></div><div class="line"><a name="l02087"></a><span class="lineno"> 2087</span>&#160;<span class="comment">/// whether \p Dominator dominates \p Dominatee.</span></div><div class="line"><a name="l02088"></a><span class="lineno"> 2088</span>&#160;<span class="comment">/// \returns True if \p Dominator dominates \p Dominatee.</span></div><div class="line"><a name="l02089"></a><span class="lineno"><a class="line" href="classllvm_1_1MemorySSA.html#ade88aedcbd2b55711000cf3e36c0fc91"> 2089</a></span>&#160;<span class="comment"></span><span class="keywordtype">bool</span> <a class="code" href="classllvm_1_1MemorySSA.html#ade88aedcbd2b55711000cf3e36c0fc91">MemorySSA::locallyDominates</a>(<span class="keyword">const</span> <a class="code" href="classllvm_1_1MemoryAccess.html">MemoryAccess</a> *Dominator,</div><div class="line"><a name="l02090"></a><span class="lineno"> 2090</span>&#160;                                 <span class="keyword">const</span> <a class="code" href="classllvm_1_1MemoryAccess.html">MemoryAccess</a> *Dominatee)<span class="keyword"> const </span>{</div><div class="line"><a name="l02091"></a><span class="lineno"> 2091</span>&#160;  <span class="keyword">const</span> <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *DominatorBlock = Dominator-&gt;<a class="code" href="classllvm_1_1MemoryAccess.html#aa468ad3fa68bdf6703c391deaec97706">getBlock</a>();</div><div class="line"><a name="l02092"></a><span class="lineno"> 2092</span>&#160;</div><div class="line"><a name="l02093"></a><span class="lineno"> 2093</span>&#160;  <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>((DominatorBlock == Dominatee-&gt;<a class="code" href="classllvm_1_1MemoryAccess.html#aa468ad3fa68bdf6703c391deaec97706">getBlock</a>()) &amp;&amp;</div><div class="line"><a name="l02094"></a><span class="lineno"> 2094</span>&#160;         <span class="stringliteral">&quot;Asking for local domination when accesses are in different blocks!&quot;</span>);</div><div class="line"><a name="l02095"></a><span class="lineno"> 2095</span>&#160;  <span class="comment">// A node dominates itself.</span></div><div class="line"><a name="l02096"></a><span class="lineno"> 2096</span>&#160;  <span class="keywordflow">if</span> (Dominatee == Dominator)</div><div class="line"><a name="l02097"></a><span class="lineno"> 2097</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div><div class="line"><a name="l02098"></a><span class="lineno"> 2098</span>&#160;</div><div class="line"><a name="l02099"></a><span class="lineno"> 2099</span>&#160;  <span class="comment">// When Dominatee is defined on function entry, it is not dominated by another</span></div><div class="line"><a name="l02100"></a><span class="lineno"> 2100</span>&#160;  <span class="comment">// memory access.</span></div><div class="line"><a name="l02101"></a><span class="lineno"> 2101</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1MemorySSA.html#ae3b89ffde42778289bcbd8a187199420">isLiveOnEntryDef</a>(Dominatee))</div><div class="line"><a name="l02102"></a><span class="lineno"> 2102</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div><div class="line"><a name="l02103"></a><span class="lineno"> 2103</span>&#160;</div><div class="line"><a name="l02104"></a><span class="lineno"> 2104</span>&#160;  <span class="comment">// When Dominator is defined on function entry, it dominates the other memory</span></div><div class="line"><a name="l02105"></a><span class="lineno"> 2105</span>&#160;  <span class="comment">// access.</span></div><div class="line"><a name="l02106"></a><span class="lineno"> 2106</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1MemorySSA.html#ae3b89ffde42778289bcbd8a187199420">isLiveOnEntryDef</a>(Dominator))</div><div class="line"><a name="l02107"></a><span class="lineno"> 2107</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div><div class="line"><a name="l02108"></a><span class="lineno"> 2108</span>&#160;</div><div class="line"><a name="l02109"></a><span class="lineno"> 2109</span>&#160;  <span class="keywordflow">if</span> (!BlockNumberingValid.count(DominatorBlock))</div><div class="line"><a name="l02110"></a><span class="lineno"> 2110</span>&#160;    renumberBlock(DominatorBlock);</div><div class="line"><a name="l02111"></a><span class="lineno"> 2111</span>&#160;</div><div class="line"><a name="l02112"></a><span class="lineno"> 2112</span>&#160;  <span class="keywordtype">unsigned</span> <span class="keywordtype">long</span> DominatorNum = BlockNumbering.lookup(Dominator);</div><div class="line"><a name="l02113"></a><span class="lineno"> 2113</span>&#160;  <span class="comment">// All numbers start with 1</span></div><div class="line"><a name="l02114"></a><span class="lineno"> 2114</span>&#160;  <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(DominatorNum != 0 &amp;&amp; <span class="stringliteral">&quot;Block was not numbered properly&quot;</span>);</div><div class="line"><a name="l02115"></a><span class="lineno"> 2115</span>&#160;  <span class="keywordtype">unsigned</span> <span class="keywordtype">long</span> DominateeNum = BlockNumbering.lookup(Dominatee);</div><div class="line"><a name="l02116"></a><span class="lineno"> 2116</span>&#160;  <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(DominateeNum != 0 &amp;&amp; <span class="stringliteral">&quot;Block was not numbered properly&quot;</span>);</div><div class="line"><a name="l02117"></a><span class="lineno"> 2117</span>&#160;  <span class="keywordflow">return</span> DominatorNum &lt; DominateeNum;</div><div class="line"><a name="l02118"></a><span class="lineno"> 2118</span>&#160;}</div><div class="line"><a name="l02119"></a><span class="lineno"> 2119</span>&#160;</div><div class="line"><a name="l02120"></a><span class="lineno"><a class="line" href="classllvm_1_1MemorySSA.html#a56004f54560e9950f6eb148cb5dfa0a3"> 2120</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="classllvm_1_1MemorySSA.html#a56004f54560e9950f6eb148cb5dfa0a3">MemorySSA::dominates</a>(<span class="keyword">const</span> <a class="code" href="classllvm_1_1MemoryAccess.html">MemoryAccess</a> *Dominator,</div><div class="line"><a name="l02121"></a><span class="lineno"> 2121</span>&#160;                          <span class="keyword">const</span> <a class="code" href="classllvm_1_1MemoryAccess.html">MemoryAccess</a> *Dominatee)<span class="keyword"> const </span>{</div><div class="line"><a name="l02122"></a><span class="lineno"> 2122</span>&#160;  <span class="keywordflow">if</span> (Dominator == Dominatee)</div><div class="line"><a name="l02123"></a><span class="lineno"> 2123</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div><div class="line"><a name="l02124"></a><span class="lineno"> 2124</span>&#160;</div><div class="line"><a name="l02125"></a><span class="lineno"> 2125</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1MemorySSA.html#ae3b89ffde42778289bcbd8a187199420">isLiveOnEntryDef</a>(Dominatee))</div><div class="line"><a name="l02126"></a><span class="lineno"> 2126</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div><div class="line"><a name="l02127"></a><span class="lineno"> 2127</span>&#160;</div><div class="line"><a name="l02128"></a><span class="lineno"> 2128</span>&#160;  <span class="keywordflow">if</span> (Dominator-&gt;<a class="code" href="classllvm_1_1MemoryAccess.html#aa468ad3fa68bdf6703c391deaec97706">getBlock</a>() != Dominatee-&gt;<a class="code" href="classllvm_1_1MemoryAccess.html#aa468ad3fa68bdf6703c391deaec97706">getBlock</a>())</div><div class="line"><a name="l02129"></a><span class="lineno"> 2129</span>&#160;    <span class="keywordflow">return</span> DT-&gt;dominates(Dominator-&gt;<a class="code" href="classllvm_1_1MemoryAccess.html#aa468ad3fa68bdf6703c391deaec97706">getBlock</a>(), Dominatee-&gt;<a class="code" href="classllvm_1_1MemoryAccess.html#aa468ad3fa68bdf6703c391deaec97706">getBlock</a>());</div><div class="line"><a name="l02130"></a><span class="lineno"> 2130</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1MemorySSA.html#ade88aedcbd2b55711000cf3e36c0fc91">locallyDominates</a>(Dominator, Dominatee);</div><div class="line"><a name="l02131"></a><span class="lineno"> 2131</span>&#160;}</div><div class="line"><a name="l02132"></a><span class="lineno"> 2132</span>&#160;</div><div class="line"><a name="l02133"></a><span class="lineno"><a class="line" href="classllvm_1_1MemorySSA.html#a4e92272bbf0049770569394d4956918b"> 2133</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="classllvm_1_1MemorySSA.html#a56004f54560e9950f6eb148cb5dfa0a3">MemorySSA::dominates</a>(<span class="keyword">const</span> <a class="code" href="classllvm_1_1MemoryAccess.html">MemoryAccess</a> *Dominator,</div><div class="line"><a name="l02134"></a><span class="lineno"> 2134</span>&#160;                          <span class="keyword">const</span> Use &amp;Dominatee)<span class="keyword"> const </span>{</div><div class="line"><a name="l02135"></a><span class="lineno"> 2135</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1MemoryPhi.html">MemoryPhi</a> *MP = dyn_cast&lt;MemoryPhi&gt;(Dominatee.<a class="code" href="classllvm_1_1Use.html#a00a4c7708e339cd3e5f0c0804e3f6c6c">getUser</a>())) {</div><div class="line"><a name="l02136"></a><span class="lineno"> 2136</span>&#160;    <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *UseBB = MP-&gt;getIncomingBlock(Dominatee);</div><div class="line"><a name="l02137"></a><span class="lineno"> 2137</span>&#160;    <span class="comment">// The def must dominate the incoming block of the phi.</span></div><div class="line"><a name="l02138"></a><span class="lineno"> 2138</span>&#160;    <span class="keywordflow">if</span> (UseBB != Dominator-&gt;<a class="code" href="classllvm_1_1MemoryAccess.html#aa468ad3fa68bdf6703c391deaec97706">getBlock</a>())</div><div class="line"><a name="l02139"></a><span class="lineno"> 2139</span>&#160;      <span class="keywordflow">return</span> DT-&gt;dominates(Dominator-&gt;<a class="code" href="classllvm_1_1MemoryAccess.html#aa468ad3fa68bdf6703c391deaec97706">getBlock</a>(), UseBB);</div><div class="line"><a name="l02140"></a><span class="lineno"> 2140</span>&#160;    <span class="comment">// If the UseBB and the DefBB are the same, compare locally.</span></div><div class="line"><a name="l02141"></a><span class="lineno"> 2141</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1MemorySSA.html#ade88aedcbd2b55711000cf3e36c0fc91">locallyDominates</a>(Dominator, cast&lt;MemoryAccess&gt;(Dominatee));</div><div class="line"><a name="l02142"></a><span class="lineno"> 2142</span>&#160;  }</div><div class="line"><a name="l02143"></a><span class="lineno"> 2143</span>&#160;  <span class="comment">// If it&#39;s not a PHI node use, the normal dominates can already handle it.</span></div><div class="line"><a name="l02144"></a><span class="lineno"> 2144</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1MemorySSA.html#a56004f54560e9950f6eb148cb5dfa0a3">dominates</a>(Dominator, cast&lt;MemoryAccess&gt;(Dominatee.<a class="code" href="classllvm_1_1Use.html#a00a4c7708e339cd3e5f0c0804e3f6c6c">getUser</a>()));</div><div class="line"><a name="l02145"></a><span class="lineno"> 2145</span>&#160;}</div><div class="line"><a name="l02146"></a><span class="lineno"> 2146</span>&#160;</div><div class="line"><a name="l02147"></a><span class="lineno"><a class="line" href="MemorySSA_8cpp.html#a8aaaadac0fbf35eddf397de5636f75e7"> 2147</a></span>&#160;<span class="keyword">const</span> <span class="keyword">static</span> <span class="keywordtype">char</span> <a class="code" href="MemorySSA_8cpp.html#a8aaaadac0fbf35eddf397de5636f75e7">LiveOnEntryStr</a>[] = <span class="stringliteral">&quot;liveOnEntry&quot;</span>;</div><div class="line"><a name="l02148"></a><span class="lineno"> 2148</span>&#160;</div><div class="line"><a name="l02149"></a><span class="lineno"><a class="line" href="classllvm_1_1MemoryAccess.html#aadff5eaae30623b4077b9dec90f29dcf"> 2149</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classllvm_1_1MemoryAccess.html#aadff5eaae30623b4077b9dec90f29dcf">MemoryAccess::print</a>(<a class="code" href="classllvm_1_1raw__ostream.html">raw_ostream</a> &amp;OS)<span class="keyword"> const </span>{</div><div class="line"><a name="l02150"></a><span class="lineno"> 2150</span>&#160;  <span class="keywordflow">switch</span> (getValueID()) {</div><div class="line"><a name="l02151"></a><span class="lineno"> 2151</span>&#160;  <span class="keywordflow">case</span> MemoryPhiVal: <span class="keywordflow">return</span> <span class="keyword">static_cast&lt;</span><span class="keyword">const </span><a class="code" href="classllvm_1_1MemoryPhi.html">MemoryPhi</a> *<span class="keyword">&gt;</span>(<span class="keyword">this</span>)-&gt;<a class="code" href="classllvm_1_1MemorySSA.html#afa9b4a650e1a6de2061538a19be3a234">print</a>(OS);</div><div class="line"><a name="l02152"></a><span class="lineno"> 2152</span>&#160;  <span class="keywordflow">case</span> MemoryDefVal: <span class="keywordflow">return</span> <span class="keyword">static_cast&lt;</span><span class="keyword">const </span><a class="code" href="classllvm_1_1MemoryDef.html">MemoryDef</a> *<span class="keyword">&gt;</span>(<span class="keyword">this</span>)-&gt;<a class="code" href="classllvm_1_1MemorySSA.html#afa9b4a650e1a6de2061538a19be3a234">print</a>(OS);</div><div class="line"><a name="l02153"></a><span class="lineno"> 2153</span>&#160;  <span class="keywordflow">case</span> MemoryUseVal: <span class="keywordflow">return</span> <span class="keyword">static_cast&lt;</span><span class="keyword">const </span><a class="code" href="classllvm_1_1MemoryUse.html">MemoryUse</a> *<span class="keyword">&gt;</span>(<span class="keyword">this</span>)-&gt;<a class="code" href="classllvm_1_1MemorySSA.html#afa9b4a650e1a6de2061538a19be3a234">print</a>(OS);</div><div class="line"><a name="l02154"></a><span class="lineno"> 2154</span>&#160;  }</div><div class="line"><a name="l02155"></a><span class="lineno"> 2155</span>&#160;  <a class="code" href="Support_2ErrorHandling_8h.html#ace243f5c25697a1107cce46626b3dc94">llvm_unreachable</a>(<span class="stringliteral">&quot;invalid value id&quot;</span>);</div><div class="line"><a name="l02156"></a><span class="lineno"> 2156</span>&#160;}</div><div class="line"><a name="l02157"></a><span class="lineno"> 2157</span>&#160;</div><div class="line"><a name="l02158"></a><span class="lineno"><a class="line" href="classllvm_1_1MemoryDef.html#a09f277b48a8bdfb5edf85ba468537141"> 2158</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classllvm_1_1MemoryDef.html#a09f277b48a8bdfb5edf85ba468537141">MemoryDef::print</a>(<a class="code" href="classllvm_1_1raw__ostream.html">raw_ostream</a> &amp;OS)<span class="keyword"> const </span>{</div><div class="line"><a name="l02159"></a><span class="lineno"> 2159</span>&#160;  <a class="code" href="classllvm_1_1MemoryAccess.html">MemoryAccess</a> *UO = getDefiningAccess();</div><div class="line"><a name="l02160"></a><span class="lineno"> 2160</span>&#160;</div><div class="line"><a name="l02161"></a><span class="lineno"> 2161</span>&#160;  <span class="keyword">auto</span> printID = [&amp;OS](<a class="code" href="classllvm_1_1MemoryAccess.html">MemoryAccess</a> *A) {</div><div class="line"><a name="l02162"></a><span class="lineno"> 2162</span>&#160;    <span class="keywordflow">if</span> (A &amp;&amp; A-&gt;getID())</div><div class="line"><a name="l02163"></a><span class="lineno"> 2163</span>&#160;      OS &lt;&lt; A-&gt;getID();</div><div class="line"><a name="l02164"></a><span class="lineno"> 2164</span>&#160;    <span class="keywordflow">else</span></div><div class="line"><a name="l02165"></a><span class="lineno"> 2165</span>&#160;      OS &lt;&lt; <a class="code" href="MemorySSA_8cpp.html#a8aaaadac0fbf35eddf397de5636f75e7">LiveOnEntryStr</a>;</div><div class="line"><a name="l02166"></a><span class="lineno"> 2166</span>&#160;  };</div><div class="line"><a name="l02167"></a><span class="lineno"> 2167</span>&#160;</div><div class="line"><a name="l02168"></a><span class="lineno"> 2168</span>&#160;  OS &lt;&lt; getID() &lt;&lt; <span class="stringliteral">&quot; = MemoryDef(&quot;</span>;</div><div class="line"><a name="l02169"></a><span class="lineno"> 2169</span>&#160;  printID(UO);</div><div class="line"><a name="l02170"></a><span class="lineno"> 2170</span>&#160;  OS &lt;&lt; <span class="stringliteral">&quot;)&quot;</span>;</div><div class="line"><a name="l02171"></a><span class="lineno"> 2171</span>&#160;</div><div class="line"><a name="l02172"></a><span class="lineno"> 2172</span>&#160;  <span class="keywordflow">if</span> (isOptimized()) {</div><div class="line"><a name="l02173"></a><span class="lineno"> 2173</span>&#160;    OS &lt;&lt; <span class="stringliteral">&quot;-&gt;&quot;</span>;</div><div class="line"><a name="l02174"></a><span class="lineno"> 2174</span>&#160;    printID(getOptimized());</div><div class="line"><a name="l02175"></a><span class="lineno"> 2175</span>&#160;</div><div class="line"><a name="l02176"></a><span class="lineno"> 2176</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1Optional.html">Optional&lt;AliasResult&gt;</a> AR = getOptimizedAccessType())</div><div class="line"><a name="l02177"></a><span class="lineno"> 2177</span>&#160;      OS &lt;&lt; <span class="stringliteral">&quot; &quot;</span> &lt;&lt; *AR;</div><div class="line"><a name="l02178"></a><span class="lineno"> 2178</span>&#160;  }</div><div class="line"><a name="l02179"></a><span class="lineno"> 2179</span>&#160;}</div><div class="line"><a name="l02180"></a><span class="lineno"> 2180</span>&#160;</div><div class="line"><a name="l02181"></a><span class="lineno"><a class="line" href="classllvm_1_1MemoryPhi.html#ad75b48c94bacfc6a1d166164bd51af8b"> 2181</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classllvm_1_1MemoryPhi.html#ad75b48c94bacfc6a1d166164bd51af8b">MemoryPhi::print</a>(<a class="code" href="classllvm_1_1raw__ostream.html">raw_ostream</a> &amp;OS)<span class="keyword"> const </span>{</div><div class="line"><a name="l02182"></a><span class="lineno"> 2182</span>&#160;  <span class="keywordtype">bool</span> First = <span class="keyword">true</span>;</div><div class="line"><a name="l02183"></a><span class="lineno"> 2183</span>&#160;  OS &lt;&lt; getID() &lt;&lt; <span class="stringliteral">&quot; = MemoryPhi(&quot;</span>;</div><div class="line"><a name="l02184"></a><span class="lineno"> 2184</span>&#160;  <span class="keywordflow">for</span> (<span class="keyword">const</span> <span class="keyword">auto</span> &amp;<a class="code" href="namespacellvm_1_1AMDGPU_1_1SendMsg.html#a8594419a4ddfad2c9a79279c490e466d">Op</a> : operands()) {</div><div class="line"><a name="l02185"></a><span class="lineno"> 2185</span>&#160;    <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *BB = getIncomingBlock(<a class="code" href="namespacellvm_1_1AMDGPU_1_1SendMsg.html#a8594419a4ddfad2c9a79279c490e466d">Op</a>);</div><div class="line"><a name="l02186"></a><span class="lineno"> 2186</span>&#160;    <a class="code" href="classllvm_1_1MemoryAccess.html">MemoryAccess</a> *MA = cast&lt;MemoryAccess&gt;(<a class="code" href="namespacellvm_1_1AMDGPU_1_1SendMsg.html#a8594419a4ddfad2c9a79279c490e466d">Op</a>);</div><div class="line"><a name="l02187"></a><span class="lineno"> 2187</span>&#160;    <span class="keywordflow">if</span> (!First)</div><div class="line"><a name="l02188"></a><span class="lineno"> 2188</span>&#160;      OS &lt;&lt; <span class="charliteral">&#39;,&#39;</span>;</div><div class="line"><a name="l02189"></a><span class="lineno"> 2189</span>&#160;    <span class="keywordflow">else</span></div><div class="line"><a name="l02190"></a><span class="lineno"> 2190</span>&#160;      First = <span class="keyword">false</span>;</div><div class="line"><a name="l02191"></a><span class="lineno"> 2191</span>&#160;</div><div class="line"><a name="l02192"></a><span class="lineno"> 2192</span>&#160;    OS &lt;&lt; <span class="charliteral">&#39;{&#39;</span>;</div><div class="line"><a name="l02193"></a><span class="lineno"> 2193</span>&#160;    <span class="keywordflow">if</span> (BB-&gt;<a class="code" href="classllvm_1_1Value.html#ad9d88ae321b98d8a3b7f394977ae6d7f">hasName</a>())</div><div class="line"><a name="l02194"></a><span class="lineno"> 2194</span>&#160;      OS &lt;&lt; BB-&gt;<a class="code" href="classllvm_1_1Value.html#adb5c319f5905c1d3ca9eb5df546388c5">getName</a>();</div><div class="line"><a name="l02195"></a><span class="lineno"> 2195</span>&#160;    <span class="keywordflow">else</span></div><div class="line"><a name="l02196"></a><span class="lineno"> 2196</span>&#160;      BB-&gt;<a class="code" href="classllvm_1_1Value.html#a62213d5211c9d944e5ede1f0059a6ae2">printAsOperand</a>(OS, <span class="keyword">false</span>);</div><div class="line"><a name="l02197"></a><span class="lineno"> 2197</span>&#160;    OS &lt;&lt; <span class="charliteral">&#39;,&#39;</span>;</div><div class="line"><a name="l02198"></a><span class="lineno"> 2198</span>&#160;    <span class="keywordflow">if</span> (<span class="keywordtype">unsigned</span> <a class="code" href="namespacellvm_1_1Intrinsic.html#a80add6b3b1cdaec560907995127adc16">ID</a> = MA-&gt;<a class="code" href="classllvm_1_1MemoryAccess.html#ab3a9d1e32d4473460c83d5db60bd0d8b">getID</a>())</div><div class="line"><a name="l02199"></a><span class="lineno"> 2199</span>&#160;      OS &lt;&lt; <a class="code" href="namespacellvm_1_1Intrinsic.html#a80add6b3b1cdaec560907995127adc16">ID</a>;</div><div class="line"><a name="l02200"></a><span class="lineno"> 2200</span>&#160;    <span class="keywordflow">else</span></div><div class="line"><a name="l02201"></a><span class="lineno"> 2201</span>&#160;      OS &lt;&lt; <a class="code" href="MemorySSA_8cpp.html#a8aaaadac0fbf35eddf397de5636f75e7">LiveOnEntryStr</a>;</div><div class="line"><a name="l02202"></a><span class="lineno"> 2202</span>&#160;    OS &lt;&lt; <span class="charliteral">&#39;}&#39;</span>;</div><div class="line"><a name="l02203"></a><span class="lineno"> 2203</span>&#160;  }</div><div class="line"><a name="l02204"></a><span class="lineno"> 2204</span>&#160;  OS &lt;&lt; <span class="charliteral">&#39;)&#39;</span>;</div><div class="line"><a name="l02205"></a><span class="lineno"> 2205</span>&#160;}</div><div class="line"><a name="l02206"></a><span class="lineno"> 2206</span>&#160;</div><div class="line"><a name="l02207"></a><span class="lineno"><a class="line" href="classllvm_1_1MemoryUse.html#a39bac19197190015e13adba7ddb9db2f"> 2207</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classllvm_1_1MemoryUse.html#a39bac19197190015e13adba7ddb9db2f">MemoryUse::print</a>(<a class="code" href="classllvm_1_1raw__ostream.html">raw_ostream</a> &amp;OS)<span class="keyword"> const </span>{</div><div class="line"><a name="l02208"></a><span class="lineno"> 2208</span>&#160;  <a class="code" href="classllvm_1_1MemoryAccess.html">MemoryAccess</a> *UO = getDefiningAccess();</div><div class="line"><a name="l02209"></a><span class="lineno"> 2209</span>&#160;  OS &lt;&lt; <span class="stringliteral">&quot;MemoryUse(&quot;</span>;</div><div class="line"><a name="l02210"></a><span class="lineno"> 2210</span>&#160;  <span class="keywordflow">if</span> (UO &amp;&amp; UO-&gt;<a class="code" href="classllvm_1_1MemoryAccess.html#ab3a9d1e32d4473460c83d5db60bd0d8b">getID</a>())</div><div class="line"><a name="l02211"></a><span class="lineno"> 2211</span>&#160;    OS &lt;&lt; UO-&gt;<a class="code" href="classllvm_1_1MemoryAccess.html#ab3a9d1e32d4473460c83d5db60bd0d8b">getID</a>();</div><div class="line"><a name="l02212"></a><span class="lineno"> 2212</span>&#160;  <span class="keywordflow">else</span></div><div class="line"><a name="l02213"></a><span class="lineno"> 2213</span>&#160;    OS &lt;&lt; <a class="code" href="MemorySSA_8cpp.html#a8aaaadac0fbf35eddf397de5636f75e7">LiveOnEntryStr</a>;</div><div class="line"><a name="l02214"></a><span class="lineno"> 2214</span>&#160;  OS &lt;&lt; <span class="charliteral">&#39;)&#39;</span>;</div><div class="line"><a name="l02215"></a><span class="lineno"> 2215</span>&#160;</div><div class="line"><a name="l02216"></a><span class="lineno"> 2216</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1Optional.html">Optional&lt;AliasResult&gt;</a> AR = getOptimizedAccessType())</div><div class="line"><a name="l02217"></a><span class="lineno"> 2217</span>&#160;    OS &lt;&lt; <span class="stringliteral">&quot; &quot;</span> &lt;&lt; *AR;</div><div class="line"><a name="l02218"></a><span class="lineno"> 2218</span>&#160;}</div><div class="line"><a name="l02219"></a><span class="lineno"> 2219</span>&#160;</div><div class="line"><a name="l02220"></a><span class="lineno"><a class="line" href="classllvm_1_1MemoryAccess.html#a0323cfb2d9032e14069108390831f5b7"> 2220</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classllvm_1_1MemoryAccess.html#a0323cfb2d9032e14069108390831f5b7">MemoryAccess::dump</a>()<span class="keyword"> const </span>{</div><div class="line"><a name="l02221"></a><span class="lineno"> 2221</span>&#160;<span class="comment">// Cannot completely remove virtual function even in release mode.</span></div><div class="line"><a name="l02222"></a><span class="lineno"> 2222</span>&#160;<span class="preprocessor">#if !defined(NDEBUG) || defined(LLVM_ENABLE_DUMP)</span></div><div class="line"><a name="l02223"></a><span class="lineno"> 2223</span>&#160;  <a class="code" href="classllvm_1_1MemorySSA.html#afa9b4a650e1a6de2061538a19be3a234">print</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>());</div><div class="line"><a name="l02224"></a><span class="lineno"> 2224</span>&#160;  <a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;\n&quot;</span>;</div><div class="line"><a name="l02225"></a><span class="lineno"> 2225</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l02226"></a><span class="lineno"> 2226</span>&#160;}</div><div class="line"><a name="l02227"></a><span class="lineno"> 2227</span>&#160;</div><div class="line"><a name="l02228"></a><span class="lineno"> 2228</span>&#160;<span class="keywordtype">char</span> <a class="code" href="classllvm_1_1MemorySSAPrinterLegacyPass.html#ae168ddebaf2036d7c0aec6d953753d75">MemorySSAPrinterLegacyPass::ID</a> = 0;</div><div class="line"><a name="l02229"></a><span class="lineno"> 2229</span>&#160;</div><div class="line"><a name="l02230"></a><span class="lineno"><a class="line" href="classllvm_1_1MemorySSAPrinterLegacyPass.html#a7fd32d6e21b99950b61963e1a7a26f13"> 2230</a></span>&#160;<a class="code" href="classllvm_1_1MemorySSAPrinterLegacyPass.html#a7fd32d6e21b99950b61963e1a7a26f13">MemorySSAPrinterLegacyPass::MemorySSAPrinterLegacyPass</a>() : <a class="code" href="classllvm_1_1FunctionPass.html">FunctionPass</a>(<a class="code" href="namespacellvm_1_1Intrinsic.html#a80add6b3b1cdaec560907995127adc16">ID</a>) {</div><div class="line"><a name="l02231"></a><span class="lineno"> 2231</span>&#160;  <a class="code" href="namespacellvm.html#a1255776be971ababbd9e5790cc56eb33">initializeMemorySSAPrinterLegacyPassPass</a>(*<a class="code" href="classllvm_1_1PassRegistry.html#a05a729900b76c89e808c6c3094921b2f">PassRegistry::getPassRegistry</a>());</div><div class="line"><a name="l02232"></a><span class="lineno"> 2232</span>&#160;}</div><div class="line"><a name="l02233"></a><span class="lineno"> 2233</span>&#160;</div><div class="line"><a name="l02234"></a><span class="lineno"><a class="line" href="classllvm_1_1MemorySSAPrinterLegacyPass.html#ae2bdb6f1c51c03cc2bb47f1af18667a5"> 2234</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classllvm_1_1MemorySSAPrinterLegacyPass.html#ae2bdb6f1c51c03cc2bb47f1af18667a5">MemorySSAPrinterLegacyPass::getAnalysisUsage</a>(<a class="code" href="classllvm_1_1AnalysisUsage.html">AnalysisUsage</a> &amp;AU)<span class="keyword"> const </span>{</div><div class="line"><a name="l02235"></a><span class="lineno"> 2235</span>&#160;  AU.<a class="code" href="classllvm_1_1AnalysisUsage.html#af22b06a6a4f9df80454071685a0d6a02">setPreservesAll</a>();</div><div class="line"><a name="l02236"></a><span class="lineno"> 2236</span>&#160;  AU.<a class="code" href="classllvm_1_1AnalysisUsage.html#ae5c60fd282ee894c87ea02c3f0fcb6d0">addRequired</a>&lt;MemorySSAWrapperPass&gt;();</div><div class="line"><a name="l02237"></a><span class="lineno"> 2237</span>&#160;}</div><div class="line"><a name="l02238"></a><span class="lineno"> 2238</span>&#160;</div><div class="line"><a name="l02239"></a><span class="lineno"><a class="line" href="classllvm_1_1MemorySSAPrinterLegacyPass.html#aaf05971d64f8cc042d8ca50995508fb5"> 2239</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="classllvm_1_1MemorySSAPrinterLegacyPass.html#aaf05971d64f8cc042d8ca50995508fb5">MemorySSAPrinterLegacyPass::runOnFunction</a>(<a class="code" href="classllvm_1_1Function.html">Function</a> &amp;<a class="code" href="LLParser_8cpp.html#a33ece1ef8074506a15d7f86eb76dbae6">F</a>) {</div><div class="line"><a name="l02240"></a><span class="lineno"> 2240</span>&#160;  <span class="keyword">auto</span> &amp;MSSA = getAnalysis&lt;MemorySSAWrapperPass&gt;().getMSSA();</div><div class="line"><a name="l02241"></a><span class="lineno"> 2241</span>&#160;  MSSA.print(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>());</div><div class="line"><a name="l02242"></a><span class="lineno"> 2242</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="namespacellvm.html#aa29fe161c408879ada30c90ebbf55dcf">VerifyMemorySSA</a>)</div><div class="line"><a name="l02243"></a><span class="lineno"> 2243</span>&#160;    MSSA.verifyMemorySSA();</div><div class="line"><a name="l02244"></a><span class="lineno"> 2244</span>&#160;  <span class="keywordflow">return</span> <span class="keyword">false</span>;</div><div class="line"><a name="l02245"></a><span class="lineno"> 2245</span>&#160;}</div><div class="line"><a name="l02246"></a><span class="lineno"> 2246</span>&#160;</div><div class="line"><a name="l02247"></a><span class="lineno"> 2247</span>&#160;<a class="code" href="structllvm_1_1AnalysisKey.html">AnalysisKey</a> MemorySSAAnalysis::Key;</div><div class="line"><a name="l02248"></a><span class="lineno"> 2248</span>&#160;</div><div class="line"><a name="l02249"></a><span class="lineno"><a class="line" href="classllvm_1_1MemorySSAAnalysis.html#a0edf62c9bbb9566682c697dfb8fb2ed5"> 2249</a></span>&#160;<a class="code" href="structllvm_1_1MemorySSAAnalysis_1_1Result.html">MemorySSAAnalysis::Result</a> <a class="code" href="classllvm_1_1MemorySSAAnalysis.html#a0edf62c9bbb9566682c697dfb8fb2ed5">MemorySSAAnalysis::run</a>(<a class="code" href="classllvm_1_1Function.html">Function</a> &amp;<a class="code" href="LLParser_8cpp.html#a33ece1ef8074506a15d7f86eb76dbae6">F</a>,</div><div class="line"><a name="l02250"></a><span class="lineno"> 2250</span>&#160;                                                 <a class="code" href="classllvm_1_1AnalysisManager.html">FunctionAnalysisManager</a> &amp;AM) {</div><div class="line"><a name="l02251"></a><span class="lineno"> 2251</span>&#160;  <span class="keyword">auto</span> &amp;DT = AM.<a class="code" href="classllvm_1_1AnalysisManager.html#ab9d3d5412c20747fd0110a046604f09a">getResult</a>&lt;<a class="code" href="classllvm_1_1DominatorTreeAnalysis.html">DominatorTreeAnalysis</a>&gt;(<a class="code" href="LLParser_8cpp.html#a33ece1ef8074506a15d7f86eb76dbae6">F</a>);</div><div class="line"><a name="l02252"></a><span class="lineno"> 2252</span>&#160;  <span class="keyword">auto</span> &amp;AA = AM.<a class="code" href="classllvm_1_1AnalysisManager.html#ab9d3d5412c20747fd0110a046604f09a">getResult</a>&lt;<a class="code" href="classllvm_1_1AAManager.html">AAManager</a>&gt;(<a class="code" href="LLParser_8cpp.html#a33ece1ef8074506a15d7f86eb76dbae6">F</a>);</div><div class="line"><a name="l02253"></a><span class="lineno"> 2253</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="structllvm_1_1MemorySSAAnalysis_1_1Result.html">MemorySSAAnalysis::Result</a>(std::make_unique&lt;MemorySSA&gt;(F, &amp;AA, &amp;DT));</div><div class="line"><a name="l02254"></a><span class="lineno"> 2254</span>&#160;}</div><div class="line"><a name="l02255"></a><span class="lineno"> 2255</span>&#160;</div><div class="line"><a name="l02256"></a><span class="lineno"><a class="line" href="structllvm_1_1MemorySSAAnalysis_1_1Result.html#aa7ef622a6a2b5d83ccd6b06a42f0ba48"> 2256</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="structllvm_1_1MemorySSAAnalysis_1_1Result.html#aa7ef622a6a2b5d83ccd6b06a42f0ba48">MemorySSAAnalysis::Result::invalidate</a>(</div><div class="line"><a name="l02257"></a><span class="lineno"> 2257</span>&#160;    <a class="code" href="classllvm_1_1Function.html">Function</a> &amp;<a class="code" href="LLParser_8cpp.html#a33ece1ef8074506a15d7f86eb76dbae6">F</a>, <span class="keyword">const</span> <a class="code" href="classllvm_1_1PreservedAnalyses.html">PreservedAnalyses</a> &amp;PA,</div><div class="line"><a name="l02258"></a><span class="lineno"> 2258</span>&#160;    <a class="code" href="classllvm_1_1AnalysisManager_1_1Invalidator.html">FunctionAnalysisManager::Invalidator</a> &amp;Inv) {</div><div class="line"><a name="l02259"></a><span class="lineno"> 2259</span>&#160;  <span class="keyword">auto</span> PAC = PA.<a class="code" href="classllvm_1_1PreservedAnalyses.html#aa7a1b769f9c57010cc41d9c3bb9d39c6">getChecker</a>&lt;<a class="code" href="classllvm_1_1MemorySSAAnalysis.html">MemorySSAAnalysis</a>&gt;();</div><div class="line"><a name="l02260"></a><span class="lineno"> 2260</span>&#160;  <span class="keywordflow">return</span> !(PAC.preserved() || PAC.preservedSet&lt;<a class="code" href="classllvm_1_1AllAnalysesOn.html">AllAnalysesOn&lt;Function&gt;</a>&gt;()) ||</div><div class="line"><a name="l02261"></a><span class="lineno"> 2261</span>&#160;         Inv.<a class="code" href="classllvm_1_1AnalysisManager_1_1Invalidator.html#a5e8e9230fa677542877d1f3c6ff95ae2">invalidate</a>&lt;<a class="code" href="classllvm_1_1AAManager.html">AAManager</a>&gt;(<a class="code" href="LLParser_8cpp.html#a33ece1ef8074506a15d7f86eb76dbae6">F</a>, PA) ||</div><div class="line"><a name="l02262"></a><span class="lineno"> 2262</span>&#160;         Inv.<a class="code" href="classllvm_1_1AnalysisManager_1_1Invalidator.html#a5e8e9230fa677542877d1f3c6ff95ae2">invalidate</a>&lt;<a class="code" href="classllvm_1_1DominatorTreeAnalysis.html">DominatorTreeAnalysis</a>&gt;(F, PA);</div><div class="line"><a name="l02263"></a><span class="lineno"> 2263</span>&#160;}</div><div class="line"><a name="l02264"></a><span class="lineno"> 2264</span>&#160;</div><div class="line"><a name="l02265"></a><span class="lineno"><a class="line" href="classllvm_1_1MemorySSAPrinterPass.html#ab228481c477a8f642742650e2f03c231"> 2265</a></span>&#160;<a class="code" href="classllvm_1_1PreservedAnalyses.html">PreservedAnalyses</a> <a class="code" href="classllvm_1_1MemorySSAPrinterPass.html#ab228481c477a8f642742650e2f03c231">MemorySSAPrinterPass::run</a>(<a class="code" href="classllvm_1_1Function.html">Function</a> &amp;<a class="code" href="LLParser_8cpp.html#a33ece1ef8074506a15d7f86eb76dbae6">F</a>,</div><div class="line"><a name="l02266"></a><span class="lineno"> 2266</span>&#160;                                            <a class="code" href="classllvm_1_1AnalysisManager.html">FunctionAnalysisManager</a> &amp;AM) {</div><div class="line"><a name="l02267"></a><span class="lineno"> 2267</span>&#160;  OS &lt;&lt; <span class="stringliteral">&quot;MemorySSA for function: &quot;</span> &lt;&lt; F.<a class="code" href="classllvm_1_1Value.html#adb5c319f5905c1d3ca9eb5df546388c5">getName</a>() &lt;&lt; <span class="stringliteral">&quot;\n&quot;</span>;</div><div class="line"><a name="l02268"></a><span class="lineno"> 2268</span>&#160;  AM.<a class="code" href="classllvm_1_1AnalysisManager.html#ab9d3d5412c20747fd0110a046604f09a">getResult</a>&lt;<a class="code" href="classllvm_1_1MemorySSAAnalysis.html">MemorySSAAnalysis</a>&gt;(<a class="code" href="LLParser_8cpp.html#a33ece1ef8074506a15d7f86eb76dbae6">F</a>).getMSSA().print(OS);</div><div class="line"><a name="l02269"></a><span class="lineno"> 2269</span>&#160;</div><div class="line"><a name="l02270"></a><span class="lineno"> 2270</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1PreservedAnalyses.html#a1258a1ff55557c27684010ebd7283712">PreservedAnalyses::all</a>();</div><div class="line"><a name="l02271"></a><span class="lineno"> 2271</span>&#160;}</div><div class="line"><a name="l02272"></a><span class="lineno"> 2272</span>&#160;</div><div class="line"><a name="l02273"></a><span class="lineno"><a class="line" href="structllvm_1_1MemorySSAVerifierPass.html#a5fa2dbea1ad6cf5950da7d2a642a73bd"> 2273</a></span>&#160;<a class="code" href="classllvm_1_1PreservedAnalyses.html">PreservedAnalyses</a> <a class="code" href="structllvm_1_1MemorySSAVerifierPass.html#a5fa2dbea1ad6cf5950da7d2a642a73bd">MemorySSAVerifierPass::run</a>(<a class="code" href="classllvm_1_1Function.html">Function</a> &amp;<a class="code" href="LLParser_8cpp.html#a33ece1ef8074506a15d7f86eb76dbae6">F</a>,</div><div class="line"><a name="l02274"></a><span class="lineno"> 2274</span>&#160;                                             <a class="code" href="classllvm_1_1AnalysisManager.html">FunctionAnalysisManager</a> &amp;AM) {</div><div class="line"><a name="l02275"></a><span class="lineno"> 2275</span>&#160;  AM.<a class="code" href="classllvm_1_1AnalysisManager.html#ab9d3d5412c20747fd0110a046604f09a">getResult</a>&lt;<a class="code" href="classllvm_1_1MemorySSAAnalysis.html">MemorySSAAnalysis</a>&gt;(<a class="code" href="LLParser_8cpp.html#a33ece1ef8074506a15d7f86eb76dbae6">F</a>).getMSSA().verifyMemorySSA();</div><div class="line"><a name="l02276"></a><span class="lineno"> 2276</span>&#160;</div><div class="line"><a name="l02277"></a><span class="lineno"> 2277</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1PreservedAnalyses.html#a1258a1ff55557c27684010ebd7283712">PreservedAnalyses::all</a>();</div><div class="line"><a name="l02278"></a><span class="lineno"> 2278</span>&#160;}</div><div class="line"><a name="l02279"></a><span class="lineno"> 2279</span>&#160;</div><div class="line"><a name="l02280"></a><span class="lineno"> 2280</span>&#160;<span class="keywordtype">char</span> <a class="code" href="classllvm_1_1MemorySSAWrapperPass.html#ab799aedc9177a0d0ecc04299b48015ab">MemorySSAWrapperPass::ID</a> = 0;</div><div class="line"><a name="l02281"></a><span class="lineno"> 2281</span>&#160;</div><div class="line"><a name="l02282"></a><span class="lineno"><a class="line" href="classllvm_1_1MemorySSAWrapperPass.html#ae3df661a4d028ba1a08c8b243c721663"> 2282</a></span>&#160;<a class="code" href="classllvm_1_1MemorySSAWrapperPass.html#ae3df661a4d028ba1a08c8b243c721663">MemorySSAWrapperPass::MemorySSAWrapperPass</a>() : <a class="code" href="classllvm_1_1FunctionPass.html">FunctionPass</a>(<a class="code" href="classllvm_1_1MemorySSAPrinterLegacyPass.html#ae168ddebaf2036d7c0aec6d953753d75">ID</a>) {</div><div class="line"><a name="l02283"></a><span class="lineno"> 2283</span>&#160;  <a class="code" href="namespacellvm.html#a1b8a8e0fdb91dab1ae030d1fc7df73ea">initializeMemorySSAWrapperPassPass</a>(*<a class="code" href="classllvm_1_1PassRegistry.html#a05a729900b76c89e808c6c3094921b2f">PassRegistry::getPassRegistry</a>());</div><div class="line"><a name="l02284"></a><span class="lineno"> 2284</span>&#160;}</div><div class="line"><a name="l02285"></a><span class="lineno"> 2285</span>&#160;</div><div class="line"><a name="l02286"></a><span class="lineno"><a class="line" href="classllvm_1_1MemorySSAWrapperPass.html#a34629477d192d754033321906b13264e"> 2286</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classllvm_1_1MemorySSAWrapperPass.html#a34629477d192d754033321906b13264e">MemorySSAWrapperPass::releaseMemory</a>() { MSSA.reset(); }</div><div class="line"><a name="l02287"></a><span class="lineno"> 2287</span>&#160;</div><div class="line"><a name="l02288"></a><span class="lineno"><a class="line" href="classllvm_1_1MemorySSAWrapperPass.html#ab9923984766bd759aab387db40458ceb"> 2288</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classllvm_1_1MemorySSAWrapperPass.html#ab9923984766bd759aab387db40458ceb">MemorySSAWrapperPass::getAnalysisUsage</a>(<a class="code" href="classllvm_1_1AnalysisUsage.html">AnalysisUsage</a> &amp;AU)<span class="keyword"> const </span>{</div><div class="line"><a name="l02289"></a><span class="lineno"> 2289</span>&#160;  AU.<a class="code" href="classllvm_1_1AnalysisUsage.html#af22b06a6a4f9df80454071685a0d6a02">setPreservesAll</a>();</div><div class="line"><a name="l02290"></a><span class="lineno"> 2290</span>&#160;  AU.<a class="code" href="classllvm_1_1AnalysisUsage.html#ac12fffcedd4a1c8bf428d694451f816c">addRequiredTransitive</a>&lt;<a class="code" href="classllvm_1_1DominatorTreeWrapperPass.html">DominatorTreeWrapperPass</a>&gt;();</div><div class="line"><a name="l02291"></a><span class="lineno"> 2291</span>&#160;  AU.<a class="code" href="classllvm_1_1AnalysisUsage.html#ac12fffcedd4a1c8bf428d694451f816c">addRequiredTransitive</a>&lt;<a class="code" href="classllvm_1_1AAResultsWrapperPass.html">AAResultsWrapperPass</a>&gt;();</div><div class="line"><a name="l02292"></a><span class="lineno"> 2292</span>&#160;}</div><div class="line"><a name="l02293"></a><span class="lineno"> 2293</span>&#160;</div><div class="line"><a name="l02294"></a><span class="lineno"><a class="line" href="classllvm_1_1MemorySSAWrapperPass.html#a4c858dddb5beb0ab1b09ea1f03befcee"> 2294</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="classllvm_1_1MemorySSAWrapperPass.html#a4c858dddb5beb0ab1b09ea1f03befcee">MemorySSAWrapperPass::runOnFunction</a>(<a class="code" href="classllvm_1_1Function.html">Function</a> &amp;<a class="code" href="LLParser_8cpp.html#a33ece1ef8074506a15d7f86eb76dbae6">F</a>) {</div><div class="line"><a name="l02295"></a><span class="lineno"> 2295</span>&#160;  <span class="keyword">auto</span> &amp;DT = getAnalysis&lt;DominatorTreeWrapperPass&gt;().getDomTree();</div><div class="line"><a name="l02296"></a><span class="lineno"> 2296</span>&#160;  <span class="keyword">auto</span> &amp;AA = getAnalysis&lt;AAResultsWrapperPass&gt;().getAAResults();</div><div class="line"><a name="l02297"></a><span class="lineno"> 2297</span>&#160;  MSSA.reset(<span class="keyword">new</span> <a class="code" href="EarlyCSE_8cpp.html#a8dbb9a70b80f850edc8194bde1b5b305">MemorySSA</a>(F, &amp;AA, &amp;DT));</div><div class="line"><a name="l02298"></a><span class="lineno"> 2298</span>&#160;  <span class="keywordflow">return</span> <span class="keyword">false</span>;</div><div class="line"><a name="l02299"></a><span class="lineno"> 2299</span>&#160;}</div><div class="line"><a name="l02300"></a><span class="lineno"> 2300</span>&#160;</div><div class="line"><a name="l02301"></a><span class="lineno"><a class="line" href="classllvm_1_1MemorySSAWrapperPass.html#a0d649c533f559969a7ffb8291eb63876"> 2301</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classllvm_1_1MemorySSAWrapperPass.html#a0d649c533f559969a7ffb8291eb63876">MemorySSAWrapperPass::verifyAnalysis</a>()<span class="keyword"> const </span>{</div><div class="line"><a name="l02302"></a><span class="lineno"> 2302</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="namespacellvm.html#aa29fe161c408879ada30c90ebbf55dcf">VerifyMemorySSA</a>)</div><div class="line"><a name="l02303"></a><span class="lineno"> 2303</span>&#160;    MSSA-&gt;verifyMemorySSA();</div><div class="line"><a name="l02304"></a><span class="lineno"> 2304</span>&#160;}</div><div class="line"><a name="l02305"></a><span class="lineno"> 2305</span>&#160;</div><div class="line"><a name="l02306"></a><span class="lineno"><a class="line" href="classllvm_1_1MemorySSAWrapperPass.html#adff456f388a9f1fd6e349ecdd58afe56"> 2306</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classllvm_1_1MemorySSAWrapperPass.html#adff456f388a9f1fd6e349ecdd58afe56">MemorySSAWrapperPass::print</a>(<a class="code" href="classllvm_1_1raw__ostream.html">raw_ostream</a> &amp;OS, <span class="keyword">const</span> <a class="code" href="classllvm_1_1Module.html">Module</a> *M)<span class="keyword"> const </span>{</div><div class="line"><a name="l02307"></a><span class="lineno"> 2307</span>&#160;  MSSA-&gt;print(OS);</div><div class="line"><a name="l02308"></a><span class="lineno"> 2308</span>&#160;}</div><div class="line"><a name="l02309"></a><span class="lineno"> 2309</span>&#160;</div><div class="line"><a name="l02310"></a><span class="lineno"><a class="line" href="classllvm_1_1MemorySSAWalker.html#a3cda9987d773268f1db499ac10de10f3"> 2310</a></span>&#160;<a class="code" href="classllvm_1_1MemorySSAWalker.html#a3cda9987d773268f1db499ac10de10f3">MemorySSAWalker::MemorySSAWalker</a>(<a class="code" href="classllvm_1_1MemorySSA.html">MemorySSA</a> *M) : MSSA(M) {}</div><div class="line"><a name="l02311"></a><span class="lineno"> 2311</span>&#160;<span class="comment"></span></div><div class="line"><a name="l02312"></a><span class="lineno"> 2312</span>&#160;<span class="comment">/// Walk the use-def chains starting at \p StartingAccess and find</span></div><div class="line"><a name="l02313"></a><span class="lineno"> 2313</span>&#160;<span class="comment">/// the MemoryAccess that actually clobbers Loc.</span></div><div class="line"><a name="l02314"></a><span class="lineno"> 2314</span>&#160;<span class="comment">///</span></div><div class="line"><a name="l02315"></a><span class="lineno"> 2315</span>&#160;<span class="comment">/// \returns our clobbering memory access</span></div><div class="line"><a name="l02316"></a><span class="lineno"> 2316</span>&#160;<span class="comment"></span><span class="keyword">template</span> &lt;<span class="keyword">typename</span> AliasAnalysisType&gt;</div><div class="line"><a name="l02317"></a><span class="lineno"> 2317</span>&#160;<a class="code" href="classllvm_1_1MemoryAccess.html">MemoryAccess</a> *</div><div class="line"><a name="l02318"></a><span class="lineno"> 2318</span>&#160;MemorySSA::ClobberWalkerBase&lt;AliasAnalysisType&gt;::getClobberingMemoryAccessBase(</div><div class="line"><a name="l02319"></a><span class="lineno"> 2319</span>&#160;    <a class="code" href="classllvm_1_1MemoryAccess.html">MemoryAccess</a> *StartingAccess, <span class="keyword">const</span> <a class="code" href="classllvm_1_1MemoryLocation.html">MemoryLocation</a> &amp;Loc,</div><div class="line"><a name="l02320"></a><span class="lineno"> 2320</span>&#160;    <span class="keywordtype">unsigned</span> &amp;UpwardWalkLimit) {</div><div class="line"><a name="l02321"></a><span class="lineno"> 2321</span>&#160;  <span class="keywordflow">if</span> (isa&lt;MemoryPhi&gt;(StartingAccess))</div><div class="line"><a name="l02322"></a><span class="lineno"> 2322</span>&#160;    <span class="keywordflow">return</span> StartingAccess;</div><div class="line"><a name="l02323"></a><span class="lineno"> 2323</span>&#160;</div><div class="line"><a name="l02324"></a><span class="lineno"> 2324</span>&#160;  <span class="keyword">auto</span> *StartingUseOrDef = cast&lt;MemoryUseOrDef&gt;(StartingAccess);</div><div class="line"><a name="l02325"></a><span class="lineno"> 2325</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1MemorySSAWalker.html#a1c2bda54c0424b0321a4ffbc28e7cd9f">MSSA</a>-&gt;<a class="code" href="classllvm_1_1MemorySSA.html#ae3b89ffde42778289bcbd8a187199420">isLiveOnEntryDef</a>(StartingUseOrDef))</div><div class="line"><a name="l02326"></a><span class="lineno"> 2326</span>&#160;    <span class="keywordflow">return</span> StartingUseOrDef;</div><div class="line"><a name="l02327"></a><span class="lineno"> 2327</span>&#160;</div><div class="line"><a name="l02328"></a><span class="lineno"> 2328</span>&#160;  <a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *I = StartingUseOrDef-&gt;getMemoryInst();</div><div class="line"><a name="l02329"></a><span class="lineno"> 2329</span>&#160;</div><div class="line"><a name="l02330"></a><span class="lineno"> 2330</span>&#160;  <span class="comment">// Conservatively, fences are always clobbers, so don&#39;t perform the walk if we</span></div><div class="line"><a name="l02331"></a><span class="lineno"> 2331</span>&#160;  <span class="comment">// hit a fence.</span></div><div class="line"><a name="l02332"></a><span class="lineno"> 2332</span>&#160;  <span class="keywordflow">if</span> (!isa&lt;CallBase&gt;(I) &amp;&amp; I-&gt;<a class="code" href="classllvm_1_1Instruction.html#aced8559a5380b3759af251428f024c02">isFenceLike</a>())</div><div class="line"><a name="l02333"></a><span class="lineno"> 2333</span>&#160;    <span class="keywordflow">return</span> StartingUseOrDef;</div><div class="line"><a name="l02334"></a><span class="lineno"> 2334</span>&#160;</div><div class="line"><a name="l02335"></a><span class="lineno"> 2335</span>&#160;  UpwardsMemoryQuery Q;</div><div class="line"><a name="l02336"></a><span class="lineno"> 2336</span>&#160;  Q.OriginalAccess = StartingUseOrDef;</div><div class="line"><a name="l02337"></a><span class="lineno"> 2337</span>&#160;  Q.StartingLoc = Loc;</div><div class="line"><a name="l02338"></a><span class="lineno"> 2338</span>&#160;  Q.Inst = <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>;</div><div class="line"><a name="l02339"></a><span class="lineno"> 2339</span>&#160;  Q.IsCall = <span class="keyword">false</span>;</div><div class="line"><a name="l02340"></a><span class="lineno"> 2340</span>&#160;</div><div class="line"><a name="l02341"></a><span class="lineno"> 2341</span>&#160;  <span class="comment">// Unlike the other function, do not walk to the def of a def, because we are</span></div><div class="line"><a name="l02342"></a><span class="lineno"> 2342</span>&#160;  <span class="comment">// handed something we already believe is the clobbering access.</span></div><div class="line"><a name="l02343"></a><span class="lineno"> 2343</span>&#160;  <span class="comment">// We never set SkipSelf to true in Q in this method.</span></div><div class="line"><a name="l02344"></a><span class="lineno"> 2344</span>&#160;  <a class="code" href="classllvm_1_1MemoryAccess.html">MemoryAccess</a> *DefiningAccess = isa&lt;MemoryUse&gt;(StartingUseOrDef)</div><div class="line"><a name="l02345"></a><span class="lineno"> 2345</span>&#160;                                     ? StartingUseOrDef-&gt;getDefiningAccess()</div><div class="line"><a name="l02346"></a><span class="lineno"> 2346</span>&#160;                                     : StartingUseOrDef;</div><div class="line"><a name="l02347"></a><span class="lineno"> 2347</span>&#160;</div><div class="line"><a name="l02348"></a><span class="lineno"> 2348</span>&#160;  <a class="code" href="classllvm_1_1MemoryAccess.html">MemoryAccess</a> *Clobber =</div><div class="line"><a name="l02349"></a><span class="lineno"> 2349</span>&#160;      Walker.findClobber(DefiningAccess, Q, UpwardWalkLimit);</div><div class="line"><a name="l02350"></a><span class="lineno"> 2350</span>&#160;  <a class="code" href="Debug_8h.html#a08efc68d15935eb8889400a46c3749ba">LLVM_DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;Starting Memory SSA clobber for &quot;</span> &lt;&lt; *I &lt;&lt; <span class="stringliteral">&quot; is &quot;</span>);</div><div class="line"><a name="l02351"></a><span class="lineno"> 2351</span>&#160;  <a class="code" href="Debug_8h.html#a08efc68d15935eb8889400a46c3749ba">LLVM_DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; *StartingUseOrDef &lt;&lt; <span class="stringliteral">&quot;\n&quot;</span>);</div><div class="line"><a name="l02352"></a><span class="lineno"> 2352</span>&#160;  <a class="code" href="Debug_8h.html#a08efc68d15935eb8889400a46c3749ba">LLVM_DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;Final Memory SSA clobber for &quot;</span> &lt;&lt; *I &lt;&lt; <span class="stringliteral">&quot; is &quot;</span>);</div><div class="line"><a name="l02353"></a><span class="lineno"> 2353</span>&#160;  <a class="code" href="Debug_8h.html#a08efc68d15935eb8889400a46c3749ba">LLVM_DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; *Clobber &lt;&lt; <span class="stringliteral">&quot;\n&quot;</span>);</div><div class="line"><a name="l02354"></a><span class="lineno"> 2354</span>&#160;  <span class="keywordflow">return</span> Clobber;</div><div class="line"><a name="l02355"></a><span class="lineno"> 2355</span>&#160;}</div><div class="line"><a name="l02356"></a><span class="lineno"> 2356</span>&#160;</div><div class="line"><a name="l02357"></a><span class="lineno"> 2357</span>&#160;<span class="keyword">template</span> &lt;<span class="keyword">typename</span> AliasAnalysisType&gt;</div><div class="line"><a name="l02358"></a><span class="lineno"> 2358</span>&#160;<a class="code" href="classllvm_1_1MemoryAccess.html">MemoryAccess</a> *</div><div class="line"><a name="l02359"></a><span class="lineno"> 2359</span>&#160;MemorySSA::ClobberWalkerBase&lt;AliasAnalysisType&gt;::getClobberingMemoryAccessBase(</div><div class="line"><a name="l02360"></a><span class="lineno"> 2360</span>&#160;    <a class="code" href="classllvm_1_1MemoryAccess.html">MemoryAccess</a> *MA, <span class="keywordtype">unsigned</span> &amp;UpwardWalkLimit, <span class="keywordtype">bool</span> SkipSelf) {</div><div class="line"><a name="l02361"></a><span class="lineno"> 2361</span>&#160;  <span class="keyword">auto</span> *StartingAccess = <a class="code" href="namespacellvm.html#a4db2f71d62968b2be3c4bffc5050d8c7">dyn_cast</a>&lt;<a class="code" href="classllvm_1_1MemoryUseOrDef.html">MemoryUseOrDef</a>&gt;(MA);</div><div class="line"><a name="l02362"></a><span class="lineno"> 2362</span>&#160;  <span class="comment">// If this is a MemoryPhi, we can&#39;t do anything.</span></div><div class="line"><a name="l02363"></a><span class="lineno"> 2363</span>&#160;  <span class="keywordflow">if</span> (!StartingAccess)</div><div class="line"><a name="l02364"></a><span class="lineno"> 2364</span>&#160;    <span class="keywordflow">return</span> MA;</div><div class="line"><a name="l02365"></a><span class="lineno"> 2365</span>&#160;</div><div class="line"><a name="l02366"></a><span class="lineno"> 2366</span>&#160;  <span class="keywordtype">bool</span> IsOptimized = <span class="keyword">false</span>;</div><div class="line"><a name="l02367"></a><span class="lineno"> 2367</span>&#160;</div><div class="line"><a name="l02368"></a><span class="lineno"> 2368</span>&#160;  <span class="comment">// If this is an already optimized use or def, return the optimized result.</span></div><div class="line"><a name="l02369"></a><span class="lineno"> 2369</span>&#160;  <span class="comment">// Note: Currently, we store the optimized def result in a separate field,</span></div><div class="line"><a name="l02370"></a><span class="lineno"> 2370</span>&#160;  <span class="comment">// since we can&#39;t use the defining access.</span></div><div class="line"><a name="l02371"></a><span class="lineno"> 2371</span>&#160;  <span class="keywordflow">if</span> (StartingAccess-&gt;isOptimized()) {</div><div class="line"><a name="l02372"></a><span class="lineno"> 2372</span>&#160;    <span class="keywordflow">if</span> (!SkipSelf || !isa&lt;MemoryDef&gt;(StartingAccess))</div><div class="line"><a name="l02373"></a><span class="lineno"> 2373</span>&#160;      <span class="keywordflow">return</span> StartingAccess-&gt;getOptimized();</div><div class="line"><a name="l02374"></a><span class="lineno"> 2374</span>&#160;    IsOptimized = <span class="keyword">true</span>;</div><div class="line"><a name="l02375"></a><span class="lineno"> 2375</span>&#160;  }</div><div class="line"><a name="l02376"></a><span class="lineno"> 2376</span>&#160;</div><div class="line"><a name="l02377"></a><span class="lineno"> 2377</span>&#160;  <span class="keyword">const</span> <a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *I = StartingAccess-&gt;getMemoryInst();</div><div class="line"><a name="l02378"></a><span class="lineno"> 2378</span>&#160;  <span class="comment">// We can&#39;t sanely do anything with a fence, since they conservatively clobber</span></div><div class="line"><a name="l02379"></a><span class="lineno"> 2379</span>&#160;  <span class="comment">// all memory, and have no locations to get pointers from to try to</span></div><div class="line"><a name="l02380"></a><span class="lineno"> 2380</span>&#160;  <span class="comment">// disambiguate.</span></div><div class="line"><a name="l02381"></a><span class="lineno"> 2381</span>&#160;  <span class="keywordflow">if</span> (!isa&lt;CallBase&gt;(I) &amp;&amp; I-&gt;<a class="code" href="classllvm_1_1Instruction.html#aced8559a5380b3759af251428f024c02">isFenceLike</a>())</div><div class="line"><a name="l02382"></a><span class="lineno"> 2382</span>&#160;    <span class="keywordflow">return</span> StartingAccess;</div><div class="line"><a name="l02383"></a><span class="lineno"> 2383</span>&#160;</div><div class="line"><a name="l02384"></a><span class="lineno"> 2384</span>&#160;  UpwardsMemoryQuery Q(I, StartingAccess);</div><div class="line"><a name="l02385"></a><span class="lineno"> 2385</span>&#160;</div><div class="line"><a name="l02386"></a><span class="lineno"> 2386</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="MemorySSA_8cpp.html#aa7bf9007b34e2a7a16275b1a7d7e3d63">isUseTriviallyOptimizableToLiveOnEntry</a>(*Walker.getAA(), <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>)) {</div><div class="line"><a name="l02387"></a><span class="lineno"> 2387</span>&#160;    <a class="code" href="classllvm_1_1MemoryAccess.html">MemoryAccess</a> *LiveOnEntry = <a class="code" href="classllvm_1_1MemorySSAWalker.html#a1c2bda54c0424b0321a4ffbc28e7cd9f">MSSA</a>-&gt;<a class="code" href="classllvm_1_1MemorySSA.html#a468b8d23a3bb5b9a484f54193f177713">getLiveOnEntryDef</a>();</div><div class="line"><a name="l02388"></a><span class="lineno"> 2388</span>&#160;    StartingAccess-&gt;setOptimized(LiveOnEntry);</div><div class="line"><a name="l02389"></a><span class="lineno"> 2389</span>&#160;    StartingAccess-&gt;setOptimizedAccessType(<a class="code" href="namespacellvm.html#a1d0ac37acc2482f8794195f5042b61b5a6adf97f83acf6453d4a6a4b1070f3754">None</a>);</div><div class="line"><a name="l02390"></a><span class="lineno"> 2390</span>&#160;    <span class="keywordflow">return</span> LiveOnEntry;</div><div class="line"><a name="l02391"></a><span class="lineno"> 2391</span>&#160;  }</div><div class="line"><a name="l02392"></a><span class="lineno"> 2392</span>&#160;</div><div class="line"><a name="l02393"></a><span class="lineno"> 2393</span>&#160;  <a class="code" href="classllvm_1_1MemoryAccess.html">MemoryAccess</a> *OptimizedAccess;</div><div class="line"><a name="l02394"></a><span class="lineno"> 2394</span>&#160;  <span class="keywordflow">if</span> (!IsOptimized) {</div><div class="line"><a name="l02395"></a><span class="lineno"> 2395</span>&#160;    <span class="comment">// Start with the thing we already think clobbers this location</span></div><div class="line"><a name="l02396"></a><span class="lineno"> 2396</span>&#160;    <a class="code" href="classllvm_1_1MemoryAccess.html">MemoryAccess</a> *DefiningAccess = StartingAccess-&gt;getDefiningAccess();</div><div class="line"><a name="l02397"></a><span class="lineno"> 2397</span>&#160;</div><div class="line"><a name="l02398"></a><span class="lineno"> 2398</span>&#160;    <span class="comment">// At this point, DefiningAccess may be the live on entry def.</span></div><div class="line"><a name="l02399"></a><span class="lineno"> 2399</span>&#160;    <span class="comment">// If it is, we will not get a better result.</span></div><div class="line"><a name="l02400"></a><span class="lineno"> 2400</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1MemorySSAWalker.html#a1c2bda54c0424b0321a4ffbc28e7cd9f">MSSA</a>-&gt;<a class="code" href="classllvm_1_1MemorySSA.html#ae3b89ffde42778289bcbd8a187199420">isLiveOnEntryDef</a>(DefiningAccess)) {</div><div class="line"><a name="l02401"></a><span class="lineno"> 2401</span>&#160;      StartingAccess-&gt;setOptimized(DefiningAccess);</div><div class="line"><a name="l02402"></a><span class="lineno"> 2402</span>&#160;      StartingAccess-&gt;setOptimizedAccessType(<a class="code" href="namespacellvm.html#a1d0ac37acc2482f8794195f5042b61b5a6adf97f83acf6453d4a6a4b1070f3754">None</a>);</div><div class="line"><a name="l02403"></a><span class="lineno"> 2403</span>&#160;      <span class="keywordflow">return</span> DefiningAccess;</div><div class="line"><a name="l02404"></a><span class="lineno"> 2404</span>&#160;    }</div><div class="line"><a name="l02405"></a><span class="lineno"> 2405</span>&#160;</div><div class="line"><a name="l02406"></a><span class="lineno"> 2406</span>&#160;    OptimizedAccess = Walker.findClobber(DefiningAccess, Q, UpwardWalkLimit);</div><div class="line"><a name="l02407"></a><span class="lineno"> 2407</span>&#160;    StartingAccess-&gt;setOptimized(OptimizedAccess);</div><div class="line"><a name="l02408"></a><span class="lineno"> 2408</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1MemorySSAWalker.html#a1c2bda54c0424b0321a4ffbc28e7cd9f">MSSA</a>-&gt;<a class="code" href="classllvm_1_1MemorySSA.html#ae3b89ffde42778289bcbd8a187199420">isLiveOnEntryDef</a>(OptimizedAccess))</div><div class="line"><a name="l02409"></a><span class="lineno"> 2409</span>&#160;      StartingAccess-&gt;setOptimizedAccessType(<a class="code" href="namespacellvm.html#a1d0ac37acc2482f8794195f5042b61b5a6adf97f83acf6453d4a6a4b1070f3754">None</a>);</div><div class="line"><a name="l02410"></a><span class="lineno"> 2410</span>&#160;    <span class="keywordflow">else</span> <span class="keywordflow">if</span> (Q.AR == <a class="code" href="namespacellvm.html#ae1738272abcf2ac638b97e7dc6360cfda96e73e8d9d3af47453d4d562f9be0b44">MustAlias</a>)</div><div class="line"><a name="l02411"></a><span class="lineno"> 2411</span>&#160;      StartingAccess-&gt;setOptimizedAccessType(<a class="code" href="namespacellvm.html#ae1738272abcf2ac638b97e7dc6360cfda96e73e8d9d3af47453d4d562f9be0b44">MustAlias</a>);</div><div class="line"><a name="l02412"></a><span class="lineno"> 2412</span>&#160;  } <span class="keywordflow">else</span></div><div class="line"><a name="l02413"></a><span class="lineno"> 2413</span>&#160;    OptimizedAccess = StartingAccess-&gt;getOptimized();</div><div class="line"><a name="l02414"></a><span class="lineno"> 2414</span>&#160;</div><div class="line"><a name="l02415"></a><span class="lineno"> 2415</span>&#160;  <a class="code" href="Debug_8h.html#a08efc68d15935eb8889400a46c3749ba">LLVM_DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;Starting Memory SSA clobber for &quot;</span> &lt;&lt; *I &lt;&lt; <span class="stringliteral">&quot; is &quot;</span>);</div><div class="line"><a name="l02416"></a><span class="lineno"> 2416</span>&#160;  <a class="code" href="Debug_8h.html#a08efc68d15935eb8889400a46c3749ba">LLVM_DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; *StartingAccess &lt;&lt; <span class="stringliteral">&quot;\n&quot;</span>);</div><div class="line"><a name="l02417"></a><span class="lineno"> 2417</span>&#160;  <a class="code" href="Debug_8h.html#a08efc68d15935eb8889400a46c3749ba">LLVM_DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;Optimized Memory SSA clobber for &quot;</span> &lt;&lt; *I &lt;&lt; <span class="stringliteral">&quot; is &quot;</span>);</div><div class="line"><a name="l02418"></a><span class="lineno"> 2418</span>&#160;  <a class="code" href="Debug_8h.html#a08efc68d15935eb8889400a46c3749ba">LLVM_DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; *OptimizedAccess &lt;&lt; <span class="stringliteral">&quot;\n&quot;</span>);</div><div class="line"><a name="l02419"></a><span class="lineno"> 2419</span>&#160;</div><div class="line"><a name="l02420"></a><span class="lineno"> 2420</span>&#160;  <a class="code" href="classllvm_1_1MemoryAccess.html">MemoryAccess</a> *Result;</div><div class="line"><a name="l02421"></a><span class="lineno"> 2421</span>&#160;  <span class="keywordflow">if</span> (SkipSelf &amp;&amp; isa&lt;MemoryPhi&gt;(OptimizedAccess) &amp;&amp;</div><div class="line"><a name="l02422"></a><span class="lineno"> 2422</span>&#160;      isa&lt;MemoryDef&gt;(StartingAccess) &amp;&amp; UpwardWalkLimit) {</div><div class="line"><a name="l02423"></a><span class="lineno"> 2423</span>&#160;    <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(isa&lt;MemoryDef&gt;(Q.OriginalAccess));</div><div class="line"><a name="l02424"></a><span class="lineno"> 2424</span>&#160;    Q.SkipSelfAccess = <span class="keyword">true</span>;</div><div class="line"><a name="l02425"></a><span class="lineno"> 2425</span>&#160;    Result = Walker.findClobber(OptimizedAccess, Q, UpwardWalkLimit);</div><div class="line"><a name="l02426"></a><span class="lineno"> 2426</span>&#160;  } <span class="keywordflow">else</span></div><div class="line"><a name="l02427"></a><span class="lineno"> 2427</span>&#160;    Result = OptimizedAccess;</div><div class="line"><a name="l02428"></a><span class="lineno"> 2428</span>&#160;</div><div class="line"><a name="l02429"></a><span class="lineno"> 2429</span>&#160;  <a class="code" href="Debug_8h.html#a08efc68d15935eb8889400a46c3749ba">LLVM_DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;Result Memory SSA clobber [SkipSelf = &quot;</span> &lt;&lt; SkipSelf);</div><div class="line"><a name="l02430"></a><span class="lineno"> 2430</span>&#160;  <a class="code" href="Debug_8h.html#a08efc68d15935eb8889400a46c3749ba">LLVM_DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;] for &quot;</span> &lt;&lt; *I &lt;&lt; <span class="stringliteral">&quot; is &quot;</span> &lt;&lt; *Result &lt;&lt; <span class="stringliteral">&quot;\n&quot;</span>);</div><div class="line"><a name="l02431"></a><span class="lineno"> 2431</span>&#160;</div><div class="line"><a name="l02432"></a><span class="lineno"> 2432</span>&#160;  <span class="keywordflow">return</span> Result;</div><div class="line"><a name="l02433"></a><span class="lineno"> 2433</span>&#160;}</div><div class="line"><a name="l02434"></a><span class="lineno"> 2434</span>&#160;</div><div class="line"><a name="l02435"></a><span class="lineno"> 2435</span>&#160;<a class="code" href="classllvm_1_1MemoryAccess.html">MemoryAccess</a> *</div><div class="line"><a name="l02436"></a><span class="lineno"><a class="line" href="classllvm_1_1DoNothingMemorySSAWalker.html#a9d47d5b503ec243c019cc0dcee9f3441"> 2436</a></span>&#160;<a class="code" href="classllvm_1_1DoNothingMemorySSAWalker.html#a9d47d5b503ec243c019cc0dcee9f3441">DoNothingMemorySSAWalker::getClobberingMemoryAccess</a>(<a class="code" href="classllvm_1_1MemoryAccess.html">MemoryAccess</a> *MA) {</div><div class="line"><a name="l02437"></a><span class="lineno"> 2437</span>&#160;  <span class="keywordflow">if</span> (<span class="keyword">auto</span> *Use = dyn_cast&lt;MemoryUseOrDef&gt;(MA))</div><div class="line"><a name="l02438"></a><span class="lineno"> 2438</span>&#160;    <span class="keywordflow">return</span> Use-&gt;getDefiningAccess();</div><div class="line"><a name="l02439"></a><span class="lineno"> 2439</span>&#160;  <span class="keywordflow">return</span> MA;</div><div class="line"><a name="l02440"></a><span class="lineno"> 2440</span>&#160;}</div><div class="line"><a name="l02441"></a><span class="lineno"> 2441</span>&#160;</div><div class="line"><a name="l02442"></a><span class="lineno"><a class="line" href="classllvm_1_1DoNothingMemorySSAWalker.html#a322200f40428fcc88b478a8b3ce6dc74"> 2442</a></span>&#160;<a class="code" href="classllvm_1_1MemoryAccess.html">MemoryAccess</a> *<a class="code" href="classllvm_1_1DoNothingMemorySSAWalker.html#a9d47d5b503ec243c019cc0dcee9f3441">DoNothingMemorySSAWalker::getClobberingMemoryAccess</a>(</div><div class="line"><a name="l02443"></a><span class="lineno"> 2443</span>&#160;    <a class="code" href="classllvm_1_1MemoryAccess.html">MemoryAccess</a> *StartingAccess, <span class="keyword">const</span> <a class="code" href="classllvm_1_1MemoryLocation.html">MemoryLocation</a> &amp;) {</div><div class="line"><a name="l02444"></a><span class="lineno"> 2444</span>&#160;  <span class="keywordflow">if</span> (<span class="keyword">auto</span> *Use = dyn_cast&lt;MemoryUseOrDef&gt;(StartingAccess))</div><div class="line"><a name="l02445"></a><span class="lineno"> 2445</span>&#160;    <span class="keywordflow">return</span> Use-&gt;getDefiningAccess();</div><div class="line"><a name="l02446"></a><span class="lineno"> 2446</span>&#160;  <span class="keywordflow">return</span> StartingAccess;</div><div class="line"><a name="l02447"></a><span class="lineno"> 2447</span>&#160;}</div><div class="line"><a name="l02448"></a><span class="lineno"> 2448</span>&#160;</div><div class="line"><a name="l02449"></a><span class="lineno"> 2449</span>&#160;<span class="keywordtype">void</span> MemoryPhi::deleteMe(<a class="code" href="classllvm_1_1DerivedUser.html">DerivedUser</a> *Self) {</div><div class="line"><a name="l02450"></a><span class="lineno"> 2450</span>&#160;  <span class="keyword">delete</span> <span class="keyword">static_cast&lt;</span><a class="code" href="classllvm_1_1MemoryPhi.html">MemoryPhi</a> *<span class="keyword">&gt;</span>(Self);</div><div class="line"><a name="l02451"></a><span class="lineno"> 2451</span>&#160;}</div><div class="line"><a name="l02452"></a><span class="lineno"> 2452</span>&#160;</div><div class="line"><a name="l02453"></a><span class="lineno"> 2453</span>&#160;<span class="keywordtype">void</span> MemoryDef::deleteMe(<a class="code" href="classllvm_1_1DerivedUser.html">DerivedUser</a> *Self) {</div><div class="line"><a name="l02454"></a><span class="lineno"> 2454</span>&#160;  <span class="keyword">delete</span> <span class="keyword">static_cast&lt;</span><a class="code" href="classllvm_1_1MemoryDef.html">MemoryDef</a> *<span class="keyword">&gt;</span>(Self);</div><div class="line"><a name="l02455"></a><span class="lineno"> 2455</span>&#160;}</div><div class="line"><a name="l02456"></a><span class="lineno"> 2456</span>&#160;</div><div class="line"><a name="l02457"></a><span class="lineno"> 2457</span>&#160;<span class="keywordtype">void</span> MemoryUse::deleteMe(<a class="code" href="classllvm_1_1DerivedUser.html">DerivedUser</a> *Self) {</div><div class="line"><a name="l02458"></a><span class="lineno"> 2458</span>&#160;  <span class="keyword">delete</span> <span class="keyword">static_cast&lt;</span><a class="code" href="classllvm_1_1MemoryUse.html">MemoryUse</a> *<span class="keyword">&gt;</span>(Self);</div><div class="line"><a name="l02459"></a><span class="lineno"> 2459</span>&#160;}</div><div class="ttc" id="classllvm_1_1MemorySSA_html_a949151a1ebd664cb397323294cec0e53"><div class="ttname"><a href="classllvm_1_1MemorySSA.html#a949151a1ebd664cb397323294cec0e53">llvm::MemorySSA::getWalker</a></div><div class="ttdeci">MemorySSAWalker * getWalker()</div><div class="ttdef"><b>Definition:</b> <a href="MemorySSA_8cpp_source.html#l01563">MemorySSA.cpp:1563</a></div></div>
<div class="ttc" id="classllvm_1_1MemorySSAWrapperPass_html_a4c858dddb5beb0ab1b09ea1f03befcee"><div class="ttname"><a href="classllvm_1_1MemorySSAWrapperPass.html#a4c858dddb5beb0ab1b09ea1f03befcee">llvm::MemorySSAWrapperPass::runOnFunction</a></div><div class="ttdeci">bool runOnFunction(Function &amp;) override</div><div class="ttdoc">runOnFunction - Virtual method overriden by subclasses to do the per-function processing of the pass...</div><div class="ttdef"><b>Definition:</b> <a href="MemorySSA_8cpp_source.html#l02294">MemorySSA.cpp:2294</a></div></div>
<div class="ttc" id="namespacellvm_html_a9db8c44b250b90e3ab7e4d144e7c9c2ea6524b183b5cd0850f2cff6d30d581af9"><div class="ttname"><a href="namespacellvm.html#a9db8c44b250b90e3ab7e4d144e7c9c2ea6524b183b5cd0850f2cff6d30d581af9">llvm::ModRefInfo::ModRef</a></div><div class="ttdoc">The access may reference and may modify the value stored in memory. </div></div>
<div class="ttc" id="classllvm_1_1SmallVectorTemplateCommon_html_a075e34e98605d0e7c289763a104869ac"><div class="ttname"><a href="classllvm_1_1SmallVectorTemplateCommon.html#a075e34e98605d0e7c289763a104869ac">llvm::SmallVectorTemplateCommon::end</a></div><div class="ttdeci">iterator end()</div><div class="ttdef"><b>Definition:</b> <a href="SmallVector_8h_source.html#l00129">SmallVector.h:129</a></div></div>
<div class="ttc" id="NVVMIntrRange_8cpp_html_a2ae53ee71b2ccbb52b883c0b4f59f8c2"><div class="ttname"><a href="NVVMIntrRange_8cpp.html#a2ae53ee71b2ccbb52b883c0b4f59f8c2">C</a></div><div class="ttdeci">uint64_t CallInst * C</div><div class="ttdef"><b>Definition:</b> <a href="NVVMIntrRange_8cpp_source.html#l00068">NVVMIntrRange.cpp:68</a></div></div>
<div class="ttc" id="classllvm_1_1MemorySSAWalker_html_a1c2bda54c0424b0321a4ffbc28e7cd9f"><div class="ttname"><a href="classllvm_1_1MemorySSAWalker.html#a1c2bda54c0424b0321a4ffbc28e7cd9f">llvm::MemorySSAWalker::MSSA</a></div><div class="ttdeci">MemorySSA * MSSA</div><div class="ttdef"><b>Definition:</b> <a href="MemorySSA_8h_source.html#l01058">MemorySSA.h:1058</a></div></div>
<div class="ttc" id="classllvm_1_1detail_1_1DenseSetImpl_html_a1fbf4d66a9eeaa9ade03e8febee097ee"><div class="ttname"><a href="classllvm_1_1detail_1_1DenseSetImpl.html#a1fbf4d66a9eeaa9ade03e8febee097ee">llvm::detail::DenseSetImpl::clear</a></div><div class="ttdeci">void clear()</div><div class="ttdef"><b>Definition:</b> <a href="DenseSet_8h_source.html#l00086">DenseSet.h:86</a></div></div>
<div class="ttc" id="namespacellvm_html_a1b8a8e0fdb91dab1ae030d1fc7df73ea"><div class="ttname"><a href="namespacellvm.html#a1b8a8e0fdb91dab1ae030d1fc7df73ea">llvm::initializeMemorySSAWrapperPassPass</a></div><div class="ttdeci">void initializeMemorySSAWrapperPassPass(PassRegistry &amp;)</div></div>
<div class="ttc" id="classllvm_1_1MemorySSA_html_a9773fde54683945b9e34a0f2e5c1a5a5ad02ebd2ab52855a8e9fb8082c9530085"><div class="ttname"><a href="classllvm_1_1MemorySSA.html#a9773fde54683945b9e34a0f2e5c1a5a5ad02ebd2ab52855a8e9fb8082c9530085">llvm::MemorySSA::Beginning</a></div><div class="ttdef"><b>Definition:</b> <a href="MemorySSA_8h_source.html#l00789">MemorySSA.h:789</a></div></div>
<div class="ttc" id="IR_2Instruction_8h_html"><div class="ttname"><a href="IR_2Instruction_8h.html">Instruction.h</a></div></div>
<div class="ttc" id="classllvm_1_1MemorySSA_html_a2bfd991f2f853a9a689ac782f7030406"><div class="ttname"><a href="classllvm_1_1MemorySSA.html#a2bfd991f2f853a9a689ac782f7030406">llvm::MemorySSA::getWritableBlockAccesses</a></div><div class="ttdeci">AccessList * getWritableBlockAccesses(const BasicBlock *BB) const</div><div class="ttdef"><b>Definition:</b> <a href="MemorySSA_8h_source.html#l00802">MemorySSA.h:802</a></div></div>
<div class="ttc" id="classllvm_1_1SmallVectorImpl_html_a396fcfee6914c76974b73c3d203da6a5"><div class="ttname"><a href="classllvm_1_1SmallVectorImpl.html#a396fcfee6914c76974b73c3d203da6a5">llvm::SmallVectorImpl::emplace_back</a></div><div class="ttdeci">reference emplace_back(ArgTypes &amp;&amp;... Args)</div><div class="ttdef"><b>Definition:</b> <a href="SmallVector_8h_source.html#l00641">SmallVector.h:641</a></div></div>
<div class="ttc" id="classllvm_1_1DomTreeNodeBase_html_a4e13547a7aa8468bc032d925b0ec36c4"><div class="ttname"><a href="classllvm_1_1DomTreeNodeBase.html#a4e13547a7aa8468bc032d925b0ec36c4">llvm::DomTreeNodeBase&lt; BasicBlock &gt;::const_iterator</a></div><div class="ttdeci">typename std::vector&lt; DomTreeNodeBase *&gt;::const_iterator const_iterator</div><div class="ttdef"><b>Definition:</b> <a href="GenericDomTree_8h_source.html#l00074">GenericDomTree.h:74</a></div></div>
<div class="ttc" id="classllvm_1_1AnalysisManager_1_1Invalidator_html_a5e8e9230fa677542877d1f3c6ff95ae2"><div class="ttname"><a href="classllvm_1_1AnalysisManager_1_1Invalidator.html#a5e8e9230fa677542877d1f3c6ff95ae2">llvm::AnalysisManager::Invalidator::invalidate</a></div><div class="ttdeci">bool invalidate(IRUnitT &amp;IR, const PreservedAnalyses &amp;PA)</div><div class="ttdoc">Trigger the invalidation of some other analysis pass if not already handled and return whether it was...</div><div class="ttdef"><b>Definition:</b> <a href="PassManager_8h_source.html#l00667">PassManager.h:667</a></div></div>
<div class="ttc" id="classllvm_1_1Value_html_aecb93439702247fe5353a9966f7cefcd"><div class="ttname"><a href="classllvm_1_1Value.html#aecb93439702247fe5353a9966f7cefcd">llvm::Value::uses</a></div><div class="ttdeci">iterator_range&lt; use_iterator &gt; uses()</div><div class="ttdef"><b>Definition:</b> <a href="Value_8h_source.html#l00375">Value.h:375</a></div></div>
<div class="ttc" id="classllvm_1_1SmallVectorTemplateBase_html_ad97688dfe9cd802e2a0691cbe620218a"><div class="ttname"><a href="classllvm_1_1SmallVectorTemplateBase.html#ad97688dfe9cd802e2a0691cbe620218a">llvm::SmallVectorTemplateBase&lt; T &gt;::pop_back</a></div><div class="ttdeci">void pop_back()</div><div class="ttdef"><b>Definition:</b> <a href="SmallVector_8h_source.html#l00225">SmallVector.h:225</a></div></div>
<div class="ttc" id="classllvm_1_1PassRegistry_html_a05a729900b76c89e808c6c3094921b2f"><div class="ttname"><a href="classllvm_1_1PassRegistry.html#a05a729900b76c89e808c6c3094921b2f">llvm::PassRegistry::getPassRegistry</a></div><div class="ttdeci">static PassRegistry * getPassRegistry()</div><div class="ttdoc">getPassRegistry - Access the global registry object, which is automatically initialized at applicatio...</div><div class="ttdef"><b>Definition:</b> <a href="PassRegistry_8cpp_source.html#l00031">PassRegistry.cpp:31</a></div></div>
<div class="ttc" id="classllvm_1_1User_html_a48ec5fcee6d2c17c723e8e67f169f948"><div class="ttname"><a href="classllvm_1_1User.html#a48ec5fcee6d2c17c723e8e67f169f948">llvm::User::dropAllReferences</a></div><div class="ttdeci">void dropAllReferences()</div><div class="ttdoc">Drop all references to operands. </div><div class="ttdef"><b>Definition:</b> <a href="User_8h_source.html#l00294">User.h:294</a></div></div>
<div class="ttc" id="Instructions_8h_html"><div class="ttname"><a href="Instructions_8h.html">Instructions.h</a></div></div>
<div class="ttc" id="AtomicOrdering_8h_html"><div class="ttname"><a href="AtomicOrdering_8h.html">AtomicOrdering.h</a></div><div class="ttdoc">Atomic ordering constants. </div></div>
<div class="ttc" id="classllvm_1_1MemorySSAPrinterLegacyPass_html_a7fd32d6e21b99950b61963e1a7a26f13"><div class="ttname"><a href="classllvm_1_1MemorySSAPrinterLegacyPass.html#a7fd32d6e21b99950b61963e1a7a26f13">llvm::MemorySSAPrinterLegacyPass::MemorySSAPrinterLegacyPass</a></div><div class="ttdeci">MemorySSAPrinterLegacyPass()</div><div class="ttdef"><b>Definition:</b> <a href="MemorySSA_8cpp_source.html#l02230">MemorySSA.cpp:2230</a></div></div>
<div class="ttc" id="namespacellvm_html_aa29fe161c408879ada30c90ebbf55dcf"><div class="ttname"><a href="namespacellvm.html#aa29fe161c408879ada30c90ebbf55dcf">llvm::VerifyMemorySSA</a></div><div class="ttdeci">bool VerifyMemorySSA</div><div class="ttdoc">Enables verification of MemorySSA. </div><div class="ttdef"><b>Definition:</b> <a href="MemorySSA_8cpp_source.html#l00084">MemorySSA.cpp:84</a></div></div>
<div class="ttc" id="classllvm_1_1Instruction_html_aced8559a5380b3759af251428f024c02"><div class="ttname"><a href="classllvm_1_1Instruction.html#aced8559a5380b3759af251428f024c02">llvm::Instruction::isFenceLike</a></div><div class="ttdeci">bool isFenceLike() const</div><div class="ttdoc">Return true if this instruction behaves like a memory fence: it can load or store to memory location ...</div><div class="ttdef"><b>Definition:</b> <a href="IR_2Instruction_8h_source.html#l00561">Instruction.h:561</a></div></div>
<div class="ttc" id="classllvm_1_1AnalysisManager_html_ab9d3d5412c20747fd0110a046604f09a"><div class="ttname"><a href="classllvm_1_1AnalysisManager.html#ab9d3d5412c20747fd0110a046604f09a">llvm::AnalysisManager::getResult</a></div><div class="ttdeci">PassT::Result &amp; getResult(IRUnitT &amp;IR, ExtraArgTs... ExtraArgs)</div><div class="ttdoc">Get the result of an analysis pass for a given IR unit. </div><div class="ttdef"><b>Definition:</b> <a href="PassManager_8h_source.html#l00777">PassManager.h:777</a></div></div>
<div class="ttc" id="classllvm_1_1MemoryPhi_html_ad75b48c94bacfc6a1d166164bd51af8b"><div class="ttname"><a href="classllvm_1_1MemoryPhi.html#ad75b48c94bacfc6a1d166164bd51af8b">llvm::MemoryPhi::print</a></div><div class="ttdeci">void print(raw_ostream &amp;OS) const</div><div class="ttdef"><b>Definition:</b> <a href="MemorySSA_8cpp_source.html#l02181">MemorySSA.cpp:2181</a></div></div>
<div class="ttc" id="namespacellvm_html"><div class="ttname"><a href="namespacellvm.html">llvm</a></div><div class="ttdoc">This class represents lattice values for constants. </div><div class="ttdef"><b>Definition:</b> <a href="AllocatorList_8h_source.html#l00023">AllocatorList.h:23</a></div></div>
<div class="ttc" id="Compiler_8h_html_aa863693eef567397d9c292da5bf22d34"><div class="ttname"><a href="Compiler_8h.html#aa863693eef567397d9c292da5bf22d34">LLVM_DUMP_METHOD</a></div><div class="ttdeci">#define LLVM_DUMP_METHOD</div><div class="ttdoc">Mark debug helper function definitions like dump() that should not be stripped from debug builds...</div><div class="ttdef"><b>Definition:</b> <a href="Compiler_8h_source.html#l00492">Compiler.h:492</a></div></div>
<div class="ttc" id="classllvm_1_1MemorySSA_html_a56004f54560e9950f6eb148cb5dfa0a3"><div class="ttname"><a href="classllvm_1_1MemorySSA.html#a56004f54560e9950f6eb148cb5dfa0a3">llvm::MemorySSA::dominates</a></div><div class="ttdeci">bool dominates(const MemoryAccess *A, const MemoryAccess *B) const</div><div class="ttdoc">Given two memory accesses in potentially different blocks, determine whether MemoryAccess A dominates...</div><div class="ttdef"><b>Definition:</b> <a href="MemorySSA_8cpp_source.html#l02120">MemorySSA.cpp:2120</a></div></div>
<div class="ttc" id="classllvm_1_1MemoryUseOrDef_html_abc4e1b6cc483cfd57ca75c4ab92bd360"><div class="ttname"><a href="classllvm_1_1MemoryUseOrDef.html#abc4e1b6cc483cfd57ca75c4ab92bd360">llvm::MemoryUseOrDef::getDefiningAccess</a></div><div class="ttdeci">MemoryAccess * getDefiningAccess() const</div><div class="ttdoc">Get the access that produces the memory state used by this Use. </div><div class="ttdef"><b>Definition:</b> <a href="MemorySSA_8h_source.html#l00258">MemorySSA.h:258</a></div></div>
<div class="ttc" id="classllvm_1_1Module_html"><div class="ttname"><a href="classllvm_1_1Module.html">llvm::Module</a></div><div class="ttdoc">A Module instance is used to store all the information related to an LLVM module. ...</div><div class="ttdef"><b>Definition:</b> <a href="Module_8h_source.html#l00066">Module.h:66</a></div></div>
<div class="ttc" id="classllvm_1_1SmallVectorTemplateCommon_html_a58dc840fc84420b7f0b773794b8101c1"><div class="ttname"><a href="classllvm_1_1SmallVectorTemplateCommon.html#a58dc840fc84420b7f0b773794b8101c1">llvm::SmallVectorTemplateCommon::front</a></div><div class="ttdeci">reference front()</div><div class="ttdef"><b>Definition:</b> <a href="SmallVector_8h_source.html#l00157">SmallVector.h:157</a></div></div>
<div class="ttc" id="classllvm_1_1simple__ilist_html_acd9e9e84ef0b4b94fdda7d6ceff1e01d"><div class="ttname"><a href="classllvm_1_1simple__ilist.html#acd9e9e84ef0b4b94fdda7d6ceff1e01d">llvm::simple_ilist::push_back</a></div><div class="ttdeci">void push_back(reference Node)</div><div class="ttdoc">Insert a node at the back; never copies. </div><div class="ttdef"><b>Definition:</b> <a href="simple__ilist_8h_source.html#l00147">simple_ilist.h:147</a></div></div>
<div class="ttc" id="classllvm_1_1formatted__raw__ostream_html"><div class="ttname"><a href="classllvm_1_1formatted__raw__ostream.html">llvm::formatted_raw_ostream</a></div><div class="ttdoc">formatted_raw_ostream - A raw_ostream that wraps another one and keeps track of line and column posit...</div><div class="ttdef"><b>Definition:</b> <a href="FormattedStream_8h_source.html#l00026">FormattedStream.h:26</a></div></div>
<div class="ttc" id="IntrinsicInst_8h_html"><div class="ttname"><a href="IntrinsicInst_8h.html">IntrinsicInst.h</a></div></div>
<div class="ttc" id="classllvm_1_1sys_1_1Memory_html"><div class="ttname"><a href="classllvm_1_1sys_1_1Memory.html">llvm::sys::Memory</a></div><div class="ttdoc">This class provides various memory handling functions that manipulate MemoryBlock instances...</div><div class="ttdef"><b>Definition:</b> <a href="Memory_8h_source.html#l00053">Memory.h:53</a></div></div>
<div class="ttc" id="classllvm_1_1DenseSet_html"><div class="ttname"><a href="classllvm_1_1DenseSet.html">llvm::DenseSet&lt; ConstMemoryAccessPair &gt;</a></div></div>
<div class="ttc" id="classllvm_1_1SmallVectorTemplateBase_html_af42bfbc067df27c19ee2fc859df58799"><div class="ttname"><a href="classllvm_1_1SmallVectorTemplateBase.html#af42bfbc067df27c19ee2fc859df58799">llvm::SmallVectorTemplateBase&lt; T &gt;::push_back</a></div><div class="ttdeci">void push_back(const T &amp;Elt)</div><div class="ttdef"><b>Definition:</b> <a href="SmallVector_8h_source.html#l00211">SmallVector.h:211</a></div></div>
<div class="ttc" id="classllvm_1_1MemorySSA_html_aaff19b909f903fe2a431e97424ffced5"><div class="ttname"><a href="classllvm_1_1MemorySSA.html#aaff19b909f903fe2a431e97424ffced5">llvm::MemorySSA::getBlockAccesses</a></div><div class="ttdeci">const AccessList * getBlockAccesses(const BasicBlock *BB) const</div><div class="ttdoc">Return the list of MemoryAccess&amp;#39;s for a given basic block. </div><div class="ttdef"><b>Definition:</b> <a href="MemorySSA_8h_source.html#l00759">MemorySSA.h:759</a></div></div>
<div class="ttc" id="iterator__range_8h_html"><div class="ttname"><a href="iterator__range_8h.html">iterator_range.h</a></div><div class="ttdoc">This provides a very simple, boring adaptor for a begin and end iterator into a range type...</div></div>
<div class="ttc" id="classllvm_1_1DenseMap_html"><div class="ttname"><a href="classllvm_1_1DenseMap.html">llvm::DenseMap</a></div><div class="ttdef"><b>Definition:</b> <a href="DenseMap_8h_source.html#l00684">DenseMap.h:684</a></div></div>
<div class="ttc" id="Debug_8h_html"><div class="ttname"><a href="Debug_8h.html">Debug.h</a></div></div>
<div class="ttc" id="structllvm_1_1DenseMapInfo_html"><div class="ttname"><a href="structllvm_1_1DenseMapInfo.html">llvm::DenseMapInfo</a></div><div class="ttdef"><b>Definition:</b> <a href="DenseMapInfo_8h_source.html#l00029">DenseMapInfo.h:29</a></div></div>
<div class="ttc" id="classllvm_1_1MemorySSAPrinterLegacyPass_html_ae2bdb6f1c51c03cc2bb47f1af18667a5"><div class="ttname"><a href="classllvm_1_1MemorySSAPrinterLegacyPass.html#ae2bdb6f1c51c03cc2bb47f1af18667a5">llvm::MemorySSAPrinterLegacyPass::getAnalysisUsage</a></div><div class="ttdeci">void getAnalysisUsage(AnalysisUsage &amp;AU) const override</div><div class="ttdoc">getAnalysisUsage - This function should be overriden by passes that need analysis information to do t...</div><div class="ttdef"><b>Definition:</b> <a href="MemorySSA_8cpp_source.html#l02234">MemorySSA.cpp:2234</a></div></div>
<div class="ttc" id="classllvm_1_1Instruction_html_ad3dee2b6da939fe6674f20c2916c7a07"><div class="ttname"><a href="classllvm_1_1Instruction.html#ad3dee2b6da939fe6674f20c2916c7a07">llvm::Instruction::mayWriteToMemory</a></div><div class="ttdeci">bool mayWriteToMemory() const</div><div class="ttdoc">Return true if this instruction may modify memory. </div><div class="ttdef"><b>Definition:</b> <a href="IR_2Instruction_8cpp_source.html#l00534">Instruction.cpp:534</a></div></div>
<div class="ttc" id="namespacellvm_html_ae1738272abcf2ac638b97e7dc6360cfda4ba4d961209b5565d6197be0423cbe12"><div class="ttname"><a href="namespacellvm.html#ae1738272abcf2ac638b97e7dc6360cfda4ba4d961209b5565d6197be0423cbe12">llvm::NoAlias</a></div><div class="ttdoc">The two locations do not alias at all. </div><div class="ttdef"><b>Definition:</b> <a href="AliasAnalysis_8h_source.html#l00084">AliasAnalysis.h:84</a></div></div>
<div class="ttc" id="classllvm_1_1DerivedUser_html"><div class="ttname"><a href="classllvm_1_1DerivedUser.html">llvm::DerivedUser</a></div><div class="ttdoc">Extension point for the Value hierarchy. </div><div class="ttdef"><b>Definition:</b> <a href="DerivedUser_8h_source.html#l00027">DerivedUser.h:27</a></div></div>
<div class="ttc" id="BasicBlock_8h_html"><div class="ttname"><a href="BasicBlock_8h.html">BasicBlock.h</a></div></div>
<div class="ttc" id="classllvm_1_1MemoryDef_html"><div class="ttname"><a href="classllvm_1_1MemoryDef.html">llvm::MemoryDef</a></div><div class="ttdoc">Represents a read-write access to memory, whether it is a must-alias, or a may-alias. </div><div class="ttdef"><b>Definition:</b> <a href="MemorySSA_8h_source.html#l00376">MemorySSA.h:376</a></div></div>
<div class="ttc" id="classllvm_1_1LoadInst_html_a93603fe0d4168b92a901f06015ecb2e7"><div class="ttname"><a href="classllvm_1_1LoadInst.html#a93603fe0d4168b92a901f06015ecb2e7">llvm::LoadInst::getOrdering</a></div><div class="ttdeci">AtomicOrdering getOrdering() const</div><div class="ttdoc">Returns the ordering constraint of this load instruction. </div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8h_source.html#l00258">Instructions.h:258</a></div></div>
<div class="ttc" id="MemorySSA_8cpp_html_a8aaaadac0fbf35eddf397de5636f75e7"><div class="ttname"><a href="MemorySSA_8cpp.html#a8aaaadac0fbf35eddf397de5636f75e7">LiveOnEntryStr</a></div><div class="ttdeci">static const char LiveOnEntryStr[]</div><div class="ttdef"><b>Definition:</b> <a href="MemorySSA_8cpp_source.html#l02147">MemorySSA.cpp:2147</a></div></div>
<div class="ttc" id="namespacellvm_html_abf74b2f0dbae96f4708d3e407b36df02a993ca650a85e8e69b8f7eaa4809c4862"><div class="ttname"><a href="namespacellvm.html#abf74b2f0dbae96f4708d3e407b36df02a993ca650a85e8e69b8f7eaa4809c4862">llvm::AtomicOrdering::Acquire</a></div></div>
<div class="ttc" id="classllvm_1_1Value_html_ab3fc0225d8aaf8434026c3573f961f2c"><div class="ttname"><a href="classllvm_1_1Value.html#ab3fc0225d8aaf8434026c3573f961f2c">llvm::Value::getContext</a></div><div class="ttdeci">LLVMContext &amp; getContext() const</div><div class="ttdoc">All values hold a context through their type. </div><div class="ttdef"><b>Definition:</b> <a href="Value_8cpp_source.html#l00744">Value.cpp:744</a></div></div>
<div class="ttc" id="HexagonShuffler_8cpp_html_af7633c5cbb76481bafd5e3e1ec07ca37"><div class="ttname"><a href="HexagonShuffler_8cpp.html#af7633c5cbb76481bafd5e3e1ec07ca37">second</a></div><div class="ttdeci">unsigned second</div><div class="ttdef"><b>Definition:</b> <a href="HexagonShuffler_8cpp_source.html#l00221">HexagonShuffler.cpp:221</a></div></div>
<div class="ttc" id="classllvm_1_1MemorySSAWrapperPass_html_ab9923984766bd759aab387db40458ceb"><div class="ttname"><a href="classllvm_1_1MemorySSAWrapperPass.html#ab9923984766bd759aab387db40458ceb">llvm::MemorySSAWrapperPass::getAnalysisUsage</a></div><div class="ttdeci">void getAnalysisUsage(AnalysisUsage &amp;AU) const override</div><div class="ttdoc">getAnalysisUsage - This function should be overriden by passes that need analysis information to do t...</div><div class="ttdef"><b>Definition:</b> <a href="MemorySSA_8cpp_source.html#l02288">MemorySSA.cpp:2288</a></div></div>
<div class="ttc" id="namespacellvm_html_a0d10fe510ced2849a8074fe81e5d04ce"><div class="ttname"><a href="namespacellvm.html#a0d10fe510ced2849a8074fe81e5d04ce">llvm::all_of</a></div><div class="ttdeci">bool all_of(R &amp;&amp;range, UnaryPredicate P)</div><div class="ttdoc">Provide wrappers to std::all_of which take ranges instead of having to pass begin/end explicitly...</div><div class="ttdef"><b>Definition:</b> <a href="STLExtras_8h_source.html#l01182">STLExtras.h:1182</a></div></div>
<div class="ttc" id="classllvm_1_1CallBase_html"><div class="ttname"><a href="classllvm_1_1CallBase.html">llvm::CallBase</a></div><div class="ttdoc">Base class for all callable instructions (InvokeInst and CallInst) Holds everything related to callin...</div><div class="ttdef"><b>Definition:</b> <a href="InstrTypes_8h_source.html#l01105">InstrTypes.h:1105</a></div></div>
<div class="ttc" id="classllvm_1_1DominatorTreeAnalysis_html"><div class="ttname"><a href="classllvm_1_1DominatorTreeAnalysis.html">llvm::DominatorTreeAnalysis</a></div><div class="ttdoc">Analysis pass which computes a DominatorTree. </div><div class="ttdef"><b>Definition:</b> <a href="Dominators_8h_source.html#l00230">Dominators.h:230</a></div></div>
<div class="ttc" id="LLParser_8cpp_html_a33ece1ef8074506a15d7f86eb76dbae6"><div class="ttname"><a href="LLParser_8cpp.html#a33ece1ef8074506a15d7f86eb76dbae6">F</a></div><div class="ttdeci">F(f)</div></div>
<div class="ttc" id="classllvm_1_1DomTreeNodeBase_html_a40b8345d54ada5dab71ae11d71e89d2f"><div class="ttname"><a href="classllvm_1_1DomTreeNodeBase.html#a40b8345d54ada5dab71ae11d71e89d2f">llvm::DomTreeNodeBase::begin</a></div><div class="ttdeci">iterator begin()</div><div class="ttdef"><b>Definition:</b> <a href="GenericDomTree_8h_source.html#l00076">GenericDomTree.h:76</a></div></div>
<div class="ttc" id="classllvm_1_1Function_html"><div class="ttname"><a href="classllvm_1_1Function.html">llvm::Function</a></div><div class="ttdef"><b>Definition:</b> <a href="Function_8h_source.html#l00059">Function.h:59</a></div></div>
<div class="ttc" id="BlockFrequencyInfo_8cpp_html_af1bff759151fc332f9c9021578b15be6"><div class="ttname"><a href="BlockFrequencyInfo_8cpp.html#af1bff759151fc332f9c9021578b15be6">true</a></div><div class="ttdeci">block Block Frequency true</div><div class="ttdef"><b>Definition:</b> <a href="BlockFrequencyInfo_8cpp_source.html#l00294">BlockFrequencyInfo.cpp:294</a></div></div>
<div class="ttc" id="classllvm_1_1LoadInst_html"><div class="ttname"><a href="classllvm_1_1LoadInst.html">llvm::LoadInst</a></div><div class="ttdoc">An instruction for reading from memory. </div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8h_source.html#l00169">Instructions.h:169</a></div></div>
<div class="ttc" id="MemorySSA_8cpp_html_a06e2f0489fb9bed0b271e8fe6c2b7545"><div class="ttname"><a href="MemorySSA_8cpp.html#a06e2f0489fb9bed0b271e8fe6c2b7545">memoryssa</a></div><div class="ttdeci">memoryssa</div><div class="ttdef"><b>Definition:</b> <a href="MemorySSA_8cpp_source.html#l00066">MemorySSA.cpp:66</a></div></div>
<div class="ttc" id="namespacellvm_html_a38dcdde63d81fbda1d22dffd1a27b343"><div class="ttname"><a href="namespacellvm.html#a38dcdde63d81fbda1d22dffd1a27b343">llvm::maximum</a></div><div class="ttdeci">LLVM_READONLY APFloat maximum(const APFloat &amp;A, const APFloat &amp;B)</div><div class="ttdoc">Implements IEEE 754-2018 maximum semantics. </div><div class="ttdef"><b>Definition:</b> <a href="APFloat_8h_source.html#l01282">APFloat.h:1282</a></div></div>
<div class="ttc" id="Use_8h_html"><div class="ttname"><a href="Use_8h.html">Use.h</a></div><div class="ttdoc">This defines the Use class. </div></div>
<div class="ttc" id="classllvm_1_1MemoryDef_html_a09f277b48a8bdfb5edf85ba468537141"><div class="ttname"><a href="classllvm_1_1MemoryDef.html#a09f277b48a8bdfb5edf85ba468537141">llvm::MemoryDef::print</a></div><div class="ttdeci">void print(raw_ostream &amp;OS) const</div><div class="ttdef"><b>Definition:</b> <a href="MemorySSA_8cpp_source.html#l02158">MemorySSA.cpp:2158</a></div></div>
<div class="ttc" id="classllvm_1_1IDFCalculatorBase_html_a12e611cdfa9c2bcf1e6d3b2c802e6536"><div class="ttname"><a href="classllvm_1_1IDFCalculatorBase.html#a12e611cdfa9c2bcf1e6d3b2c802e6536">llvm::IDFCalculatorBase::calculate</a></div><div class="ttdeci">void calculate(SmallVectorImpl&lt; NodeTy *&gt; &amp;IDFBlocks)</div><div class="ttdoc">Calculate iterated dominance frontiers. </div><div class="ttdef"><b>Definition:</b> <a href="GenericIteratedDominanceFrontier_8h_source.html#l00131">GenericIteratedDominanceFrontier.h:131</a></div></div>
<div class="ttc" id="classllvm_1_1MemorySSA_html_a49f6b5c5e36a86395a7f91838768798d"><div class="ttname"><a href="classllvm_1_1MemorySSA.html#a49f6b5c5e36a86395a7f91838768798d">llvm::MemorySSA::MemorySSA</a></div><div class="ttdeci">MemorySSA(Function &amp;, AliasAnalysis *, DominatorTree *)</div><div class="ttdef"><b>Definition:</b> <a href="MemorySSA_8cpp_source.html#l01225">MemorySSA.cpp:1225</a></div></div>
<div class="ttc" id="classllvm_1_1BasicBlock_html_aa286a0f7f5d38488d593bb7ef0ba183e"><div class="ttname"><a href="classllvm_1_1BasicBlock.html#aa286a0f7f5d38488d593bb7ef0ba183e">llvm::BasicBlock::getContext</a></div><div class="ttdeci">LLVMContext &amp; getContext() const</div><div class="ttdoc">Get the context in which this basic block lives. </div><div class="ttdef"><b>Definition:</b> <a href="BasicBlock_8cpp_source.html#l00032">BasicBlock.cpp:32</a></div></div>
<div class="ttc" id="namespacellvm_1_1RISCVFenceField_html_a147be9e9780c1e33363ea572d4c7b25fa1a33f1d911a725a1f81234a908d03edb"><div class="ttname"><a href="namespacellvm_1_1RISCVFenceField.html#a147be9e9780c1e33363ea572d4c7b25fa1a33f1d911a725a1f81234a908d03edb">llvm::RISCVFenceField::O</a></div><div class="ttdef"><b>Definition:</b> <a href="RISCVBaseInfo_8h_source.html#l00093">RISCVBaseInfo.h:93</a></div></div>
<div class="ttc" id="namespacellvm_1_1cl_html_a68075925a54790e71ca790e1d4f21a40a263ac008d8d31f13ce460395fc4cf7e6"><div class="ttname"><a href="namespacellvm_1_1cl.html#a68075925a54790e71ca790e1d4f21a40a263ac008d8d31f13ce460395fc4cf7e6">llvm::cl::Hidden</a></div><div class="ttdef"><b>Definition:</b> <a href="CommandLine_8h_source.html#l00148">CommandLine.h:148</a></div></div>
<div class="ttc" id="classllvm_1_1MemoryAccess_html"><div class="ttname"><a href="classllvm_1_1MemoryAccess.html">llvm::MemoryAccess</a></div><div class="ttdef"><b>Definition:</b> <a href="MemorySSA_8h_source.html#l00138">MemorySSA.h:138</a></div></div>
<div class="ttc" id="classllvm_1_1SmallPtrSetImpl_html"><div class="ttname"><a href="classllvm_1_1SmallPtrSetImpl.html">llvm::SmallPtrSetImpl</a></div><div class="ttdoc">A templated base class for SmallPtrSet which provides the typesafe interface that is common across al...</div><div class="ttdef"><b>Definition:</b> <a href="SmallPtrSet_8h_source.html#l00343">SmallPtrSet.h:343</a></div></div>
<div class="ttc" id="namespacellvm_html_abf74b2f0dbae96f4708d3e407b36df02ae3b0fa849dbd758b450f98fcfde936a2"><div class="ttname"><a href="namespacellvm.html#abf74b2f0dbae96f4708d3e407b36df02ae3b0fa849dbd758b450f98fcfde936a2">llvm::AtomicOrdering::SequentiallyConsistent</a></div></div>
<div class="ttc" id="classllvm_1_1PreservedAnalyses_html_aa7a1b769f9c57010cc41d9c3bb9d39c6"><div class="ttname"><a href="classllvm_1_1PreservedAnalyses.html#aa7a1b769f9c57010cc41d9c3bb9d39c6">llvm::PreservedAnalyses::getChecker</a></div><div class="ttdeci">PreservedAnalysisChecker getChecker() const</div><div class="ttdoc">Build a checker for this PreservedAnalyses and the specified analysis type. </div><div class="ttdef"><b>Definition:</b> <a href="PassManager_8h_source.html#l00312">PassManager.h:312</a></div></div>
<div class="ttc" id="MemorySSA_8cpp_html_a72507946850fcd3cdea22735440c5a83"><div class="ttname"><a href="MemorySSA_8cpp.html#a72507946850fcd3cdea22735440c5a83">INITIALIZE_PASS_BEGIN</a></div><div class="ttdeci">INITIALIZE_PASS_BEGIN(MemorySSAWrapperPass, &quot;memoryssa&quot;, &quot;Memory SSA&quot;, false, true) INITIALIZE_PASS_END(MemorySSAWrapperPass</div></div>
<div class="ttc" id="classllvm_1_1Optional_html"><div class="ttname"><a href="classllvm_1_1Optional.html">llvm::Optional&lt; AliasResult &gt;</a></div></div>
<div class="ttc" id="classllvm_1_1MemorySSA_1_1OptimizeUses_html_a66b15abc71367165fd6b570d91a9cbf9"><div class="ttname"><a href="classllvm_1_1MemorySSA_1_1OptimizeUses.html#a66b15abc71367165fd6b570d91a9cbf9">llvm::MemorySSA::OptimizeUses::OptimizeUses</a></div><div class="ttdeci">OptimizeUses(MemorySSA *MSSA, CachingWalker&lt; BatchAAResults &gt; *Walker, BatchAAResults *BAA, DominatorTree *DT)</div><div class="ttdef"><b>Definition:</b> <a href="MemorySSA_8cpp_source.html#l01277">MemorySSA.cpp:1277</a></div></div>
<div class="ttc" id="classllvm_1_1DenseMapBase_html_a99f811d53704275b4158c62a2dd138d9"><div class="ttname"><a href="classllvm_1_1DenseMapBase.html#a99f811d53704275b4158c62a2dd138d9">llvm::DenseMapBase::insert</a></div><div class="ttdeci">std::pair&lt; iterator, bool &gt; insert(const std::pair&lt; KeyT, ValueT &gt; &amp;KV)</div><div class="ttdef"><b>Definition:</b> <a href="DenseMap_8h_source.html#l00195">DenseMap.h:195</a></div></div>
<div class="ttc" id="classllvm_1_1MemoryUse_html"><div class="ttname"><a href="classllvm_1_1MemoryUse.html">llvm::MemoryUse</a></div><div class="ttdoc">Represents read-only accesses to memory. </div><div class="ttdef"><b>Definition:</b> <a href="MemorySSA_8h_source.html#l00320">MemorySSA.h:320</a></div></div>
<div class="ttc" id="classllvm_1_1MemorySSA_1_1OptimizeUses_html"><div class="ttname"><a href="classllvm_1_1MemorySSA_1_1OptimizeUses.html">llvm::MemorySSA::OptimizeUses</a></div><div class="ttdoc">This class is a batch walker of all MemoryUse&amp;#39;s in the program, and points their defining access at t...</div><div class="ttdef"><b>Definition:</b> <a href="MemorySSA_8cpp_source.html#l01275">MemorySSA.cpp:1275</a></div></div>
<div class="ttc" id="classllvm_1_1AnalysisUsage_html_ae5c60fd282ee894c87ea02c3f0fcb6d0"><div class="ttname"><a href="classllvm_1_1AnalysisUsage.html#ae5c60fd282ee894c87ea02c3f0fcb6d0">llvm::AnalysisUsage::addRequired</a></div><div class="ttdeci">AnalysisUsage &amp; addRequired()</div><div class="ttdef"><b>Definition:</b> <a href="PassAnalysisSupport_8h_source.html#l00065">PassAnalysisSupport.h:65</a></div></div>
<div class="ttc" id="PassSupport_8h_html_a14724f1ccf528e73bb29bc9230737967"><div class="ttname"><a href="PassSupport_8h.html#a14724f1ccf528e73bb29bc9230737967">INITIALIZE_PASS_DEPENDENCY</a></div><div class="ttdeci">#define INITIALIZE_PASS_DEPENDENCY(depName)</div><div class="ttdef"><b>Definition:</b> <a href="PassSupport_8h_source.html#l00050">PassSupport.h:50</a></div></div>
<div class="ttc" id="classllvm_1_1MemorySSAWrapperPass_html"><div class="ttname"><a href="classllvm_1_1MemorySSAWrapperPass.html">llvm::MemorySSAWrapperPass</a></div><div class="ttdoc">Legacy analysis pass which computes MemorySSA. </div><div class="ttdef"><b>Definition:</b> <a href="MemorySSA_8h_source.html#l00964">MemorySSA.h:964</a></div></div>
<div class="ttc" id="classllvm_1_1LoadInst_html_a2eccc19f9061eeb7ad1e30e21f76034d"><div class="ttname"><a href="classllvm_1_1LoadInst.html#a2eccc19f9061eeb7ad1e30e21f76034d">llvm::LoadInst::isVolatile</a></div><div class="ttdeci">bool isVolatile() const</div><div class="ttdoc">Return true if this is a load from a volatile memory location. </div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8h_source.html#l00233">Instructions.h:233</a></div></div>
<div class="ttc" id="MemorySSA_8cpp_html_aa59bf39360130f2ded62dbd9a4e82995"><div class="ttname"><a href="MemorySSA_8cpp.html#aa59bf39360130f2ded62dbd9a4e82995">lifetimeEndsAt</a></div><div class="ttdeci">static bool lifetimeEndsAt(MemoryDef *MD, const MemoryLocation &amp;Loc, BatchAAResults &amp;AA)</div><div class="ttdef"><b>Definition:</b> <a href="MemorySSA_8cpp_source.html#l00360">MemorySSA.cpp:360</a></div></div>
<div class="ttc" id="classllvm_1_1MemorySSA_html_a95acd2137d435c5f43e4f781c9f6ad39"><div class="ttname"><a href="classllvm_1_1MemorySSA.html#a95acd2137d435c5f43e4f781c9f6ad39">llvm::MemorySSA::renamePass</a></div><div class="ttdeci">void renamePass(BasicBlock *BB, MemoryAccess *IncomingVal, SmallPtrSetImpl&lt; BasicBlock *&gt; &amp;Visited)</div><div class="ttdef"><b>Definition:</b> <a href="MemorySSA_8h_source.html#l00821">MemorySSA.h:821</a></div></div>
<div class="ttc" id="classllvm_1_1MemorySSA_html_a9939794555fe9e24e885d55e301de803"><div class="ttname"><a href="classllvm_1_1MemorySSA.html#a9939794555fe9e24e885d55e301de803">llvm::MemorySSA::createDefinedAccess</a></div><div class="ttdeci">MemoryUseOrDef * createDefinedAccess(Instruction *, MemoryAccess *, const MemoryUseOrDef *Template=nullptr, bool CreationMustSucceed=true)</div><div class="ttdef"><b>Definition:</b> <a href="MemorySSA_8cpp_source.html#l01702">MemorySSA.cpp:1702</a></div></div>
<div class="ttc" id="classllvm_1_1Use_html"><div class="ttname"><a href="classllvm_1_1Use.html">llvm::Use</a></div><div class="ttdoc">A Use represents the edge between a Value definition and its users. </div><div class="ttdef"><b>Definition:</b> <a href="Use_8h_source.html#l00055">Use.h:55</a></div></div>
<div class="ttc" id="classllvm_1_1MemorySSAUtil_html_ac6b2e834ecda34d360b905083ad6b37e"><div class="ttname"><a href="classllvm_1_1MemorySSAUtil.html#ac6b2e834ecda34d360b905083ad6b37e">llvm::MemorySSAUtil::defClobbersUseOrDef</a></div><div class="ttdeci">static bool defClobbersUseOrDef(MemoryDef *MD, const MemoryUseOrDef *MU, AliasAnalysis &amp;AA)</div><div class="ttdef"><b>Definition:</b> <a href="MemorySSA_8cpp_source.html#l00329">MemorySSA.cpp:329</a></div></div>
<div class="ttc" id="classllvm_1_1MemorySSAAnnotatedWriter_html_a8019bff4ef14d1aa2e1709a104443d83"><div class="ttname"><a href="classllvm_1_1MemorySSAAnnotatedWriter.html#a8019bff4ef14d1aa2e1709a104443d83">llvm::MemorySSAAnnotatedWriter::MemorySSAAnnotatedWriter</a></div><div class="ttdeci">MemorySSAAnnotatedWriter(const MemorySSA *M)</div><div class="ttdef"><b>Definition:</b> <a href="MemorySSA_8cpp_source.html#l00105">MemorySSA.cpp:105</a></div></div>
<div class="ttc" id="classllvm_1_1SmallVectorImpl_html"><div class="ttname"><a href="classllvm_1_1SmallVectorImpl.html">llvm::SmallVectorImpl</a></div><div class="ttdoc">This class consists of common code factored out of the SmallVector class to reduce code duplication b...</div><div class="ttdef"><b>Definition:</b> <a href="APFloat_8h_source.html#l00042">APFloat.h:42</a></div></div>
<div class="ttc" id="classllvm_1_1MemorySSA_html"><div class="ttname"><a href="classllvm_1_1MemorySSA.html">llvm::MemorySSA</a></div><div class="ttdoc">Encapsulates MemorySSA, including all data associated with memory accesses. </div><div class="ttdef"><b>Definition:</b> <a href="MemorySSA_8h_source.html#l00704">MemorySSA.h:704</a></div></div>
<div class="ttc" id="STLExtras_8h_html"><div class="ttname"><a href="STLExtras_8h.html">STLExtras.h</a></div></div>
<div class="ttc" id="classllvm_1_1MemorySSA_html_a65b7c715bf28eb17cfd012dd9bc3ad4b"><div class="ttname"><a href="classllvm_1_1MemorySSA.html#a65b7c715bf28eb17cfd012dd9bc3ad4b">llvm::MemorySSA::getBlockDefs</a></div><div class="ttdeci">const DefsList * getBlockDefs(const BasicBlock *BB) const</div><div class="ttdoc">Return the list of MemoryDef&amp;#39;s and MemoryPhi&amp;#39;s for a given basic block. </div><div class="ttdef"><b>Definition:</b> <a href="MemorySSA_8h_source.html#l00767">MemorySSA.h:767</a></div></div>
<div class="ttc" id="classunsigned_html"><div class="ttname"><a href="classunsigned.html">unsigned</a></div></div>
<div class="ttc" id="None_8h_html"><div class="ttname"><a href="None_8h.html">None.h</a></div></div>
<div class="ttc" id="classllvm_1_1MemorySSA_html_a8bc47ee66a3ac3b5f1a57c497048b090"><div class="ttname"><a href="classllvm_1_1MemorySSA.html#a8bc47ee66a3ac3b5f1a57c497048b090">llvm::MemorySSA::insertIntoListsForBlock</a></div><div class="ttdeci">void insertIntoListsForBlock(MemoryAccess *, const BasicBlock *, InsertionPlace)</div><div class="ttdef"><b>Definition:</b> <a href="MemorySSA_8cpp_source.html#l01595">MemorySSA.cpp:1595</a></div></div>
<div class="ttc" id="classllvm_1_1Instruction_html_a565f546ad95bd3a9bbe9a1e5040803f0"><div class="ttname"><a href="classllvm_1_1Instruction.html#a565f546ad95bd3a9bbe9a1e5040803f0">llvm::Instruction::hasMetadata</a></div><div class="ttdeci">bool hasMetadata() const</div><div class="ttdoc">Return true if this instruction has any metadata attached to it. </div><div class="ttdef"><b>Definition:</b> <a href="IR_2Instruction_8h_source.html#l00224">Instruction.h:224</a></div></div>
<div class="ttc" id="namespacefalse_html"><div class="ttname"><a href="namespacefalse.html">false</a></div><div class="ttdef"><b>Definition:</b> <a href="StackSlotColoring_8cpp_source.html#l00142">StackSlotColoring.cpp:142</a></div></div>
<div class="ttc" id="namespacellvm_1_1Intrinsic_html_a80add6b3b1cdaec560907995127adc16"><div class="ttname"><a href="namespacellvm_1_1Intrinsic.html#a80add6b3b1cdaec560907995127adc16">llvm::Intrinsic::ID</a></div><div class="ttdeci">unsigned ID</div><div class="ttdef"><b>Definition:</b> <a href="TargetTransformInfo_8h_source.html#l00039">TargetTransformInfo.h:39</a></div></div>
<div class="ttc" id="MemorySSA_8cpp_html_af21791a898355d83b502fd655b90e061"><div class="ttname"><a href="MemorySSA_8cpp.html#af21791a898355d83b502fd655b90e061">isOrdered</a></div><div class="ttdeci">static bool isOrdered(const Instruction *I)</div><div class="ttdef"><b>Definition:</b> <a href="MemorySSA_8cpp_source.html#l01719">MemorySSA.cpp:1719</a></div></div>
<div class="ttc" id="classllvm_1_1Instruction_html"><div class="ttname"><a href="classllvm_1_1Instruction.html">llvm::Instruction</a></div><div class="ttdef"><b>Definition:</b> <a href="IR_2Instruction_8h_source.html#l00043">Instruction.h:43</a></div></div>
<div class="ttc" id="namespacellvm_html_a2366b4a30c90d2207626fb717dfb778d"><div class="ttname"><a href="namespacellvm.html#a2366b4a30c90d2207626fb717dfb778d">llvm::operator*</a></div><div class="ttdeci">APInt operator*(APInt a, uint64_t RHS)</div><div class="ttdef"><b>Definition:</b> <a href="APInt_8h_source.html#l02148">APInt.h:2148</a></div></div>
<div class="ttc" id="classllvm_1_1detail_1_1DenseSetImpl_html_a9a3c9d867ff6bde97841c2b7983f5c70"><div class="ttname"><a href="classllvm_1_1detail_1_1DenseSetImpl.html#a9a3c9d867ff6bde97841c2b7983f5c70">llvm::detail::DenseSetImpl::empty</a></div><div class="ttdeci">bool empty() const</div><div class="ttdef"><b>Definition:</b> <a href="DenseSet_8h_source.html#l00074">DenseSet.h:74</a></div></div>
<div class="ttc" id="Dominators_8h_html"><div class="ttname"><a href="Dominators_8h.html">Dominators.h</a></div></div>
<div class="ttc" id="classllvm_1_1MemorySSAWrapperPass_html_a0d649c533f559969a7ffb8291eb63876"><div class="ttname"><a href="classllvm_1_1MemorySSAWrapperPass.html#a0d649c533f559969a7ffb8291eb63876">llvm::MemorySSAWrapperPass::verifyAnalysis</a></div><div class="ttdeci">void verifyAnalysis() const override</div><div class="ttdoc">verifyAnalysis() - This member can be implemented by a analysis pass to check state of analysis infor...</div><div class="ttdef"><b>Definition:</b> <a href="MemorySSA_8cpp_source.html#l02301">MemorySSA.cpp:2301</a></div></div>
<div class="ttc" id="classllvm_1_1simple__ilist_html"><div class="ttname"><a href="classllvm_1_1simple__ilist.html">llvm::simple_ilist</a></div><div class="ttdoc">A simple intrusive list implementation. </div><div class="ttdef"><b>Definition:</b> <a href="simple__ilist_8h_source.html#l00078">simple_ilist.h:78</a></div></div>
<div class="ttc" id="namespacellvm_html_a1e04c366840be500baf40acb465e591a"><div class="ttname"><a href="namespacellvm.html#a1e04c366840be500baf40acb465e591a">llvm::isMustSet</a></div><div class="ttdeci">LLVM_NODISCARD bool isMustSet(const ModRefInfo MRI)</div><div class="ttdef"><b>Definition:</b> <a href="AliasAnalysis_8h_source.html#l00156">AliasAnalysis.h:156</a></div></div>
<div class="ttc" id="classllvm_1_1Use_html_a00a4c7708e339cd3e5f0c0804e3f6c6c"><div class="ttname"><a href="classllvm_1_1Use.html#a00a4c7708e339cd3e5f0c0804e3f6c6c">llvm::Use::getUser</a></div><div class="ttdeci">User * getUser() const LLVM_READONLY</div><div class="ttdoc">Returns the User that contains this Use. </div><div class="ttdef"><b>Definition:</b> <a href="Use_8cpp_source.html#l00040">Use.cpp:40</a></div></div>
<div class="ttc" id="SIInstrInfo_8cpp_html_a0dfd55eaf0bcb495f09ecf8c55b256b2a6cbe5ff42f143903e1c67abf94613791"><div class="ttname"><a href="SIInstrInfo_8cpp.html#a0dfd55eaf0bcb495f09ecf8c55b256b2a6cbe5ff42f143903e1c67abf94613791">SI</a></div><div class="ttdef"><b>Definition:</b> <a href="SIInstrInfo_8cpp_source.html#l06317">SIInstrInfo.cpp:6317</a></div></div>
<div class="ttc" id="MD5_8cpp_html_a96d73bbd7af15cb1fc38c3f4a3bd82e9"><div class="ttname"><a href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a></div><div class="ttdeci">#define F(x, y, z)</div><div class="ttdef"><b>Definition:</b> <a href="MD5_8cpp_source.html#l00055">MD5.cpp:55</a></div></div>
<div class="ttc" id="classllvm_1_1MemorySSA_html_a4ece07ee1030856099726901d0eef81b"><div class="ttname"><a href="classllvm_1_1MemorySSA.html#a4ece07ee1030856099726901d0eef81b">llvm::MemorySSA::getMemoryAccess</a></div><div class="ttdeci">MemoryUseOrDef * getMemoryAccess(const Instruction *I) const</div><div class="ttdoc">Given a memory Mod/Ref&amp;#39;ing instruction, get the MemorySSA access associated with it. </div><div class="ttdef"><b>Definition:</b> <a href="MemorySSA_8h_source.html#l00721">MemorySSA.h:721</a></div></div>
<div class="ttc" id="Hashing_8h_html"><div class="ttname"><a href="Hashing_8h.html">Hashing.h</a></div></div>
<div class="ttc" id="structllvm_1_1MemorySSAAnalysis_1_1Result_html"><div class="ttname"><a href="structllvm_1_1MemorySSAAnalysis_1_1Result.html">llvm::MemorySSAAnalysis::Result</a></div><div class="ttdef"><b>Definition:</b> <a href="MemorySSA_8h_source.html#l00934">MemorySSA.h:934</a></div></div>
<div class="ttc" id="namespacellvm_html_aaa8db63ab2c8843f6e41c7fde63b1d84"><div class="ttname"><a href="namespacellvm.html#aaa8db63ab2c8843f6e41c7fde63b1d84">llvm::upward_defs_end</a></div><div class="ttdeci">upward_defs_iterator upward_defs_end()</div><div class="ttdef"><b>Definition:</b> <a href="MemorySSA_8h_source.html#l01247">MemorySSA.h:1247</a></div></div>
<div class="ttc" id="EarlyCSE_8cpp_html_a310e3a79b8a474993ca1d62a3de9338c"><div class="ttname"><a href="EarlyCSE_8cpp.html#a310e3a79b8a474993ca1d62a3de9338c">memssa</a></div><div class="ttdeci">early cse memssa</div><div class="ttdef"><b>Definition:</b> <a href="EarlyCSE_8cpp_source.html#l01463">EarlyCSE.cpp:1463</a></div></div>
<div class="ttc" id="SmallPtrSet_8h_html"><div class="ttname"><a href="SmallPtrSet_8h.html">SmallPtrSet.h</a></div></div>
<div class="ttc" id="MemorySSA_8cpp_html_a20a60bdac22b099d87d8cb0c1d554120"><div class="ttname"><a href="MemorySSA_8cpp.html#a20a60bdac22b099d87d8cb0c1d554120">SSA</a></div><div class="ttdeci">Memory SSA</div><div class="ttdef"><b>Definition:</b> <a href="MemorySSA_8cpp_source.html#l00066">MemorySSA.cpp:66</a></div></div>
<div class="ttc" id="classllvm_1_1DomTreeNodeBase_html"><div class="ttname"><a href="classllvm_1_1DomTreeNodeBase.html">llvm::DomTreeNodeBase&lt; BasicBlock &gt;</a></div></div>
<div class="ttc" id="classllvm_1_1BatchAAResults_html"><div class="ttname"><a href="classllvm_1_1BatchAAResults.html">llvm::BatchAAResults</a></div><div class="ttdoc">This class is a wrapper over an AAResults, and it is intended to be used only when there are no IR ch...</div><div class="ttdef"><b>Definition:</b> <a href="AliasAnalysis_8h_source.html#l00777">AliasAnalysis.h:777</a></div></div>
<div class="ttc" id="classllvm_1_1MemorySSAAnnotatedWriter_html_a8210b54309657bacb22a234653915034"><div class="ttname"><a href="classllvm_1_1MemorySSAAnnotatedWriter.html#a8210b54309657bacb22a234653915034">llvm::MemorySSAAnnotatedWriter::emitBasicBlockStartAnnot</a></div><div class="ttdeci">void emitBasicBlockStartAnnot(const BasicBlock *BB, formatted_raw_ostream &amp;OS) override</div><div class="ttdoc">emitBasicBlockStartAnnot - This may be implemented to emit a string right after the basic block label...</div><div class="ttdef"><b>Definition:</b> <a href="MemorySSA_8cpp_source.html#l00107">MemorySSA.cpp:107</a></div></div>
<div class="ttc" id="classllvm_1_1MemorySSA_html_a0211e050a705084ef5e653127a7fb3df"><div class="ttname"><a href="classllvm_1_1MemorySSA.html#a0211e050a705084ef5e653127a7fb3df">llvm::MemorySSA::dump</a></div><div class="ttdeci">void dump() const</div><div class="ttdef"><b>Definition:</b> <a href="MemorySSA_8cpp_source.html#l01869">MemorySSA.cpp:1869</a></div></div>
<div class="ttc" id="MemorySSA_8cpp_html_aba328dc3197724a10ffa60efc7e308be"><div class="ttname"><a href="MemorySSA_8cpp.html#aba328dc3197724a10ffa60efc7e308be">VerifyMemorySSAX</a></div><div class="ttdeci">static cl::opt&lt; bool, true &gt; VerifyMemorySSAX(&quot;verify-memoryssa&quot;, cl::location(VerifyMemorySSA), cl::Hidden, cl::desc(&quot;Enable verification of MemorySSA.&quot;))</div></div>
<div class="ttc" id="classllvm_1_1MemorySSAWalker_html"><div class="ttname"><a href="classllvm_1_1MemorySSAWalker.html">llvm::MemorySSAWalker</a></div><div class="ttdoc">This is the generic walker interface for walkers of MemorySSA. </div><div class="ttdef"><b>Definition:</b> <a href="MemorySSA_8h_source.html#l00995">MemorySSA.h:995</a></div></div>
<div class="ttc" id="classllvm_1_1iterator__facade__base_html"><div class="ttname"><a href="classllvm_1_1iterator__facade__base.html">llvm::iterator_facade_base</a></div><div class="ttdoc">CRTP base class which implements the entire standard iterator facade in terms of a minimal subset of ...</div><div class="ttdef"><b>Definition:</b> <a href="iterator_8h_source.html#l00067">iterator.h:67</a></div></div>
<div class="ttc" id="classllvm_1_1DominatorTree_html"><div class="ttname"><a href="classllvm_1_1DominatorTree.html">llvm::DominatorTree</a></div><div class="ttdoc">Concrete subclass of DominatorTreeBase that is used to compute a normal dominator tree...</div><div class="ttdef"><b>Definition:</b> <a href="Dominators_8h_source.html#l00144">Dominators.h:144</a></div></div>
<div class="ttc" id="DepthFirstIterator_8h_html"><div class="ttname"><a href="DepthFirstIterator_8h.html">DepthFirstIterator.h</a></div></div>
<div class="ttc" id="classllvm_1_1MemoryPhi_html_ad9d171a8662f441f5c7c50061e628565"><div class="ttname"><a href="classllvm_1_1MemoryPhi.html#ad9d171a8662f441f5c7c50061e628565">llvm::MemoryPhi::getIncomingValue</a></div><div class="ttdeci">MemoryAccess * getIncomingValue(unsigned I) const</div><div class="ttdoc">Return incoming value number x. </div><div class="ttdef"><b>Definition:</b> <a href="MemorySSA_8h_source.html#l00534">MemorySSA.h:534</a></div></div>
<div class="ttc" id="namespacellvm_html_a5c6e5b63f852936ab3bc22ccea11a52b"><div class="ttname"><a href="namespacellvm.html#a5c6e5b63f852936ab3bc22ccea11a52b">llvm::isAtLeastOrStrongerThan</a></div><div class="ttdeci">bool isAtLeastOrStrongerThan(AtomicOrdering ao, AtomicOrdering other)</div><div class="ttdef"><b>Definition:</b> <a href="AtomicOrdering_8h_source.html#l00104">AtomicOrdering.h:104</a></div></div>
<div class="ttc" id="classllvm_1_1MemorySSAAnnotatedWriter_html"><div class="ttname"><a href="classllvm_1_1MemorySSAAnnotatedWriter.html">llvm::MemorySSAAnnotatedWriter</a></div><div class="ttdoc">An assembly annotator class to print Memory SSA information in comments. </div><div class="ttdef"><b>Definition:</b> <a href="MemorySSA_8cpp_source.html#l00099">MemorySSA.cpp:99</a></div></div>
<div class="ttc" id="classllvm_1_1DomTreeNodeBase_html_a74111c67a831eb30b020ecf063bce406"><div class="ttname"><a href="classllvm_1_1DomTreeNodeBase.html#a74111c67a831eb30b020ecf063bce406">llvm::DomTreeNodeBase::end</a></div><div class="ttdeci">iterator end()</div><div class="ttdef"><b>Definition:</b> <a href="GenericDomTree_8h_source.html#l00077">GenericDomTree.h:77</a></div></div>
<div class="ttc" id="classllvm_1_1MemorySSA_html_acd0427b84adce00e5b26f993c7aa48c8"><div class="ttname"><a href="classllvm_1_1MemorySSA.html#acd0427b84adce00e5b26f993c7aa48c8">llvm::MemorySSA::removeFromLookups</a></div><div class="ttdeci">void removeFromLookups(MemoryAccess *)</div><div class="ttdoc">Properly remove MA from all of MemorySSA&amp;#39;s lookup tables. </div><div class="ttdef"><b>Definition:</b> <a href="MemorySSA_8cpp_source.html#l01809">MemorySSA.cpp:1809</a></div></div>
<div class="ttc" id="classllvm_1_1DomTreeNodeBase_html_a6a15a030098342e06ea73e1241d614c9"><div class="ttname"><a href="classllvm_1_1DomTreeNodeBase.html#a6a15a030098342e06ea73e1241d614c9">llvm::DomTreeNodeBase::getBlock</a></div><div class="ttdeci">NodeT * getBlock() const</div><div class="ttdef"><b>Definition:</b> <a href="GenericDomTree_8h_source.html#l00081">GenericDomTree.h:81</a></div></div>
<div class="ttc" id="Option_8cpp_html_a04665169063c8ca1f2ea96c27fc7c2b2"><div class="ttname"><a href="Option_8cpp.html#a04665169063c8ca1f2ea96c27fc7c2b2">P</a></div><div class="ttdeci">#define P(N)</div></div>
<div class="ttc" id="CommandLine_8h_html"><div class="ttname"><a href="CommandLine_8h.html">CommandLine.h</a></div></div>
<div class="ttc" id="classllvm_1_1MemoryLocation_html_a18e5a3f1d71ba10a624f2a8e5121cf1f"><div class="ttname"><a href="classllvm_1_1MemoryLocation.html#a18e5a3f1d71ba10a624f2a8e5121cf1f">llvm::MemoryLocation::get</a></div><div class="ttdeci">static MemoryLocation get(const LoadInst *LI)</div><div class="ttdoc">Return a location with information about the memory reference by the given instruction. </div><div class="ttdef"><b>Definition:</b> <a href="MemoryLocation_8cpp_source.html#l00035">MemoryLocation.cpp:35</a></div></div>
<div class="ttc" id="namespacellvm_1_1cl_html_a10a041239ae1870cfcc064bfaa79fb65"><div class="ttname"><a href="namespacellvm_1_1cl.html#a10a041239ae1870cfcc064bfaa79fb65">llvm::cl::init</a></div><div class="ttdeci">initializer&lt; Ty &gt; init(const Ty &amp;Val)</div><div class="ttdef"><b>Definition:</b> <a href="CommandLine_8h_source.html#l00435">CommandLine.h:435</a></div></div>
<div class="ttc" id="BuiltinGCs_8cpp_html_a7abf5fb4071cb25dbce06dfb5ee3c937"><div class="ttname"><a href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a></div><div class="ttdeci">static GCRegistry::Add&lt; OcamlGC &gt; B(&quot;ocaml&quot;, &quot;ocaml 3.10-compatible GC&quot;)</div></div>
<div class="ttc" id="classllvm_1_1PreservedAnalyses_html"><div class="ttname"><a href="classllvm_1_1PreservedAnalyses.html">llvm::PreservedAnalyses</a></div><div class="ttdoc">A set of analyses that are preserved following a run of a transformation pass. </div><div class="ttdef"><b>Definition:</b> <a href="PassManager_8h_source.html#l00154">PassManager.h:154</a></div></div>
<div class="ttc" id="classllvm_1_1AAResults_html"><div class="ttname"><a href="classllvm_1_1AAResults.html">llvm::AAResults</a></div><div class="ttdef"><b>Definition:</b> <a href="AliasAnalysis_8h_source.html#l00311">AliasAnalysis.h:311</a></div></div>
<div class="ttc" id="classllvm_1_1MemorySSA_html_a2ef6f9107316d963f20b9003b7668c4e"><div class="ttname"><a href="classllvm_1_1MemorySSA.html#a2ef6f9107316d963f20b9003b7668c4e">llvm::MemorySSA::getSkipSelfWalker</a></div><div class="ttdeci">MemorySSAWalker * getSkipSelfWalker()</div><div class="ttdef"><b>Definition:</b> <a href="MemorySSA_8cpp_source.html#l01578">MemorySSA.cpp:1578</a></div></div>
<div class="ttc" id="classllvm_1_1MemorySSA_html_af7bc855f1dbf176426fc9d54b815e7b2"><div class="ttname"><a href="classllvm_1_1MemorySSA.html#af7bc855f1dbf176426fc9d54b815e7b2">llvm::MemorySSA::verifyOrderingDominationAndDefUses</a></div><div class="ttdeci">void verifyOrderingDominationAndDefUses(Function &amp;F) const</div><div class="ttdoc">Verify ordering: the order and existence of MemoryAccesses matches the order and existence of memory ...</div><div class="ttdef"><b>Definition:</b> <a href="MemorySSA_8cpp_source.html#l01966">MemorySSA.cpp:1966</a></div></div>
<div class="ttc" id="classllvm_1_1SmallVectorTemplateCommon_html_acd9e771a3296c6b24146955754620557"><div class="ttname"><a href="classllvm_1_1SmallVectorTemplateCommon.html#acd9e771a3296c6b24146955754620557">llvm::SmallVectorTemplateCommon::back</a></div><div class="ttdeci">reference back()</div><div class="ttdef"><b>Definition:</b> <a href="SmallVector_8h_source.html#l00166">SmallVector.h:166</a></div></div>
<div class="ttc" id="classllvm_1_1Value_html_ad9d88ae321b98d8a3b7f394977ae6d7f"><div class="ttname"><a href="classllvm_1_1Value.html#ad9d88ae321b98d8a3b7f394977ae6d7f">llvm::Value::hasName</a></div><div class="ttdeci">bool hasName() const</div><div class="ttdef"><b>Definition:</b> <a href="Value_8h_source.html#l00252">Value.h:252</a></div></div>
<div class="ttc" id="classllvm_1_1SmallVectorImpl_html_aac0ea55010b7b1a301e65a0baea057aa"><div class="ttname"><a href="classllvm_1_1SmallVectorImpl.html#aac0ea55010b7b1a301e65a0baea057aa">llvm::SmallVectorImpl::clear</a></div><div class="ttdeci">void clear()</div><div class="ttdef"><b>Definition:</b> <a href="SmallVector_8h_source.html#l00339">SmallVector.h:339</a></div></div>
<div class="ttc" id="classllvm_1_1BasicBlock_html"><div class="ttname"><a href="classllvm_1_1BasicBlock.html">llvm::BasicBlock</a></div><div class="ttdoc">LLVM Basic Block Representation. </div><div class="ttdef"><b>Definition:</b> <a href="BasicBlock_8h_source.html#l00057">BasicBlock.h:57</a></div></div>
<div class="ttc" id="namespacellvm_1_1tgtok_html_abbc5259d649363016626e2529fabe0c5aceb138f68fe183995736614928e3394a"><div class="ttname"><a href="namespacellvm_1_1tgtok.html#abbc5259d649363016626e2529fabe0c5aceb138f68fe183995736614928e3394a">llvm::tgtok::Def</a></div><div class="ttdef"><b>Definition:</b> <a href="TGLexer_8h_source.html#l00049">TGLexer.h:49</a></div></div>
<div class="ttc" id="classllvm_1_1DomTreeNodeBase_html_aa22cb3ff8c95bb05185acad8c569d4b6"><div class="ttname"><a href="classllvm_1_1DomTreeNodeBase.html#aa22cb3ff8c95bb05185acad8c569d4b6">llvm::DomTreeNodeBase::getIDom</a></div><div class="ttdeci">DomTreeNodeBase * getIDom() const</div><div class="ttdef"><b>Definition:</b> <a href="GenericDomTree_8h_source.html#l00082">GenericDomTree.h:82</a></div></div>
<div class="ttc" id="Compiler_8h_html"><div class="ttname"><a href="Compiler_8h.html">Compiler.h</a></div></div>
<div class="ttc" id="BuiltinGCs_8cpp_html_a6742d2e0a668baf1196ec69e158d5f15"><div class="ttname"><a href="BuiltinGCs_8cpp.html#a6742d2e0a668baf1196ec69e158d5f15">E</a></div><div class="ttdeci">static GCRegistry::Add&lt; CoreCLRGC &gt; E(&quot;coreclr&quot;, &quot;CoreCLR-compatible GC&quot;)</div></div>
<div class="ttc" id="classllvm_1_1SmallPtrSetImplBase_html_a117612cef19ebb89bd37949ea165642a"><div class="ttname"><a href="classllvm_1_1SmallPtrSetImplBase.html#a117612cef19ebb89bd37949ea165642a">llvm::SmallPtrSetImplBase::empty</a></div><div class="ttdeci">LLVM_NODISCARD bool empty() const</div><div class="ttdef"><b>Definition:</b> <a href="SmallPtrSet_8h_source.html#l00091">SmallPtrSet.h:91</a></div></div>
<div class="ttc" id="InitializePasses_8h_html"><div class="ttname"><a href="InitializePasses_8h.html">InitializePasses.h</a></div></div>
<div class="ttc" id="classllvm_1_1AAManager_html"><div class="ttname"><a href="classllvm_1_1AAManager.html">llvm::AAManager</a></div><div class="ttdoc">A manager for alias analyses. </div><div class="ttdef"><b>Definition:</b> <a href="AliasAnalysis_8h_source.html#l01104">AliasAnalysis.h:1104</a></div></div>
<div class="ttc" id="classllvm_1_1detail_1_1DenseSetImpl_html_a79eed48913651aeedda2eed25201ea84"><div class="ttname"><a href="classllvm_1_1detail_1_1DenseSetImpl.html#a79eed48913651aeedda2eed25201ea84">llvm::detail::DenseSetImpl::insert</a></div><div class="ttdeci">std::pair&lt; iterator, bool &gt; insert(const ValueT &amp;V)</div><div class="ttdef"><b>Definition:</b> <a href="DenseSet_8h_source.html#l00187">DenseSet.h:187</a></div></div>
<div class="ttc" id="structllvm_1_1DenseMapInfo_3_01MemoryLocOrCall_01_4_html_a1aaef96a9b5ebb2c88c4001393744f9e"><div class="ttname"><a href="structllvm_1_1DenseMapInfo_3_01MemoryLocOrCall_01_4.html#a1aaef96a9b5ebb2c88c4001393744f9e">llvm::DenseMapInfo&lt; MemoryLocOrCall &gt;::isEqual</a></div><div class="ttdeci">static bool isEqual(const MemoryLocOrCall &amp;LHS, const MemoryLocOrCall &amp;RHS)</div><div class="ttdef"><b>Definition:</b> <a href="MemorySSA_8cpp_source.html#l00213">MemorySSA.cpp:213</a></div></div>
<div class="ttc" id="structllvm_1_1cl_1_1desc_html"><div class="ttname"><a href="structllvm_1_1cl_1_1desc.html">llvm::cl::desc</a></div><div class="ttdef"><b>Definition:</b> <a href="CommandLine_8h_source.html#l00406">CommandLine.h:406</a></div></div>
<div class="ttc" id="classllvm_1_1SmallPtrSetImpl_html_a6bc6fb89fe2e91c25559a8631f56e27e"><div class="ttname"><a href="classllvm_1_1SmallPtrSetImpl.html#a6bc6fb89fe2e91c25559a8631f56e27e">llvm::SmallPtrSetImpl::insert</a></div><div class="ttdeci">std::pair&lt; iterator, bool &gt; insert(PtrType Ptr)</div><div class="ttdoc">Inserts Ptr if and only if there is no element in the container equal to Ptr. </div><div class="ttdef"><b>Definition:</b> <a href="SmallPtrSet_8h_source.html#l00370">SmallPtrSet.h:370</a></div></div>
<div class="ttc" id="EarlyCSE_8cpp_html_a8dbb9a70b80f850edc8194bde1b5b305"><div class="ttname"><a href="EarlyCSE_8cpp.html#a8dbb9a70b80f850edc8194bde1b5b305">MemorySSA</a></div><div class="ttdeci">early cse Early CSE w MemorySSA</div><div class="ttdef"><b>Definition:</b> <a href="EarlyCSE_8cpp_source.html#l01463">EarlyCSE.cpp:1463</a></div></div>
<div class="ttc" id="classllvm_1_1MemoryAccess_html_a0323cfb2d9032e14069108390831f5b7"><div class="ttname"><a href="classllvm_1_1MemoryAccess.html#a0323cfb2d9032e14069108390831f5b7">llvm::MemoryAccess::dump</a></div><div class="ttdeci">void dump() const</div><div class="ttdef"><b>Definition:</b> <a href="MemorySSA_8cpp_source.html#l02220">MemorySSA.cpp:2220</a></div></div>
<div class="ttc" id="namespacellvm_html_a1d0ac37acc2482f8794195f5042b61b5a6adf97f83acf6453d4a6a4b1070f3754"><div class="ttname"><a href="namespacellvm.html#a1d0ac37acc2482f8794195f5042b61b5a6adf97f83acf6453d4a6a4b1070f3754">llvm::NoneType::None</a></div></div>
<div class="ttc" id="namespacellvm_html_a7e108932dc3da5294aed99a353aac9c4"><div class="ttname"><a href="namespacellvm.html#a7e108932dc3da5294aed99a353aac9c4">llvm::pred_begin</a></div><div class="ttdeci">Interval::pred_iterator pred_begin(Interval *I)</div><div class="ttdoc">pred_begin/pred_end - define methods so that Intervals may be used just like BasicBlocks can with the...</div><div class="ttdef"><b>Definition:</b> <a href="Interval_8h_source.html#l00112">Interval.h:112</a></div></div>
<div class="ttc" id="classllvm_1_1MemorySSA_html_a9773fde54683945b9e34a0f2e5c1a5a5"><div class="ttname"><a href="classllvm_1_1MemorySSA.html#a9773fde54683945b9e34a0f2e5c1a5a5">llvm::MemorySSA::InsertionPlace</a></div><div class="ttdeci">InsertionPlace</div><div class="ttdoc">Used in various insertion functions to specify whether we are talking about the beginning or end of a...</div><div class="ttdef"><b>Definition:</b> <a href="MemorySSA_8h_source.html#l00789">MemorySSA.h:789</a></div></div>
<div class="ttc" id="classllvm_1_1AnalysisUsage_html"><div class="ttname"><a href="classllvm_1_1AnalysisUsage.html">llvm::AnalysisUsage</a></div><div class="ttdoc">Represent the analysis usage information of a pass. </div><div class="ttdef"><b>Definition:</b> <a href="PassAnalysisSupport_8h_source.html#l00042">PassAnalysisSupport.h:42</a></div></div>
<div class="ttc" id="classllvm_1_1MemoryAccess_html_aadff5eaae30623b4077b9dec90f29dcf"><div class="ttname"><a href="classllvm_1_1MemoryAccess.html#aadff5eaae30623b4077b9dec90f29dcf">llvm::MemoryAccess::print</a></div><div class="ttdeci">void print(raw_ostream &amp;OS) const</div><div class="ttdef"><b>Definition:</b> <a href="MemorySSA_8cpp_source.html#l02149">MemorySSA.cpp:2149</a></div></div>
<div class="ttc" id="DenseSet_8h_html"><div class="ttname"><a href="DenseSet_8h.html">DenseSet.h</a></div></div>
<div class="ttc" id="Compiler_8h_html_acc1c483f4b4ee2f17bb6643a3b353609"><div class="ttname"><a href="Compiler_8h.html#acc1c483f4b4ee2f17bb6643a3b353609">LLVM_ATTRIBUTE_UNUSED</a></div><div class="ttdeci">#define LLVM_ATTRIBUTE_UNUSED</div><div class="ttdef"><b>Definition:</b> <a href="Compiler_8h_source.html#l00186">Compiler.h:186</a></div></div>
<div class="ttc" id="classllvm_1_1FunctionPass_html"><div class="ttname"><a href="classllvm_1_1FunctionPass.html">llvm::FunctionPass</a></div><div class="ttdoc">FunctionPass class - This class is used to implement most global optimizations. </div><div class="ttdef"><b>Definition:</b> <a href="Pass_8h_source.html#l00282">Pass.h:282</a></div></div>
<div class="ttc" id="AMDGPULibCalls_8cpp_html_afecf1cc1292b07f57d343c0f4d682044"><div class="ttname"><a href="AMDGPULibCalls_8cpp.html#afecf1cc1292b07f57d343c0f4d682044">Arg</a></div><div class="ttdeci">amdgpu Simplify well known AMD library false FunctionCallee Value * Arg</div><div class="ttdef"><b>Definition:</b> <a href="AMDGPULibCalls_8cpp_source.html#l00224">AMDGPULibCalls.cpp:224</a></div></div>
<div class="ttc" id="namespacellvm_html_a5eeaf08e96168c2cac8960f87f0ef360"><div class="ttname"><a href="namespacellvm.html#a5eeaf08e96168c2cac8960f87f0ef360">llvm::pred_end</a></div><div class="ttdeci">Interval::pred_iterator pred_end(Interval *I)</div><div class="ttdef"><b>Definition:</b> <a href="Interval_8h_source.html#l00115">Interval.h:115</a></div></div>
<div class="ttc" id="ArchiveWriter_8cpp_html_aa9f638c7ae7fdd206a6c60e26bef9751"><div class="ttname"><a href="ArchiveWriter_8cpp.html#aa9f638c7ae7fdd206a6c60e26bef9751">print</a></div><div class="ttdeci">static void print(raw_ostream &amp;Out, object::Archive::Kind Kind, T Val)</div><div class="ttdef"><b>Definition:</b> <a href="ArchiveWriter_8cpp_source.html#l00145">ArchiveWriter.cpp:145</a></div></div>
<div class="ttc" id="classllvm_1_1SmallPtrSetImpl_html_a1f475b0df44ebd7169e720fa1bf9169e"><div class="ttname"><a href="classllvm_1_1SmallPtrSetImpl.html#a1f475b0df44ebd7169e720fa1bf9169e">llvm::SmallPtrSetImpl::count</a></div><div class="ttdeci">size_type count(ConstPtrType Ptr) const</div><div class="ttdoc">count - Return 1 if the specified pointer is in the set, 0 otherwise. </div><div class="ttdef"><b>Definition:</b> <a href="SmallPtrSet_8h_source.html#l00381">SmallPtrSet.h:381</a></div></div>
<div class="ttc" id="MemorySSA_8cpp_html_aced78c3344e93eaed9a44b319bf14c29"><div class="ttname"><a href="MemorySSA_8cpp.html#aced78c3344e93eaed9a44b319bf14c29">Printer</a></div><div class="ttdeci">Memory true print Memory SSA Printer</div><div class="ttdef"><b>Definition:</b> <a href="MemorySSA_8cpp_source.html#l00072">MemorySSA.cpp:72</a></div></div>
<div class="ttc" id="namespacellvm_html_a6e5bba09e6cf0a670994bdfdfe6ccee6"><div class="ttname"><a href="namespacellvm.html#a6e5bba09e6cf0a670994bdfdfe6ccee6">llvm::find_if</a></div><div class="ttdeci">auto find_if(R &amp;&amp;Range, UnaryPredicate P) -&gt; decltype(adl_begin(Range))</div><div class="ttdoc">Provide wrappers to std::find_if which take ranges instead of having to pass begin/end explicitly...</div><div class="ttdef"><b>Definition:</b> <a href="STLExtras_8h_source.html#l01210">STLExtras.h:1210</a></div></div>
<div class="ttc" id="DenseMap_8h_html"><div class="ttname"><a href="DenseMap_8h.html">DenseMap.h</a></div></div>
<div class="ttc" id="structllvm_1_1MemorySSAVerifierPass_html_a5fa2dbea1ad6cf5950da7d2a642a73bd"><div class="ttname"><a href="structllvm_1_1MemorySSAVerifierPass.html#a5fa2dbea1ad6cf5950da7d2a642a73bd">llvm::MemorySSAVerifierPass::run</a></div><div class="ttdeci">PreservedAnalyses run(Function &amp;F, FunctionAnalysisManager &amp;AM)</div><div class="ttdef"><b>Definition:</b> <a href="MemorySSA_8cpp_source.html#l02273">MemorySSA.cpp:2273</a></div></div>
<div class="ttc" id="namespacellvm_html_afb3536a97f2cec3662eee8aeaec8992d"><div class="ttname"><a href="namespacellvm.html#afb3536a97f2cec3662eee8aeaec8992d">llvm::find_if_not</a></div><div class="ttdeci">auto find_if_not(R &amp;&amp;Range, UnaryPredicate P) -&gt; decltype(adl_begin(Range))</div><div class="ttdef"><b>Definition:</b> <a href="STLExtras_8h_source.html#l01215">STLExtras.h:1215</a></div></div>
<div class="ttc" id="classllvm_1_1MemorySSAWalker_html_a8bb8d1cc3b3a95d81ee75395cadf83c3"><div class="ttname"><a href="classllvm_1_1MemorySSAWalker.html#a8bb8d1cc3b3a95d81ee75395cadf83c3">llvm::MemorySSAWalker::invalidateInfo</a></div><div class="ttdeci">virtual void invalidateInfo(MemoryAccess *)</div><div class="ttdoc">Given a memory access, invalidate anything this walker knows about that access. </div><div class="ttdef"><b>Definition:</b> <a href="MemorySSA_8h_source.html#l01053">MemorySSA.h:1053</a></div></div>
<div class="ttc" id="classllvm_1_1PreservedAnalyses_html_a1258a1ff55557c27684010ebd7283712"><div class="ttname"><a href="classllvm_1_1PreservedAnalyses.html#a1258a1ff55557c27684010ebd7283712">llvm::PreservedAnalyses::all</a></div><div class="ttdeci">static PreservedAnalyses all()</div><div class="ttdoc">Construct a special preserved set that preserves all passes. </div><div class="ttdef"><b>Definition:</b> <a href="PassManager_8h_source.html#l00160">PassManager.h:160</a></div></div>
<div class="ttc" id="classT_html"><div class="ttname"><a href="classT.html">T</a></div></div>
<div class="ttc" id="classllvm_1_1SmallVectorBase_html_ac8624043115fb3a5076c964820001b61"><div class="ttname"><a href="classllvm_1_1SmallVectorBase.html#ac8624043115fb3a5076c964820001b61">llvm::SmallVectorBase::size</a></div><div class="ttdeci">size_t size() const</div><div class="ttdef"><b>Definition:</b> <a href="SmallVector_8h_source.html#l00052">SmallVector.h:52</a></div></div>
<div class="ttc" id="IteratedDominanceFrontier_8h_html"><div class="ttname"><a href="IteratedDominanceFrontier_8h.html">IteratedDominanceFrontier.h</a></div></div>
<div class="ttc" id="classllvm_1_1DominatorTreeBase_html_a4344e66fb61ea313a85a9e054124ac55"><div class="ttname"><a href="classllvm_1_1DominatorTreeBase.html#a4344e66fb61ea313a85a9e054124ac55">llvm::DominatorTreeBase::getNode</a></div><div class="ttdeci">DomTreeNodeBase&lt; NodeT &gt; * getNode(const NodeT *BB) const</div><div class="ttdoc">getNode - return the (Post)DominatorTree node for the specified basic block. </div><div class="ttdef"><b>Definition:</b> <a href="GenericDomTree_8h_source.html#l00328">GenericDomTree.h:328</a></div></div>
<div class="ttc" id="namespacellvm_html_a4a55633d4f1b169d533a3a67122d96ff"><div class="ttname"><a href="namespacellvm.html#a4a55633d4f1b169d533a3a67122d96ff">llvm::find</a></div><div class="ttdeci">auto find(R &amp;&amp;Range, const T &amp;Val) -&gt; decltype(adl_begin(Range))</div><div class="ttdoc">Provide wrappers to std::find which take ranges instead of having to pass begin/end explicitly...</div><div class="ttdef"><b>Definition:</b> <a href="STLExtras_8h_source.html#l01203">STLExtras.h:1203</a></div></div>
<div class="ttc" id="classllvm_1_1iplist_html"><div class="ttname"><a href="classllvm_1_1iplist.html">llvm::iplist</a></div><div class="ttdoc">An intrusive list with ownership and callbacks specified/controlled by ilist_traits, only with API safe for polymorphic types. </div><div class="ttdef"><b>Definition:</b> <a href="ilist_8h_source.html#l00388">ilist.h:388</a></div></div>
<div class="ttc" id="classllvm_1_1Value_html_a62213d5211c9d944e5ede1f0059a6ae2"><div class="ttname"><a href="classllvm_1_1Value.html#a62213d5211c9d944e5ede1f0059a6ae2">llvm::Value::printAsOperand</a></div><div class="ttdeci">void printAsOperand(raw_ostream &amp;O, bool PrintType=true, const Module *M=nullptr) const</div><div class="ttdoc">Print the name of this Value out to the specified raw_ostream. </div><div class="ttdef"><b>Definition:</b> <a href="AsmWriter_8cpp_source.html#l04393">AsmWriter.cpp:4393</a></div></div>
<div class="ttc" id="RegBankSelect_8cpp_html_a0eee13989797c0d4612066f84ff7a7b8"><div class="ttname"><a href="RegBankSelect_8cpp.html#a0eee13989797c0d4612066f84ff7a7b8">INITIALIZE_PASS_END</a></div><div class="ttdeci">INITIALIZE_PASS_END(RegBankSelect, DEBUG_TYPE, &quot;Assign register bank of generic virtual registers&quot;, false, false) RegBankSelect</div><div class="ttdef"><b>Definition:</b> <a href="RegBankSelect_8cpp_source.html#l00069">RegBankSelect.cpp:69</a></div></div>
<div class="ttc" id="Support_2ErrorHandling_8h_html_ace243f5c25697a1107cce46626b3dc94"><div class="ttname"><a href="Support_2ErrorHandling_8h.html#ace243f5c25697a1107cce46626b3dc94">llvm_unreachable</a></div><div class="ttdeci">#define llvm_unreachable(msg)</div><div class="ttdoc">Marks that the current location is not supposed to be reachable. </div><div class="ttdef"><b>Definition:</b> <a href="Support_2ErrorHandling_8h_source.html#l00135">ErrorHandling.h:135</a></div></div>
<div class="ttc" id="MemorySSA_8cpp_html_a5926ddc0f7c4225c6ced440baa2fb7a3"><div class="ttname"><a href="MemorySSA_8cpp.html#a5926ddc0f7c4225c6ced440baa2fb7a3">MaxCheckLimit</a></div><div class="ttdeci">Memory true print Memory SSA static false cl::opt&lt; unsigned &gt; MaxCheckLimit(&quot;memssa-check-limit&quot;, cl::Hidden, cl::init(100), cl::desc(&quot;The maximum number of stores/phis MemorySSA&quot; &quot;will consider trying to walk past (default = 100)&quot;))</div></div>
<div class="ttc" id="FormattedStream_8h_html"><div class="ttname"><a href="FormattedStream_8h.html">FormattedStream.h</a></div></div>
<div class="ttc" id="classllvm_1_1MemorySSA_1_1OptimizeUses_html_a195658a43b30378309ff4e62455dc137"><div class="ttname"><a href="classllvm_1_1MemorySSA_1_1OptimizeUses.html#a195658a43b30378309ff4e62455dc137">llvm::MemorySSA::OptimizeUses::optimizeUses</a></div><div class="ttdeci">void optimizeUses()</div><div class="ttdoc">Optimize uses to point to their actual clobbering definitions. </div><div class="ttdef"><b>Definition:</b> <a href="MemorySSA_8cpp_source.html#l01480">MemorySSA.cpp:1480</a></div></div>
<div class="ttc" id="namespacellvm_html_ae1738272abcf2ac638b97e7dc6360cfdafb69d5dfee1598378741360198a1ba8e"><div class="ttname"><a href="namespacellvm.html#ae1738272abcf2ac638b97e7dc6360cfdafb69d5dfee1598378741360198a1ba8e">llvm::MayAlias</a></div><div class="ttdoc">The two locations may or may not alias. This is the least precise result. </div><div class="ttdef"><b>Definition:</b> <a href="AliasAnalysis_8h_source.html#l00086">AliasAnalysis.h:86</a></div></div>
<div class="ttc" id="MemorySSA_8cpp_html_aa7bf9007b34e2a7a16275b1a7d7e3d63"><div class="ttname"><a href="MemorySSA_8cpp.html#aa7bf9007b34e2a7a16275b1a7d7e3d63">isUseTriviallyOptimizableToLiveOnEntry</a></div><div class="ttdeci">static bool isUseTriviallyOptimizableToLiveOnEntry(AliasAnalysisType &amp;AA, const Instruction *I)</div><div class="ttdef"><b>Definition:</b> <a href="MemorySSA_8cpp_source.html#l00375">MemorySSA.cpp:375</a></div></div>
<div class="ttc" id="classllvm_1_1IDFCalculatorBase_html_a5961687b5506862585629d7f4a0d6d56"><div class="ttname"><a href="classllvm_1_1IDFCalculatorBase.html#a5961687b5506862585629d7f4a0d6d56">llvm::IDFCalculatorBase::setDefiningBlocks</a></div><div class="ttdeci">void setDefiningBlocks(const SmallPtrSetImpl&lt; NodeTy *&gt; &amp;Blocks)</div><div class="ttdoc">Give the IDF calculator the set of blocks in which the value is defined. </div><div class="ttdef"><b>Definition:</b> <a href="GenericIteratedDominanceFrontier_8h_source.html#l00075">GenericIteratedDominanceFrontier.h:75</a></div></div>
<div class="ttc" id="classllvm_1_1MemoryLocation_html"><div class="ttname"><a href="classllvm_1_1MemoryLocation.html">llvm::MemoryLocation</a></div><div class="ttdoc">Representation for a specific memory location. </div><div class="ttdef"><b>Definition:</b> <a href="MemoryLocation_8h_source.html#l00174">MemoryLocation.h:174</a></div></div>
<div class="ttc" id="namespacellvm_html_ae1738272abcf2ac638b97e7dc6360cfda96e73e8d9d3af47453d4d562f9be0b44"><div class="ttname"><a href="namespacellvm.html#ae1738272abcf2ac638b97e7dc6360cfda96e73e8d9d3af47453d4d562f9be0b44">llvm::MustAlias</a></div><div class="ttdoc">The two locations precisely alias each other. </div><div class="ttdef"><b>Definition:</b> <a href="AliasAnalysis_8h_source.html#l00090">AliasAnalysis.h:90</a></div></div>
<div class="ttc" id="namespacellvm_html_ad1a91b49e0c092818a0b82f6cc130a1b"><div class="ttname"><a href="namespacellvm.html#ad1a91b49e0c092818a0b82f6cc130a1b">llvm::make_range</a></div><div class="ttdeci">iterator_range&lt; T &gt; make_range(T x, T y)</div><div class="ttdoc">Convenience function for iterating over sub-ranges. </div><div class="ttdef"><b>Definition:</b> <a href="iterator__range_8h_source.html#l00054">iterator_range.h:54</a></div></div>
<div class="ttc" id="classllvm_1_1MemoryUseOrDef_html_a3a9bfe34e7eedc0dea42a04cc95efc6a"><div class="ttname"><a href="classllvm_1_1MemoryUseOrDef.html#a3a9bfe34e7eedc0dea42a04cc95efc6a">llvm::MemoryUseOrDef::setDefiningAccess</a></div><div class="ttdeci">void setDefiningAccess(MemoryAccess *DMA, bool Optimized=false, Optional&lt; AliasResult &gt; AR=MayAlias)</div><div class="ttdef"><b>Definition:</b> <a href="MemorySSA_8h_source.html#l00300">MemorySSA.h:300</a></div></div>
<div class="ttc" id="classllvm_1_1User_html_addec638786f763d967811b45cb662f1f"><div class="ttname"><a href="classllvm_1_1User.html#addec638786f763d967811b45cb662f1f">llvm::User::getNumOperands</a></div><div class="ttdeci">unsigned getNumOperands() const</div><div class="ttdef"><b>Definition:</b> <a href="User_8h_source.html#l00191">User.h:191</a></div></div>
<div class="ttc" id="classllvm_1_1iplist__impl_html_a4563732eae31ee14694e7ce17a5a6749"><div class="ttname"><a href="classllvm_1_1iplist__impl.html#a4563732eae31ee14694e7ce17a5a6749">llvm::iplist_impl&lt; simple_ilist&lt; T, Options... &gt;, ilist_traits&lt; T &gt; &gt;::iterator</a></div><div class="ttdeci">base_list_type::iterator iterator</div><div class="ttdef"><b>Definition:</b> <a href="ilist_8h_source.html#l00177">ilist.h:177</a></div></div>
<div class="ttc" id="classllvm_1_1SmallPtrSet_html"><div class="ttname"><a href="classllvm_1_1SmallPtrSet.html">llvm::SmallPtrSet</a></div><div class="ttdoc">SmallPtrSet - This class implements a set which is optimized for holding SmallSize or less elements...</div><div class="ttdef"><b>Definition:</b> <a href="SmallPtrSet_8h_source.html#l00443">SmallPtrSet.h:443</a></div></div>
<div class="ttc" id="BlockVerifier_8cpp_html_ae45c7d73c0ff5d177b59153ffae77f84"><div class="ttname"><a href="BlockVerifier_8cpp.html#ae45c7d73c0ff5d177b59153ffae77f84">From</a></div><div class="ttdeci">BlockVerifier::State From</div><div class="ttdef"><b>Definition:</b> <a href="BlockVerifier_8cpp_source.html#l00055">BlockVerifier.cpp:55</a></div></div>
<div class="ttc" id="classllvm_1_1MemorySSA_html_a1b675075f5fd5a025edeca069612042e"><div class="ttname"><a href="classllvm_1_1MemorySSA.html#a1b675075f5fd5a025edeca069612042e">llvm::MemorySSA::verifyMemorySSA</a></div><div class="ttdeci">void verifyMemorySSA() const</div><div class="ttdoc">Verify that MemorySSA is self consistent (IE definitions dominate all uses, uses appear in the right ...</div><div class="ttdef"><b>Definition:</b> <a href="MemorySSA_8cpp_source.html#l01872">MemorySSA.cpp:1872</a></div></div>
<div class="ttc" id="classllvm_1_1SmallPtrSetImpl_html_a11045c7973ab24a8d6315b61fa337d4e"><div class="ttname"><a href="classllvm_1_1SmallPtrSetImpl.html#a11045c7973ab24a8d6315b61fa337d4e">llvm::SmallPtrSetImpl::erase</a></div><div class="ttdeci">bool erase(PtrType Ptr)</div><div class="ttdoc">erase - If the set contains the specified pointer, remove it and return true, otherwise return false...</div><div class="ttdef"><b>Definition:</b> <a href="SmallPtrSet_8h_source.html#l00377">SmallPtrSet.h:377</a></div></div>
<div class="ttc" id="MemorySSA_8cpp_html_a8928e8a5cad2fb76511ab41b1b62aacd"><div class="ttname"><a href="MemorySSA_8cpp.html#a8928e8a5cad2fb76511ab41b1b62aacd">checkClobberSanity</a></div><div class="ttdeci">static LLVM_ATTRIBUTE_UNUSED void checkClobberSanity(const MemoryAccess *Start, MemoryAccess *ClobberAt, const MemoryLocation &amp;StartLoc, const MemorySSA &amp;MSSA, const UpwardsMemoryQuery &amp;Query, AliasAnalysisType &amp;AA, bool AllowImpreciseClobber=false)</div><div class="ttdoc">Verifies that Start is clobbered by ClobberAt, and that nothing inbetween Start and ClobberAt can clo...</div><div class="ttdef"><b>Definition:</b> <a href="MemorySSA_8cpp_source.html#l00400">MemorySSA.cpp:400</a></div></div>
<div class="ttc" id="classllvm_1_1MemorySSA_html_ade88aedcbd2b55711000cf3e36c0fc91"><div class="ttname"><a href="classllvm_1_1MemorySSA.html#ade88aedcbd2b55711000cf3e36c0fc91">llvm::MemorySSA::locallyDominates</a></div><div class="ttdeci">bool locallyDominates(const MemoryAccess *A, const MemoryAccess *B) const</div><div class="ttdoc">Given two memory accesses in the same basic block, determine whether MemoryAccess A dominates MemoryA...</div><div class="ttdef"><b>Definition:</b> <a href="MemorySSA_8cpp_source.html#l02089">MemorySSA.cpp:2089</a></div></div>
<div class="ttc" id="classllvm_1_1SmallVector_html"><div class="ttname"><a href="classllvm_1_1SmallVector.html">llvm::SmallVector</a></div><div class="ttdoc">This is a &amp;#39;vector&amp;#39; (really, a variable-sized array), optimized for the case when the array is small...</div><div class="ttdef"><b>Definition:</b> <a href="SmallVector_8h_source.html#l00837">SmallVector.h:837</a></div></div>
<div class="ttc" id="namespacellvm_1_1AArch64CC_html_abfa1f7dce576430da99eed57807c7f28ab89adee997fb2a645a2d26e1f1bdaadf"><div class="ttname"><a href="namespacellvm_1_1AArch64CC.html#abfa1f7dce576430da99eed57807c7f28ab89adee997fb2a645a2d26e1f1bdaadf">llvm::AArch64CC::AL</a></div><div class="ttdef"><b>Definition:</b> <a href="AArch64BaseInfo_8h_source.html#l00250">AArch64BaseInfo.h:250</a></div></div>
<div class="ttc" id="classllvm_1_1DominatorTree_html_ac3abe77784353227ce14dc7c5815c141"><div class="ttname"><a href="classllvm_1_1DominatorTree.html#ac3abe77784353227ce14dc7c5815c141">llvm::DominatorTree::dominates</a></div><div class="ttdeci">bool dominates(const Instruction *Def, const Use &amp;U) const</div><div class="ttdoc">Return true if Def dominates a use in User. </div><div class="ttdef"><b>Definition:</b> <a href="Dominators_8cpp_source.html#l00249">Dominators.cpp:249</a></div></div>
<div class="ttc" id="classllvm_1_1MemorySSAPrinterLegacyPass_html_aaf05971d64f8cc042d8ca50995508fb5"><div class="ttname"><a href="classllvm_1_1MemorySSAPrinterLegacyPass.html#aaf05971d64f8cc042d8ca50995508fb5">llvm::MemorySSAPrinterLegacyPass::runOnFunction</a></div><div class="ttdeci">bool runOnFunction(Function &amp;) override</div><div class="ttdoc">runOnFunction - Virtual method overriden by subclasses to do the per-function processing of the pass...</div><div class="ttdef"><b>Definition:</b> <a href="MemorySSA_8cpp_source.html#l02239">MemorySSA.cpp:2239</a></div></div>
<div class="ttc" id="Support_2ErrorHandling_8h_html"><div class="ttname"><a href="Support_2ErrorHandling_8h.html">ErrorHandling.h</a></div></div>
<div class="ttc" id="classllvm_1_1MemorySSAAnalysis_html"><div class="ttname"><a href="classllvm_1_1MemorySSAAnalysis.html">llvm::MemorySSAAnalysis</a></div><div class="ttdoc">An analysis that produces MemorySSA for a function. </div><div class="ttdef"><b>Definition:</b> <a href="MemorySSA_8h_source.html#l00925">MemorySSA.h:925</a></div></div>
<div class="ttc" id="classllvm_1_1SmallVectorImpl_html_a07e23ae504e2b8c72fd055f93ded8899"><div class="ttname"><a href="classllvm_1_1SmallVectorImpl.html#a07e23ae504e2b8c72fd055f93ded8899">llvm::SmallVectorImpl::pop_back_val</a></div><div class="ttdeci">LLVM_NODISCARD T pop_back_val()</div><div class="ttdef"><b>Definition:</b> <a href="SmallVector_8h_source.html#l00374">SmallVector.h:374</a></div></div>
<div class="ttc" id="classllvm_1_1MemoryAccess_html_aa468ad3fa68bdf6703c391deaec97706"><div class="ttname"><a href="classllvm_1_1MemoryAccess.html#aa468ad3fa68bdf6703c391deaec97706">llvm::MemoryAccess::getBlock</a></div><div class="ttdeci">BasicBlock * getBlock() const</div><div class="ttdef"><b>Definition:</b> <a href="MemorySSA_8h_source.html#l00160">MemorySSA.h:160</a></div></div>
<div class="ttc" id="BuiltinGCs_8cpp_html_a9bf617fd3367180fb96cebccfaae8dfa"><div class="ttname"><a href="BuiltinGCs_8cpp.html#a9bf617fd3367180fb96cebccfaae8dfa">D</a></div><div class="ttdeci">static GCRegistry::Add&lt; StatepointGC &gt; D(&quot;statepoint-example&quot;, &quot;an example strategy for statepoint&quot;)</div></div>
<div class="ttc" id="structllvm_1_1MemorySSAAnalysis_1_1Result_html_aa7ef622a6a2b5d83ccd6b06a42f0ba48"><div class="ttname"><a href="structllvm_1_1MemorySSAAnalysis_1_1Result.html#aa7ef622a6a2b5d83ccd6b06a42f0ba48">llvm::MemorySSAAnalysis::Result::invalidate</a></div><div class="ttdeci">bool invalidate(Function &amp;F, const PreservedAnalyses &amp;PA, FunctionAnalysisManager::Invalidator &amp;Inv)</div><div class="ttdef"><b>Definition:</b> <a href="MemorySSA_8cpp_source.html#l02256">MemorySSA.cpp:2256</a></div></div>
<div class="ttc" id="namespacellvm_html_a91d9d210ba428cc67e3c2e892f24529e"><div class="ttname"><a href="namespacellvm.html#a91d9d210ba428cc67e3c2e892f24529e">llvm::predecessors</a></div><div class="ttdeci">pred_range predecessors(BasicBlock *BB)</div><div class="ttdef"><b>Definition:</b> <a href="IR_2CFG_8h_source.html#l00124">CFG.h:124</a></div></div>
<div class="ttc" id="regcomp_8c_html_a01bd739644e8d3cbbb80f37f6ddb8b0e"><div class="ttname"><a href="regcomp_8c.html#a01bd739644e8d3cbbb80f37f6ddb8b0e">MAP</a></div><div class="ttdeci">#define MAP(n)</div></div>
<div class="ttc" id="classllvm_1_1MemorySSAAnnotatedWriter_html_aea8032b507b431428616174afe3588ae"><div class="ttname"><a href="classllvm_1_1MemorySSAAnnotatedWriter.html#aea8032b507b431428616174afe3588ae">llvm::MemorySSAAnnotatedWriter::emitInstructionAnnot</a></div><div class="ttdeci">void emitInstructionAnnot(const Instruction *I, formatted_raw_ostream &amp;OS) override</div><div class="ttdoc">emitInstructionAnnot - This may be implemented to emit a string right before an instruction is emitte...</div><div class="ttdef"><b>Definition:</b> <a href="MemorySSA_8cpp_source.html#l00113">MemorySSA.cpp:113</a></div></div>
<div class="ttc" id="classllvm_1_1MemorySSA_html_a468b8d23a3bb5b9a484f54193f177713"><div class="ttname"><a href="classllvm_1_1MemorySSA.html#a468b8d23a3bb5b9a484f54193f177713">llvm::MemorySSA::getLiveOnEntryDef</a></div><div class="ttdeci">MemoryAccess * getLiveOnEntryDef() const</div><div class="ttdef"><b>Definition:</b> <a href="MemorySSA_8h_source.html#l00743">MemorySSA.h:743</a></div></div>
<div class="ttc" id="classllvm_1_1MemoryUse_html_a39bac19197190015e13adba7ddb9db2f"><div class="ttname"><a href="classllvm_1_1MemoryUse.html#a39bac19197190015e13adba7ddb9db2f">llvm::MemoryUse::print</a></div><div class="ttdeci">void print(raw_ostream &amp;OS) const</div><div class="ttdef"><b>Definition:</b> <a href="MemorySSA_8cpp_source.html#l02207">MemorySSA.cpp:2207</a></div></div>
<div class="ttc" id="namespacellvm_html_a7c46c742c31be54870e2038048e6b391"><div class="ttname"><a href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">llvm::dbgs</a></div><div class="ttdeci">raw_ostream &amp; dbgs()</div><div class="ttdoc">dbgs() - This returns a reference to a raw_ostream for debugging messages. </div><div class="ttdef"><b>Definition:</b> <a href="Debug_8cpp_source.html#l00132">Debug.cpp:132</a></div></div>
<div class="ttc" id="namespacestd_html_ab8424022895aee3e366fb9a32f2883cb"><div class="ttname"><a href="namespacestd.html#ab8424022895aee3e366fb9a32f2883cb">std::swap</a></div><div class="ttdeci">void swap(llvm::BitVector &amp;LHS, llvm::BitVector &amp;RHS)</div><div class="ttdoc">Implement std::swap in terms of BitVector swap. </div><div class="ttdef"><b>Definition:</b> <a href="BitVector_8h_source.html#l00940">BitVector.h:940</a></div></div>
<div class="ttc" id="classllvm_1_1MemorySSAPrinterLegacyPass_html"><div class="ttname"><a href="classllvm_1_1MemorySSAPrinterLegacyPass.html">llvm::MemorySSAPrinterLegacyPass</a></div><div class="ttdef"><b>Definition:</b> <a href="MemorySSA_8h_source.html#l00913">MemorySSA.h:913</a></div></div>
<div class="ttc" id="classllvm_1_1iterator__range_html"><div class="ttname"><a href="classllvm_1_1iterator__range.html">llvm::iterator_range</a></div><div class="ttdoc">A range adaptor for a pair of iterators. </div><div class="ttdef"><b>Definition:</b> <a href="iterator__range_8h_source.html#l00031">iterator_range.h:31</a></div></div>
<div class="ttc" id="classllvm_1_1MemorySSA_html_ae20e35b50e6cf67987421c996cf14a8c"><div class="ttname"><a href="classllvm_1_1MemorySSA.html#ae20e35b50e6cf67987421c996cf14a8c">llvm::MemorySSA::removeFromLists</a></div><div class="ttdeci">void removeFromLists(MemoryAccess *, bool ShouldDelete=true)</div><div class="ttdoc">Properly remove MA from all of MemorySSA&amp;#39;s lists. </div><div class="ttdef"><b>Definition:</b> <a href="MemorySSA_8cpp_source.html#l01836">MemorySSA.cpp:1836</a></div></div>
<div class="ttc" id="classllvm_1_1Target_html"><div class="ttname"><a href="classllvm_1_1Target.html">llvm::Target</a></div><div class="ttdoc">Target - Wrapper for Target specific information. </div><div class="ttdef"><b>Definition:</b> <a href="TargetRegistry_8h_source.html#l00124">TargetRegistry.h:124</a></div></div>
<div class="ttc" id="classllvm_1_1iplist__impl_html_a319c1a7cbadd9e30ae93fe737aafcdad"><div class="ttname"><a href="classllvm_1_1iplist__impl.html#a319c1a7cbadd9e30ae93fe737aafcdad">llvm::iplist_impl::push_back</a></div><div class="ttdeci">void push_back(pointer val)</div><div class="ttdef"><b>Definition:</b> <a href="ilist_8h_source.html#l00311">ilist.h:311</a></div></div>
<div class="ttc" id="namespacellvm_html_add71474638430694c84640146383fc44"><div class="ttname"><a href="namespacellvm.html#add71474638430694c84640146383fc44">llvm::hash_combine</a></div><div class="ttdeci">hash_code hash_combine(const Ts &amp;...args)</div><div class="ttdoc">Combine values into a single hash_code. </div><div class="ttdef"><b>Definition:</b> <a href="Hashing_8h_source.html#l00600">Hashing.h:600</a></div></div>
<div class="ttc" id="classllvm_1_1MemoryUseOrDef_html"><div class="ttname"><a href="classllvm_1_1MemoryUseOrDef.html">llvm::MemoryUseOrDef</a></div><div class="ttdoc">Class that has the common methods + fields of memory uses/defs. </div><div class="ttdef"><b>Definition:</b> <a href="MemorySSA_8h_source.html#l00248">MemorySSA.h:248</a></div></div>
<div class="ttc" id="classllvm_1_1AnalysisUsage_html_af22b06a6a4f9df80454071685a0d6a02"><div class="ttname"><a href="classllvm_1_1AnalysisUsage.html#af22b06a6a4f9df80454071685a0d6a02">llvm::AnalysisUsage::setPreservesAll</a></div><div class="ttdeci">void setPreservesAll()</div><div class="ttdoc">Set by analyses that do not transform their input at all. </div><div class="ttdef"><b>Definition:</b> <a href="PassAnalysisSupport_8h_source.html#l00120">PassAnalysisSupport.h:120</a></div></div>
<div class="ttc" id="Pass_8h_html"><div class="ttname"><a href="Pass_8h.html">Pass.h</a></div></div>
<div class="ttc" id="classllvm_1_1Value_html_ab4e0512c7e1c7adaa56677e3155685f1"><div class="ttname"><a href="classllvm_1_1Value.html#ab4e0512c7e1c7adaa56677e3155685f1">llvm::Value::users</a></div><div class="ttdeci">iterator_range&lt; user_iterator &gt; users()</div><div class="ttdef"><b>Definition:</b> <a href="Value_8h_source.html#l00420">Value.h:420</a></div></div>
<div class="ttc" id="classllvm_1_1MemoryPhi_html_a1c403c86f16af563cec6961666e8cc2e"><div class="ttname"><a href="classllvm_1_1MemoryPhi.html#a1c403c86f16af563cec6961666e8cc2e">llvm::MemoryPhi::getNumIncomingValues</a></div><div class="ttdeci">unsigned getNumIncomingValues() const</div><div class="ttdoc">Return the number of incoming edges. </div><div class="ttdef"><b>Definition:</b> <a href="MemorySSA_8h_source.html#l00531">MemorySSA.h:531</a></div></div>
<div class="ttc" id="classllvm_1_1MemoryPhi_html_a6ecf3b528e1fab88068bd3baefb8b0ed"><div class="ttname"><a href="classllvm_1_1MemoryPhi.html#a6ecf3b528e1fab88068bd3baefb8b0ed">llvm::MemoryPhi::getIncomingBlock</a></div><div class="ttdeci">BasicBlock * getIncomingBlock(unsigned I) const</div><div class="ttdoc">Return incoming basic block number i. </div><div class="ttdef"><b>Definition:</b> <a href="MemorySSA_8h_source.html#l00544">MemorySSA.h:544</a></div></div>
<div class="ttc" id="classllvm_1_1hash__code_html"><div class="ttname"><a href="classllvm_1_1hash__code.html">llvm::hash_code</a></div><div class="ttdoc">An opaque object representing a hash code. </div><div class="ttdef"><b>Definition:</b> <a href="Hashing_8h_source.html#l00071">Hashing.h:71</a></div></div>
<div class="ttc" id="classllvm_1_1MemoryUseOrDef_html_a1111232011a32357ce2f84d3a633597c"><div class="ttname"><a href="classllvm_1_1MemoryUseOrDef.html#a1111232011a32357ce2f84d3a633597c">llvm::MemoryUseOrDef::getMemoryInst</a></div><div class="ttdeci">Instruction * getMemoryInst() const</div><div class="ttdoc">Get the instruction that this MemoryUse represents. </div><div class="ttdef"><b>Definition:</b> <a href="MemorySSA_8h_source.html#l00255">MemorySSA.h:255</a></div></div>
<div class="ttc" id="classllvm_1_1SmallVectorImpl_html_ac56f67ff590e79d76f8ebd243e4cf442"><div class="ttname"><a href="classllvm_1_1SmallVectorImpl.html#ac56f67ff590e79d76f8ebd243e4cf442">llvm::SmallVectorImpl::append</a></div><div class="ttdeci">void append(in_iter in_start, in_iter in_end)</div><div class="ttdoc">Add the specified range to the end of the SmallVector. </div><div class="ttdef"><b>Definition:</b> <a href="SmallVector_8h_source.html#l00387">SmallVector.h:387</a></div></div>
<div class="ttc" id="Function_8h_html"><div class="ttname"><a href="Function_8h.html">Function.h</a></div></div>
<div class="ttc" id="classllvm_1_1SmallVectorTemplateCommon_html_a8a045d250952c0867382a9840ee18fdf"><div class="ttname"><a href="classllvm_1_1SmallVectorTemplateCommon.html#a8a045d250952c0867382a9840ee18fdf">llvm::SmallVectorTemplateCommon::begin</a></div><div class="ttdeci">iterator begin()</div><div class="ttdef"><b>Definition:</b> <a href="SmallVector_8h_source.html#l00127">SmallVector.h:127</a></div></div>
<div class="ttc" id="namespacellvm_html_a1255776be971ababbd9e5790cc56eb33"><div class="ttname"><a href="namespacellvm.html#a1255776be971ababbd9e5790cc56eb33">llvm::initializeMemorySSAPrinterLegacyPassPass</a></div><div class="ttdeci">void initializeMemorySSAPrinterLegacyPassPass(PassRegistry &amp;)</div></div>
<div class="ttc" id="AliasAnalysis_8h_html"><div class="ttname"><a href="AliasAnalysis_8h.html">AliasAnalysis.h</a></div></div>
<div class="ttc" id="namespacellvm_html_a9c9d20fe1eea1c539518762e7d822d69"><div class="ttname"><a href="namespacellvm.html#a9c9d20fe1eea1c539518762e7d822d69">llvm::isModSet</a></div><div class="ttdeci">LLVM_NODISCARD bool isModSet(const ModRefInfo MRI)</div><div class="ttdef"><b>Definition:</b> <a href="AliasAnalysis_8h_source.html#l00150">AliasAnalysis.h:150</a></div></div>
<div class="ttc" id="classllvm_1_1MemorySSAWalker_html_a3cda9987d773268f1db499ac10de10f3"><div class="ttname"><a href="classllvm_1_1MemorySSAWalker.html#a3cda9987d773268f1db499ac10de10f3">llvm::MemorySSAWalker::MemorySSAWalker</a></div><div class="ttdeci">MemorySSAWalker(MemorySSA *)</div><div class="ttdef"><b>Definition:</b> <a href="MemorySSA_8cpp_source.html#l02310">MemorySSA.cpp:2310</a></div></div>
<div class="ttc" id="namespacellvm_html_ae833ff4bb3c49473a3eb6aa5db75ff25"><div class="ttname"><a href="namespacellvm.html#ae833ff4bb3c49473a3eb6aa5db75ff25">llvm::def_chain</a></div><div class="ttdeci">iterator_range&lt; def_chain_iterator&lt; T &gt; &gt; def_chain(T MA, MemoryAccess *UpTo=nullptr)</div><div class="ttdef"><b>Definition:</b> <a href="MemorySSA_8h_source.html#l01298">MemorySSA.h:1298</a></div></div>
<div class="ttc" id="classllvm_1_1cl_1_1opt_html"><div class="ttname"><a href="classllvm_1_1cl_1_1opt.html">llvm::cl::opt</a></div><div class="ttdef"><b>Definition:</b> <a href="CommandLine_8h_source.html#l01415">CommandLine.h:1415</a></div></div>
<div class="ttc" id="namespacellvm_html_a1b08b801426881b2a106ccb2e1c79cf3"><div class="ttname"><a href="namespacellvm.html#a1b08b801426881b2a106ccb2e1c79cf3">llvm::EnableMSSALoopDependency</a></div><div class="ttdeci">cl::opt&lt; bool &gt; EnableMSSALoopDependency</div><div class="ttdoc">Enables memory ssa as a dependency for loop passes. </div></div>
<div class="ttc" id="classllvm_1_1SmallVectorBase_html_a495b11cf3890ab746d76ef2881f79041"><div class="ttname"><a href="classllvm_1_1SmallVectorBase.html#a495b11cf3890ab746d76ef2881f79041">llvm::SmallVectorBase::empty</a></div><div class="ttdeci">LLVM_NODISCARD bool empty() const</div><div class="ttdef"><b>Definition:</b> <a href="SmallVector_8h_source.html#l00055">SmallVector.h:55</a></div></div>
<div class="ttc" id="Intrinsics_8h_html"><div class="ttname"><a href="Intrinsics_8h.html">Intrinsics.h</a></div></div>
<div class="ttc" id="classllvm_1_1MemorySSAWrapperPass_html_a34629477d192d754033321906b13264e"><div class="ttname"><a href="classllvm_1_1MemorySSAWrapperPass.html#a34629477d192d754033321906b13264e">llvm::MemorySSAWrapperPass::releaseMemory</a></div><div class="ttdeci">void releaseMemory() override</div><div class="ttdoc">releaseMemory() - This member can be implemented by a pass if it wants to be able to release its memo...</div><div class="ttdef"><b>Definition:</b> <a href="MemorySSA_8cpp_source.html#l02286">MemorySSA.cpp:2286</a></div></div>
<div class="ttc" id="MemoryLocation_8h_html"><div class="ttname"><a href="MemoryLocation_8h.html">MemoryLocation.h</a></div><div class="ttdoc">This file provides utility analysis objects describing memory locations. </div></div>
<div class="ttc" id="classllvm_1_1Value_html_adb5c319f5905c1d3ca9eb5df546388c5"><div class="ttname"><a href="classllvm_1_1Value.html#adb5c319f5905c1d3ca9eb5df546388c5">llvm::Value::getName</a></div><div class="ttdeci">StringRef getName() const</div><div class="ttdoc">Return a constant reference to the value&amp;#39;s name. </div><div class="ttdef"><b>Definition:</b> <a href="Value_8cpp_source.html#l00215">Value.cpp:215</a></div></div>
<div class="ttc" id="MD5_8cpp_html_ac0eafdc9ee161b71e7af98af736952fd"><div class="ttname"><a href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a></div><div class="ttdeci">#define I(x, y, z)</div><div class="ttdef"><b>Definition:</b> <a href="MD5_8cpp_source.html#l00058">MD5.cpp:58</a></div></div>
<div class="ttc" id="regcomp_8c_html_a0240ac851181b84ac374872dc5434ee4"><div class="ttname"><a href="regcomp_8c.html#a0240ac851181b84ac374872dc5434ee4">N</a></div><div class="ttdeci">#define N</div></div>
<div class="ttc" id="classllvm_1_1MemorySSA_html_a131110a75135a123427d3280dff1fef4"><div class="ttname"><a href="classllvm_1_1MemorySSA.html#a131110a75135a123427d3280dff1fef4">llvm::MemorySSA::moveTo</a></div><div class="ttdeci">void moveTo(MemoryUseOrDef *What, BasicBlock *BB, AccessList::iterator Where)</div><div class="ttdef"><b>Definition:</b> <a href="MemorySSA_8cpp_source.html#l01671">MemorySSA.cpp:1671</a></div></div>
<div class="ttc" id="classllvm_1_1Instruction_html_a5a96d11334569f70a5fc03ac2a46774c"><div class="ttname"><a href="classllvm_1_1Instruction.html#a5a96d11334569f70a5fc03ac2a46774c">llvm::Instruction::mayReadFromMemory</a></div><div class="ttdeci">bool mayReadFromMemory() const</div><div class="ttdoc">Return true if this instruction may read memory. </div><div class="ttdef"><b>Definition:</b> <a href="IR_2Instruction_8cpp_source.html#l00514">Instruction.cpp:514</a></div></div>
<div class="ttc" id="classllvm_1_1MemorySSAWrapperPass_html_ae3df661a4d028ba1a08c8b243c721663"><div class="ttname"><a href="classllvm_1_1MemorySSAWrapperPass.html#ae3df661a4d028ba1a08c8b243c721663">llvm::MemorySSAWrapperPass::MemorySSAWrapperPass</a></div><div class="ttdeci">MemorySSAWrapperPass()</div><div class="ttdef"><b>Definition:</b> <a href="MemorySSA_8cpp_source.html#l02282">MemorySSA.cpp:2282</a></div></div>
<div class="ttc" id="classllvm_1_1DoNothingMemorySSAWalker_html_a9d47d5b503ec243c019cc0dcee9f3441"><div class="ttname"><a href="classllvm_1_1DoNothingMemorySSAWalker.html#a9d47d5b503ec243c019cc0dcee9f3441">llvm::DoNothingMemorySSAWalker::getClobberingMemoryAccess</a></div><div class="ttdeci">MemoryAccess * getClobberingMemoryAccess(MemoryAccess *) override</div><div class="ttdoc">Does the same thing as getClobberingMemoryAccess(const Instruction *I), but takes a MemoryAccess inst...</div><div class="ttdef"><b>Definition:</b> <a href="MemorySSA_8cpp_source.html#l02436">MemorySSA.cpp:2436</a></div></div>
<div class="ttc" id="namespacellvm_html_a4db2f71d62968b2be3c4bffc5050d8c7"><div class="ttname"><a href="namespacellvm.html#a4db2f71d62968b2be3c4bffc5050d8c7">llvm::dyn_cast</a></div><div class="ttdeci">LLVM_NODISCARD std::enable_if&lt;!is_simple_type&lt; Y &gt;::value, typename cast_retty&lt; X, const Y &gt;::ret_type &gt;::type dyn_cast(const Y &amp;Val)</div><div class="ttdef"><b>Definition:</b> <a href="Casting_8h_source.html#l00332">Casting.h:332</a></div></div>
<div class="ttc" id="classllvm_1_1MemorySSA_html_ae3b89ffde42778289bcbd8a187199420"><div class="ttname"><a href="classllvm_1_1MemorySSA.html#ae3b89ffde42778289bcbd8a187199420">llvm::MemorySSA::isLiveOnEntryDef</a></div><div class="ttdeci">bool isLiveOnEntryDef(const MemoryAccess *MA) const</div><div class="ttdoc">Return true if MA represents the live on entry value. </div><div class="ttdef"><b>Definition:</b> <a href="MemorySSA_8h_source.html#l00739">MemorySSA.h:739</a></div></div>
<div class="ttc" id="DenseMapInfo_8h_html"><div class="ttname"><a href="DenseMapInfo_8h.html">DenseMapInfo.h</a></div></div>
<div class="ttc" id="classllvm_1_1AnalysisUsage_html_ac12fffcedd4a1c8bf428d694451f816c"><div class="ttname"><a href="classllvm_1_1AnalysisUsage.html#ac12fffcedd4a1c8bf428d694451f816c">llvm::AnalysisUsage::addRequiredTransitive</a></div><div class="ttdeci">AnalysisUsage &amp; addRequiredTransitive()</div><div class="ttdef"><b>Definition:</b> <a href="PassAnalysisSupport_8h_source.html#l00071">PassAnalysisSupport.h:71</a></div></div>
<div class="ttc" id="classllvm_1_1MemorySSA_html_ae7375c161ecaf6b6f4ebd6abfcb5ce71"><div class="ttname"><a href="classllvm_1_1MemorySSA.html#ae7375c161ecaf6b6f4ebd6abfcb5ce71">llvm::MemorySSA::~MemorySSA</a></div><div class="ttdeci">~MemorySSA()</div><div class="ttdef"><b>Definition:</b> <a href="MemorySSA_8cpp_source.html#l01243">MemorySSA.cpp:1243</a></div></div>
<div class="ttc" id="classllvm_1_1MemorySSAPrinterLegacyPass_html_ae168ddebaf2036d7c0aec6d953753d75"><div class="ttname"><a href="classllvm_1_1MemorySSAPrinterLegacyPass.html#ae168ddebaf2036d7c0aec6d953753d75">llvm::MemorySSAPrinterLegacyPass::ID</a></div><div class="ttdeci">static char ID</div><div class="ttdef"><b>Definition:</b> <a href="MemorySSA_8h_source.html#l00920">MemorySSA.h:920</a></div></div>
<div class="ttc" id="namespacellvm_html_ac2db21413768e904d56a02c26184823d"><div class="ttname"><a href="namespacellvm.html#ac2db21413768e904d56a02c26184823d">llvm::getPointerOperand</a></div><div class="ttdeci">const Value * getPointerOperand(const Value *V)</div><div class="ttdoc">A helper function that returns the pointer operand of a load, store or GEP instruction. </div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8h_source.html#l05274">Instructions.h:5274</a></div></div>
<div class="ttc" id="ItaniumDemangle_8h_html_a88ee8e4eea43084bd8964682683da88ca278c491bdd8a53618c149c4ac790da34"><div class="ttname"><a href="ItaniumDemangle_8h.html#a88ee8e4eea43084bd8964682683da88ca278c491bdd8a53618c149c4ac790da34">TemplateParamKind::Template</a></div></div>
<div class="ttc" id="classllvm_1_1AnalysisManager_1_1Invalidator_html"><div class="ttname"><a href="classllvm_1_1AnalysisManager_1_1Invalidator.html">llvm::AnalysisManager::Invalidator</a></div><div class="ttdoc">API to communicate dependencies between analyses during invalidation. </div><div class="ttdef"><b>Definition:</b> <a href="PassManager_8h_source.html#l00649">PassManager.h:649</a></div></div>
<div class="ttc" id="namespacellvm_html_aec7c967a5416fa6e154433965357a50ea6311ae17c1ee52b36e68aaf4ad066387"><div class="ttname"><a href="namespacellvm.html#aec7c967a5416fa6e154433965357a50ea6311ae17c1ee52b36e68aaf4ad066387">llvm::PGSOQueryType::Other</a></div></div>
<div class="ttc" id="namespacellvm_html_add49d9f7abebe402adf1a57c762abeef"><div class="ttname"><a href="namespacellvm.html#add49d9f7abebe402adf1a57c762abeef">llvm::depth_first</a></div><div class="ttdeci">iterator_range&lt; df_iterator&lt; T &gt; &gt; depth_first(const T &amp;G)</div><div class="ttdef"><b>Definition:</b> <a href="DepthFirstIterator_8h_source.html#l00227">DepthFirstIterator.h:227</a></div></div>
<div class="ttc" id="LLVMContext_8h_html"><div class="ttname"><a href="LLVMContext_8h.html">LLVMContext.h</a></div></div>
<div class="ttc" id="classllvm_1_1MemorySSAWalker_html_aba62d5ce52dae803e4c9fa449b0bd6c7"><div class="ttname"><a href="classllvm_1_1MemorySSAWalker.html#aba62d5ce52dae803e4c9fa449b0bd6c7">llvm::MemorySSAWalker::getClobberingMemoryAccess</a></div><div class="ttdeci">MemoryAccess * getClobberingMemoryAccess(const Instruction *I)</div><div class="ttdoc">Given a memory Mod/Ref/ModRef&amp;#39;ing instruction, calling this will give you the nearest dominating Memo...</div><div class="ttdef"><b>Definition:</b> <a href="MemorySSA_8h_source.html#l01024">MemorySSA.h:1024</a></div></div>
<div class="ttc" id="classllvm_1_1IDFCalculator_html"><div class="ttname"><a href="classllvm_1_1IDFCalculator.html">llvm::IDFCalculator</a></div><div class="ttdef"><b>Definition:</b> <a href="IteratedDominanceFrontier_8h_source.html#l00039">IteratedDominanceFrontier.h:39</a></div></div>
<div class="ttc" id="classllvm_1_1MemorySSAPrinterPass_html_ab228481c477a8f642742650e2f03c231"><div class="ttname"><a href="classllvm_1_1MemorySSAPrinterPass.html#ab228481c477a8f642742650e2f03c231">llvm::MemorySSAPrinterPass::run</a></div><div class="ttdeci">PreservedAnalyses run(Function &amp;F, FunctionAnalysisManager &amp;AM)</div><div class="ttdef"><b>Definition:</b> <a href="MemorySSA_8cpp_source.html#l02265">MemorySSA.cpp:2265</a></div></div>
<div class="ttc" id="iterator_8h_html"><div class="ttname"><a href="iterator_8h.html">iterator.h</a></div></div>
<div class="ttc" id="classllvm_1_1Init_html"><div class="ttname"><a href="classllvm_1_1Init.html">llvm::Init</a></div><div class="ttdef"><b>Definition:</b> <a href="Record_8h_source.html#l00287">Record.h:287</a></div></div>
<div class="ttc" id="SILowerControlFlow_8cpp_html_a4868c5d81c5ccc98c47aeab6244346a0"><div class="ttname"><a href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a></div><div class="ttdeci">assert(ImpDefSCC.getReg()==AMDGPU::SCC &amp;&amp;ImpDefSCC.isDef())</div></div>
<div class="ttc" id="classllvm_1_1AllAnalysesOn_html"><div class="ttname"><a href="classllvm_1_1AllAnalysesOn.html">llvm::AllAnalysesOn</a></div><div class="ttdoc">This templated class represents &quot;all analyses that operate over &lt;a particular IR unit&gt;&quot; (e...</div><div class="ttdef"><b>Definition:</b> <a href="PassManager_8h_source.html#l00092">PassManager.h:92</a></div></div>
<div class="ttc" id="classllvm_1_1MemorySSAAnalysis_html_a0edf62c9bbb9566682c697dfb8fb2ed5"><div class="ttname"><a href="classllvm_1_1MemorySSAAnalysis.html#a0edf62c9bbb9566682c697dfb8fb2ed5">llvm::MemorySSAAnalysis::run</a></div><div class="ttdeci">Result run(Function &amp;F, FunctionAnalysisManager &amp;AM)</div><div class="ttdef"><b>Definition:</b> <a href="MemorySSA_8cpp_source.html#l02249">MemorySSA.cpp:2249</a></div></div>
<div class="ttc" id="MemorySSA_8cpp_html_ac01b3bf4dda9266ec05d70b2f55281fa"><div class="ttname"><a href="MemorySSA_8cpp.html#ac01b3bf4dda9266ec05d70b2f55281fa">areLoadsReorderable</a></div><div class="ttdeci">static bool areLoadsReorderable(const LoadInst *Use, const LoadInst *MayClobber)</div><div class="ttdoc">This does one-way checks to see if Use could theoretically be hoisted above MayClobber. </div><div class="ttdef"><b>Definition:</b> <a href="MemorySSA_8cpp_source.html#l00226">MemorySSA.cpp:226</a></div></div>
<div class="ttc" id="classllvm_1_1MemorySSAWrapperPass_html_ab799aedc9177a0d0ecc04299b48015ab"><div class="ttname"><a href="classllvm_1_1MemorySSAWrapperPass.html#ab799aedc9177a0d0ecc04299b48015ab">llvm::MemorySSAWrapperPass::ID</a></div><div class="ttdeci">static char ID</div><div class="ttdef"><b>Definition:</b> <a href="MemorySSA_8h_source.html#l00968">MemorySSA.h:968</a></div></div>
<div class="ttc" id="classllvm_1_1Value_html"><div class="ttname"><a href="classllvm_1_1Value.html">llvm::Value</a></div><div class="ttdoc">LLVM Value Representation. </div><div class="ttdef"><b>Definition:</b> <a href="Value_8h_source.html#l00074">Value.h:74</a></div></div>
<div class="ttc" id="structllvm_1_1DenseMapInfo_3_01MemoryLocOrCall_01_4_html_afeeee37d51ca9e41d7ef8d85fc47e807"><div class="ttname"><a href="structllvm_1_1DenseMapInfo_3_01MemoryLocOrCall_01_4.html#afeeee37d51ca9e41d7ef8d85fc47e807">llvm::DenseMapInfo&lt; MemoryLocOrCall &gt;::getTombstoneKey</a></div><div class="ttdeci">static MemoryLocOrCall getTombstoneKey()</div><div class="ttdef"><b>Definition:</b> <a href="MemorySSA_8cpp_source.html#l00194">MemorySSA.cpp:194</a></div></div>
<div class="ttc" id="namespacellvm_html_a3493591c859b8ae672dfa20950608c86"><div class="ttname"><a href="namespacellvm.html#a3493591c859b8ae672dfa20950608c86">llvm::successors</a></div><div class="ttdeci">succ_range successors(Instruction *I)</div><div class="ttdef"><b>Definition:</b> <a href="IR_2CFG_8h_source.html#l00259">CFG.h:259</a></div></div>
<div class="ttc" id="namespacellvm_html_aba42131f88415b191d5477802473b7d4"><div class="ttname"><a href="namespacellvm.html#aba42131f88415b191d5477802473b7d4">llvm::upward_defs_begin</a></div><div class="ttdeci">upward_defs_iterator upward_defs_begin(const MemoryAccessPair &amp;Pair)</div><div class="ttdef"><b>Definition:</b> <a href="MemorySSA_8h_source.html#l01243">MemorySSA.h:1243</a></div></div>
<div class="ttc" id="SmallVector_8h_html"><div class="ttname"><a href="SmallVector_8h.html">SmallVector.h</a></div></div>
<div class="ttc" id="classllvm_1_1BatchAAResults_html_a2afd85d1ce874e1dd6391c967101d3b8"><div class="ttname"><a href="classllvm_1_1BatchAAResults.html#a2afd85d1ce874e1dd6391c967101d3b8">llvm::BatchAAResults::alias</a></div><div class="ttdeci">AliasResult alias(const MemoryLocation &amp;LocA, const MemoryLocation &amp;LocB)</div><div class="ttdef"><b>Definition:</b> <a href="AliasAnalysis_8h_source.html#l00783">AliasAnalysis.h:783</a></div></div>
<div class="ttc" id="namespacellvm_1_1RISCVFenceField_html_a147be9e9780c1e33363ea572d4c7b25fa05c79fbfc58d9dd2851c467a1ef166bf"><div class="ttname"><a href="namespacellvm_1_1RISCVFenceField.html#a147be9e9780c1e33363ea572d4c7b25fa05c79fbfc58d9dd2851c467a1ef166bf">llvm::RISCVFenceField::W</a></div><div class="ttdef"><b>Definition:</b> <a href="RISCVBaseInfo_8h_source.html#l00095">RISCVBaseInfo.h:95</a></div></div>
<div class="ttc" id="classllvm_1_1MemoryAccess_html_ab3a9d1e32d4473460c83d5db60bd0d8b"><div class="ttname"><a href="classllvm_1_1MemoryAccess.html#ab3a9d1e32d4473460c83d5db60bd0d8b">llvm::MemoryAccess::getID</a></div><div class="ttdeci">unsigned getID() const</div><div class="ttdoc">Used for debugging and tracking things about MemoryAccesses. </div><div class="ttdef"><b>Definition:</b> <a href="MemorySSA_8h_source.html#l00665">MemorySSA.h:665</a></div></div>
<div class="ttc" id="namespacellvm_1_1AMDGPU_1_1SendMsg_html_a8594419a4ddfad2c9a79279c490e466d"><div class="ttname"><a href="namespacellvm_1_1AMDGPU_1_1SendMsg.html#a8594419a4ddfad2c9a79279c490e466d">llvm::AMDGPU::SendMsg::Op</a></div><div class="ttdeci">Op</div><div class="ttdef"><b>Definition:</b> <a href="SIDefines_8h_source.html#l00278">SIDefines.h:278</a></div></div>
<div class="ttc" id="classllvm_1_1raw__ostream_html"><div class="ttname"><a href="classllvm_1_1raw__ostream.html">llvm::raw_ostream</a></div><div class="ttdoc">This class implements an extremely fast bulk output stream that can only output to a stream...</div><div class="ttdef"><b>Definition:</b> <a href="raw__ostream_8h_source.html#l00046">raw_ostream.h:46</a></div></div>
<div class="ttc" id="MemorySSA_8cpp_html_a8b72a05b68fd9ce0a18e753d1c99c807"><div class="ttname"><a href="MemorySSA_8cpp.html#a8b72a05b68fd9ce0a18e753d1c99c807">instructionClobbersQuery</a></div><div class="ttdeci">static ClobberAlias instructionClobbersQuery(const MemoryDef *MD, const MemoryLocation &amp;UseLoc, const Instruction *UseInst, AliasAnalysisType &amp;AA)</div><div class="ttdef"><b>Definition:</b> <a href="MemorySSA_8cpp_source.html#l00263">MemorySSA.cpp:263</a></div></div>
<div class="ttc" id="Casting_8h_html"><div class="ttname"><a href="Casting_8h.html">Casting.h</a></div></div>
<div class="ttc" id="namespacellvm_html_a9db8c44b250b90e3ab7e4d144e7c9c2e"><div class="ttname"><a href="namespacellvm.html#a9db8c44b250b90e3ab7e4d144e7c9c2e">llvm::ModRefInfo</a></div><div class="ttdeci">ModRefInfo</div><div class="ttdoc">Flags indicating whether a memory access modifies or references memory. </div><div class="ttdef"><b>Definition:</b> <a href="AliasAnalysis_8h_source.html#l00102">AliasAnalysis.h:102</a></div></div>
<div class="ttc" id="structllvm_1_1DenseMapInfo_3_01MemoryLocOrCall_01_4_html_a8067c360f88c5012f1ffebb342f72d36"><div class="ttname"><a href="structllvm_1_1DenseMapInfo_3_01MemoryLocOrCall_01_4.html#a8067c360f88c5012f1ffebb342f72d36">llvm::DenseMapInfo&lt; MemoryLocOrCall &gt;::getHashValue</a></div><div class="ttdeci">static unsigned getHashValue(const MemoryLocOrCall &amp;MLOC)</div><div class="ttdef"><b>Definition:</b> <a href="MemorySSA_8cpp_source.html#l00198">MemorySSA.cpp:198</a></div></div>
<div class="ttc" id="MemorySSA_8h_html"><div class="ttname"><a href="MemorySSA_8h.html">MemorySSA.h</a></div><div class="ttdoc">This file exposes an interface to building/using memory SSA to walk memory instructions using a use/d...</div></div>
<div class="ttc" id="HexagonConstExtenders_8cpp_html_a2d1bc450117084e6b9aad77f103b9257"><div class="ttname"><a href="HexagonConstExtenders_8cpp.html#a2d1bc450117084e6b9aad77f103b9257">opt</a></div><div class="ttdeci">hexagon cext opt</div><div class="ttdef"><b>Definition:</b> <a href="HexagonConstExtenders_8cpp_source.html#l00572">HexagonConstExtenders.cpp:572</a></div></div>
<div class="ttc" id="classllvm_1_1AnalysisManager_html"><div class="ttname"><a href="classllvm_1_1AnalysisManager.html">llvm::AnalysisManager</a></div><div class="ttdoc">A container for analyses that lazily runs them and caches their results. </div><div class="ttdef"><b>Definition:</b> <a href="InstructionSimplify_8h_source.html#l00041">InstructionSimplify.h:41</a></div></div>
<div class="ttc" id="classllvm_1_1DominatorTreeWrapperPass_html"><div class="ttname"><a href="classllvm_1_1DominatorTreeWrapperPass.html">llvm::DominatorTreeWrapperPass</a></div><div class="ttdoc">Legacy analysis pass which computes a DominatorTree. </div><div class="ttdef"><b>Definition:</b> <a href="Dominators_8h_source.html#l00259">Dominators.h:259</a></div></div>
<div class="ttc" id="raw__ostream_8h_html"><div class="ttname"><a href="raw__ostream_8h.html">raw_ostream.h</a></div></div>
<div class="ttc" id="classllvm_1_1MemoryAccess_html_adaa94f3c67c7301f0172b1aa9dad07fe"><div class="ttname"><a href="classllvm_1_1MemoryAccess.html#adaa94f3c67c7301f0172b1aa9dad07fe">llvm::MemoryAccess::setBlock</a></div><div class="ttdeci">void setBlock(BasicBlock *BB)</div><div class="ttdoc">Used by MemorySSA to change the block of a MemoryAccess when it is moved. </div><div class="ttdef"><b>Definition:</b> <a href="MemorySSA_8h_source.html#l00213">MemorySSA.h:213</a></div></div>
<div class="ttc" id="namespacellvm_1_1lltok_html_af353621f14cb4b4b3af5ffaff84076b1abf5ba3ee47e95dae362eb24b6d4f48e5"><div class="ttname"><a href="namespacellvm_1_1lltok.html#af353621f14cb4b4b3af5ffaff84076b1abf5ba3ee47e95dae362eb24b6d4f48e5">llvm::lltok::equal</a></div><div class="ttdef"><b>Definition:</b> <a href="LLToken_8h_source.html#l00025">LLToken.h:25</a></div></div>
<div class="ttc" id="namespacellvm_html_a2f81ab96a7d9ad549a147782acd98cb1"><div class="ttname"><a href="namespacellvm.html#a2f81ab96a7d9ad549a147782acd98cb1">llvm::isModOrRefSet</a></div><div class="ttdeci">LLVM_NODISCARD bool isModOrRefSet(const ModRefInfo MRI)</div><div class="ttdef"><b>Definition:</b> <a href="AliasAnalysis_8h_source.html#l00143">AliasAnalysis.h:143</a></div></div>
<div class="ttc" id="namespacellvm_html_a162c90bc179a6359438d060722bee35f"><div class="ttname"><a href="namespacellvm.html#a162c90bc179a6359438d060722bee35f">llvm::operator==</a></div><div class="ttdeci">bool operator==(uint64_t V1, const APInt &amp;V2)</div><div class="ttdef"><b>Definition:</b> <a href="APInt_8h_source.html#l02024">APInt.h:2024</a></div></div>
<div class="ttc" id="classllvm_1_1MemorySSA_html_a25dee04a50bd25afa513d772adba5737"><div class="ttname"><a href="classllvm_1_1MemorySSA.html#a25dee04a50bd25afa513d772adba5737">llvm::MemorySSA::verifyPrevDefInPhis</a></div><div class="ttdeci">void verifyPrevDefInPhis(Function &amp;F) const</div><div class="ttdef"><b>Definition:</b> <a href="MemorySSA_8cpp_source.html#l01888">MemorySSA.cpp:1888</a></div></div>
<div class="ttc" id="classllvm_1_1MemorySSA_html_a3e9609868c465ed02093014a27d5a479"><div class="ttname"><a href="classllvm_1_1MemorySSA.html#a3e9609868c465ed02093014a27d5a479">llvm::MemorySSA::verifyDominationNumbers</a></div><div class="ttdeci">void verifyDominationNumbers(const Function &amp;F) const</div><div class="ttdoc">Verify that all of the blocks we believe to have valid domination numbers actually have valid dominat...</div><div class="ttdef"><b>Definition:</b> <a href="MemorySSA_8cpp_source.html#l01924">MemorySSA.cpp:1924</a></div></div>
<div class="ttc" id="classllvm_1_1AAResultsWrapperPass_html"><div class="ttname"><a href="classllvm_1_1AAResultsWrapperPass.html">llvm::AAResultsWrapperPass</a></div><div class="ttdoc">A wrapper pass to provide the legacy pass manager access to a suitably prepared AAResults object...</div><div class="ttdef"><b>Definition:</b> <a href="AliasAnalysis_8h_source.html#l01157">AliasAnalysis.h:1157</a></div></div>
<div class="ttc" id="classllvm_1_1MemoryPhi_html"><div class="ttname"><a href="classllvm_1_1MemoryPhi.html">llvm::MemoryPhi</a></div><div class="ttdoc">Represents phi nodes for memory accesses. </div><div class="ttdef"><b>Definition:</b> <a href="MemorySSA_8h_source.html#l00482">MemorySSA.h:482</a></div></div>
<div class="ttc" id="classllvm_1_1MemorySSA_html_afa9b4a650e1a6de2061538a19be3a234"><div class="ttname"><a href="classllvm_1_1MemorySSA.html#afa9b4a650e1a6de2061538a19be3a234">llvm::MemorySSA::print</a></div><div class="ttdeci">void print(raw_ostream &amp;) const</div><div class="ttdef"><b>Definition:</b> <a href="MemorySSA_8cpp_source.html#l01863">MemorySSA.cpp:1863</a></div></div>
<div class="ttc" id="PassManager_8h_html"><div class="ttname"><a href="PassManager_8h.html">PassManager.h</a></div><div class="ttdoc">This header defines various interfaces for pass management in LLVM. </div></div>
<div class="ttc" id="Debug_8h_html_a08efc68d15935eb8889400a46c3749ba"><div class="ttname"><a href="Debug_8h.html#a08efc68d15935eb8889400a46c3749ba">LLVM_DEBUG</a></div><div class="ttdeci">#define LLVM_DEBUG(X)</div><div class="ttdef"><b>Definition:</b> <a href="Debug_8h_source.html#l00122">Debug.h:122</a></div></div>
<div class="ttc" id="AssemblyAnnotationWriter_8h_html"><div class="ttname"><a href="AssemblyAnnotationWriter_8h.html">AssemblyAnnotationWriter.h</a></div></div>
<div class="ttc" id="structllvm_1_1DenseMapInfo_3_01MemoryLocOrCall_01_4_html_ac9f27c5f4b485fa4c3101856d82d40bc"><div class="ttname"><a href="structllvm_1_1DenseMapInfo_3_01MemoryLocOrCall_01_4.html#ac9f27c5f4b485fa4c3101856d82d40bc">llvm::DenseMapInfo&lt; MemoryLocOrCall &gt;::getEmptyKey</a></div><div class="ttdeci">static MemoryLocOrCall getEmptyKey()</div><div class="ttdef"><b>Definition:</b> <a href="MemorySSA_8cpp_source.html#l00190">MemorySSA.cpp:190</a></div></div>
<div class="ttc" id="classllvm_1_1MemorySSA_html_a97891043f9eacb9b0e18e22767cc7802"><div class="ttname"><a href="classllvm_1_1MemorySSA.html#a97891043f9eacb9b0e18e22767cc7802">llvm::MemorySSA::insertIntoListsBefore</a></div><div class="ttdeci">void insertIntoListsBefore(MemoryAccess *, const BasicBlock *, AccessList::iterator)</div><div class="ttdef"><b>Definition:</b> <a href="MemorySSA_8cpp_source.html#l01627">MemorySSA.cpp:1627</a></div></div>
<div class="ttc" id="structllvm_1_1AnalysisKey_html"><div class="ttname"><a href="structllvm_1_1AnalysisKey.html">llvm::AnalysisKey</a></div><div class="ttdoc">A special type used by analysis passes to provide an address that identifies that particular analysis...</div><div class="ttdef"><b>Definition:</b> <a href="PassManager_8h_source.html#l00071">PassManager.h:71</a></div></div>
<div class="ttc" id="classllvm_1_1Value_html_a9d7de807ebdfe1819df3ff6cb0f16158"><div class="ttname"><a href="classllvm_1_1Value.html#a9d7de807ebdfe1819df3ff6cb0f16158">llvm::Value::use_empty</a></div><div class="ttdeci">bool use_empty() const</div><div class="ttdef"><b>Definition:</b> <a href="Value_8h_source.html#l00343">Value.h:343</a></div></div>
<div class="ttc" id="namespacellvm_1_1cl_html_aed47e4757f3240146f8ad40c2cdbf2d1"><div class="ttname"><a href="namespacellvm_1_1cl.html#aed47e4757f3240146f8ad40c2cdbf2d1">llvm::cl::location</a></div><div class="ttdeci">LocationClass&lt; Ty &gt; location(Ty &amp;L)</div><div class="ttdef"><b>Definition:</b> <a href="CommandLine_8h_source.html#l00451">CommandLine.h:451</a></div></div>
<div class="ttc" id="Optional_8h_html"><div class="ttname"><a href="Optional_8h.html">Optional.h</a></div></div>
<div class="ttc" id="HexagonStoreWidening_8cpp_html_a7d2c711a42f51c1f7b3ce3f8f560fa74"><div class="ttname"><a href="HexagonStoreWidening_8cpp.html#a7d2c711a42f51c1f7b3ce3f8f560fa74">stores</a></div><div class="ttdeci">hexagon widen stores</div><div class="ttdef"><b>Definition:</b> <a href="HexagonStoreWidening_8cpp_source.html#l00118">HexagonStoreWidening.cpp:118</a></div></div>
<div class="ttc" id="classllvm_1_1simple__ilist_html_aefb5430ea919aa7223dbf8583e947111"><div class="ttname"><a href="classllvm_1_1simple__ilist.html#aefb5430ea919aa7223dbf8583e947111">llvm::simple_ilist::rbegin</a></div><div class="ttdeci">reverse_iterator rbegin()</div><div class="ttdef"><b>Definition:</b> <a href="simple__ilist_8h_source.html#l00121">simple_ilist.h:121</a></div></div>
<div class="ttc" id="namespacellvm_html_aa9d12274f5a8784ab14b568bfa25ec0f"><div class="ttname"><a href="namespacellvm.html#aa9d12274f5a8784ab14b568bfa25ec0f">llvm::MemoryAccessPair</a></div><div class="ttdeci">std::pair&lt; MemoryAccess *, MemoryLocation &gt; MemoryAccessPair</div><div class="ttdef"><b>Definition:</b> <a href="MemorySSA_8h_source.html#l01074">MemorySSA.h:1074</a></div></div>
<div class="ttc" id="classllvm_1_1AssemblyAnnotationWriter_html"><div class="ttname"><a href="classllvm_1_1AssemblyAnnotationWriter.html">llvm::AssemblyAnnotationWriter</a></div><div class="ttdef"><b>Definition:</b> <a href="AssemblyAnnotationWriter_8h_source.html#l00027">AssemblyAnnotationWriter.h:27</a></div></div>
<div class="ttc" id="classllvm_1_1IntrinsicInst_html"><div class="ttname"><a href="classllvm_1_1IntrinsicInst.html">llvm::IntrinsicInst</a></div><div class="ttdoc">A wrapper class for inspecting calls to intrinsic functions. </div><div class="ttdef"><b>Definition:</b> <a href="IntrinsicInst_8h_source.html#l00044">IntrinsicInst.h:44</a></div></div>
<div class="ttc" id="classllvm_1_1Instruction_html_a1a7f07aaef6a3bee130bf0e0f0536802"><div class="ttname"><a href="classllvm_1_1Instruction.html#a1a7f07aaef6a3bee130bf0e0f0536802">llvm::Instruction::getParent</a></div><div class="ttdeci">const BasicBlock * getParent() const</div><div class="ttdef"><b>Definition:</b> <a href="IR_2Instruction_8h_source.html#l00066">Instruction.h:66</a></div></div>
<div class="ttc" id="classllvm_1_1MemorySSAWrapperPass_html_adff456f388a9f1fd6e349ecdd58afe56"><div class="ttname"><a href="classllvm_1_1MemorySSAWrapperPass.html#adff456f388a9f1fd6e349ecdd58afe56">llvm::MemorySSAWrapperPass::print</a></div><div class="ttdeci">void print(raw_ostream &amp;OS, const Module *M=nullptr) const override</div><div class="ttdoc">print - Print out the internal state of the pass. </div><div class="ttdef"><b>Definition:</b> <a href="MemorySSA_8cpp_source.html#l02306">MemorySSA.cpp:2306</a></div></div>
<div class="ttc" id="namespacellvm_html_acd1cd968cb420c82d70926920fcdc7d7"><div class="ttname"><a href="namespacellvm.html#acd1cd968cb420c82d70926920fcdc7d7">llvm::is_contained</a></div><div class="ttdeci">bool is_contained(R &amp;&amp;Range, const E &amp;Element)</div><div class="ttdoc">Wrapper function around std::find to detect if an element exists in a container. </div><div class="ttdef"><b>Definition:</b> <a href="STLExtras_8h_source.html#l01241">STLExtras.h:1241</a></div></div>
<div class="ttc" id="namespacellvm_html_aa41b81e81de309f982f2d6ddec3eb244"><div class="ttname"><a href="namespacellvm.html#aa41b81e81de309f982f2d6ddec3eb244">llvm::isRefSet</a></div><div class="ttdeci">LLVM_NODISCARD bool isRefSet(const ModRefInfo MRI)</div><div class="ttdef"><b>Definition:</b> <a href="AliasAnalysis_8h_source.html#l00153">AliasAnalysis.h:153</a></div></div>
</div><!-- fragment --></div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Tue Mar 24 2020 13:08:44 for LLVM by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.13
</small></address>
</body>
</html>
