<!DOCTYPE html><html><head><meta charset="utf-8"></meta><meta content="width=device-width, initial-scale=1" name="viewport"></meta><title>class ValueMapper: LLVM 10.0.0 documentation</title><link href="styles.css" rel="stylesheet"></link><script src="highlight.min.js"></script><script>hljs.highlightAll();</script><link href="katex.min.css" rel="stylesheet"></link><script src="katex.min.js"></script><script src="auto-render.min.js"></script><script>
    document.addEventListener("DOMContentLoaded", function() {
      renderMathInElement(document.body, {
        delimiters: [
          {left: '$$', right: '$$', display: true},
          {left: '$', right: '$', display: false},
        ],
      });
    });
  </script><link href="apple-touch-icon.png" sizes="180x180" rel="apple-touch-icon"></link><link href="favicon-32x32.png" sizes="32x32" type="image/png" rel="icon"></link><link href="favicon-16x16.png" sizes="16x16" type="image/png" rel="icon"></link></head><body><div id="wrapper"><section class="section"><div class="container"><div class="columns"><aside class="column is-one-fifth"><ul class="menu-list"><p class="is-size-4">LLVM 10.0.0</p><p class="menu-label">Navigation</p><li><a href="index.html">Home</a></li><li><a href="search.html">Search</a></li><li><a href="https://github.com/llvm/llvm-project/">Repository</a></li><li><a href="https://hdoc.io">Made with hdoc</a></li><p class="menu-label">API Documentation</p><li><a href="functions.html">Functions</a></li><li><a href="records.html">Records</a></li><li><a href="enums.html">Enums</a></li><li><a href="namespaces.html">Namespaces</a></li></ul></aside><div class="column" style="overflow-x: auto"><nav class="breadcrumb has-arrow-separator" aria-label="breadcrumbs"><ul><li><a href="namespaces.html#00A4DA910CC17C2D"><span>namespace llvm</span></a></li><li class="is-active"><a aria-current="page9C5974BC43ACE953"><span>class ValueMapper</span></a></li></ul></nav><main class="content"><h1>class ValueMapper</h1><h2>Declaration</h2><pre class="p-0"><code class="hdoc-record-code language-cpp">class ValueMapper { /* full declaration omitted */ };</code></pre><h2>Description</h2><p>Context for (re-)mapping values (and metadata). A shared context used for mapping and remapping of Value and Metadata instances using \a ValueToValueMapTy, \a RemapFlags, \a ValueMapTypeRemapper, and \a ValueMaterializer. There are a number of top-level entry points: - \a mapValue() (and \a mapConstant()); - \a mapMetadata() (and \a mapMDNode()); - \a remapInstruction(); and - \a remapFunction(). The \a ValueMaterializer can be used as a callback, but cannot invoke any of these top-level functions recursively.  Instead, callbacks should use one of the following to schedule work lazily in the \a ValueMapper instance: - \a scheduleMapGlobalInitializer() - \a scheduleMapAppendingVariable() - \a scheduleMapGlobalIndirectSymbol() - \a scheduleRemapFunction() Sometimes a callback needs a different mapping context.  Such a context can be registered using \a registerAlternateMappingContext(), which takes an alternate \a ValueToValueMapTy and \a ValueMaterializer and returns a ID to pass into the schedule*() functions. TODO: lib/Linker really doesn&apos;t need the \a ValueHandle in the \a ValueToValueMapTy. We should template \a ValueMapper (and its implementation classes), and explicitly instantiate on two concrete instances of \a ValueMap (one as \a ValueToValueMap, and one with raw \a Value pointers).  It may be viable to do away with \a TrackingMDRef in the\a Metadata side map for the lib/Linker case as well, in which case we&apos;ll need a new template parameter on \a ValueMap. TODO: Update callers of \a RemapInstruction() and \a MapValue() (etc.) to use \a ValueMapper directly.</p><p>Declared at: <a class="is-family-code" href="https://github.com/llvm/llvm-project/blob/release/10.x/llvm/include/llvm/Transforms/Utils/ValueMapper.h#L141">llvm/include/llvm/Transforms/Utils/ValueMapper.h:141</a></p><h2>Method Overview</h2><ul><li class="is-family-code">public  <a href="#A47B03DFDBA7E498"><b>ValueMapper</b></a>(llvm::ValueToValueMapTy &amp; VM, llvm::RemapFlags Flags = RF_None, llvm::ValueMapTypeRemapper * TypeMapper = nullptr, llvm::ValueMaterializer * Materializer = nullptr)</li><li class="is-family-code">public  <a href="#A062785EB0E979E3"><b>ValueMapper</b></a>(llvm::ValueMapper &amp;&amp;)</li><li class="is-family-code">public  <a href="#3AEFB852BE6D5E8F"><b>ValueMapper</b></a>(const llvm::ValueMapper &amp;)</li><li class="is-family-code">public void  <a href="#E72E0DEBF0973C17"><b>addFlags</b></a>(llvm::RemapFlags Flags)</li><li class="is-family-code">public llvm::Constant *  <a href="#35EE9E251B5B67A7"><b>mapConstant</b></a>(const llvm::Constant &amp; C)</li><li class="is-family-code">public llvm::MDNode *  <a href="#B8B95A00332DF4E6"><b>mapMDNode</b></a>(const llvm::MDNode &amp; N)</li><li class="is-family-code">public llvm::Metadata *  <a href="#D01C6179CE756FCA"><b>mapMetadata</b></a>(const llvm::Metadata &amp; MD)</li><li class="is-family-code">public llvm::Value *  <a href="#45AA220A75BF1AE4"><b>mapValue</b></a>(const llvm::Value &amp; V)</li><li class="is-family-code">public unsigned int  <a href="#628A55D963C06654"><b>registerAlternateMappingContext</b></a>(llvm::ValueToValueMapTy &amp; VM, llvm::ValueMaterializer * Materializer = nullptr)</li><li class="is-family-code">public void  <a href="#4CD3ED6484A484CA"><b>remapFunction</b></a>(llvm::Function &amp; F)</li><li class="is-family-code">public void  <a href="#6CBFACD33F2CE571"><b>remapInstruction</b></a>(llvm::Instruction &amp; I)</li><li class="is-family-code">public void  <a href="#7FF57D98A5CE5B62"><b>scheduleMapAppendingVariable</b></a>(llvm::GlobalVariable &amp; GV, llvm::Constant * InitPrefix, bool IsOldCtorDtor, ArrayRef&lt;llvm::Constant *&gt; NewMembers, unsigned int MappingContextID = 0)</li><li class="is-family-code">public void  <a href="#A0C11015CE4F6DC2"><b>scheduleMapGlobalIndirectSymbol</b></a>(llvm::GlobalIndirectSymbol &amp; GIS, llvm::Constant &amp; Target, unsigned int MappingContextID = 0)</li><li class="is-family-code">public void  <a href="#E9FB4B5A05B469FD"><b>scheduleMapGlobalInitializer</b></a>(llvm::GlobalVariable &amp; GV, llvm::Constant &amp; Init, unsigned int MappingContextID = 0)</li><li class="is-family-code">public void  <a href="#A2A531D9A231162A"><b>scheduleRemapFunction</b></a>(llvm::Function &amp; F, unsigned int MappingContextID = 0)</li><li class="is-family-code">public  <a href="#C76D23564E8DC670"><b>~ValueMapper</b></a>()</li></ul><h2>Methods</h2><h3 id="A47B03DFDBA7E498"><pre class="p-0 hdoc-pre-parent"><a class="hdoc-permalink-icon" href="#A47B03DFDBA7E498">¶</a><code class="hdoc-function-code language-cpp">ValueMapper(
    <a href="r86C9E2213D130A0C.html">llvm::ValueToValueMapTy</a>&amp; VM,
    llvm::RemapFlags Flags = RF_None,
    <a href="r440C59C10B278A20.html">llvm::ValueMapTypeRemapper</a>* TypeMapper =
        nullptr,
    <a href="r6D84A8330B704FB2.html">llvm::ValueMaterializer</a>* Materializer =
        nullptr)</code></pre></h3><p>Declared at: <a class="is-family-code" href="https://github.com/llvm/llvm-project/blob/release/10.x/llvm/include/llvm/Transforms/Utils/ValueMapper.h#L145">llvm/include/llvm/Transforms/Utils/ValueMapper.h:145</a></p><h4>Parameters</h4><dl><dt class="is-family-code"><a href="r86C9E2213D130A0C.html">llvm::ValueToValueMapTy</a>&amp;<b> VM</b></dt><dt class="is-family-code">llvm::RemapFlags<b> Flags</b> = RF_None</dt><dt class="is-family-code"><a href="r440C59C10B278A20.html">llvm::ValueMapTypeRemapper</a>*<b> TypeMapper</b> = nullptr</dt><dt class="is-family-code"><a href="r6D84A8330B704FB2.html">llvm::ValueMaterializer</a>*<b> Materializer</b> = nullptr</dt></dl><h3 id="A062785EB0E979E3"><pre class="p-0 hdoc-pre-parent"><a class="hdoc-permalink-icon" href="#A062785EB0E979E3">¶</a><code class="hdoc-function-code language-cpp">ValueMapper(<a href="r9C5974BC43ACE953.html">llvm::ValueMapper</a>&amp;&amp;)</code></pre></h3><p>Declared at: <a class="is-family-code" href="https://github.com/llvm/llvm-project/blob/release/10.x/llvm/include/llvm/Transforms/Utils/ValueMapper.h#L148">llvm/include/llvm/Transforms/Utils/ValueMapper.h:148</a></p><h4>Parameters</h4><dl><dt class="is-family-code"><a href="r9C5974BC43ACE953.html">llvm::ValueMapper</a>&amp;&amp;<b> </b></dt></dl><h3 id="3AEFB852BE6D5E8F"><pre class="p-0 hdoc-pre-parent"><a class="hdoc-permalink-icon" href="#3AEFB852BE6D5E8F">¶</a><code class="hdoc-function-code language-cpp">ValueMapper(const <a href="r9C5974BC43ACE953.html">llvm::ValueMapper</a>&amp;)</code></pre></h3><p>Declared at: <a class="is-family-code" href="https://github.com/llvm/llvm-project/blob/release/10.x/llvm/include/llvm/Transforms/Utils/ValueMapper.h#L149">llvm/include/llvm/Transforms/Utils/ValueMapper.h:149</a></p><h4>Parameters</h4><dl><dt class="is-family-code">const <a href="r9C5974BC43ACE953.html">llvm::ValueMapper</a>&amp;<b> </b></dt></dl><h3 id="E72E0DEBF0973C17"><pre class="p-0 hdoc-pre-parent"><a class="hdoc-permalink-icon" href="#E72E0DEBF0973C17">¶</a><code class="hdoc-function-code language-cpp">void addFlags(llvm::RemapFlags Flags)</code></pre></h3><h4>Description</h4><p>Add to the current \a RemapFlags.</p><p>Declared at: <a class="is-family-code" href="https://github.com/llvm/llvm-project/blob/release/10.x/llvm/include/llvm/Transforms/Utils/ValueMapper.h#L166">llvm/include/llvm/Transforms/Utils/ValueMapper.h:166</a></p><h4>Parameters</h4><dl><dt class="is-family-code">llvm::RemapFlags<b> Flags</b></dt></dl><h3 id="35EE9E251B5B67A7"><pre class="p-0 hdoc-pre-parent"><a class="hdoc-permalink-icon" href="#35EE9E251B5B67A7">¶</a><code class="hdoc-function-code language-cpp"><a href="r0CE2309DD94A32FA.html">llvm::Constant</a>* mapConstant(
    const <a href="r0CE2309DD94A32FA.html">llvm::Constant</a>&amp; C)</code></pre></h3><p>Declared at: <a class="is-family-code" href="https://github.com/llvm/llvm-project/blob/release/10.x/llvm/include/llvm/Transforms/Utils/ValueMapper.h#L172">llvm/include/llvm/Transforms/Utils/ValueMapper.h:172</a></p><h4>Parameters</h4><dl><dt class="is-family-code">const <a href="r0CE2309DD94A32FA.html">llvm::Constant</a>&amp;<b> C</b></dt></dl><h3 id="B8B95A00332DF4E6"><pre class="p-0 hdoc-pre-parent"><a class="hdoc-permalink-icon" href="#B8B95A00332DF4E6">¶</a><code class="hdoc-function-code language-cpp"><a href="r27429CCC2466601C.html">llvm::MDNode</a>* mapMDNode(const <a href="r27429CCC2466601C.html">llvm::MDNode</a>&amp; N)</code></pre></h3><p>Declared at: <a class="is-family-code" href="https://github.com/llvm/llvm-project/blob/release/10.x/llvm/include/llvm/Transforms/Utils/ValueMapper.h#L169">llvm/include/llvm/Transforms/Utils/ValueMapper.h:169</a></p><h4>Parameters</h4><dl><dt class="is-family-code">const <a href="r27429CCC2466601C.html">llvm::MDNode</a>&amp;<b> N</b></dt></dl><h3 id="D01C6179CE756FCA"><pre class="p-0 hdoc-pre-parent"><a class="hdoc-permalink-icon" href="#D01C6179CE756FCA">¶</a><code class="hdoc-function-code language-cpp"><a href="rA56454CF0662D152.html">llvm::Metadata</a>* mapMetadata(
    const <a href="rA56454CF0662D152.html">llvm::Metadata</a>&amp; MD)</code></pre></h3><p>Declared at: <a class="is-family-code" href="https://github.com/llvm/llvm-project/blob/release/10.x/llvm/include/llvm/Transforms/Utils/ValueMapper.h#L168">llvm/include/llvm/Transforms/Utils/ValueMapper.h:168</a></p><h4>Parameters</h4><dl><dt class="is-family-code">const <a href="rA56454CF0662D152.html">llvm::Metadata</a>&amp;<b> MD</b></dt></dl><h3 id="45AA220A75BF1AE4"><pre class="p-0 hdoc-pre-parent"><a class="hdoc-permalink-icon" href="#45AA220A75BF1AE4">¶</a><code class="hdoc-function-code language-cpp"><a href="r4EC65655F3BC4E59.html">llvm::Value</a>* mapValue(const <a href="r4EC65655F3BC4E59.html">llvm::Value</a>&amp; V)</code></pre></h3><p>Declared at: <a class="is-family-code" href="https://github.com/llvm/llvm-project/blob/release/10.x/llvm/include/llvm/Transforms/Utils/ValueMapper.h#L171">llvm/include/llvm/Transforms/Utils/ValueMapper.h:171</a></p><h4>Parameters</h4><dl><dt class="is-family-code">const <a href="r4EC65655F3BC4E59.html">llvm::Value</a>&amp;<b> V</b></dt></dl><h3 id="628A55D963C06654"><pre class="p-0 hdoc-pre-parent"><a class="hdoc-permalink-icon" href="#628A55D963C06654">¶</a><code class="hdoc-function-code language-cpp">unsigned int registerAlternateMappingContext(
    <a href="r86C9E2213D130A0C.html">llvm::ValueToValueMapTy</a>&amp; VM,
    <a href="r6D84A8330B704FB2.html">llvm::ValueMaterializer</a>* Materializer =
        nullptr)</code></pre></h3><h4>Description</h4><p>Register an alternate mapping context. Returns a MappingContextID that can be used with the various schedule*() API to switch in a different value map on-the-fly.</p><p>Declared at: <a class="is-family-code" href="https://github.com/llvm/llvm-project/blob/release/10.x/llvm/include/llvm/Transforms/Utils/ValueMapper.h#L159">llvm/include/llvm/Transforms/Utils/ValueMapper.h:159</a></p><h4>Parameters</h4><dl><dt class="is-family-code"><a href="r86C9E2213D130A0C.html">llvm::ValueToValueMapTy</a>&amp;<b> VM</b></dt><dt class="is-family-code"><a href="r6D84A8330B704FB2.html">llvm::ValueMaterializer</a>*<b> Materializer</b> = nullptr</dt></dl><h3 id="4CD3ED6484A484CA"><pre class="p-0 hdoc-pre-parent"><a class="hdoc-permalink-icon" href="#4CD3ED6484A484CA">¶</a><code class="hdoc-function-code language-cpp">void remapFunction(<a href="rADBA2A8E0906EC47.html">llvm::Function</a>&amp; F)</code></pre></h3><p>Declared at: <a class="is-family-code" href="https://github.com/llvm/llvm-project/blob/release/10.x/llvm/include/llvm/Transforms/Utils/ValueMapper.h#L175">llvm/include/llvm/Transforms/Utils/ValueMapper.h:175</a></p><h4>Parameters</h4><dl><dt class="is-family-code"><a href="rADBA2A8E0906EC47.html">llvm::Function</a>&amp;<b> F</b></dt></dl><h3 id="6CBFACD33F2CE571"><pre class="p-0 hdoc-pre-parent"><a class="hdoc-permalink-icon" href="#6CBFACD33F2CE571">¶</a><code class="hdoc-function-code language-cpp">void remapInstruction(<a href="rE266D8602316BABC.html">llvm::Instruction</a>&amp; I)</code></pre></h3><p>Declared at: <a class="is-family-code" href="https://github.com/llvm/llvm-project/blob/release/10.x/llvm/include/llvm/Transforms/Utils/ValueMapper.h#L174">llvm/include/llvm/Transforms/Utils/ValueMapper.h:174</a></p><h4>Parameters</h4><dl><dt class="is-family-code"><a href="rE266D8602316BABC.html">llvm::Instruction</a>&amp;<b> I</b></dt></dl><h3 id="7FF57D98A5CE5B62"><pre class="p-0 hdoc-pre-parent"><a class="hdoc-permalink-icon" href="#7FF57D98A5CE5B62">¶</a><code class="hdoc-function-code language-cpp">void scheduleMapAppendingVariable(
    <a href="r81054CAEBB0A2997.html">llvm::GlobalVariable</a>&amp; GV,
    <a href="r0CE2309DD94A32FA.html">llvm::Constant</a>* InitPrefix,
    bool IsOldCtorDtor,
    <a href="r88137505AF2B6C74.html">ArrayRef</a>&lt;llvm::Constant*&gt; NewMembers,
    unsigned int MappingContextID = 0)</code></pre></h3><p>Declared at: <a class="is-family-code" href="https://github.com/llvm/llvm-project/blob/release/10.x/llvm/include/llvm/Transforms/Utils/ValueMapper.h#L179">llvm/include/llvm/Transforms/Utils/ValueMapper.h:179</a></p><h4>Parameters</h4><dl><dt class="is-family-code"><a href="r81054CAEBB0A2997.html">llvm::GlobalVariable</a>&amp;<b> GV</b></dt><dt class="is-family-code"><a href="r0CE2309DD94A32FA.html">llvm::Constant</a>*<b> InitPrefix</b></dt><dt class="is-family-code">bool<b> IsOldCtorDtor</b></dt><dt class="is-family-code"><a href="r88137505AF2B6C74.html">ArrayRef</a>&lt;llvm::Constant*&gt;<b> NewMembers</b></dt><dt class="is-family-code">unsigned int<b> MappingContextID</b> = 0</dt></dl><h3 id="A0C11015CE4F6DC2"><pre class="p-0 hdoc-pre-parent"><a class="hdoc-permalink-icon" href="#A0C11015CE4F6DC2">¶</a><code class="hdoc-function-code language-cpp">void scheduleMapGlobalIndirectSymbol(
    <a href="r7B6E54FE815EEE8C.html">llvm::GlobalIndirectSymbol</a>&amp; GIS,
    <a href="r0CE2309DD94A32FA.html">llvm::Constant</a>&amp; Target,
    unsigned int MappingContextID = 0)</code></pre></h3><p>Declared at: <a class="is-family-code" href="https://github.com/llvm/llvm-project/blob/release/10.x/llvm/include/llvm/Transforms/Utils/ValueMapper.h#L183">llvm/include/llvm/Transforms/Utils/ValueMapper.h:183</a></p><h4>Parameters</h4><dl><dt class="is-family-code"><a href="r7B6E54FE815EEE8C.html">llvm::GlobalIndirectSymbol</a>&amp;<b> GIS</b></dt><dt class="is-family-code"><a href="r0CE2309DD94A32FA.html">llvm::Constant</a>&amp;<b> Target</b></dt><dt class="is-family-code">unsigned int<b> MappingContextID</b> = 0</dt></dl><h3 id="E9FB4B5A05B469FD"><pre class="p-0 hdoc-pre-parent"><a class="hdoc-permalink-icon" href="#E9FB4B5A05B469FD">¶</a><code class="hdoc-function-code language-cpp">void scheduleMapGlobalInitializer(
    <a href="r81054CAEBB0A2997.html">llvm::GlobalVariable</a>&amp; GV,
    <a href="r0CE2309DD94A32FA.html">llvm::Constant</a>&amp; Init,
    unsigned int MappingContextID = 0)</code></pre></h3><p>Declared at: <a class="is-family-code" href="https://github.com/llvm/llvm-project/blob/release/10.x/llvm/include/llvm/Transforms/Utils/ValueMapper.h#L177">llvm/include/llvm/Transforms/Utils/ValueMapper.h:177</a></p><h4>Parameters</h4><dl><dt class="is-family-code"><a href="r81054CAEBB0A2997.html">llvm::GlobalVariable</a>&amp;<b> GV</b></dt><dt class="is-family-code"><a href="r0CE2309DD94A32FA.html">llvm::Constant</a>&amp;<b> Init</b></dt><dt class="is-family-code">unsigned int<b> MappingContextID</b> = 0</dt></dl><h3 id="A2A531D9A231162A"><pre class="p-0 hdoc-pre-parent"><a class="hdoc-permalink-icon" href="#A2A531D9A231162A">¶</a><code class="hdoc-function-code language-cpp">void scheduleRemapFunction(
    <a href="rADBA2A8E0906EC47.html">llvm::Function</a>&amp; F,
    unsigned int MappingContextID = 0)</code></pre></h3><p>Declared at: <a class="is-family-code" href="https://github.com/llvm/llvm-project/blob/release/10.x/llvm/include/llvm/Transforms/Utils/ValueMapper.h#L186">llvm/include/llvm/Transforms/Utils/ValueMapper.h:186</a></p><h4>Parameters</h4><dl><dt class="is-family-code"><a href="rADBA2A8E0906EC47.html">llvm::Function</a>&amp;<b> F</b></dt><dt class="is-family-code">unsigned int<b> MappingContextID</b> = 0</dt></dl><h3 id="C76D23564E8DC670"><pre class="p-0 hdoc-pre-parent"><a class="hdoc-permalink-icon" href="#C76D23564E8DC670">¶</a><code class="hdoc-function-code language-cpp">~ValueMapper()</code></pre></h3><p>Declared at: <a class="is-family-code" href="https://github.com/llvm/llvm-project/blob/release/10.x/llvm/include/llvm/Transforms/Utils/ValueMapper.h#L152">llvm/include/llvm/Transforms/Utils/ValueMapper.h:152</a></p></main></div></div></div></section></div><footer class="footer"><p>Documentation for LLVM 10.0.0.</p><p>Generated by <a href="https://hdoc.io/">hdoc</a> version 1.4.0-hdocInternal on 2022-12-14T09:44:14 UTC.</p><p class="has-text-grey-light">19AD43E11B2996</p></footer></body></html>