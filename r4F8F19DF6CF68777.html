<!DOCTYPE html><html><head><meta charset="utf-8"></meta><meta content="width=device-width, initial-scale=1" name="viewport"></meta><title>class SpillPlacement: LLVM 10.0.0 documentation</title><link href="styles.css" rel="stylesheet"></link><script src="highlight.min.js"></script><script>hljs.highlightAll();</script><link href="katex.min.css" rel="stylesheet"></link><script src="katex.min.js"></script><script src="auto-render.min.js"></script><script>
    document.addEventListener("DOMContentLoaded", function() {
      renderMathInElement(document.body, {
        delimiters: [
          {left: '$$', right: '$$', display: true},
          {left: '$', right: '$', display: false},
        ],
      });
    });
  </script><link href="apple-touch-icon.png" sizes="180x180" rel="apple-touch-icon"></link><link href="favicon-32x32.png" sizes="32x32" type="image/png" rel="icon"></link><link href="favicon-16x16.png" sizes="16x16" type="image/png" rel="icon"></link></head><body><div id="wrapper"><section class="section"><div class="container"><div class="columns"><aside class="column is-one-fifth"><ul class="menu-list"><p class="is-size-4">LLVM 10.0.0</p><p class="menu-label">Navigation</p><li><a href="index.html">Home</a></li><li><a href="search.html">Search</a></li><li><a href="https://github.com/llvm/llvm-project/">Repository</a></li><li><a href="https://hdoc.io">Made with hdoc</a></li><p class="menu-label">API Documentation</p><li><a href="functions.html">Functions</a></li><li><a href="records.html">Records</a></li><li><a href="enums.html">Enums</a></li><li><a href="namespaces.html">Namespaces</a></li></ul></aside><div class="column" style="overflow-x: auto"><nav class="breadcrumb has-arrow-separator" aria-label="breadcrumbs"><ul><li><a href="namespaces.html#00A4DA910CC17C2D"><span>namespace llvm</span></a></li><li class="is-active"><a aria-current="page4F8F19DF6CF68777"><span>class SpillPlacement</span></a></li></ul></nav><main class="content"><h1>class SpillPlacement</h1><h2>Declaration</h2><pre class="p-0"><code class="hdoc-record-code language-cpp">class SpillPlacement : public MachineFunctionPass { /* full declaration omitted */ };</code></pre><h2>Description</h2><p>MachineFunctionPass - This class adapts the FunctionPass interface to allow convenient creation of passes that operate on the MachineFunction representation. Instead of overriding runOnFunction, subclasses override runOnMachineFunction.</p><p>Declared at: <a class="is-family-code" href="https://github.com/llvm/llvm-project/blob/release/10.x/llvm/lib/CodeGen/SpillPlacement.h#L43">llvm/lib/CodeGen/SpillPlacement.h:43</a></p><p>Inherits from: <a href="r16154827BAF4DEF5.html">MachineFunctionPass</a></p><h2>Member Variables</h2><dl><dt class="is-family-code" id="var_ID">public static  char <b>ID</b></dt></dl><h2>Method Overview</h2><ul><li class="is-family-code">public  <a href="#471323156AF4E33C"><b>SpillPlacement</b></a>()</li><li class="is-family-code">public void  <a href="#A58374F15FE2E220"><b>addConstraints</b></a>(ArrayRef&lt;llvm::SpillPlacement::BlockConstraint&gt; LiveBlocks)</li><li class="is-family-code">public void  <a href="#CC1D7BB5EF4D5E93"><b>addLinks</b></a>(ArrayRef&lt;unsigned int&gt; Links)</li><li class="is-family-code">public void  <a href="#9F261ED58C648CC1"><b>addPrefSpill</b></a>(ArrayRef&lt;unsigned int&gt; Blocks, bool Strong)</li><li class="is-family-code">public bool  <a href="#2F8728DF39B6B398"><b>finish</b></a>()</li><li class="is-family-code">public llvm::BlockFrequency  <a href="#B2B70F8C168DDA26"><b>getBlockFrequency</b></a>(unsigned int Number) const</li><li class="is-family-code">public ArrayRef&lt;unsigned int&gt;  <a href="#00ACBEA70B4ADEA8"><b>getRecentPositive</b></a>()</li><li class="is-family-code">public void  <a href="#BB707302D68FBD52"><b>iterate</b></a>()</li><li class="is-family-code">public void  <a href="#4CA49D50CD181552"><b>prepare</b></a>(llvm::BitVector &amp; RegBundles)</li><li class="is-family-code">public bool  <a href="#49956D119280D639"><b>scanActiveBundles</b></a>()</li><li class="is-family-code">public  <a href="#78479E6CC759B4C6"><b>~SpillPlacement</b></a>()</li></ul><p>Inherited from <a href="r16154827BAF4DEF5.html">MachineFunctionPass</a>:</p><ul><li class="is-family-code"><a href="r16154827BAF4DEF5.html#17FE8B4D625A01BA">public <b>doInitialization</b></a></li><li class="is-family-code"><a href="r16154827BAF4DEF5.html#A28C0F2BC03F92F4">protected <b>getAnalysisUsage</b></a></li><li class="is-family-code"><a href="r16154827BAF4DEF5.html#EA95DE45E46CA337">protected <b>getClearedProperties</b></a></li><li class="is-family-code"><a href="r16154827BAF4DEF5.html#E7F37EE0B5EF1D01">protected <b>getRequiredProperties</b></a></li><li class="is-family-code"><a href="r16154827BAF4DEF5.html#393AB515A58938DC">protected <b>getSetProperties</b></a></li><li class="is-family-code"><a href="r16154827BAF4DEF5.html#0EA7482C8B674F04">protected <b>runOnMachineFunction</b></a></li></ul><p>Inherited from <a href="r74F923D24ED455D9.html">FunctionPass</a>:</p><ul><li class="is-family-code"><a href="r74F923D24ED455D9.html#D099D8AEE84C1CAB">public <b>assignPassManager</b></a></li><li class="is-family-code"><a href="r74F923D24ED455D9.html#F4DD180937E2CEE3">public <b>createPrinterPass</b></a></li><li class="is-family-code"><a href="r74F923D24ED455D9.html#995E29B7B8664D69">public <b>getPotentialPassManagerType</b></a></li><li class="is-family-code"><a href="r74F923D24ED455D9.html#DACC2AB2D5CDE353">public <b>runOnFunction</b></a></li><li class="is-family-code"><a href="r74F923D24ED455D9.html#C0DA4FDBC25CD8C7">protected <b>skipFunction</b></a></li></ul><p>Inherited from <a href="r5C699BA905513C7D.html">Pass</a>:</p><ul><li class="is-family-code"><a href="r5C699BA905513C7D.html#B77CD67BD1629F33">public <b>assignPassManager</b></a></li><li class="is-family-code"><a href="r5C699BA905513C7D.html#2D0D13307B9F3B65">public <b>createPass</b></a></li><li class="is-family-code"><a href="r5C699BA905513C7D.html#D86EB5880C705387">public <b>createPrinterPass</b></a></li><li class="is-family-code"><a href="r5C699BA905513C7D.html#DA546A9B4D86A4AC">public <b>doFinalization</b></a></li><li class="is-family-code"><a href="r5C699BA905513C7D.html#C1C60C1069627006">public <b>doInitialization</b></a></li><li class="is-family-code"><a href="r5C699BA905513C7D.html#3E1B076F16E55733">public <b>dump</b></a></li><li class="is-family-code"><a href="r5C699BA905513C7D.html#DF76C1AACD751037">public <b>dumpPassStructure</b></a></li><li class="is-family-code"><a href="r5C699BA905513C7D.html#B0D1B4D63F131A52">public <b>getAdjustedAnalysisPointer</b></a></li><li class="is-family-code"><a href="r5C699BA905513C7D.html#508DB17C3BD58A3B">public <b>getAnalysis</b></a></li><li class="is-family-code"><a href="r5C699BA905513C7D.html#399025B1218E533F">public <b>getAnalysis</b></a></li><li class="is-family-code"><a href="r5C699BA905513C7D.html#D7BF88926CB1FD8C">public <b>getAnalysisID</b></a></li><li class="is-family-code"><a href="r5C699BA905513C7D.html#4C2D08D75B1DF6E2">public <b>getAnalysisID</b></a></li><li class="is-family-code"><a href="r5C699BA905513C7D.html#4E1F810E2E774DBA">public <b>getAnalysisIfAvailable</b></a></li><li class="is-family-code"><a href="r5C699BA905513C7D.html#7DC8EF22F2E69258">public <b>getAnalysisUsage</b></a></li><li class="is-family-code"><a href="r5C699BA905513C7D.html#88D76D900914337E">public <b>getAsImmutablePass</b></a></li><li class="is-family-code"><a href="r5C699BA905513C7D.html#A9179F0171D73F4F">public <b>getAsPMDataManager</b></a></li><li class="is-family-code"><a href="r5C699BA905513C7D.html#F8A9AF587657F26A">public <b>getPassID</b></a></li><li class="is-family-code"><a href="r5C699BA905513C7D.html#01425484B8A78CE4">public <b>getPassKind</b></a></li><li class="is-family-code"><a href="r5C699BA905513C7D.html#A69268FE43C6E755">public <b>getPassName</b></a></li><li class="is-family-code"><a href="r5C699BA905513C7D.html#D582BFC83FAA773F">public <b>getPotentialPassManagerType</b></a></li><li class="is-family-code"><a href="r5C699BA905513C7D.html#3B2F83F2FF98751C">public <b>getResolver</b></a></li><li class="is-family-code"><a href="r5C699BA905513C7D.html#FC3144BC659C7374">public <b>lookupPassInfo</b></a></li><li class="is-family-code"><a href="r5C699BA905513C7D.html#17A4C887E114A5FF">public <b>lookupPassInfo</b></a></li><li class="is-family-code"><a href="r5C699BA905513C7D.html#C954D723D089F492">public <b>mustPreserveAnalysisID</b></a></li><li class="is-family-code"><a href="r5C699BA905513C7D.html#BC21CC04BD48FE25">public <b>preparePassManager</b></a></li><li class="is-family-code"><a href="r5C699BA905513C7D.html#FCD0CFEBD76D0AA6">public <b>print</b></a></li><li class="is-family-code"><a href="r5C699BA905513C7D.html#A7931C7B40AAFB52">public <b>releaseMemory</b></a></li><li class="is-family-code"><a href="r5C699BA905513C7D.html#EDA7914303044FBC">public <b>setResolver</b></a></li><li class="is-family-code"><a href="r5C699BA905513C7D.html#0DEED6AA900F0F67">public <b>verifyAnalysis</b></a></li></ul><h2>Methods</h2><h3 id="471323156AF4E33C"><pre class="p-0 hdoc-pre-parent"><a class="hdoc-permalink-icon" href="#471323156AF4E33C">¶</a><code class="hdoc-function-code language-cpp">SpillPlacement()</code></pre></h3><p>Declared at: <a class="is-family-code" href="https://github.com/llvm/llvm-project/blob/release/10.x/llvm/lib/CodeGen/SpillPlacement.h#L75">llvm/lib/CodeGen/SpillPlacement.h:75</a></p><h3 id="A58374F15FE2E220"><pre class="p-0 hdoc-pre-parent"><a class="hdoc-permalink-icon" href="#A58374F15FE2E220">¶</a><code class="hdoc-function-code language-cpp">void addConstraints(
    <a href="r88137505AF2B6C74.html">ArrayRef</a>&lt;
        llvm::SpillPlacement::BlockConstraint&gt;
        LiveBlocks)</code></pre></h3><h4>Description</h4><p>addConstraints - Add constraints and biases. This method may be called more than once to accumulate constraints.</p><p>Declared at: <a class="is-family-code" href="https://github.com/llvm/llvm-project/blob/release/10.x/llvm/lib/CodeGen/SpillPlacement.h#L113">llvm/lib/CodeGen/SpillPlacement.h:113</a></p><h4>Parameters</h4><dl><dt class="is-family-code"><a href="r88137505AF2B6C74.html">ArrayRef</a>&lt;llvm::SpillPlacement::BlockConstraint&gt;<b> LiveBlocks</b></dt><dd>Constraints for blocks that have the variable live in or live out.</dd></dl><h3 id="CC1D7BB5EF4D5E93"><pre class="p-0 hdoc-pre-parent"><a class="hdoc-permalink-icon" href="#CC1D7BB5EF4D5E93">¶</a><code class="hdoc-function-code language-cpp">void addLinks(<a href="r88137505AF2B6C74.html">ArrayRef</a>&lt;unsigned int&gt; Links)</code></pre></h3><h4>Description</h4><p>addLinks - Add transparent blocks with the given numbers.</p><p>Declared at: <a class="is-family-code" href="https://github.com/llvm/llvm-project/blob/release/10.x/llvm/lib/CodeGen/SpillPlacement.h#L124">llvm/lib/CodeGen/SpillPlacement.h:124</a></p><h4>Parameters</h4><dl><dt class="is-family-code"><a href="r88137505AF2B6C74.html">ArrayRef</a>&lt;unsigned int&gt;<b> Links</b></dt></dl><h3 id="9F261ED58C648CC1"><pre class="p-0 hdoc-pre-parent"><a class="hdoc-permalink-icon" href="#9F261ED58C648CC1">¶</a><code class="hdoc-function-code language-cpp">void addPrefSpill(<a href="r88137505AF2B6C74.html">ArrayRef</a>&lt;unsigned int&gt; Blocks,
                  bool Strong)</code></pre></h3><h4>Description</h4><p>addPrefSpill - Add PrefSpill constraints to all blocks listed.  This is equivalent to calling addConstraint with identical BlockConstraints with Entry = Exit = PrefSpill, and ChangesValue = false.</p><p>Declared at: <a class="is-family-code" href="https://github.com/llvm/llvm-project/blob/release/10.x/llvm/lib/CodeGen/SpillPlacement.h#L121">llvm/lib/CodeGen/SpillPlacement.h:121</a></p><h4>Parameters</h4><dl><dt class="is-family-code"><a href="r88137505AF2B6C74.html">ArrayRef</a>&lt;unsigned int&gt;<b> Blocks</b></dt><dd>Array of block numbers that prefer to spill in and out.</dd><dt class="is-family-code">bool<b> Strong</b></dt><dd>When true, double the negative bias for these blocks.</dd></dl><h3 id="2F8728DF39B6B398"><pre class="p-0 hdoc-pre-parent"><a class="hdoc-permalink-icon" href="#2F8728DF39B6B398">¶</a><code class="hdoc-function-code language-cpp">bool finish()</code></pre></h3><h4>Description</h4><p>finish - Compute the optimal spill code placement given the constraints. No MustSpill constraints will be violated, and the smallest possible number of PrefX constraints will be violated, weighted by expected execution frequencies. The selected bundles are returned in the bitvector passed to prepare().</p><p>Declared at: <a class="is-family-code" href="https://github.com/llvm/llvm-project/blob/release/10.x/llvm/lib/CodeGen/SpillPlacement.h#L148">llvm/lib/CodeGen/SpillPlacement.h:148</a></p><h4>Returns</h4><p>True if a perfect solution was found, allowing the variable to be in a register through all relevant bundles.</p><h3 id="B2B70F8C168DDA26"><pre class="p-0 hdoc-pre-parent"><a class="hdoc-permalink-icon" href="#B2B70F8C168DDA26">¶</a><code class="hdoc-function-code language-cpp"><a href="r3ACAB4A05CBBBA84.html">llvm::BlockFrequency</a> getBlockFrequency(
    unsigned int Number) const</code></pre></h3><h4>Description</h4><p>getBlockFrequency - Return the estimated block execution frequency per function invocation.</p><p>Declared at: <a class="is-family-code" href="https://github.com/llvm/llvm-project/blob/release/10.x/llvm/lib/CodeGen/SpillPlacement.h#L152">llvm/lib/CodeGen/SpillPlacement.h:152</a></p><h4>Parameters</h4><dl><dt class="is-family-code">unsigned int<b> Number</b></dt></dl><h3 id="00ACBEA70B4ADEA8"><pre class="p-0 hdoc-pre-parent"><a class="hdoc-permalink-icon" href="#00ACBEA70B4ADEA8">¶</a><code class="hdoc-function-code language-cpp"><a href="r88137505AF2B6C74.html">ArrayRef</a>&lt;unsigned int&gt; getRecentPositive()</code></pre></h3><h4>Description</h4><p>getRecentPositive - Return an array of bundles that became positive during the previous call to scanActiveBundles or iterate.</p><p>Declared at: <a class="is-family-code" href="https://github.com/llvm/llvm-project/blob/release/10.x/llvm/lib/CodeGen/SpillPlacement.h#L139">llvm/lib/CodeGen/SpillPlacement.h:139</a></p><h3 id="BB707302D68FBD52"><pre class="p-0 hdoc-pre-parent"><a class="hdoc-permalink-icon" href="#BB707302D68FBD52">¶</a><code class="hdoc-function-code language-cpp">void iterate()</code></pre></h3><h4>Description</h4><p>iterate - Update the network iteratively until convergence, or new bundles are found.</p><p>Declared at: <a class="is-family-code" href="https://github.com/llvm/llvm-project/blob/release/10.x/llvm/lib/CodeGen/SpillPlacement.h#L135">llvm/lib/CodeGen/SpillPlacement.h:135</a></p><h3 id="4CA49D50CD181552"><pre class="p-0 hdoc-pre-parent"><a class="hdoc-permalink-icon" href="#4CA49D50CD181552">¶</a><code class="hdoc-function-code language-cpp">void prepare(<a href="r4821A6F4EC56E8B2.html">llvm::BitVector</a>&amp; RegBundles)</code></pre></h3><h4>Description</h4><p>prepare - Reset state and prepare for a new spill placement computation.</p><p>Declared at: <a class="is-family-code" href="https://github.com/llvm/llvm-project/blob/release/10.x/llvm/lib/CodeGen/SpillPlacement.h#L107">llvm/lib/CodeGen/SpillPlacement.h:107</a></p><h4>Parameters</h4><dl><dt class="is-family-code"><a href="r4821A6F4EC56E8B2.html">llvm::BitVector</a>&amp;<b> RegBundles</b></dt><dd>Bit vector to receive the edge bundles where the variable should be kept in a register. Each bit corresponds to an edge bundle, a set bit means the variable should be kept in a register through the bundle. A clear bit means the variable should be spilled. This vector is retained.</dd></dl><h3 id="49956D119280D639"><pre class="p-0 hdoc-pre-parent"><a class="hdoc-permalink-icon" href="#49956D119280D639">¶</a><code class="hdoc-function-code language-cpp">bool scanActiveBundles()</code></pre></h3><h4>Description</h4><p>scanActiveBundles - Perform an initial scan of all bundles activated by addConstraints and addLinks, updating their state. Add all the bundles that now prefer a register to RecentPositive. Prepare internal data structures for iterate. Return true is there are any positive nodes.</p><p>Declared at: <a class="is-family-code" href="https://github.com/llvm/llvm-project/blob/release/10.x/llvm/lib/CodeGen/SpillPlacement.h#L131">llvm/lib/CodeGen/SpillPlacement.h:131</a></p><h3 id="78479E6CC759B4C6"><pre class="p-0 hdoc-pre-parent"><a class="hdoc-permalink-icon" href="#78479E6CC759B4C6">¶</a><code class="hdoc-function-code language-cpp">~SpillPlacement()</code></pre></h3><p>Declared at: <a class="is-family-code" href="https://github.com/llvm/llvm-project/blob/release/10.x/llvm/lib/CodeGen/SpillPlacement.h#L76">llvm/lib/CodeGen/SpillPlacement.h:76</a></p></main></div></div></div></section></div><footer class="footer"><p>Documentation for LLVM 10.0.0.</p><p>Generated by <a href="https://hdoc.io/">hdoc</a> version 1.4.0-hdocInternal on 2022-12-14T09:44:14 UTC.</p><p class="has-text-grey-light">19AD43E11B2996</p></footer></body></html>