<!DOCTYPE html><html><head><meta charset="utf-8"></meta><meta content="width=device-width, initial-scale=1" name="viewport"></meta><title>class LazyRandomTypeCollection: LLVM 10.0.0 documentation</title><link href="styles.css" rel="stylesheet"></link><script src="highlight.min.js"></script><script>hljs.highlightAll();</script><link href="katex.min.css" rel="stylesheet"></link><script src="katex.min.js"></script><script src="auto-render.min.js"></script><script>
    document.addEventListener("DOMContentLoaded", function() {
      renderMathInElement(document.body, {
        delimiters: [
          {left: '$$', right: '$$', display: true},
          {left: '$', right: '$', display: false},
        ],
      });
    });
  </script><link href="apple-touch-icon.png" sizes="180x180" rel="apple-touch-icon"></link><link href="favicon-32x32.png" sizes="32x32" type="image/png" rel="icon"></link><link href="favicon-16x16.png" sizes="16x16" type="image/png" rel="icon"></link></head><body><div id="wrapper"><section class="section"><div class="container"><div class="columns"><aside class="column is-one-fifth"><ul class="menu-list"><p class="is-size-4">LLVM 10.0.0</p><p class="menu-label">Navigation</p><li><a href="index.html">Home</a></li><li><a href="search.html">Search</a></li><li><a href="https://github.com/llvm/llvm-project/">Repository</a></li><li><a href="https://hdoc.io">Made with hdoc</a></li><p class="menu-label">API Documentation</p><li><a href="functions.html">Functions</a></li><li><a href="records.html">Records</a></li><li><a href="enums.html">Enums</a></li><li><a href="namespaces.html">Namespaces</a></li></ul></aside><div class="column" style="overflow-x: auto"><nav class="breadcrumb has-arrow-separator" aria-label="breadcrumbs"><ul><li><a href="namespaces.html#00A4DA910CC17C2D"><span>namespace llvm</span></a></li><li><a href="namespaces.html#FBCB919B100135B5"><span>namespace codeview</span></a></li><li class="is-active"><a aria-current="page43DBA77EF9029FD3"><span>class LazyRandomTypeCollection</span></a></li></ul></nav><main class="content"><h1>class LazyRandomTypeCollection</h1><h2>Declaration</h2><pre class="p-0"><code class="hdoc-record-code language-cpp">class LazyRandomTypeCollection : public TypeCollection { /* full declaration omitted */ };</code></pre><h2>Description</h2><p>Provides amortized O(1) random access to a CodeView type stream. Normally to access a type from a type stream, you must know its byte offset into the type stream, because type records are variable-lengthed. However, this is not the way we prefer to access them.  For example, given a symbol record one of the fields may be the TypeIndex of the symbol&apos;s type record.  Or given a type record such as an array type, there might be a TypeIndex for the element type.  Sequential access is perfect when we&apos;re just dumping every entry, but it&apos;s very poor for real world usage. Type streams in PDBs contain an additional field which is a list of pairs containing indices and their corresponding offsets, roughly every ~8KB of record data.  This general idea need not be confined to PDBs though.  By supplying such an array, the producer of a type stream can allow the consumer much better access time, because the consumer can find the nearest index in this array, and do a linear scan forward only from there. LazyRandomTypeCollection implements this algorithm, but additionally goes one step further by caching offsets of every record that has been visited at least once.  This way, even repeated visits of the same record will never require more than one linear scan.  For a type stream of N elements divided into M chunks of roughly equal size, this yields a worst case lookup time of O(N/M) and an amortized time of O(1).</p><p>Declared at: <a class="is-family-code" href="https://github.com/llvm/llvm-project/blob/release/10.x/llvm/include/llvm/DebugInfo/CodeView/LazyRandomTypeCollection.h#L50">llvm/include/llvm/DebugInfo/CodeView/LazyRandomTypeCollection.h:50</a></p><p>Inherits from: <a href="r2FFFE8C41B53838F.html">TypeCollection</a></p><h2>Method Overview</h2><ul><li class="is-family-code">public  <a href="#957439D29F5326F0"><b>LazyRandomTypeCollection</b></a>(llvm::StringRef Data, uint32_t RecordCountHint)</li><li class="is-family-code">public  <a href="#011355B5B637044C"><b>LazyRandomTypeCollection</b></a>(ArrayRef&lt;uint8_t&gt; Data, uint32_t RecordCountHint)</li><li class="is-family-code">public  <a href="#77A1F17398724D94"><b>LazyRandomTypeCollection</b></a>(const llvm::codeview::CVTypeArray &amp; Types, uint32_t RecordCountHint, llvm::codeview::LazyRandomTypeCollection::PartialOffsetArray PartialOffsets)</li><li class="is-family-code">public  <a href="#5D912786F9A22151"><b>LazyRandomTypeCollection</b></a>(const llvm::codeview::CVTypeArray &amp; Types, uint32_t RecordCountHint)</li><li class="is-family-code">public  <a href="#D303B5C30B00E37B"><b>LazyRandomTypeCollection</b></a>(uint32_t RecordCountHint)</li><li class="is-family-code">public uint32_t  <a href="#52EC3521CEE8BC91"><b>capacity</b></a>()</li><li class="is-family-code">public bool  <a href="#9D85B19589C36182"><b>contains</b></a>(llvm::codeview::TypeIndex Index)</li><li class="is-family-code">public Optional&lt;llvm::codeview::TypeIndex&gt;  <a href="#C7E579DE35DA1A5F"><b>getFirst</b></a>()</li><li class="is-family-code">public Optional&lt;llvm::codeview::TypeIndex&gt;  <a href="#0FDFD10C5C123E13"><b>getNext</b></a>(llvm::codeview::TypeIndex Prev)</li><li class="is-family-code">public uint32_t  <a href="#34B981B61834B1F3"><b>getOffsetOfType</b></a>(llvm::codeview::TypeIndex Index)</li><li class="is-family-code">public llvm::codeview::CVType  <a href="#DD8882EEA74AF563"><b>getType</b></a>(llvm::codeview::TypeIndex Index)</li><li class="is-family-code">public llvm::StringRef  <a href="#19660A9B0173B524"><b>getTypeName</b></a>(llvm::codeview::TypeIndex Index)</li><li class="is-family-code">public void  <a href="#921F96134DAE5E6E"><b>reset</b></a>(llvm::BinaryStreamReader &amp; Reader, uint32_t RecordCountHint)</li><li class="is-family-code">public void  <a href="#F9EF62AA17B1DED6"><b>reset</b></a>(llvm::StringRef Data, uint32_t RecordCountHint)</li><li class="is-family-code">public void  <a href="#4121241A0188EC3E"><b>reset</b></a>(ArrayRef&lt;uint8_t&gt; Data, uint32_t RecordCountHint)</li><li class="is-family-code">public uint32_t  <a href="#3BE5D7D7D704F0B8"><b>size</b></a>()</li><li class="is-family-code">public Optional&lt;llvm::codeview::CVType&gt;  <a href="#B736C1E57F7F2BAF"><b>tryGetType</b></a>(llvm::codeview::TypeIndex Index)</li></ul><p>Inherited from <a href="r2FFFE8C41B53838F.html">TypeCollection</a>:</p><ul><li class="is-family-code"><a href="r2FFFE8C41B53838F.html#F3A7262AD3176BAF">public <b>ForEachRecord</b></a></li><li class="is-family-code"><a href="r2FFFE8C41B53838F.html#6E1E4D658E52C763">public <b>capacity</b></a></li><li class="is-family-code"><a href="r2FFFE8C41B53838F.html#A9FA71E4925CADC0">public <b>contains</b></a></li><li class="is-family-code"><a href="r2FFFE8C41B53838F.html#B67F123D66B4BFFC">public <b>empty</b></a></li><li class="is-family-code"><a href="r2FFFE8C41B53838F.html#A855F28173788BB1">public <b>getFirst</b></a></li><li class="is-family-code"><a href="r2FFFE8C41B53838F.html#C7F920E97122A8E5">public <b>getNext</b></a></li><li class="is-family-code"><a href="r2FFFE8C41B53838F.html#8A23AF60EA8141F0">public <b>getType</b></a></li><li class="is-family-code"><a href="r2FFFE8C41B53838F.html#8C8DFE193696FEAD">public <b>getTypeName</b></a></li><li class="is-family-code"><a href="r2FFFE8C41B53838F.html#A1288258E9C81E53">public <b>size</b></a></li></ul><h2>Methods</h2><h3 id="957439D29F5326F0"><pre class="p-0 hdoc-pre-parent"><a class="hdoc-permalink-icon" href="#957439D29F5326F0">¶</a><code class="hdoc-function-code language-cpp">LazyRandomTypeCollection(<a href="rECFCAF624C04523A.html">llvm::StringRef</a> Data,
                         uint32_t RecordCountHint)</code></pre></h3><p>Declared at: <a class="is-family-code" href="https://github.com/llvm/llvm-project/blob/release/10.x/llvm/include/llvm/DebugInfo/CodeView/LazyRandomTypeCollection.h#L61">llvm/include/llvm/DebugInfo/CodeView/LazyRandomTypeCollection.h:61</a></p><h4>Parameters</h4><dl><dt class="is-family-code"><a href="rECFCAF624C04523A.html">llvm::StringRef</a><b> Data</b></dt><dt class="is-family-code">uint32_t<b> RecordCountHint</b></dt></dl><h3 id="011355B5B637044C"><pre class="p-0 hdoc-pre-parent"><a class="hdoc-permalink-icon" href="#011355B5B637044C">¶</a><code class="hdoc-function-code language-cpp">LazyRandomTypeCollection(<a href="r88137505AF2B6C74.html">ArrayRef</a>&lt;uint8_t&gt; Data,
                         uint32_t RecordCountHint)</code></pre></h3><p>Declared at: <a class="is-family-code" href="https://github.com/llvm/llvm-project/blob/release/10.x/llvm/include/llvm/DebugInfo/CodeView/LazyRandomTypeCollection.h#L62">llvm/include/llvm/DebugInfo/CodeView/LazyRandomTypeCollection.h:62</a></p><h4>Parameters</h4><dl><dt class="is-family-code"><a href="r88137505AF2B6C74.html">ArrayRef</a>&lt;uint8_t&gt;<b> Data</b></dt><dt class="is-family-code">uint32_t<b> RecordCountHint</b></dt></dl><h3 id="77A1F17398724D94"><pre class="p-0 hdoc-pre-parent"><a class="hdoc-permalink-icon" href="#77A1F17398724D94">¶</a><code class="hdoc-function-code language-cpp">LazyRandomTypeCollection(
    const <a href="r3205A2976C852EE0.html">llvm::codeview::CVTypeArray</a>&amp; Types,
    uint32_t RecordCountHint,
    llvm::codeview::LazyRandomTypeCollection::
        PartialOffsetArray PartialOffsets)</code></pre></h3><p>Declared at: <a class="is-family-code" href="https://github.com/llvm/llvm-project/blob/release/10.x/llvm/include/llvm/DebugInfo/CodeView/LazyRandomTypeCollection.h#L63">llvm/include/llvm/DebugInfo/CodeView/LazyRandomTypeCollection.h:63</a></p><h4>Parameters</h4><dl><dt class="is-family-code">const <a href="r3205A2976C852EE0.html">llvm::codeview::CVTypeArray</a>&amp;<b> Types</b></dt><dt class="is-family-code">uint32_t<b> RecordCountHint</b></dt><dt class="is-family-code">llvm::codeview::LazyRandomTypeCollection::
    PartialOffsetArray<b> PartialOffsets</b></dt></dl><h3 id="5D912786F9A22151"><pre class="p-0 hdoc-pre-parent"><a class="hdoc-permalink-icon" href="#5D912786F9A22151">¶</a><code class="hdoc-function-code language-cpp">LazyRandomTypeCollection(
    const <a href="r3205A2976C852EE0.html">llvm::codeview::CVTypeArray</a>&amp; Types,
    uint32_t RecordCountHint)</code></pre></h3><p>Declared at: <a class="is-family-code" href="https://github.com/llvm/llvm-project/blob/release/10.x/llvm/include/llvm/DebugInfo/CodeView/LazyRandomTypeCollection.h#L65">llvm/include/llvm/DebugInfo/CodeView/LazyRandomTypeCollection.h:65</a></p><h4>Parameters</h4><dl><dt class="is-family-code">const <a href="r3205A2976C852EE0.html">llvm::codeview::CVTypeArray</a>&amp;<b> Types</b></dt><dt class="is-family-code">uint32_t<b> RecordCountHint</b></dt></dl><h3 id="D303B5C30B00E37B"><pre class="p-0 hdoc-pre-parent"><a class="hdoc-permalink-icon" href="#D303B5C30B00E37B">¶</a><code class="hdoc-function-code language-cpp">LazyRandomTypeCollection(uint32_t RecordCountHint)</code></pre></h3><p>Declared at: <a class="is-family-code" href="https://github.com/llvm/llvm-project/blob/release/10.x/llvm/include/llvm/DebugInfo/CodeView/LazyRandomTypeCollection.h#L60">llvm/include/llvm/DebugInfo/CodeView/LazyRandomTypeCollection.h:60</a></p><h4>Parameters</h4><dl><dt class="is-family-code">uint32_t<b> RecordCountHint</b></dt></dl><h3 id="52EC3521CEE8BC91"><pre class="p-0 hdoc-pre-parent"><a class="hdoc-permalink-icon" href="#52EC3521CEE8BC91">¶</a><code class="hdoc-function-code language-cpp">uint32_t capacity()</code></pre></h3><p>Declared at: <a class="is-family-code" href="https://github.com/llvm/llvm-project/blob/release/10.x/llvm/include/llvm/DebugInfo/CodeView/LazyRandomTypeCollection.h#L79">llvm/include/llvm/DebugInfo/CodeView/LazyRandomTypeCollection.h:79</a></p><h3 id="9D85B19589C36182"><pre class="p-0 hdoc-pre-parent"><a class="hdoc-permalink-icon" href="#9D85B19589C36182">¶</a><code class="hdoc-function-code language-cpp">bool contains(<a href="r4194439E03368AFF.html">llvm::codeview::TypeIndex</a> Index)</code></pre></h3><p>Declared at: <a class="is-family-code" href="https://github.com/llvm/llvm-project/blob/release/10.x/llvm/include/llvm/DebugInfo/CodeView/LazyRandomTypeCollection.h#L77">llvm/include/llvm/DebugInfo/CodeView/LazyRandomTypeCollection.h:77</a></p><h4>Parameters</h4><dl><dt class="is-family-code"><a href="r4194439E03368AFF.html">llvm::codeview::TypeIndex</a><b> Index</b></dt></dl><h3 id="C7E579DE35DA1A5F"><pre class="p-0 hdoc-pre-parent"><a class="hdoc-permalink-icon" href="#C7E579DE35DA1A5F">¶</a><code class="hdoc-function-code language-cpp"><a href="r6607998C23E31109.html">Optional</a>&lt;llvm::codeview::TypeIndex&gt; getFirst()</code></pre></h3><p>Declared at: <a class="is-family-code" href="https://github.com/llvm/llvm-project/blob/release/10.x/llvm/include/llvm/DebugInfo/CodeView/LazyRandomTypeCollection.h#L80">llvm/include/llvm/DebugInfo/CodeView/LazyRandomTypeCollection.h:80</a></p><h3 id="0FDFD10C5C123E13"><pre class="p-0 hdoc-pre-parent"><a class="hdoc-permalink-icon" href="#0FDFD10C5C123E13">¶</a><code class="hdoc-function-code language-cpp"><a href="r6607998C23E31109.html">Optional</a>&lt;<a href="r4194439E03368AFF.html">llvm::codeview::TypeIndex</a>&gt; getNext(
    llvm::codeview::TypeIndex Prev)</code></pre></h3><p>Declared at: <a class="is-family-code" href="https://github.com/llvm/llvm-project/blob/release/10.x/llvm/include/llvm/DebugInfo/CodeView/LazyRandomTypeCollection.h#L81">llvm/include/llvm/DebugInfo/CodeView/LazyRandomTypeCollection.h:81</a></p><h4>Parameters</h4><dl><dt class="is-family-code"><a href="r4194439E03368AFF.html">llvm::codeview::TypeIndex</a><b> Prev</b></dt></dl><h3 id="34B981B61834B1F3"><pre class="p-0 hdoc-pre-parent"><a class="hdoc-permalink-icon" href="#34B981B61834B1F3">¶</a><code class="hdoc-function-code language-cpp">uint32_t getOffsetOfType(
    <a href="r4194439E03368AFF.html">llvm::codeview::TypeIndex</a> Index)</code></pre></h3><p>Declared at: <a class="is-family-code" href="https://github.com/llvm/llvm-project/blob/release/10.x/llvm/include/llvm/DebugInfo/CodeView/LazyRandomTypeCollection.h#L71">llvm/include/llvm/DebugInfo/CodeView/LazyRandomTypeCollection.h:71</a></p><h4>Parameters</h4><dl><dt class="is-family-code"><a href="r4194439E03368AFF.html">llvm::codeview::TypeIndex</a><b> Index</b></dt></dl><h3 id="DD8882EEA74AF563"><pre class="p-0 hdoc-pre-parent"><a class="hdoc-permalink-icon" href="#DD8882EEA74AF563">¶</a><code class="hdoc-function-code language-cpp"><a href="rB02BEE518F9F0A4F.html">llvm::codeview::CVType</a> getType(
    <a href="r4194439E03368AFF.html">llvm::codeview::TypeIndex</a> Index)</code></pre></h3><p>Declared at: <a class="is-family-code" href="https://github.com/llvm/llvm-project/blob/release/10.x/llvm/include/llvm/DebugInfo/CodeView/LazyRandomTypeCollection.h#L75">llvm/include/llvm/DebugInfo/CodeView/LazyRandomTypeCollection.h:75</a></p><h4>Parameters</h4><dl><dt class="is-family-code"><a href="r4194439E03368AFF.html">llvm::codeview::TypeIndex</a><b> Index</b></dt></dl><h3 id="19660A9B0173B524"><pre class="p-0 hdoc-pre-parent"><a class="hdoc-permalink-icon" href="#19660A9B0173B524">¶</a><code class="hdoc-function-code language-cpp"><a href="rECFCAF624C04523A.html">llvm::StringRef</a> getTypeName(
    <a href="r4194439E03368AFF.html">llvm::codeview::TypeIndex</a> Index)</code></pre></h3><p>Declared at: <a class="is-family-code" href="https://github.com/llvm/llvm-project/blob/release/10.x/llvm/include/llvm/DebugInfo/CodeView/LazyRandomTypeCollection.h#L76">llvm/include/llvm/DebugInfo/CodeView/LazyRandomTypeCollection.h:76</a></p><h4>Parameters</h4><dl><dt class="is-family-code"><a href="r4194439E03368AFF.html">llvm::codeview::TypeIndex</a><b> Index</b></dt></dl><h3 id="921F96134DAE5E6E"><pre class="p-0 hdoc-pre-parent"><a class="hdoc-permalink-icon" href="#921F96134DAE5E6E">¶</a><code class="hdoc-function-code language-cpp">void reset(<a href="r1EFBFA5C10D48197.html">llvm::BinaryStreamReader</a>&amp; Reader,
           uint32_t RecordCountHint)</code></pre></h3><p>Declared at: <a class="is-family-code" href="https://github.com/llvm/llvm-project/blob/release/10.x/llvm/include/llvm/DebugInfo/CodeView/LazyRandomTypeCollection.h#L69">llvm/include/llvm/DebugInfo/CodeView/LazyRandomTypeCollection.h:69</a></p><h4>Parameters</h4><dl><dt class="is-family-code"><a href="r1EFBFA5C10D48197.html">llvm::BinaryStreamReader</a>&amp;<b> Reader</b></dt><dt class="is-family-code">uint32_t<b> RecordCountHint</b></dt></dl><h3 id="F9EF62AA17B1DED6"><pre class="p-0 hdoc-pre-parent"><a class="hdoc-permalink-icon" href="#F9EF62AA17B1DED6">¶</a><code class="hdoc-function-code language-cpp">void reset(<a href="rECFCAF624C04523A.html">llvm::StringRef</a> Data,
           uint32_t RecordCountHint)</code></pre></h3><p>Declared at: <a class="is-family-code" href="https://github.com/llvm/llvm-project/blob/release/10.x/llvm/include/llvm/DebugInfo/CodeView/LazyRandomTypeCollection.h#L68">llvm/include/llvm/DebugInfo/CodeView/LazyRandomTypeCollection.h:68</a></p><h4>Parameters</h4><dl><dt class="is-family-code"><a href="rECFCAF624C04523A.html">llvm::StringRef</a><b> Data</b></dt><dt class="is-family-code">uint32_t<b> RecordCountHint</b></dt></dl><h3 id="4121241A0188EC3E"><pre class="p-0 hdoc-pre-parent"><a class="hdoc-permalink-icon" href="#4121241A0188EC3E">¶</a><code class="hdoc-function-code language-cpp">void reset(<a href="r88137505AF2B6C74.html">ArrayRef</a>&lt;uint8_t&gt; Data,
           uint32_t RecordCountHint)</code></pre></h3><p>Declared at: <a class="is-family-code" href="https://github.com/llvm/llvm-project/blob/release/10.x/llvm/include/llvm/DebugInfo/CodeView/LazyRandomTypeCollection.h#L67">llvm/include/llvm/DebugInfo/CodeView/LazyRandomTypeCollection.h:67</a></p><h4>Parameters</h4><dl><dt class="is-family-code"><a href="r88137505AF2B6C74.html">ArrayRef</a>&lt;uint8_t&gt;<b> Data</b></dt><dt class="is-family-code">uint32_t<b> RecordCountHint</b></dt></dl><h3 id="3BE5D7D7D704F0B8"><pre class="p-0 hdoc-pre-parent"><a class="hdoc-permalink-icon" href="#3BE5D7D7D704F0B8">¶</a><code class="hdoc-function-code language-cpp">uint32_t size()</code></pre></h3><p>Declared at: <a class="is-family-code" href="https://github.com/llvm/llvm-project/blob/release/10.x/llvm/include/llvm/DebugInfo/CodeView/LazyRandomTypeCollection.h#L78">llvm/include/llvm/DebugInfo/CodeView/LazyRandomTypeCollection.h:78</a></p><h3 id="B736C1E57F7F2BAF"><pre class="p-0 hdoc-pre-parent"><a class="hdoc-permalink-icon" href="#B736C1E57F7F2BAF">¶</a><code class="hdoc-function-code language-cpp"><a href="r6607998C23E31109.html">Optional</a>&lt;llvm::codeview::CVType&gt; tryGetType(
    <a href="r4194439E03368AFF.html">llvm::codeview::TypeIndex</a> Index)</code></pre></h3><p>Declared at: <a class="is-family-code" href="https://github.com/llvm/llvm-project/blob/release/10.x/llvm/include/llvm/DebugInfo/CodeView/LazyRandomTypeCollection.h#L73">llvm/include/llvm/DebugInfo/CodeView/LazyRandomTypeCollection.h:73</a></p><h4>Parameters</h4><dl><dt class="is-family-code"><a href="r4194439E03368AFF.html">llvm::codeview::TypeIndex</a><b> Index</b></dt></dl></main></div></div></div></section></div><footer class="footer"><p>Documentation for LLVM 10.0.0.</p><p>Generated by <a href="https://hdoc.io/">hdoc</a> version 1.4.0-hdocInternal on 2022-12-14T09:44:14 UTC.</p><p class="has-text-grey-light">19AD43E11B2996</p></footer></body></html>