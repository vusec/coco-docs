<!DOCTYPE html><html><head><meta charset="utf-8"></meta><meta content="width=device-width, initial-scale=1" name="viewport"></meta><title>struct SpillPlacement::Node: LLVM 10.0.0 documentation</title><link href="styles.css" rel="stylesheet"></link><script src="highlight.min.js"></script><script>hljs.highlightAll();</script><link href="katex.min.css" rel="stylesheet"></link><script src="katex.min.js"></script><script src="auto-render.min.js"></script><script>
    document.addEventListener("DOMContentLoaded", function() {
      renderMathInElement(document.body, {
        delimiters: [
          {left: '$$', right: '$$', display: true},
          {left: '$', right: '$', display: false},
        ],
      });
    });
  </script><link href="apple-touch-icon.png" sizes="180x180" rel="apple-touch-icon"></link><link href="favicon-32x32.png" sizes="32x32" type="image/png" rel="icon"></link><link href="favicon-16x16.png" sizes="16x16" type="image/png" rel="icon"></link></head><body><div id="wrapper"><section class="section"><div class="container"><div class="columns"><aside class="column is-one-fifth"><ul class="menu-list"><p class="is-size-4">LLVM 10.0.0</p><p class="menu-label">Navigation</p><li><a href="index.html">Home</a></li><li><a href="search.html">Search</a></li><li><a href="https://github.com/llvm/llvm-project/">Repository</a></li><li><a href="https://hdoc.io">Made with hdoc</a></li><p class="menu-label">API Documentation</p><li><a href="functions.html">Functions</a></li><li><a href="records.html">Records</a></li><li><a href="enums.html">Enums</a></li><li><a href="namespaces.html">Namespaces</a></li></ul></aside><div class="column" style="overflow-x: auto"><nav class="breadcrumb has-arrow-separator" aria-label="breadcrumbs"><ul><li><a href="namespaces.html#00A4DA910CC17C2D"><span>namespace llvm</span></a></li><li><a href="r4F8F19DF6CF68777.html"><span>class SpillPlacement</span></a></li><li class="is-active"><a aria-current="page5855B926ECA8C00D"><span>struct SpillPlacement::Node</span></a></li></ul></nav><main class="content"><h1>struct SpillPlacement::Node</h1><h2>Declaration</h2><pre class="p-0"><code class="hdoc-record-code language-cpp">struct SpillPlacement::Node { /* full declaration omitted */ };</code></pre><h2>Description</h2><p>Node - Each edge bundle corresponds to a Hopfield node. The node contains precomputed frequency data that only depends on the CFG, but Bias and Links are computed each time placeSpills is called. The node Value is positive when the variable should be in a register. The value can change when linked nodes change, but convergence is very fast because all weights are positive.</p><p>Declared at: <a class="is-family-code" href="https://github.com/llvm/llvm-project/blob/release/10.x/llvm/lib/CodeGen/SpillPlacement.cpp#L79">llvm/lib/CodeGen/SpillPlacement.cpp:79</a></p><h2>Member Variables</h2><dl><dt class="is-family-code" id="var_BiasN">public  <a href="r3ACAB4A05CBBBA84.html">llvm::BlockFrequency</a> <b>BiasN</b></dt><dd>BiasN - Sum of blocks that prefer a spill.</dd><dt class="is-family-code" id="var_BiasP">public  <a href="r3ACAB4A05CBBBA84.html">llvm::BlockFrequency</a> <b>BiasP</b></dt><dd>BiasP - Sum of blocks that prefer a register.</dd><dt class="is-family-code" id="var_Value">public  int <b>Value</b></dt><dd>Value - Output value of this node computed from the Bias and links. This is always on of the values {-1, 0, 1}. A positive number means the variable should go in a register through this bundle.</dd><dt class="is-family-code" id="var_Links">public  <a href="r62CD0592E97953B6.html">llvm::SpillPlacement::Node::LinkVector</a> <b>Links</b></dt><dd>Links - (Weight, BundleNo) for all transparent blocks connecting to other bundles. The weights are all positive block frequencies.</dd><dt class="is-family-code" id="var_SumLinkWeights">public  <a href="r3ACAB4A05CBBBA84.html">llvm::BlockFrequency</a> <b>SumLinkWeights</b></dt><dd>SumLinkWeights - Cached sum of the weights of all links + ThresHold.</dd></dl><h2>Method Overview</h2><ul><li class="is-family-code">public void  <a href="#32B2935AFB7E3559"><b>addBias</b></a>(llvm::BlockFrequency freq, llvm::SpillPlacement::BorderConstraint direction)</li><li class="is-family-code">public void  <a href="#5DC6F98F6A0062E9"><b>addLink</b></a>(unsigned int b, llvm::BlockFrequency w)</li><li class="is-family-code">public void  <a href="#5324734A1FE6B565"><b>clear</b></a>(const llvm::BlockFrequency &amp; Threshold)</li><li class="is-family-code">public void  <a href="#DAA03D877962CB54"><b>getDissentingNeighbors</b></a>(SparseSet&lt;unsigned int&gt; &amp; List, const llvm::SpillPlacement::Node * nodes) const</li><li class="is-family-code">public bool  <a href="#8143ABA53B8A74D3"><b>mustSpill</b></a>() const</li><li class="is-family-code">public bool  <a href="#A49181E53E027A1B"><b>preferReg</b></a>() const</li><li class="is-family-code">public bool  <a href="#989FC1C8D3EF5F08"><b>update</b></a>(const llvm::SpillPlacement::Node * nodes, const llvm::BlockFrequency &amp; Threshold)</li></ul><h2>Methods</h2><h3 id="32B2935AFB7E3559"><pre class="p-0 hdoc-pre-parent"><a class="hdoc-permalink-icon" href="#32B2935AFB7E3559">¶</a><code class="hdoc-function-code language-cpp">void addBias(
    <a href="r3ACAB4A05CBBBA84.html">llvm::BlockFrequency</a> freq,
    llvm::SpillPlacement::BorderConstraint
        direction)</code></pre></h3><h4>Description</h4><p>addBias - Bias this node.</p><p>Declared at: <a class="is-family-code" href="https://github.com/llvm/llvm-project/blob/release/10.x/llvm/lib/CodeGen/SpillPlacement.cpp#L138">llvm/lib/CodeGen/SpillPlacement.cpp:138</a></p><h4>Parameters</h4><dl><dt class="is-family-code"><a href="r3ACAB4A05CBBBA84.html">llvm::BlockFrequency</a><b> freq</b></dt><dt class="is-family-code">llvm::SpillPlacement::BorderConstraint<b> direction</b></dt></dl><h3 id="5DC6F98F6A0062E9"><pre class="p-0 hdoc-pre-parent"><a class="hdoc-permalink-icon" href="#5DC6F98F6A0062E9">¶</a><code class="hdoc-function-code language-cpp">void addLink(unsigned int b,
             <a href="r3ACAB4A05CBBBA84.html">llvm::BlockFrequency</a> w)</code></pre></h3><h4>Description</h4><p>addLink - Add a link to bundle b with weight w.</p><p>Declared at: <a class="is-family-code" href="https://github.com/llvm/llvm-project/blob/release/10.x/llvm/lib/CodeGen/SpillPlacement.cpp#L123">llvm/lib/CodeGen/SpillPlacement.cpp:123</a></p><h4>Parameters</h4><dl><dt class="is-family-code">unsigned int<b> b</b></dt><dt class="is-family-code"><a href="r3ACAB4A05CBBBA84.html">llvm::BlockFrequency</a><b> w</b></dt></dl><h3 id="5324734A1FE6B565"><pre class="p-0 hdoc-pre-parent"><a class="hdoc-permalink-icon" href="#5324734A1FE6B565">¶</a><code class="hdoc-function-code language-cpp">void clear(const <a href="r3ACAB4A05CBBBA84.html">llvm::BlockFrequency</a>&amp; Threshold)</code></pre></h3><h4>Description</h4><p>clear - Reset per-query data, but preserve frequencies that only depend on the CFG.</p><p>Declared at: <a class="is-family-code" href="https://github.com/llvm/llvm-project/blob/release/10.x/llvm/lib/CodeGen/SpillPlacement.cpp#L116">llvm/lib/CodeGen/SpillPlacement.cpp:116</a></p><h4>Parameters</h4><dl><dt class="is-family-code">const <a href="r3ACAB4A05CBBBA84.html">llvm::BlockFrequency</a>&amp;<b> Threshold</b></dt></dl><h3 id="DAA03D877962CB54"><pre class="p-0 hdoc-pre-parent"><a class="hdoc-permalink-icon" href="#DAA03D877962CB54">¶</a><code class="hdoc-function-code language-cpp">void getDissentingNeighbors(
    <a href="rB52FF86BBB1F5C06.html">SparseSet</a>&lt;unsigned int&gt;&amp; List,
    const <a href="r5855B926ECA8C00D.html">llvm::SpillPlacement::Node</a>* nodes) const</code></pre></h3><p>Declared at: <a class="is-family-code" href="https://github.com/llvm/llvm-project/blob/release/10.x/llvm/lib/CodeGen/SpillPlacement.cpp#L185">llvm/lib/CodeGen/SpillPlacement.cpp:185</a></p><h4>Parameters</h4><dl><dt class="is-family-code"><a href="rB52FF86BBB1F5C06.html">SparseSet</a>&lt;unsigned int&gt;&amp;<b> List</b></dt><dt class="is-family-code">const <a href="r5855B926ECA8C00D.html">llvm::SpillPlacement::Node</a>*<b> nodes</b></dt></dl><h3 id="8143ABA53B8A74D3"><pre class="p-0 hdoc-pre-parent"><a class="hdoc-permalink-icon" href="#8143ABA53B8A74D3">¶</a><code class="hdoc-function-code language-cpp">bool mustSpill() const</code></pre></h3><h4>Description</h4><p>mustSpill - Return True if this node is so biased that it must spill.</p><p>Declared at: <a class="is-family-code" href="https://github.com/llvm/llvm-project/blob/release/10.x/llvm/lib/CodeGen/SpillPlacement.cpp#L107">llvm/lib/CodeGen/SpillPlacement.cpp:107</a></p><h3 id="A49181E53E027A1B"><pre class="p-0 hdoc-pre-parent"><a class="hdoc-permalink-icon" href="#A49181E53E027A1B">¶</a><code class="hdoc-function-code language-cpp">bool preferReg() const</code></pre></h3><h4>Description</h4><p>preferReg - Return true when this node prefers to be in a register.</p><p>Declared at: <a class="is-family-code" href="https://github.com/llvm/llvm-project/blob/release/10.x/llvm/lib/CodeGen/SpillPlacement.cpp#L101">llvm/lib/CodeGen/SpillPlacement.cpp:101</a></p><h3 id="989FC1C8D3EF5F08"><pre class="p-0 hdoc-pre-parent"><a class="hdoc-permalink-icon" href="#989FC1C8D3EF5F08">¶</a><code class="hdoc-function-code language-cpp">bool update(
    const <a href="r5855B926ECA8C00D.html">llvm::SpillPlacement::Node</a>* nodes,
    const <a href="r3ACAB4A05CBBBA84.html">llvm::BlockFrequency</a>&amp; Threshold)</code></pre></h3><h4>Description</h4><p>update - Recompute Value from Bias and Links. Return true when node preference changes.</p><p>Declared at: <a class="is-family-code" href="https://github.com/llvm/llvm-project/blob/release/10.x/llvm/lib/CodeGen/SpillPlacement.cpp#L156">llvm/lib/CodeGen/SpillPlacement.cpp:156</a></p><h4>Parameters</h4><dl><dt class="is-family-code">const <a href="r5855B926ECA8C00D.html">llvm::SpillPlacement::Node</a>*<b> nodes</b></dt><dt class="is-family-code">const <a href="r3ACAB4A05CBBBA84.html">llvm::BlockFrequency</a>&amp;<b> Threshold</b></dt></dl></main></div></div></div></section></div><footer class="footer"><p>Documentation for LLVM 10.0.0.</p><p>Generated by <a href="https://hdoc.io/">hdoc</a> version 1.4.0-hdocInternal on 2022-12-14T09:44:14 UTC.</p><p class="has-text-grey-light">19AD43E11B2996</p></footer></body></html>